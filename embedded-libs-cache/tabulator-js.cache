{
  "name": "tabulator-js",
  "url": "https://unpkg.com/tabulator-tables@5.5.0/dist/js/tabulator.min.js",
  "localPath": "/embedded-libs/tabulator/js/tabulator.min.js",
  "mimeType": "text/javascript",
  "base64": "LyogVGFidWxhdG9yIHY1LjUuMCAoYykgT2xpdmVyIEZvbGtlcmQgMjAyMyAqLwohZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTooZT0idW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczplfHxzZWxmKS5UYWJ1bGF0b3I9dCgpfSh0aGlzLChmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtjbGFzcyBle2NvbnN0cnVjdG9yKGUpe3RoaXMudGFibGU9ZX1yZWxvYWREYXRhKGUsdCxpKXtyZXR1cm4gdGhpcy50YWJsZS5kYXRhTG9hZGVyLmxvYWQoZSx2b2lkIDAsdm9pZCAwLHZvaWQgMCx0LGkpfWxhbmdUZXh0KCl7cmV0dXJuIHRoaXMudGFibGUubW9kdWxlcy5sb2NhbGl6ZS5nZXRUZXh0KC4uLmFyZ3VtZW50cyl9bGFuZ0JpbmQoKXtyZXR1cm4gdGhpcy50YWJsZS5tb2R1bGVzLmxvY2FsaXplLmJpbmQoLi4uYXJndW1lbnRzKX1sYW5nTG9jYWxlKCl7cmV0dXJuIHRoaXMudGFibGUubW9kdWxlcy5sb2NhbGl6ZS5nZXRMb2NhbGUoLi4uYXJndW1lbnRzKX1jb21tc0Nvbm5lY3Rpb25zKCl7cmV0dXJuIHRoaXMudGFibGUubW9kdWxlcy5jb21tcy5nZXRDb25uZWN0aW9ucyguLi5hcmd1bWVudHMpfWNvbW1zU2VuZCgpe3JldHVybiB0aGlzLnRhYmxlLm1vZHVsZXMuY29tbXMuc2VuZCguLi5hcmd1bWVudHMpfWxheW91dE1vZGUoKXtyZXR1cm4gdGhpcy50YWJsZS5tb2R1bGVzLmxheW91dC5nZXRNb2RlKCl9bGF5b3V0UmVmcmVzaChlKXtyZXR1cm4gdGhpcy50YWJsZS5tb2R1bGVzLmxheW91dC5sYXlvdXQoZSl9c3Vic2NyaWJlKCl7cmV0dXJuIHRoaXMudGFibGUuZXZlbnRCdXMuc3Vic2NyaWJlKC4uLmFyZ3VtZW50cyl9dW5zdWJzY3JpYmUoKXtyZXR1cm4gdGhpcy50YWJsZS5ldmVudEJ1cy51bnN1YnNjcmliZSguLi5hcmd1bWVudHMpfXN1YnNjcmliZWQoZSl7cmV0dXJuIHRoaXMudGFibGUuZXZlbnRCdXMuc3Vic2NyaWJlZChlKX1zdWJzY3JpcHRpb25DaGFuZ2UoKXtyZXR1cm4gdGhpcy50YWJsZS5ldmVudEJ1cy5zdWJzY3JpcHRpb25DaGFuZ2UoLi4uYXJndW1lbnRzKX1kaXNwYXRjaCgpe3JldHVybiB0aGlzLnRhYmxlLmV2ZW50QnVzLmRpc3BhdGNoKC4uLmFyZ3VtZW50cyl9Y2hhaW4oKXtyZXR1cm4gdGhpcy50YWJsZS5ldmVudEJ1cy5jaGFpbiguLi5hcmd1bWVudHMpfWNvbmZpcm0oKXtyZXR1cm4gdGhpcy50YWJsZS5ldmVudEJ1cy5jb25maXJtKC4uLmFyZ3VtZW50cyl9ZGlzcGF0Y2hFeHRlcm5hbCgpe3JldHVybiB0aGlzLnRhYmxlLmV4dGVybmFsRXZlbnRzLmRpc3BhdGNoKC4uLmFyZ3VtZW50cyl9c3Vic2NyaWJlZEV4dGVybmFsKGUpe3JldHVybiB0aGlzLnRhYmxlLmV4dGVybmFsRXZlbnRzLnN1YnNjcmliZWQoZSl9c3Vic2NyaXB0aW9uQ2hhbmdlRXh0ZXJuYWwoKXtyZXR1cm4gdGhpcy50YWJsZS5leHRlcm5hbEV2ZW50cy5zdWJzY3JpcHRpb25DaGFuZ2UoLi4uYXJndW1lbnRzKX1vcHRpb25zKGUpe3JldHVybiB0aGlzLnRhYmxlLm9wdGlvbnNbZV19c2V0T3B0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMCE9PXQmJih0aGlzLnRhYmxlLm9wdGlvbnNbZV09dCksdGhpcy50YWJsZS5vcHRpb25zW2VdfWRlcHJlY2F0aW9uQ2hlY2soZSx0KXtyZXR1cm4gdGhpcy50YWJsZS5kZXByZWNhdGlvbkFkdmlzb3IuY2hlY2soZSx0KX1kZXByZWNhdGlvbkNoZWNrTXNnKGUsdCl7cmV0dXJuIHRoaXMudGFibGUuZGVwcmVjYXRpb25BZHZpc29yLmNoZWNrTXNnKGUsdCl9ZGVwcmVjYXRpb25Nc2coZSl7cmV0dXJuIHRoaXMudGFibGUuZGVwcmVjYXRpb25BZHZpc29yLm1zZyhlKX1tb2R1bGUoZSl7cmV0dXJuIHRoaXMudGFibGUubW9kdWxlKGUpfX1jbGFzcyB0e2NvbnN0cnVjdG9yKGUpe3JldHVybiB0aGlzLl9jb2x1bW49ZSx0aGlzLnR5cGU9IkNvbHVtbkNvbXBvbmVudCIsbmV3IFByb3h5KHRoaXMse2dldDpmdW5jdGlvbihlLHQsaSl7cmV0dXJuIHZvaWQgMCE9PWVbdF0/ZVt0XTplLl9jb2x1bW4udGFibGUuY29tcG9uZW50RnVuY3Rpb25CaW5kZXIuaGFuZGxlKCJjb2x1bW4iLGUuX2NvbHVtbix0KX19KX1nZXRFbGVtZW50KCl7cmV0dXJuIHRoaXMuX2NvbHVtbi5nZXRFbGVtZW50KCl9Z2V0RGVmaW5pdGlvbigpe3JldHVybiB0aGlzLl9jb2x1bW4uZ2V0RGVmaW5pdGlvbigpfWdldEZpZWxkKCl7cmV0dXJuIHRoaXMuX2NvbHVtbi5nZXRGaWVsZCgpfWdldFRpdGxlRG93bmxvYWQoKXtyZXR1cm4gdGhpcy5fY29sdW1uLmdldFRpdGxlRG93bmxvYWQoKX1nZXRDZWxscygpe3ZhciBlPVtdO3JldHVybiB0aGlzLl9jb2x1bW4uY2VsbHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5wdXNoKHQuZ2V0Q29tcG9uZW50KCkpfSkpLGV9aXNWaXNpYmxlKCl7cmV0dXJuIHRoaXMuX2NvbHVtbi52aXNpYmxlfXNob3coKXt0aGlzLl9jb2x1bW4uaXNHcm91cD90aGlzLl9jb2x1bW4uY29sdW1ucy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnNob3coKX0pKTp0aGlzLl9jb2x1bW4uc2hvdygpfWhpZGUoKXt0aGlzLl9jb2x1bW4uaXNHcm91cD90aGlzLl9jb2x1bW4uY29sdW1ucy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmhpZGUoKX0pKTp0aGlzLl9jb2x1bW4uaGlkZSgpfXRvZ2dsZSgpe3RoaXMuX2NvbHVtbi52aXNpYmxlP3RoaXMuaGlkZSgpOnRoaXMuc2hvdygpfWRlbGV0ZSgpe3JldHVybiB0aGlzLl9jb2x1bW4uZGVsZXRlKCl9Z2V0U3ViQ29sdW1ucygpe3ZhciBlPVtdO3JldHVybiB0aGlzLl9jb2x1bW4uY29sdW1ucy5sZW5ndGgmJnRoaXMuX2NvbHVtbi5jb2x1bW5zLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UucHVzaCh0LmdldENvbXBvbmVudCgpKX0pKSxlfWdldFBhcmVudENvbHVtbigpe3JldHVybiB0aGlzLl9jb2x1bW4ucGFyZW50IGluc3RhbmNlb2YgbiYmdGhpcy5fY29sdW1uLnBhcmVudC5nZXRDb21wb25lbnQoKX1fZ2V0U2VsZigpe3JldHVybiB0aGlzLl9jb2x1bW59c2Nyb2xsVG8oZSx0KXtyZXR1cm4gdGhpcy5fY29sdW1uLnRhYmxlLmNvbHVtbk1hbmFnZXIuc2Nyb2xsVG9Db2x1bW4odGhpcy5fY29sdW1uLGUsdCl9Z2V0VGFibGUoKXtyZXR1cm4gdGhpcy5fY29sdW1uLnRhYmxlfW1vdmUoZSx0KXt2YXIgaT10aGlzLl9jb2x1bW4udGFibGUuY29sdW1uTWFuYWdlci5maW5kQ29sdW1uKGUpO2k/dGhpcy5fY29sdW1uLnRhYmxlLmNvbHVtbk1hbmFnZXIubW92ZUNvbHVtbih0aGlzLl9jb2x1bW4saSx0KTpjb25zb2xlLndhcm4oIk1vdmUgRXJyb3IgLSBObyBtYXRjaGluZyBjb2x1bW4gZm91bmQ6IixpKX1nZXROZXh0Q29sdW1uKCl7dmFyIGU9dGhpcy5fY29sdW1uLm5leHRDb2x1bW4oKTtyZXR1cm4hIWUmJmUuZ2V0Q29tcG9uZW50KCl9Z2V0UHJldkNvbHVtbigpe3ZhciBlPXRoaXMuX2NvbHVtbi5wcmV2Q29sdW1uKCk7cmV0dXJuISFlJiZlLmdldENvbXBvbmVudCgpfXVwZGF0ZURlZmluaXRpb24oZSl7cmV0dXJuIHRoaXMuX2NvbHVtbi51cGRhdGVEZWZpbml0aW9uKGUpfWdldFdpZHRoKCl7cmV0dXJuIHRoaXMuX2NvbHVtbi5nZXRXaWR0aCgpfXNldFdpZHRoKGUpe3ZhciB0O3JldHVybiB0PSEwPT09ZT90aGlzLl9jb2x1bW4ucmVpbml0aWFsaXplV2lkdGgoITApOnRoaXMuX2NvbHVtbi5zZXRXaWR0aChlKSx0aGlzLl9jb2x1bW4udGFibGUuY29sdW1uTWFuYWdlci5yZXJlbmRlckNvbHVtbnMoITApLHR9fXZhciBpPXt0aXRsZTp2b2lkIDAsZmllbGQ6dm9pZCAwLGNvbHVtbnM6dm9pZCAwLHZpc2libGU6dm9pZCAwLGhvekFsaWduOnZvaWQgMCx2ZXJ0QWxpZ246dm9pZCAwLHdpZHRoOnZvaWQgMCxtaW5XaWR0aDo0MCxtYXhXaWR0aDp2b2lkIDAsbWF4SW5pdGlhbFdpZHRoOnZvaWQgMCxjc3NDbGFzczp2b2lkIDAsdmFyaWFibGVIZWlnaHQ6dm9pZCAwLGhlYWRlclZlcnRpY2FsOnZvaWQgMCxoZWFkZXJIb3pBbGlnbjp2b2lkIDAsaGVhZGVyV29yZFdyYXA6ITEsZWRpdGFibGVUaXRsZTp2b2lkIDB9O2NsYXNzIHN7Y29uc3RydWN0b3IoZSl7cmV0dXJuIHRoaXMuX2NlbGw9ZSxuZXcgUHJveHkodGhpcyx7Z2V0OmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gdm9pZCAwIT09ZVt0XT9lW3RdOmUuX2NlbGwudGFibGUuY29tcG9uZW50RnVuY3Rpb25CaW5kZXIuaGFuZGxlKCJjZWxsIixlLl9jZWxsLHQpfX0pfWdldFZhbHVlKCl7cmV0dXJuIHRoaXMuX2NlbGwuZ2V0VmFsdWUoKX1nZXRPbGRWYWx1ZSgpe3JldHVybiB0aGlzLl9jZWxsLmdldE9sZFZhbHVlKCl9Z2V0SW5pdGlhbFZhbHVlKCl7cmV0dXJuIHRoaXMuX2NlbGwuaW5pdGlhbFZhbHVlfWdldEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fY2VsbC5nZXRFbGVtZW50KCl9Z2V0Um93KCl7cmV0dXJuIHRoaXMuX2NlbGwucm93LmdldENvbXBvbmVudCgpfWdldERhdGEoZSl7cmV0dXJuIHRoaXMuX2NlbGwucm93LmdldERhdGEoZSl9Z2V0VHlwZSgpe3JldHVybiJjZWxsIn1nZXRGaWVsZCgpe3JldHVybiB0aGlzLl9jZWxsLmNvbHVtbi5nZXRGaWVsZCgpfWdldENvbHVtbigpe3JldHVybiB0aGlzLl9jZWxsLmNvbHVtbi5nZXRDb21wb25lbnQoKX1zZXRWYWx1ZShlLHQpe3ZvaWQgMD09PXQmJih0PSEwKSx0aGlzLl9jZWxsLnNldFZhbHVlKGUsdCl9cmVzdG9yZU9sZFZhbHVlKCl7dGhpcy5fY2VsbC5zZXRWYWx1ZUFjdHVhbCh0aGlzLl9jZWxsLmdldE9sZFZhbHVlKCkpfXJlc3RvcmVJbml0aWFsVmFsdWUoKXt0aGlzLl9jZWxsLnNldFZhbHVlQWN0dWFsKHRoaXMuX2NlbGwuaW5pdGlhbFZhbHVlKX1jaGVja0hlaWdodCgpe3RoaXMuX2NlbGwuY2hlY2tIZWlnaHQoKX1nZXRUYWJsZSgpe3JldHVybiB0aGlzLl9jZWxsLnRhYmxlfV9nZXRTZWxmKCl7cmV0dXJuIHRoaXMuX2NlbGx9fWNsYXNzIG8gZXh0ZW5kcyBle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZS50YWJsZSksdGhpcy50YWJsZT1lLnRhYmxlLHRoaXMuY29sdW1uPWUsdGhpcy5yb3c9dCx0aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLnZhbHVlPW51bGwsdGhpcy5pbml0aWFsVmFsdWUsdGhpcy5vbGRWYWx1ZT1udWxsLHRoaXMubW9kdWxlcz17fSx0aGlzLmhlaWdodD1udWxsLHRoaXMud2lkdGg9bnVsbCx0aGlzLm1pbldpZHRoPW51bGwsdGhpcy5jb21wb25lbnQ9bnVsbCx0aGlzLmxvYWRlZD0hMSx0aGlzLmJ1aWxkKCl9YnVpbGQoKXt0aGlzLmdlbmVyYXRlRWxlbWVudCgpLHRoaXMuc2V0V2lkdGgoKSx0aGlzLl9jb25maWd1cmVDZWxsKCksdGhpcy5zZXRWYWx1ZUFjdHVhbCh0aGlzLmNvbHVtbi5nZXRGaWVsZFZhbHVlKHRoaXMucm93LmRhdGEpKSx0aGlzLmluaXRpYWxWYWx1ZT10aGlzLnZhbHVlfWdlbmVyYXRlRWxlbWVudCgpe3RoaXMuZWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLmVsZW1lbnQuY2xhc3NOYW1lPSJ0YWJ1bGF0b3ItY2VsbCIsdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgicm9sZSIsImdyaWRjZWxsIil9X2NvbmZpZ3VyZUNlbGwoKXt2YXIgZT10aGlzLmVsZW1lbnQsdD10aGlzLmNvbHVtbi5nZXRGaWVsZCgpOyhlLnN0eWxlLnRleHRBbGlnbj10aGlzLmNvbHVtbi5ob3pBbGlnbix0aGlzLmNvbHVtbi52ZXJ0QWxpZ24mJihlLnN0eWxlLmRpc3BsYXk9ImlubGluZS1mbGV4IixlLnN0eWxlLmFsaWduSXRlbXM9e3RvcDoiZmxleC1zdGFydCIsYm90dG9tOiJmbGV4LWVuZCIsbWlkZGxlOiJjZW50ZXIifVt0aGlzLmNvbHVtbi52ZXJ0QWxpZ25dfHwiIix0aGlzLmNvbHVtbi5ob3pBbGlnbiYmKGUuc3R5bGUuanVzdGlmeUNvbnRlbnQ9e2xlZnQ6ImZsZXgtc3RhcnQiLHJpZ2h0OiJmbGV4LWVuZCIsY2VudGVyOiJjZW50ZXIifVt0aGlzLmNvbHVtbi5ob3pBbGlnbl18fCIiKSksdCYmZS5zZXRBdHRyaWJ1dGUoInRhYnVsYXRvci1maWVsZCIsdCksdGhpcy5jb2x1bW4uZGVmaW5pdGlvbi5jc3NDbGFzcykmJnRoaXMuY29sdW1uLmRlZmluaXRpb24uY3NzQ2xhc3Muc3BsaXQoIiAiKS5mb3JFYWNoKCh0PT57ZS5jbGFzc0xpc3QuYWRkKHQpfSkpO3RoaXMuZGlzcGF0Y2goImNlbGwtaW5pdCIsdGhpcyksdGhpcy5jb2x1bW4udmlzaWJsZXx8dGhpcy5oaWRlKCl9X2dlbmVyYXRlQ29udGVudHMoKXt2YXIgZTtzd2l0Y2godHlwZW9mKGU9dGhpcy5jaGFpbigiY2VsbC1mb3JtYXQiLHRoaXMsbnVsbCwoKCk9PnRoaXMuZWxlbWVudC5pbm5lckhUTUw9dGhpcy52YWx1ZSkpKSl7Y2FzZSJvYmplY3QiOmlmKGUgaW5zdGFuY2VvZiBOb2RlKXtmb3IoO3RoaXMuZWxlbWVudC5maXJzdENoaWxkOyl0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpO3RoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlKX1lbHNlIHRoaXMuZWxlbWVudC5pbm5lckhUTUw9IiIsbnVsbCE9ZSYmY29uc29sZS53YXJuKCJGb3JtYXQgRXJyb3IgLSBGb3JtYXR0ZXIgaGFzIHJldHVybmVkIGEgdHlwZSBvZiBvYmplY3QsIHRoZSBvbmx5IHZhbGlkIGZvcm1hdHRlciBvYmplY3QgcmV0dXJuIGlzIGFuIGluc3RhbmNlIG9mIE5vZGUsIHRoZSBmb3JtYXR0ZXIgcmV0dXJuZWQ6IixlKTticmVhaztjYXNlInVuZGVmaW5lZCI6dGhpcy5lbGVtZW50LmlubmVySFRNTD0iIjticmVhaztkZWZhdWx0OnRoaXMuZWxlbWVudC5pbm5lckhUTUw9ZX19Y2VsbFJlbmRlcmVkKCl7dGhpcy5kaXNwYXRjaCgiY2VsbC1yZW5kZXJlZCIsdGhpcyl9Z2V0RWxlbWVudChlKXtyZXR1cm4gdGhpcy5sb2FkZWR8fCh0aGlzLmxvYWRlZD0hMCxlfHx0aGlzLmxheW91dEVsZW1lbnQoKSksdGhpcy5lbGVtZW50fWdldFZhbHVlKCl7cmV0dXJuIHRoaXMudmFsdWV9Z2V0T2xkVmFsdWUoKXtyZXR1cm4gdGhpcy5vbGRWYWx1ZX1zZXRWYWx1ZShlLHQsaSl7dGhpcy5zZXRWYWx1ZVByb2Nlc3NEYXRhKGUsdCxpKSYmKHRoaXMuZGlzcGF0Y2goImNlbGwtdmFsdWUtdXBkYXRlZCIsdGhpcyksdGhpcy5jZWxsUmVuZGVyZWQoKSx0aGlzLmNvbHVtbi5kZWZpbml0aW9uLmNlbGxFZGl0ZWQmJnRoaXMuY29sdW1uLmRlZmluaXRpb24uY2VsbEVkaXRlZC5jYWxsKHRoaXMudGFibGUsdGhpcy5nZXRDb21wb25lbnQoKSksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJjZWxsRWRpdGVkIix0aGlzLmdldENvbXBvbmVudCgpKSx0aGlzLnN1YnNjcmliZWRFeHRlcm5hbCgiZGF0YUNoYW5nZWQiKSYmdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJkYXRhQ2hhbmdlZCIsdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldERhdGEoKSkpfXNldFZhbHVlUHJvY2Vzc0RhdGEoZSx0LGkpe3ZhciBzPSExO3JldHVybih0aGlzLnZhbHVlIT09ZXx8aSkmJihzPSEwLHQmJihlPXRoaXMuY2hhaW4oImNlbGwtdmFsdWUtY2hhbmdpbmciLFt0aGlzLGVdLG51bGwsZSkpKSx0aGlzLnNldFZhbHVlQWN0dWFsKGUpLHMmJnRoaXMuZGlzcGF0Y2goImNlbGwtdmFsdWUtY2hhbmdlZCIsdGhpcyksc31zZXRWYWx1ZUFjdHVhbChlKXt0aGlzLm9sZFZhbHVlPXRoaXMudmFsdWUsdGhpcy52YWx1ZT1lLHRoaXMuZGlzcGF0Y2goImNlbGwtdmFsdWUtc2F2ZS1iZWZvcmUiLHRoaXMpLHRoaXMuY29sdW1uLnNldEZpZWxkVmFsdWUodGhpcy5yb3cuZGF0YSxlKSx0aGlzLmRpc3BhdGNoKCJjZWxsLXZhbHVlLXNhdmUtYWZ0ZXIiLHRoaXMpLHRoaXMubG9hZGVkJiZ0aGlzLmxheW91dEVsZW1lbnQoKX1sYXlvdXRFbGVtZW50KCl7dGhpcy5fZ2VuZXJhdGVDb250ZW50cygpLHRoaXMuZGlzcGF0Y2goImNlbGwtbGF5b3V0Iix0aGlzKX1zZXRXaWR0aCgpe3RoaXMud2lkdGg9dGhpcy5jb2x1bW4ud2lkdGgsdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoPXRoaXMuY29sdW1uLndpZHRoU3R5bGVkfWNsZWFyV2lkdGgoKXt0aGlzLndpZHRoPSIiLHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aD0iIn1nZXRXaWR0aCgpe3JldHVybiB0aGlzLndpZHRofHx0aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGh9c2V0TWluV2lkdGgoKXt0aGlzLm1pbldpZHRoPXRoaXMuY29sdW1uLm1pbldpZHRoLHRoaXMuZWxlbWVudC5zdHlsZS5taW5XaWR0aD10aGlzLmNvbHVtbi5taW5XaWR0aFN0eWxlZH1zZXRNYXhXaWR0aCgpe3RoaXMubWF4V2lkdGg9dGhpcy5jb2x1bW4ubWF4V2lkdGgsdGhpcy5lbGVtZW50LnN0eWxlLm1heFdpZHRoPXRoaXMuY29sdW1uLm1heFdpZHRoU3R5bGVkfWNoZWNrSGVpZ2h0KCl7dGhpcy5yb3cucmVpbml0aWFsaXplSGVpZ2h0KCl9Y2xlYXJIZWlnaHQoKXt0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0PSIiLHRoaXMuaGVpZ2h0PW51bGwsdGhpcy5kaXNwYXRjaCgiY2VsbC1oZWlnaHQiLHRoaXMsIiIpfXNldEhlaWdodCgpe3RoaXMuaGVpZ2h0PXRoaXMucm93LmhlaWdodCx0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0PXRoaXMucm93LmhlaWdodFN0eWxlZCx0aGlzLmRpc3BhdGNoKCJjZWxsLWhlaWdodCIsdGhpcyx0aGlzLnJvdy5oZWlnaHRTdHlsZWQpfWdldEhlaWdodCgpe3JldHVybiB0aGlzLmhlaWdodHx8dGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodH1zaG93KCl7dGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk9dGhpcy5jb2x1bW4udmVydEFsaWduPyJpbmxpbmUtZmxleCI6IiJ9aGlkZSgpe3RoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PSJub25lIn1kZWxldGUoKXt0aGlzLmRpc3BhdGNoKCJjZWxsLWRlbGV0ZSIsdGhpcyksIXRoaXMudGFibGUucm93TWFuYWdlci5yZWRyYXdCbG9jayYmdGhpcy5lbGVtZW50LnBhcmVudE5vZGUmJnRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5lbGVtZW50PSExLHRoaXMuY29sdW1uLmRlbGV0ZUNlbGwodGhpcyksdGhpcy5yb3cuZGVsZXRlQ2VsbCh0aGlzKSx0aGlzLmNhbGNzPXt9fWdldEluZGV4KCl7cmV0dXJuIHRoaXMucm93LmdldENlbGxJbmRleCh0aGlzKX1nZXRDb21wb25lbnQoKXtyZXR1cm4gdGhpcy5jb21wb25lbnR8fCh0aGlzLmNvbXBvbmVudD1uZXcgcyh0aGlzKSksdGhpcy5jb21wb25lbnR9fWNsYXNzIG4gZXh0ZW5kcyBle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIodC50YWJsZSksdGhpcy5kZWZpbml0aW9uPWUsdGhpcy5wYXJlbnQ9dCx0aGlzLnR5cGU9ImNvbHVtbiIsdGhpcy5jb2x1bW5zPVtdLHRoaXMuY2VsbHM9W10sdGhpcy5lbGVtZW50PXRoaXMuY3JlYXRlRWxlbWVudCgpLHRoaXMuY29udGVudEVsZW1lbnQ9ITEsdGhpcy50aXRsZUhvbGRlckVsZW1lbnQ9ITEsdGhpcy50aXRsZUVsZW1lbnQ9ITEsdGhpcy5ncm91cEVsZW1lbnQ9dGhpcy5jcmVhdGVHcm91cEVsZW1lbnQoKSx0aGlzLmlzR3JvdXA9ITEsdGhpcy5ob3pBbGlnbj0iIix0aGlzLnZlcnRBbGlnbj0iIix0aGlzLmZpZWxkPSIiLHRoaXMuZmllbGRTdHJ1Y3R1cmU9IiIsdGhpcy5nZXRGaWVsZFZhbHVlPSIiLHRoaXMuc2V0RmllbGRWYWx1ZT0iIix0aGlzLnRpdGxlRG93bmxvYWQ9bnVsbCx0aGlzLnRpdGxlRm9ybWF0dGVyUmVuZGVyZWQ9ITEsdGhpcy5tYXBEZWZpbml0aW9ucygpLHRoaXMuc2V0RmllbGQodGhpcy5kZWZpbml0aW9uLmZpZWxkKSx0aGlzLm1vZHVsZXM9e30sdGhpcy53aWR0aD1udWxsLHRoaXMud2lkdGhTdHlsZWQ9IiIsdGhpcy5tYXhXaWR0aD1udWxsLHRoaXMubWF4V2lkdGhTdHlsZWQ9IiIsdGhpcy5tYXhJbml0aWFsV2lkdGg9bnVsbCx0aGlzLm1pbldpZHRoPW51bGwsdGhpcy5taW5XaWR0aFN0eWxlZD0iIix0aGlzLndpZHRoRml4ZWQ9ITEsdGhpcy52aXNpYmxlPSEwLHRoaXMuY29tcG9uZW50PW51bGwsdGhpcy5kZWZpbml0aW9uLmNvbHVtbnM/KHRoaXMuaXNHcm91cD0hMCx0aGlzLmRlZmluaXRpb24uY29sdW1ucy5mb3JFYWNoKCgoZSx0KT0+e3ZhciBpPW5ldyBuKGUsdGhpcyk7dGhpcy5hdHRhY2hDb2x1bW4oaSl9KSksdGhpcy5jaGVja0NvbHVtblZpc2liaWxpdHkoKSk6dC5yZWdpc3RlckNvbHVtbkZpZWxkKHRoaXMpLHRoaXMuX2luaXRpYWxpemUoKX1jcmVhdGVFbGVtZW50KCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7c3dpdGNoKGUuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWNvbCIpLGUuc2V0QXR0cmlidXRlKCJyb2xlIiwiY29sdW1uaGVhZGVyIiksZS5zZXRBdHRyaWJ1dGUoImFyaWEtc29ydCIsIm5vbmUiKSx0aGlzLnRhYmxlLm9wdGlvbnMuY29sdW1uSGVhZGVyVmVydEFsaWduKXtjYXNlIm1pZGRsZSI6ZS5zdHlsZS5qdXN0aWZ5Q29udGVudD0iY2VudGVyIjticmVhaztjYXNlImJvdHRvbSI6ZS5zdHlsZS5qdXN0aWZ5Q29udGVudD0iZmxleC1lbmQifXJldHVybiBlfWNyZWF0ZUdyb3VwRWxlbWVudCgpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBlLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1jb2wtZ3JvdXAtY29scyIpLGV9bWFwRGVmaW5pdGlvbnMoKXt2YXIgZT10aGlzLnRhYmxlLm9wdGlvbnMuY29sdW1uRGVmYXVsdHM7aWYoZSlmb3IobGV0IHQgaW4gZSl2b2lkIDA9PT10aGlzLmRlZmluaXRpb25bdF0mJih0aGlzLmRlZmluaXRpb25bdF09ZVt0XSk7dGhpcy5kZWZpbml0aW9uPXRoaXMudGFibGUuY29sdW1uTWFuYWdlci5vcHRpb25zTGlzdC5nZW5lcmF0ZShuLmRlZmF1bHRPcHRpb25MaXN0LHRoaXMuZGVmaW5pdGlvbil9Y2hlY2tEZWZpbml0aW9uKCl7T2JqZWN0LmtleXModGhpcy5kZWZpbml0aW9uKS5mb3JFYWNoKChlPT57LTE9PT1uLmRlZmF1bHRPcHRpb25MaXN0LmluZGV4T2YoZSkmJmNvbnNvbGUud2FybigiSW52YWxpZCBjb2x1bW4gZGVmaW5pdGlvbiBvcHRpb24gaW4gJyIrKHRoaXMuZmllbGR8fHRoaXMuZGVmaW5pdGlvbi50aXRsZSkrIicgY29sdW1uOiIsZSl9KSl9c2V0RmllbGQoZSl7dGhpcy5maWVsZD1lLHRoaXMuZmllbGRTdHJ1Y3R1cmU9ZT90aGlzLnRhYmxlLm9wdGlvbnMubmVzdGVkRmllbGRTZXBhcmF0b3I/ZS5zcGxpdCh0aGlzLnRhYmxlLm9wdGlvbnMubmVzdGVkRmllbGRTZXBhcmF0b3IpOltlXTpbXSx0aGlzLmdldEZpZWxkVmFsdWU9dGhpcy5maWVsZFN0cnVjdHVyZS5sZW5ndGg+MT90aGlzLl9nZXROZXN0ZWREYXRhOnRoaXMuX2dldEZsYXREYXRhLHRoaXMuc2V0RmllbGRWYWx1ZT10aGlzLmZpZWxkU3RydWN0dXJlLmxlbmd0aD4xP3RoaXMuX3NldE5lc3RlZERhdGE6dGhpcy5fc2V0RmxhdERhdGF9cmVnaXN0ZXJDb2x1bW5Qb3NpdGlvbihlKXt0aGlzLnBhcmVudC5yZWdpc3RlckNvbHVtblBvc2l0aW9uKGUpfXJlZ2lzdGVyQ29sdW1uRmllbGQoZSl7dGhpcy5wYXJlbnQucmVnaXN0ZXJDb2x1bW5GaWVsZChlKX1yZVJlZ2lzdGVyUG9zaXRpb24oKXt0aGlzLmlzR3JvdXA/dGhpcy5jb2x1bW5zLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UucmVSZWdpc3RlclBvc2l0aW9uKCl9KSk6dGhpcy5yZWdpc3RlckNvbHVtblBvc2l0aW9uKHRoaXMpfV9pbml0aWFsaXplKCl7Zm9yKHZhciBlPXRoaXMuZGVmaW5pdGlvbjt0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZDspdGhpcy5lbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudC5maXJzdENoaWxkKTtlLmhlYWRlclZlcnRpY2FsJiYodGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1jb2wtdmVydGljYWwiKSwiZmxpcCI9PT1lLmhlYWRlclZlcnRpY2FsJiZ0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWNvbC12ZXJ0aWNhbC1mbGlwIikpLHRoaXMuY29udGVudEVsZW1lbnQ9dGhpcy5fYnVpbGRDb2x1bW5IZWFkZXJDb250ZW50KCksdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGVudEVsZW1lbnQpLHRoaXMuaXNHcm91cD90aGlzLl9idWlsZEdyb3VwSGVhZGVyKCk6dGhpcy5fYnVpbGRDb2x1bW5IZWFkZXIoKSx0aGlzLmRpc3BhdGNoKCJjb2x1bW4taW5pdCIsdGhpcyl9X2J1aWxkQ29sdW1uSGVhZGVyKCl7dmFyIGU9dGhpcy5kZWZpbml0aW9uOyh0aGlzLmRpc3BhdGNoKCJjb2x1bW4tbGF5b3V0Iix0aGlzKSx2b2lkIDAhPT1lLnZpc2libGUmJihlLnZpc2libGU/dGhpcy5zaG93KCEwKTp0aGlzLmhpZGUoITApKSxlLmNzc0NsYXNzKSYmZS5jc3NDbGFzcy5zcGxpdCgiICIpLmZvckVhY2goKGU9Pnt0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChlKX0pKTtlLmZpZWxkJiZ0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCJ0YWJ1bGF0b3ItZmllbGQiLGUuZmllbGQpLHRoaXMuc2V0TWluV2lkdGgocGFyc2VJbnQoZS5taW5XaWR0aCkpLGUubWF4SW5pdGlhbFdpZHRoJiYodGhpcy5tYXhJbml0aWFsV2lkdGg9cGFyc2VJbnQoZS5tYXhJbml0aWFsV2lkdGgpKSxlLm1heFdpZHRoJiZ0aGlzLnNldE1heFdpZHRoKHBhcnNlSW50KGUubWF4V2lkdGgpKSx0aGlzLnJlaW5pdGlhbGl6ZVdpZHRoKCksdGhpcy5ob3pBbGlnbj10aGlzLmRlZmluaXRpb24uaG96QWxpZ24sdGhpcy52ZXJ0QWxpZ249dGhpcy5kZWZpbml0aW9uLnZlcnRBbGlnbix0aGlzLnRpdGxlRWxlbWVudC5zdHlsZS50ZXh0QWxpZ249dGhpcy5kZWZpbml0aW9uLmhlYWRlckhvekFsaWdufV9idWlsZENvbHVtbkhlYWRlckNvbnRlbnQoKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItY29sLWNvbnRlbnQiKSx0aGlzLnRpdGxlSG9sZGVyRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLnRpdGxlSG9sZGVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItY29sLXRpdGxlLWhvbGRlciIpLGUuYXBwZW5kQ2hpbGQodGhpcy50aXRsZUhvbGRlckVsZW1lbnQpLHRoaXMudGl0bGVFbGVtZW50PXRoaXMuX2J1aWxkQ29sdW1uSGVhZGVyVGl0bGUoKSx0aGlzLnRpdGxlSG9sZGVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnRpdGxlRWxlbWVudCksZX1fYnVpbGRDb2x1bW5IZWFkZXJUaXRsZSgpe3ZhciBlPXRoaXMuZGVmaW5pdGlvbix0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKHQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWNvbC10aXRsZSIpLGUuaGVhZGVyV29yZFdyYXAmJnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWNvbC10aXRsZS13cmFwIiksZS5lZGl0YWJsZVRpdGxlKXt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2kuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXRpdGxlLWVkaXRvciIpLGkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLChlPT57ZS5zdG9wUHJvcGFnYXRpb24oKSxpLmZvY3VzKCl9KSksaS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCgoKT0+e2UudGl0bGU9aS52YWx1ZSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoImNvbHVtblRpdGxlQ2hhbmdlZCIsdGhpcy5nZXRDb21wb25lbnQoKSl9KSksdC5hcHBlbmRDaGlsZChpKSxlLmZpZWxkP3RoaXMubGFuZ0JpbmQoImNvbHVtbnN8IitlLmZpZWxkLCh0PT57aS52YWx1ZT10fHxlLnRpdGxlfHwiJm5ic3A7In0pKTppLnZhbHVlPWUudGl0bGV8fCImbmJzcDsifWVsc2UgZS5maWVsZD90aGlzLmxhbmdCaW5kKCJjb2x1bW5zfCIrZS5maWVsZCwoaT0+e3RoaXMuX2Zvcm1hdENvbHVtbkhlYWRlclRpdGxlKHQsaXx8ZS50aXRsZXx8IiZuYnNwOyIpfSkpOnRoaXMuX2Zvcm1hdENvbHVtbkhlYWRlclRpdGxlKHQsZS50aXRsZXx8IiZuYnNwOyIpO3JldHVybiB0fV9mb3JtYXRDb2x1bW5IZWFkZXJUaXRsZShlLHQpe3ZhciBpPXRoaXMuY2hhaW4oImNvbHVtbi1mb3JtYXQiLFt0aGlzLHQsZV0sbnVsbCwoKCk9PnQpKTtzd2l0Y2godHlwZW9mIGkpe2Nhc2Uib2JqZWN0IjppIGluc3RhbmNlb2YgTm9kZT9lLmFwcGVuZENoaWxkKGkpOihlLmlubmVySFRNTD0iIixjb25zb2xlLndhcm4oIkZvcm1hdCBFcnJvciAtIFRpdGxlIGZvcm1hdHRlciBoYXMgcmV0dXJuZWQgYSB0eXBlIG9mIG9iamVjdCwgdGhlIG9ubHkgdmFsaWQgZm9ybWF0dGVyIG9iamVjdCByZXR1cm4gaXMgYW4gaW5zdGFuY2Ugb2YgTm9kZSwgdGhlIGZvcm1hdHRlciByZXR1cm5lZDoiLGkpKTticmVhaztjYXNlInVuZGVmaW5lZCI6ZS5pbm5lckhUTUw9IiI7YnJlYWs7ZGVmYXVsdDplLmlubmVySFRNTD1pfX1fYnVpbGRHcm91cEhlYWRlcigpeyh0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWNvbC1ncm91cCIpLHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoInJvbGUiLCJjb2x1bW5ncm91cCIpLHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoImFyaWEtdGl0bGUiLHRoaXMuZGVmaW5pdGlvbi50aXRsZSksdGhpcy5kZWZpbml0aW9uLmNzc0NsYXNzKSYmdGhpcy5kZWZpbml0aW9uLmNzc0NsYXNzLnNwbGl0KCIgIikuZm9yRWFjaCgoZT0+e3RoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKGUpfSkpO3RoaXMudGl0bGVFbGVtZW50LnN0eWxlLnRleHRBbGlnbj10aGlzLmRlZmluaXRpb24uaGVhZGVySG96QWxpZ24sdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZ3JvdXBFbGVtZW50KX1fZ2V0RmxhdERhdGEoZSl7cmV0dXJuIGVbdGhpcy5maWVsZF19X2dldE5lc3RlZERhdGEoZSl7dmFyIHQsaT1lLHM9dGhpcy5maWVsZFN0cnVjdHVyZSxvPXMubGVuZ3RoO2ZvcihsZXQgZT0wO2U8byYmKHQ9aT1pW3NbZV1dLGkpO2UrKyk7cmV0dXJuIHR9X3NldEZsYXREYXRhKGUsdCl7dGhpcy5maWVsZCYmKGVbdGhpcy5maWVsZF09dCl9X3NldE5lc3RlZERhdGEoZSx0KXt2YXIgaT1lLHM9dGhpcy5maWVsZFN0cnVjdHVyZSxvPXMubGVuZ3RoO2ZvcihsZXQgZT0wO2U8bztlKyspaWYoZT09by0xKWlbc1tlXV09dDtlbHNle2lmKCFpW3NbZV1dKXtpZih2b2lkIDA9PT10KWJyZWFrO2lbc1tlXV09e319aT1pW3NbZV1dfX1hdHRhY2hDb2x1bW4oZSl7dGhpcy5ncm91cEVsZW1lbnQ/KHRoaXMuY29sdW1ucy5wdXNoKGUpLHRoaXMuZ3JvdXBFbGVtZW50LmFwcGVuZENoaWxkKGUuZ2V0RWxlbWVudCgpKSxlLmNvbHVtblJlbmRlcmVkKCkpOmNvbnNvbGUud2FybigiQ29sdW1uIFdhcm5pbmcgLSBDb2x1bW4gYmVpbmcgYXR0YWNoZWQgdG8gYW5vdGhlciBjb2x1bW4gaW5zdGVhZCBvZiBjb2x1bW4gZ3JvdXAiKX12ZXJ0aWNhbEFsaWduKGUsdCl7dmFyIGk9dGhpcy5wYXJlbnQuaXNHcm91cD90aGlzLnBhcmVudC5nZXRHcm91cEVsZW1lbnQoKS5jbGllbnRIZWlnaHQ6dHx8dGhpcy5wYXJlbnQuZ2V0SGVhZGVyc0VsZW1lbnQoKS5jbGllbnRIZWlnaHQ7dGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodD1pKyJweCIsdGhpcy5kaXNwYXRjaCgiY29sdW1uLWhlaWdodCIsdGhpcyx0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0KSx0aGlzLmlzR3JvdXAmJih0aGlzLmdyb3VwRWxlbWVudC5zdHlsZS5taW5IZWlnaHQ9aS10aGlzLmNvbnRlbnRFbGVtZW50Lm9mZnNldEhlaWdodCsicHgiKSx0aGlzLmNvbHVtbnMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC52ZXJ0aWNhbEFsaWduKGUpfSkpfWNsZWFyVmVydGljYWxBbGlnbigpe3RoaXMuZWxlbWVudC5zdHlsZS5wYWRkaW5nVG9wPSIiLHRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQ9IiIsdGhpcy5lbGVtZW50LnN0eWxlLm1pbkhlaWdodD0iIix0aGlzLmdyb3VwRWxlbWVudC5zdHlsZS5taW5IZWlnaHQ9IiIsdGhpcy5jb2x1bW5zLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuY2xlYXJWZXJ0aWNhbEFsaWduKCl9KSksdGhpcy5kaXNwYXRjaCgiY29sdW1uLWhlaWdodCIsdGhpcywiIil9Z2V0RWxlbWVudCgpe3JldHVybiB0aGlzLmVsZW1lbnR9Z2V0R3JvdXBFbGVtZW50KCl7cmV0dXJuIHRoaXMuZ3JvdXBFbGVtZW50fWdldEZpZWxkKCl7cmV0dXJuIHRoaXMuZmllbGR9Z2V0VGl0bGVEb3dubG9hZCgpe3JldHVybiB0aGlzLnRpdGxlRG93bmxvYWR9Z2V0Rmlyc3RDb2x1bW4oKXtyZXR1cm4gdGhpcy5pc0dyb3VwPyEhdGhpcy5jb2x1bW5zLmxlbmd0aCYmdGhpcy5jb2x1bW5zWzBdLmdldEZpcnN0Q29sdW1uKCk6dGhpc31nZXRMYXN0Q29sdW1uKCl7cmV0dXJuIHRoaXMuaXNHcm91cD8hIXRoaXMuY29sdW1ucy5sZW5ndGgmJnRoaXMuY29sdW1uc1t0aGlzLmNvbHVtbnMubGVuZ3RoLTFdLmdldExhc3RDb2x1bW4oKTp0aGlzfWdldENvbHVtbnMoZSl7dmFyIHQ9W107cmV0dXJuIGU/dGhpcy5jb2x1bW5zLmZvckVhY2goKGU9Pnt0LnB1c2goZSksdD10LmNvbmNhdChlLmdldENvbHVtbnMoITApKX0pKTp0PXRoaXMuY29sdW1ucyx0fWdldENlbGxzKCl7cmV0dXJuIHRoaXMuY2VsbHN9Z2V0VG9wQ29sdW1uKCl7cmV0dXJuIHRoaXMucGFyZW50LmlzR3JvdXA/dGhpcy5wYXJlbnQuZ2V0VG9wQ29sdW1uKCk6dGhpc31nZXREZWZpbml0aW9uKGUpe3ZhciB0PVtdO3JldHVybiB0aGlzLmlzR3JvdXAmJmUmJih0aGlzLmNvbHVtbnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5wdXNoKGUuZ2V0RGVmaW5pdGlvbighMCkpfSkpLHRoaXMuZGVmaW5pdGlvbi5jb2x1bW5zPXQpLHRoaXMuZGVmaW5pdGlvbn1jaGVja0NvbHVtblZpc2liaWxpdHkoKXt2YXIgZT0hMTt0aGlzLmNvbHVtbnMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC52aXNpYmxlJiYoZT0hMCl9KSksZT8odGhpcy5zaG93KCksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJjb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCIsdGhpcy5nZXRDb21wb25lbnQoKSwhMSkpOnRoaXMuaGlkZSgpfXNob3coZSx0KXt0aGlzLnZpc2libGV8fCh0aGlzLnZpc2libGU9ITAsdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk9IiIsdGhpcy5wYXJlbnQuaXNHcm91cCYmdGhpcy5wYXJlbnQuY2hlY2tDb2x1bW5WaXNpYmlsaXR5KCksdGhpcy5jZWxscy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnNob3coKX0pKSx0aGlzLmlzR3JvdXB8fG51bGwhPT10aGlzLndpZHRofHx0aGlzLnJlaW5pdGlhbGl6ZVdpZHRoKCksdGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLnZlcnRpY2FsQWxpZ25IZWFkZXJzKCksdGhpcy5kaXNwYXRjaCgiY29sdW1uLXNob3ciLHRoaXMsdCksZXx8dGhpcy5kaXNwYXRjaEV4dGVybmFsKCJjb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCIsdGhpcy5nZXRDb21wb25lbnQoKSwhMCksdGhpcy5wYXJlbnQuaXNHcm91cCYmdGhpcy5wYXJlbnQubWF0Y2hDaGlsZFdpZHRocygpLHRoaXMuc2lsZW50fHx0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIucmVyZW5kZXJDb2x1bW5zKCkpfWhpZGUoZSx0KXt0aGlzLnZpc2libGUmJih0aGlzLnZpc2libGU9ITEsdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk9Im5vbmUiLHRoaXMudGFibGUuY29sdW1uTWFuYWdlci52ZXJ0aWNhbEFsaWduSGVhZGVycygpLHRoaXMucGFyZW50LmlzR3JvdXAmJnRoaXMucGFyZW50LmNoZWNrQ29sdW1uVmlzaWJpbGl0eSgpLHRoaXMuY2VsbHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5oaWRlKCl9KSksdGhpcy5kaXNwYXRjaCgiY29sdW1uLWhpZGUiLHRoaXMsdCksZXx8dGhpcy5kaXNwYXRjaEV4dGVybmFsKCJjb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCIsdGhpcy5nZXRDb21wb25lbnQoKSwhMSksdGhpcy5wYXJlbnQuaXNHcm91cCYmdGhpcy5wYXJlbnQubWF0Y2hDaGlsZFdpZHRocygpLHRoaXMuc2lsZW50fHx0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIucmVyZW5kZXJDb2x1bW5zKCkpfW1hdGNoQ2hpbGRXaWR0aHMoKXt2YXIgZT0wO3RoaXMuY29udGVudEVsZW1lbnQmJnRoaXMuY29sdW1ucy5sZW5ndGgmJih0aGlzLmNvbHVtbnMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC52aXNpYmxlJiYoZSs9dC5nZXRXaWR0aCgpKX0pKSx0aGlzLmNvbnRlbnRFbGVtZW50LnN0eWxlLm1heFdpZHRoPWUtMSsicHgiLHRoaXMucGFyZW50LmlzR3JvdXAmJnRoaXMucGFyZW50Lm1hdGNoQ2hpbGRXaWR0aHMoKSl9cmVtb3ZlQ2hpbGQoZSl7dmFyIHQ9dGhpcy5jb2x1bW5zLmluZGV4T2YoZSk7dD4tMSYmdGhpcy5jb2x1bW5zLnNwbGljZSh0LDEpLHRoaXMuY29sdW1ucy5sZW5ndGh8fHRoaXMuZGVsZXRlKCl9c2V0V2lkdGgoZSl7dGhpcy53aWR0aEZpeGVkPSEwLHRoaXMuc2V0V2lkdGhBY3R1YWwoZSl9c2V0V2lkdGhBY3R1YWwoZSl7aXNOYU4oZSkmJihlPU1hdGguZmxvb3IodGhpcy50YWJsZS5lbGVtZW50LmNsaWVudFdpZHRoLzEwMCpwYXJzZUludChlKSkpLGU9TWF0aC5tYXgodGhpcy5taW5XaWR0aCxlKSx0aGlzLm1heFdpZHRoJiYoZT1NYXRoLm1pbih0aGlzLm1heFdpZHRoLGUpKSx0aGlzLndpZHRoPWUsdGhpcy53aWR0aFN0eWxlZD1lP2UrInB4IjoiIix0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGg9dGhpcy53aWR0aFN0eWxlZCx0aGlzLmlzR3JvdXB8fHRoaXMuY2VsbHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5zZXRXaWR0aCgpfSkpLHRoaXMucGFyZW50LmlzR3JvdXAmJnRoaXMucGFyZW50Lm1hdGNoQ2hpbGRXaWR0aHMoKSx0aGlzLmRpc3BhdGNoKCJjb2x1bW4td2lkdGgiLHRoaXMpfWNoZWNrQ2VsbEhlaWdodHMoKXt2YXIgZT1bXTt0aGlzLmNlbGxzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3Qucm93LmhlaWdodEluaXRpYWxpemVkJiYobnVsbCE9PXQucm93LmdldEVsZW1lbnQoKS5vZmZzZXRQYXJlbnQ/KGUucHVzaCh0LnJvdyksdC5yb3cuY2xlYXJDZWxsSGVpZ2h0KCkpOnQucm93LmhlaWdodEluaXRpYWxpemVkPSExKX0pKSxlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuY2FsY0hlaWdodCgpfSkpLGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5zZXRDZWxsSGVpZ2h0KCl9KSl9Z2V0V2lkdGgoKXt2YXIgZT0wO3JldHVybiB0aGlzLmlzR3JvdXA/dGhpcy5jb2x1bW5zLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudmlzaWJsZSYmKGUrPXQuZ2V0V2lkdGgoKSl9KSk6ZT10aGlzLndpZHRoLGV9Z2V0TGVmdE9mZnNldCgpe3ZhciBlPXRoaXMuZWxlbWVudC5vZmZzZXRMZWZ0O3JldHVybiB0aGlzLnBhcmVudC5pc0dyb3VwJiYoZSs9dGhpcy5wYXJlbnQuZ2V0TGVmdE9mZnNldCgpKSxlfWdldEhlaWdodCgpe3JldHVybiBNYXRoLmNlaWwodGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCl9c2V0TWluV2lkdGgoZSl7dGhpcy5tYXhXaWR0aCYmZT50aGlzLm1heFdpZHRoJiYoZT10aGlzLm1heFdpZHRoLGNvbnNvbGUud2FybigidGhlIG1pbldpZHRoICgiK2UrInB4KSBmb3IgY29sdW1uICciK3RoaXMuZmllbGQrIicgY2Fubm90IGJlIGJpZ2dlciB0aGF0IGl0cyBtYXhXaWR0aCAoIit0aGlzLm1heFdpZHRoU3R5bGVkKyIpIikpLHRoaXMubWluV2lkdGg9ZSx0aGlzLm1pbldpZHRoU3R5bGVkPWU/ZSsicHgiOiIiLHRoaXMuZWxlbWVudC5zdHlsZS5taW5XaWR0aD10aGlzLm1pbldpZHRoU3R5bGVkLHRoaXMuY2VsbHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5zZXRNaW5XaWR0aCgpfSkpfXNldE1heFdpZHRoKGUpe3RoaXMubWluV2lkdGgmJmU8dGhpcy5taW5XaWR0aCYmKGU9dGhpcy5taW5XaWR0aCxjb25zb2xlLndhcm4oInRoZSBtYXhXaWR0aCAoIitlKyJweCkgZm9yIGNvbHVtbiAnIit0aGlzLmZpZWxkKyInIGNhbm5vdCBiZSBzbWFsbGVyIHRoYXQgaXRzIG1pbldpZHRoICgiK3RoaXMubWluV2lkdGhTdHlsZWQrIikiKSksdGhpcy5tYXhXaWR0aD1lLHRoaXMubWF4V2lkdGhTdHlsZWQ9ZT9lKyJweCI6IiIsdGhpcy5lbGVtZW50LnN0eWxlLm1heFdpZHRoPXRoaXMubWF4V2lkdGhTdHlsZWQsdGhpcy5jZWxscy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnNldE1heFdpZHRoKCl9KSl9ZGVsZXRlKCl7cmV0dXJuIG5ldyBQcm9taXNlKCgoZSx0KT0+e3RoaXMuaXNHcm91cCYmdGhpcy5jb2x1bW5zLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuZGVsZXRlKCl9KSksdGhpcy5kaXNwYXRjaCgiY29sdW1uLWRlbGV0ZSIsdGhpcyk7dmFyIGk9dGhpcy5jZWxscy5sZW5ndGg7Zm9yKGxldCBlPTA7ZTxpO2UrKyl0aGlzLmNlbGxzWzBdLmRlbGV0ZSgpO3RoaXMuZWxlbWVudC5wYXJlbnROb2RlJiZ0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudD0hMSx0aGlzLmNvbnRlbnRFbGVtZW50PSExLHRoaXMudGl0bGVFbGVtZW50PSExLHRoaXMuZ3JvdXBFbGVtZW50PSExLHRoaXMucGFyZW50LmlzR3JvdXAmJnRoaXMucGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpLHRoaXMudGFibGUuY29sdW1uTWFuYWdlci5kZXJlZ2lzdGVyQ29sdW1uKHRoaXMpLHRoaXMudGFibGUuY29sdW1uTWFuYWdlci5yZXJlbmRlckNvbHVtbnMoITApLGUoKX0pKX1jb2x1bW5SZW5kZXJlZCgpe3RoaXMudGl0bGVGb3JtYXR0ZXJSZW5kZXJlZCYmdGhpcy50aXRsZUZvcm1hdHRlclJlbmRlcmVkKCksdGhpcy5kaXNwYXRjaCgiY29sdW1uLXJlbmRlcmVkIix0aGlzKX1nZW5lcmF0ZUNlbGwoZSl7dmFyIHQ9bmV3IG8odGhpcyxlKTtyZXR1cm4gdGhpcy5jZWxscy5wdXNoKHQpLHR9bmV4dENvbHVtbigpe3ZhciBlPXRoaXMudGFibGUuY29sdW1uTWFuYWdlci5maW5kQ29sdW1uSW5kZXgodGhpcyk7cmV0dXJuIGU+LTEmJnRoaXMuX25leHRWaXNpYmxlQ29sdW1uKGUrMSl9X25leHRWaXNpYmxlQ29sdW1uKGUpe3ZhciB0PXRoaXMudGFibGUuY29sdW1uTWFuYWdlci5nZXRDb2x1bW5CeUluZGV4KGUpO3JldHVybiF0fHx0LnZpc2libGU/dDp0aGlzLl9uZXh0VmlzaWJsZUNvbHVtbihlKzEpfXByZXZDb2x1bW4oKXt2YXIgZT10aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZmluZENvbHVtbkluZGV4KHRoaXMpO3JldHVybiBlPi0xJiZ0aGlzLl9wcmV2VmlzaWJsZUNvbHVtbihlLTEpfV9wcmV2VmlzaWJsZUNvbHVtbihlKXt2YXIgdD10aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2V0Q29sdW1uQnlJbmRleChlKTtyZXR1cm4hdHx8dC52aXNpYmxlP3Q6dGhpcy5fcHJldlZpc2libGVDb2x1bW4oZS0xKX1yZWluaXRpYWxpemVXaWR0aChlKXt0aGlzLndpZHRoRml4ZWQ9ITEsdm9pZCAwPT09dGhpcy5kZWZpbml0aW9uLndpZHRofHxlfHx0aGlzLnNldFdpZHRoKHRoaXMuZGVmaW5pdGlvbi53aWR0aCksdGhpcy5kaXNwYXRjaCgiY29sdW1uLXdpZHRoLWZpdC1iZWZvcmUiLHRoaXMpLHRoaXMuZml0VG9EYXRhKGUpLHRoaXMuZGlzcGF0Y2goImNvbHVtbi13aWR0aC1maXQtYWZ0ZXIiLHRoaXMpfWZpdFRvRGF0YShlKXtpZighdGhpcy5pc0dyb3VwKXt0aGlzLndpZHRoRml4ZWR8fCh0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGg9IiIsdGhpcy5jZWxscy5mb3JFYWNoKChlPT57ZS5jbGVhcldpZHRoKCl9KSkpO3ZhciB0PXRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aDtpZigoIXRoaXMud2lkdGh8fCF0aGlzLndpZHRoRml4ZWQpJiYodGhpcy5jZWxscy5mb3JFYWNoKChlPT57dmFyIGk9ZS5nZXRXaWR0aCgpO2k+dCYmKHQ9aSl9KSksdCkpe3ZhciBpPXQrMTt0aGlzLm1heEluaXRpYWxXaWR0aCYmIWUmJihpPU1hdGgubWluKGksdGhpcy5tYXhJbml0aWFsV2lkdGgpKSx0aGlzLnNldFdpZHRoQWN0dWFsKGkpfX19dXBkYXRlRGVmaW5pdGlvbihlKXt2YXIgdDtyZXR1cm4gdGhpcy5pc0dyb3VwfHx0aGlzLnBhcmVudC5pc0dyb3VwPyhjb25zb2xlLmVycm9yKCJDb2x1bW4gVXBkYXRlIEVycm9yIC0gVGhlIHVwZGF0ZURlZmluaXRpb24gZnVuY3Rpb24gaXMgb25seSBhdmFpbGFibGUgb24gdW5ncm91cGVkIGNvbHVtbnMiKSxQcm9taXNlLnJlamVjdCgiQ29sdW1uIFVwZGF0ZSBFcnJvciAtIFRoZSB1cGRhdGVEZWZpbml0aW9uIGZ1bmN0aW9uIGlzIG9ubHkgYXZhaWxhYmxlIG9uIGNvbHVtbnMsIG5vdCBjb2x1bW4gZ3JvdXBzIikpOih0PU9iamVjdC5hc3NpZ24oe30sdGhpcy5nZXREZWZpbml0aW9uKCkpLHQ9T2JqZWN0LmFzc2lnbih0LGUpLHRoaXMudGFibGUuY29sdW1uTWFuYWdlci5hZGRDb2x1bW4odCwhMSx0aGlzKS50aGVuKChlPT4odC5maWVsZD09dGhpcy5maWVsZCYmKHRoaXMuZmllbGQ9ITEpLHRoaXMuZGVsZXRlKCkudGhlbigoKCk9PmUuZ2V0Q29tcG9uZW50KCkpKSkpKSl9ZGVsZXRlQ2VsbChlKXt2YXIgdD10aGlzLmNlbGxzLmluZGV4T2YoZSk7dD4tMSYmdGhpcy5jZWxscy5zcGxpY2UodCwxKX1nZXRDb21wb25lbnQoKXtyZXR1cm4gdGhpcy5jb21wb25lbnR8fCh0aGlzLmNvbXBvbmVudD1uZXcgdCh0aGlzKSksdGhpcy5jb21wb25lbnR9fW4uZGVmYXVsdE9wdGlvbkxpc3Q9aTtjbGFzcyBye3N0YXRpYyBlbFZpc2libGUoZSl7cmV0dXJuIShlLm9mZnNldFdpZHRoPD0wJiZlLm9mZnNldEhlaWdodDw9MCl9c3RhdGljIGVsT2Zmc2V0KGUpe3ZhciB0PWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue3RvcDp0LnRvcCt3aW5kb3cucGFnZVlPZmZzZXQtZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFRvcCxsZWZ0OnQubGVmdCt3aW5kb3cucGFnZVhPZmZzZXQtZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudExlZnR9fXN0YXRpYyBkZWVwQ2xvbmUoZSx0LGk9W10pe3ZhciBzPXt9Ll9fcHJvdG9fXyxvPVtdLl9fcHJvdG9fXztmb3IodmFyIG4gaW4gdHx8KHQ9T2JqZWN0LmFzc2lnbihBcnJheS5pc0FycmF5KGUpP1tdOnt9LGUpKSxlKXtsZXQgcixhLGw9ZVtuXTtudWxsPT1sfHwib2JqZWN0IiE9dHlwZW9mIGx8fGwuX19wcm90b19fIT09cyYmbC5fX3Byb3RvX18hPT1vfHwocj1pLmZpbmRJbmRleCgoZT0+ZS5zdWJqZWN0PT09bCkpLHI+LTE/dFtuXT1pW3JdLmNvcHk6KGE9T2JqZWN0LmFzc2lnbihBcnJheS5pc0FycmF5KGwpP1tdOnt9LGwpLGkudW5zaGlmdCh7c3ViamVjdDpsLGNvcHk6YX0pLHRbbl09dGhpcy5kZWVwQ2xvbmUobCxhLGkpKSl9cmV0dXJuIHR9fWNsYXNzIGF7Y29uc3RydWN0b3IoZSx0LGk9e30pe3RoaXMudGFibGU9ZSx0aGlzLm1zZ1R5cGU9dCx0aGlzLnJlZ2lzdGVyZWREZWZhdWx0cz1PYmplY3QuYXNzaWduKHt9LGkpfXJlZ2lzdGVyKGUsdCl7dGhpcy5yZWdpc3RlcmVkRGVmYXVsdHNbZV09dH1nZW5lcmF0ZShlLHQ9e30pe3ZhciBpPU9iamVjdC5hc3NpZ24oe30sdGhpcy5yZWdpc3RlcmVkRGVmYXVsdHMpLHM9dGhpcy50YWJsZS5vcHRpb25zLmRlYnVnSW52YWxpZE9wdGlvbnN8fCEwPT09dC5kZWJ1Z0ludmFsaWRPcHRpb25zO09iamVjdC5hc3NpZ24oaSxlKTtmb3IobGV0IGUgaW4gdClpLmhhc093blByb3BlcnR5KGUpfHwocyYmY29uc29sZS53YXJuKCJJbnZhbGlkICIrdGhpcy5tc2dUeXBlKyIgb3B0aW9uOiIsZSksaVtlXT10LmtleSk7Zm9yKGxldCBlIGluIGkpZSBpbiB0P2lbZV09dFtlXTpBcnJheS5pc0FycmF5KGlbZV0pP2lbZV09T2JqZWN0LmFzc2lnbihbXSxpW2VdKToib2JqZWN0Ij09dHlwZW9mIGlbZV0mJm51bGwhPT1pW2VdP2lbZV09T2JqZWN0LmFzc2lnbih7fSxpW2VdKTp2b2lkIDA9PT1pW2VdJiZkZWxldGUgaVtlXTtyZXR1cm4gaX19Y2xhc3MgbCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5lbGVtZW50VmVydGljYWw9ZS5yb3dNYW5hZ2VyLmVsZW1lbnQsdGhpcy5lbGVtZW50SG9yaXpvbnRhbD1lLmNvbHVtbk1hbmFnZXIuZWxlbWVudCx0aGlzLnRhYmxlRWxlbWVudD1lLnJvd01hbmFnZXIudGFibGVFbGVtZW50LHRoaXMudmVydGljYWxGaWxsTW9kZT0iZml0In1pbml0aWFsaXplKCl7fWNsZWFyUm93cygpe31jbGVhckNvbHVtbnMoKXt9cmVpbml0aWFsaXplQ29sdW1uV2lkdGhzKGUpe31yZW5kZXJSb3dzKCl7fXJlbmRlckNvbHVtbnMoKXt9cmVyZW5kZXJSb3dzKGUpe2UmJmUoKX1yZXJlbmRlckNvbHVtbnMoZSx0KXt9cmVuZGVyUm93Q2VsbHMoZSl7fXJlcmVuZGVyUm93Q2VsbHMoZSx0KXt9c2Nyb2xsQ29sdW1ucyhlLHQpe31zY3JvbGxSb3dzKGUsdCl7fXJlc2l6ZSgpe31zY3JvbGxUb1JvdyhlKXt9c2Nyb2xsVG9Sb3dOZWFyZXN0VG9wKGUpe312aXNpYmxlUm93cyhlKXtyZXR1cm5bXX1yb3dzKCl7cmV0dXJuIHRoaXMudGFibGUucm93TWFuYWdlci5nZXREaXNwbGF5Um93cygpfXN0eWxlUm93KGUsdCl7dmFyIGk9ZS5nZXRFbGVtZW50KCk7dCUyPyhpLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1yb3ctZXZlbiIpLGkuY2xhc3NMaXN0LnJlbW92ZSgidGFidWxhdG9yLXJvdy1vZGQiKSk6KGkuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXJvdy1vZGQiKSxpLmNsYXNzTGlzdC5yZW1vdmUoInRhYnVsYXRvci1yb3ctZXZlbiIpKX1jbGVhcigpe3RoaXMuY2xlYXJSb3dzKCksdGhpcy5jbGVhckNvbHVtbnMoKX1yZW5kZXIoKXt0aGlzLnJlbmRlclJvd3MoKSx0aGlzLnJlbmRlckNvbHVtbnMoKX1yZXJlbmRlcihlKXt0aGlzLnJlcmVuZGVyUm93cygpLHRoaXMucmVyZW5kZXJDb2x1bW5zKCl9c2Nyb2xsVG9Sb3dQb3NpdGlvbihlLHQsaSl7dmFyIHM9dGhpcy5yb3dzKCkuaW5kZXhPZihlKSxvPWUuZ2V0RWxlbWVudCgpLG49MDtyZXR1cm4gbmV3IFByb21pc2UoKChhLGwpPT57aWYocz4tMSl7aWYodm9pZCAwPT09aSYmKGk9dGhpcy50YWJsZS5vcHRpb25zLnNjcm9sbFRvUm93SWZWaXNpYmxlKSwhaSYmci5lbFZpc2libGUobykmJihuPXIuZWxPZmZzZXQobykudG9wLXIuZWxPZmZzZXQodGhpcy5lbGVtZW50VmVydGljYWwpLnRvcCk+MCYmbjx0aGlzLmVsZW1lbnRWZXJ0aWNhbC5jbGllbnRIZWlnaHQtby5vZmZzZXRIZWlnaHQpcmV0dXJuIGEoKSwhMTtzd2l0Y2godm9pZCAwPT09dCYmKHQ9dGhpcy50YWJsZS5vcHRpb25zLnNjcm9sbFRvUm93UG9zaXRpb24pLCJuZWFyZXN0Ij09PXQmJih0PXRoaXMuc2Nyb2xsVG9Sb3dOZWFyZXN0VG9wKGUpPyJ0b3AiOiJib3R0b20iKSx0aGlzLnNjcm9sbFRvUm93KGUpLHQpe2Nhc2UibWlkZGxlIjpjYXNlImNlbnRlciI6dGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsSGVpZ2h0LXRoaXMuZWxlbWVudFZlcnRpY2FsLnNjcm9sbFRvcD09dGhpcy5lbGVtZW50VmVydGljYWwuY2xpZW50SGVpZ2h0P3RoaXMuZWxlbWVudFZlcnRpY2FsLnNjcm9sbFRvcD10aGlzLmVsZW1lbnRWZXJ0aWNhbC5zY3JvbGxUb3ArKG8ub2Zmc2V0VG9wLXRoaXMuZWxlbWVudFZlcnRpY2FsLnNjcm9sbFRvcCktKHRoaXMuZWxlbWVudFZlcnRpY2FsLnNjcm9sbEhlaWdodC1vLm9mZnNldFRvcCkvMjp0aGlzLmVsZW1lbnRWZXJ0aWNhbC5zY3JvbGxUb3A9dGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsVG9wLXRoaXMuZWxlbWVudFZlcnRpY2FsLmNsaWVudEhlaWdodC8yO2JyZWFrO2Nhc2UiYm90dG9tIjp0aGlzLmVsZW1lbnRWZXJ0aWNhbC5zY3JvbGxIZWlnaHQtdGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsVG9wPT10aGlzLmVsZW1lbnRWZXJ0aWNhbC5jbGllbnRIZWlnaHQ/dGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsVG9wPXRoaXMuZWxlbWVudFZlcnRpY2FsLnNjcm9sbFRvcC0odGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsSGVpZ2h0LW8ub2Zmc2V0VG9wKStvLm9mZnNldEhlaWdodDp0aGlzLmVsZW1lbnRWZXJ0aWNhbC5zY3JvbGxUb3A9dGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsVG9wLXRoaXMuZWxlbWVudFZlcnRpY2FsLmNsaWVudEhlaWdodCtvLm9mZnNldEhlaWdodDticmVhaztjYXNlInRvcCI6dGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsVG9wPW8ub2Zmc2V0VG9wfWEoKX1lbHNlIGNvbnNvbGUud2FybigiU2Nyb2xsIEVycm9yIC0gUm93IG5vdCB2aXNpYmxlIiksbCgiU2Nyb2xsIEVycm9yIC0gUm93IG5vdCB2aXNpYmxlIil9KSl9fWNsYXNzIGggZXh0ZW5kcyBse2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpfXJlbmRlclJvd0NlbGxzKGUpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2UuY2VsbHMuZm9yRWFjaCgoZT0+e3QuYXBwZW5kQ2hpbGQoZS5nZXRFbGVtZW50KCkpfSkpLGUuZWxlbWVudC5hcHBlbmRDaGlsZCh0KSxlLmNlbGxzLmZvckVhY2goKGU9PntlLmNlbGxSZW5kZXJlZCgpfSkpfXJlaW5pdGlhbGl6ZUNvbHVtbldpZHRocyhlKXtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UucmVpbml0aWFsaXplV2lkdGgoKX0pKX19Y2xhc3MgZCBleHRlbmRzIGx7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5sZWZ0Q29sPTAsdGhpcy5yaWdodENvbD0wLHRoaXMuc2Nyb2xsTGVmdD0wLHRoaXMudkRvbVNjcm9sbFBvc0xlZnQ9MCx0aGlzLnZEb21TY3JvbGxQb3NSaWdodD0wLHRoaXMudkRvbVBhZExlZnQ9MCx0aGlzLnZEb21QYWRSaWdodD0wLHRoaXMuZml0RGF0YUNvbEF2Zz0wLHRoaXMud2luZG93QnVmZmVyPTIwMCx0aGlzLnZpc2libGVSb3dzPW51bGwsdGhpcy5pbml0aWFsaXplZD0hMSx0aGlzLmlzRml0RGF0YT0hMSx0aGlzLmNvbHVtbnM9W119aW5pdGlhbGl6ZSgpe3RoaXMuY29tcGF0aWJpbGl0eUNoZWNrKCksdGhpcy5sYXlvdXRDaGVjaygpLHRoaXMudmVydFNjcm9sbExpc3RlbigpfWNvbXBhdGliaWxpdHlDaGVjaygpeyJmaXREYXRhVGFibGUiPT10aGlzLm9wdGlvbnMoImxheW91dCIpJiZjb25zb2xlLndhcm4oIkhvcml6b250YWwgVmlydHVhbCBET00gaXMgbm90IGNvbXBhdGlibGUgd2l0aCBmaXREYXRhVGFibGUgbGF5b3V0IG1vZGUiKSx0aGlzLm9wdGlvbnMoInJlc3BvbnNpdmVMYXlvdXQiKSYmY29uc29sZS53YXJuKCJIb3Jpem9udGFsIFZpcnR1YWwgRE9NIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggcmVzcG9uc2l2ZSBjb2x1bW5zIiksdGhpcy5vcHRpb25zKCJydGwiKSYmY29uc29sZS53YXJuKCJIb3Jpem9udGFsIFZpcnR1YWwgRE9NIGlzIG5vdCBjdXJyZW50bHkgY29tcGF0aWJsZSB3aXRoIFJUTCB0ZXh0IGRpcmVjdGlvbiIpfWxheW91dENoZWNrKCl7dGhpcy5pc0ZpdERhdGE9dGhpcy5vcHRpb25zKCJsYXlvdXQiKS5zdGFydHNXaXRoKCJmaXREYXRhIil9dmVydFNjcm9sbExpc3Rlbigpe3RoaXMuc3Vic2NyaWJlKCJzY3JvbGwtdmVydGljYWwiLHRoaXMuY2xlYXJWaXNSb3dDYWNoZS5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiZGF0YS1yZWZyZXNoZWQiLHRoaXMuY2xlYXJWaXNSb3dDYWNoZS5iaW5kKHRoaXMpKX1jbGVhclZpc1Jvd0NhY2hlKCl7dGhpcy52aXNpYmxlUm93cz1udWxsfXJlbmRlckNvbHVtbnMoZSx0KXt0aGlzLmRhdGFDaGFuZ2UoKX1zY3JvbGxDb2x1bW5zKGUsdCl7dGhpcy5zY3JvbGxMZWZ0IT1lJiYodGhpcy5zY3JvbGxMZWZ0PWUsdGhpcy5zY3JvbGwoZS0odGhpcy52RG9tU2Nyb2xsUG9zTGVmdCt0aGlzLndpbmRvd0J1ZmZlcikpKX1jYWxjV2luZG93QnVmZmVyKCl7dmFyIGU9dGhpcy5lbGVtZW50VmVydGljYWwuY2xpZW50V2lkdGg7dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmNvbHVtbnNCeUluZGV4LmZvckVhY2goKHQ9PntpZih0LnZpc2libGUpe3ZhciBpPXQuZ2V0V2lkdGgoKTtpPmUmJihlPWkpfX0pKSx0aGlzLndpbmRvd0J1ZmZlcj0yKmV9cmVyZW5kZXJDb2x1bW5zKGUsdCl7dmFyIGk9e2NvbHM6dGhpcy5jb2x1bW5zLGxlZnRDb2w6dGhpcy5sZWZ0Q29sLHJpZ2h0Q29sOnRoaXMucmlnaHRDb2x9LHM9MDtlJiYhdGhpcy5pbml0aWFsaXplZHx8KHRoaXMuY2xlYXIoKSx0aGlzLmNhbGNXaW5kb3dCdWZmZXIoKSx0aGlzLnNjcm9sbExlZnQ9dGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsTGVmdCx0aGlzLnZEb21TY3JvbGxQb3NMZWZ0PXRoaXMuc2Nyb2xsTGVmdC10aGlzLndpbmRvd0J1ZmZlcix0aGlzLnZEb21TY3JvbGxQb3NSaWdodD10aGlzLnNjcm9sbExlZnQrdGhpcy5lbGVtZW50VmVydGljYWwuY2xpZW50V2lkdGgrdGhpcy53aW5kb3dCdWZmZXIsdGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmNvbHVtbnNCeUluZGV4LmZvckVhY2goKGU9Pnt2YXIgdCxpPXt9O2UudmlzaWJsZSYmKGUubW9kdWxlcy5mcm96ZW58fCh0PWUuZ2V0V2lkdGgoKSxpLmxlZnRQb3M9cyxpLnJpZ2h0UG9zPXMrdCxpLndpZHRoPXQsdGhpcy5pc0ZpdERhdGEmJihpLmZpdERhdGFDaGVjaz0hZS5tb2R1bGVzLnZkb21Ib3p8fGUubW9kdWxlcy52ZG9tSG96LmZpdERhdGFDaGVjaykscyt0PnRoaXMudkRvbVNjcm9sbFBvc0xlZnQmJnM8dGhpcy52RG9tU2Nyb2xsUG9zUmlnaHQ/KC0xPT10aGlzLmxlZnRDb2wmJih0aGlzLmxlZnRDb2w9dGhpcy5jb2x1bW5zLmxlbmd0aCx0aGlzLnZEb21QYWRMZWZ0PXMpLHRoaXMucmlnaHRDb2w9dGhpcy5jb2x1bW5zLmxlbmd0aCk6LTEhPT10aGlzLmxlZnRDb2wmJih0aGlzLnZEb21QYWRSaWdodCs9dCksdGhpcy5jb2x1bW5zLnB1c2goZSksZS5tb2R1bGVzLnZkb21Ib3o9aSxzKz10KSl9KSksdGhpcy50YWJsZUVsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQ9dGhpcy52RG9tUGFkTGVmdCsicHgiLHRoaXMudGFibGVFbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodD10aGlzLnZEb21QYWRSaWdodCsicHgiLHRoaXMuaW5pdGlhbGl6ZWQ9ITAsdHx8ZSYmIXRoaXMucmVpbml0Q2hhbmdlZChpKXx8dGhpcy5yZWluaXRpYWxpemVSb3dzKCksdGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsTGVmdD10aGlzLnNjcm9sbExlZnQpfXJlbmRlclJvd0NlbGxzKGUpe2lmKHRoaXMuaW5pdGlhbGl6ZWQpdGhpcy5pbml0aWFsaXplUm93KGUpO2Vsc2V7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7ZS5jZWxscy5mb3JFYWNoKChlPT57dC5hcHBlbmRDaGlsZChlLmdldEVsZW1lbnQoKSl9KSksZS5lbGVtZW50LmFwcGVuZENoaWxkKHQpLGUuY2VsbHMuZm9yRWFjaCgoZT0+e2UuY2VsbFJlbmRlcmVkKCl9KSl9fXJlcmVuZGVyUm93Q2VsbHMoZSx0KXt0aGlzLnJlaW5pdGlhbGl6ZVJvdyhlLHQpfXJlaW5pdGlhbGl6ZUNvbHVtbldpZHRocyhlKXtmb3IobGV0IGU9dGhpcy5sZWZ0Q29sO2U8PXRoaXMucmlnaHRDb2w7ZSsrKXRoaXMuY29sdW1uc1tlXS5yZWluaXRpYWxpemVXaWR0aCgpfWRlaW5pdGlhbGl6ZSgpe3RoaXMuaW5pdGlhbGl6ZWQ9ITF9Y2xlYXIoKXt0aGlzLmNvbHVtbnM9W10sdGhpcy5sZWZ0Q29sPS0xLHRoaXMucmlnaHRDb2w9MCx0aGlzLnZEb21TY3JvbGxQb3NMZWZ0PTAsdGhpcy52RG9tU2Nyb2xsUG9zUmlnaHQ9MCx0aGlzLnZEb21QYWRMZWZ0PTAsdGhpcy52RG9tUGFkUmlnaHQ9MH1kYXRhQ2hhbmdlKCl7dmFyIGUsdCxpPSExO2lmKHRoaXMuaXNGaXREYXRhKXtpZih0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuY29sdW1uc0J5SW5kZXguZm9yRWFjaCgoZT0+eyFlLmRlZmluaXRpb24ud2lkdGgmJmUudmlzaWJsZSYmKGk9ITApfSkpLGkmJnRoaXMudGFibGUucm93TWFuYWdlci5nZXREaXNwbGF5Um93cygpLmxlbmd0aCYmKHRoaXMudkRvbVNjcm9sbFBvc1JpZ2h0PXRoaXMuc2Nyb2xsTGVmdCt0aGlzLmVsZW1lbnRWZXJ0aWNhbC5jbGllbnRXaWR0aCt0aGlzLndpbmRvd0J1ZmZlcixlPXRoaXMuY2hhaW4oInJvd3Mtc2FtcGxlIixbMV0sW10sKCgpPT50aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0RGlzcGxheVJvd3MoKSkpWzBdKSl7dD1lLmdldEVsZW1lbnQoKSxlLmdlbmVyYXRlQ2VsbHMoKSx0aGlzLnRhYmxlRWxlbWVudC5hcHBlbmRDaGlsZCh0KTtmb3IobGV0IGk9MDtpPGUuY2VsbHMubGVuZ3RoO2krKyl7bGV0IHM9ZS5jZWxsc1tpXTt0LmFwcGVuZENoaWxkKHMuZ2V0RWxlbWVudCgpKSxzLmNvbHVtbi5yZWluaXRpYWxpemVXaWR0aCgpfXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSx0aGlzLnJlcmVuZGVyQ29sdW1ucyghMSwhMCl9fWVsc2UiZml0Q29sdW1ucyI9PT10aGlzLm9wdGlvbnMoImxheW91dCIpJiYodGhpcy5sYXlvdXRSZWZyZXNoKCksdGhpcy5yZXJlbmRlckNvbHVtbnMoITEsITApKX1yZWluaXRDaGFuZ2VkKGUpe3ZhciB0PSEwO3JldHVybiBlLmNvbHMubGVuZ3RoIT09dGhpcy5jb2x1bW5zLmxlbmd0aHx8ZS5sZWZ0Q29sIT09dGhpcy5sZWZ0Q29sfHxlLnJpZ2h0Q29sIT09dGhpcy5yaWdodENvbHx8KGUuY29scy5mb3JFYWNoKCgoZSxpKT0+e2UhPT10aGlzLmNvbHVtbnNbaV0mJih0PSExKX0pKSwhdCl9cmVpbml0aWFsaXplUm93cygpe3ZhciBlPXRoaXMuZ2V0VmlzaWJsZVJvd3MoKSx0PXRoaXMudGFibGUucm93TWFuYWdlci5nZXRSb3dzKCkuZmlsdGVyKCh0PT4hZS5pbmNsdWRlcyh0KSkpO2UuZm9yRWFjaCgoZT0+e3RoaXMucmVpbml0aWFsaXplUm93KGUsITApfSkpLHQuZm9yRWFjaCgoZT0+e2UuZGVpbml0aWFsaXplKCl9KSl9Z2V0VmlzaWJsZVJvd3MoKXtyZXR1cm4gdGhpcy52aXNpYmxlUm93c3x8KHRoaXMudmlzaWJsZVJvd3M9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldFZpc2libGVSb3dzKCkpLHRoaXMudmlzaWJsZVJvd3N9c2Nyb2xsKGUpe3RoaXMudkRvbVNjcm9sbFBvc0xlZnQrPWUsdGhpcy52RG9tU2Nyb2xsUG9zUmlnaHQrPWUsTWF0aC5hYnMoZSk+dGhpcy53aW5kb3dCdWZmZXIvMj90aGlzLnJlcmVuZGVyQ29sdW1ucygpOmU+MD8odGhpcy5hZGRDb2xSaWdodCgpLHRoaXMucmVtb3ZlQ29sTGVmdCgpKToodGhpcy5hZGRDb2xMZWZ0KCksdGhpcy5yZW1vdmVDb2xSaWdodCgpKX1jb2xQb3NpdGlvbkFkanVzdChlLHQsaSl7Zm9yKGxldCBzPWU7czx0O3MrKyl7bGV0IGU9dGhpcy5jb2x1bW5zW3NdO2UubW9kdWxlcy52ZG9tSG96LmxlZnRQb3MrPWksZS5tb2R1bGVzLnZkb21Ib3oucmlnaHRQb3MrPWl9fWFkZENvbFJpZ2h0KCl7Zm9yKHZhciBlPSExLHQ9ITA7dDspe2xldCBpPXRoaXMuY29sdW1uc1t0aGlzLnJpZ2h0Q29sKzFdO2kmJmkubW9kdWxlcy52ZG9tSG96LmxlZnRQb3M8PXRoaXMudkRvbVNjcm9sbFBvc1JpZ2h0PyhlPSEwLHRoaXMuZ2V0VmlzaWJsZVJvd3MoKS5mb3JFYWNoKChlPT57aWYoImdyb3VwIiE9PWUudHlwZSl7dmFyIHQ9ZS5nZXRDZWxsKGkpO2UuZ2V0RWxlbWVudCgpLmluc2VydEJlZm9yZSh0LmdldEVsZW1lbnQoKSxlLmdldENlbGwodGhpcy5jb2x1bW5zW3RoaXMucmlnaHRDb2xdKS5nZXRFbGVtZW50KCkubmV4dFNpYmxpbmcpLHQuY2VsbFJlbmRlcmVkKCl9fSkpLHRoaXMuZml0RGF0YUNvbEFjdHVhbFdpZHRoQ2hlY2soaSksdGhpcy5yaWdodENvbCsrLHRoaXMuZ2V0VmlzaWJsZVJvd3MoKS5mb3JFYWNoKChlPT57Imdyb3VwIiE9PWUudHlwZSYmKGUubW9kdWxlcy52ZG9tSG96LnJpZ2h0Q29sPXRoaXMucmlnaHRDb2wpfSkpLHRoaXMucmlnaHRDb2w+PXRoaXMuY29sdW1ucy5sZW5ndGgtMT90aGlzLnZEb21QYWRSaWdodD0wOnRoaXMudkRvbVBhZFJpZ2h0LT1pLmdldFdpZHRoKCkpOnQ9ITF9ZSYmKHRoaXMudGFibGVFbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodD10aGlzLnZEb21QYWRSaWdodCsicHgiKX1hZGRDb2xMZWZ0KCl7Zm9yKHZhciBlPSExLHQ9ITA7dDspe2xldCBpPXRoaXMuY29sdW1uc1t0aGlzLmxlZnRDb2wtMV07aWYoaSlpZihpLm1vZHVsZXMudmRvbUhvei5yaWdodFBvcz49dGhpcy52RG9tU2Nyb2xsUG9zTGVmdCl7ZT0hMCx0aGlzLmdldFZpc2libGVSb3dzKCkuZm9yRWFjaCgoZT0+e2lmKCJncm91cCIhPT1lLnR5cGUpe3ZhciB0PWUuZ2V0Q2VsbChpKTtlLmdldEVsZW1lbnQoKS5pbnNlcnRCZWZvcmUodC5nZXRFbGVtZW50KCksZS5nZXRDZWxsKHRoaXMuY29sdW1uc1t0aGlzLmxlZnRDb2xdKS5nZXRFbGVtZW50KCkpLHQuY2VsbFJlbmRlcmVkKCl9fSkpLHRoaXMubGVmdENvbC0tLHRoaXMuZ2V0VmlzaWJsZVJvd3MoKS5mb3JFYWNoKChlPT57Imdyb3VwIiE9PWUudHlwZSYmKGUubW9kdWxlcy52ZG9tSG96LmxlZnRDb2w9dGhpcy5sZWZ0Q29sKX0pKSx0aGlzLmxlZnRDb2w8PTA/dGhpcy52RG9tUGFkTGVmdD0wOnRoaXMudkRvbVBhZExlZnQtPWkuZ2V0V2lkdGgoKTtsZXQgdD10aGlzLmZpdERhdGFDb2xBY3R1YWxXaWR0aENoZWNrKGkpO3QmJih0aGlzLnNjcm9sbExlZnQ9dGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsTGVmdD10aGlzLmVsZW1lbnRWZXJ0aWNhbC5zY3JvbGxMZWZ0K3QsdGhpcy52RG9tUGFkUmlnaHQtPXQpfWVsc2UgdD0hMTtlbHNlIHQ9ITF9ZSYmKHRoaXMudGFibGVFbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0PXRoaXMudkRvbVBhZExlZnQrInB4Iil9cmVtb3ZlQ29sUmlnaHQoKXtmb3IodmFyIGU9ITEsdD0hMDt0Oyl7bGV0IGk9dGhpcy5jb2x1bW5zW3RoaXMucmlnaHRDb2xdO2kmJmkubW9kdWxlcy52ZG9tSG96LmxlZnRQb3M+dGhpcy52RG9tU2Nyb2xsUG9zUmlnaHQ/KGU9ITAsdGhpcy5nZXRWaXNpYmxlUm93cygpLmZvckVhY2goKGU9PntpZigiZ3JvdXAiIT09ZS50eXBlKXt2YXIgdD1lLmdldENlbGwoaSk7dHJ5e2UuZ2V0RWxlbWVudCgpLnJlbW92ZUNoaWxkKHQuZ2V0RWxlbWVudCgpKX1jYXRjaChlKXtjb25zb2xlLndhcm4oIkNvdWxkIG5vdCByZW1vdmVDb2xSaWdodCIsZS5tZXNzYWdlKX19fSkpLHRoaXMudkRvbVBhZFJpZ2h0Kz1pLmdldFdpZHRoKCksdGhpcy5yaWdodENvbC0tLHRoaXMuZ2V0VmlzaWJsZVJvd3MoKS5mb3JFYWNoKChlPT57Imdyb3VwIiE9PWUudHlwZSYmKGUubW9kdWxlcy52ZG9tSG96LnJpZ2h0Q29sPXRoaXMucmlnaHRDb2wpfSkpKTp0PSExfWUmJih0aGlzLnRhYmxlRWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQ9dGhpcy52RG9tUGFkUmlnaHQrInB4Iil9cmVtb3ZlQ29sTGVmdCgpe2Zvcih2YXIgZT0hMSx0PSEwO3Q7KXtsZXQgaT10aGlzLmNvbHVtbnNbdGhpcy5sZWZ0Q29sXTtpJiZpLm1vZHVsZXMudmRvbUhvei5yaWdodFBvczx0aGlzLnZEb21TY3JvbGxQb3NMZWZ0PyhlPSEwLHRoaXMuZ2V0VmlzaWJsZVJvd3MoKS5mb3JFYWNoKChlPT57aWYoImdyb3VwIiE9PWUudHlwZSl7dmFyIHQ9ZS5nZXRDZWxsKGkpO3RyeXtlLmdldEVsZW1lbnQoKS5yZW1vdmVDaGlsZCh0LmdldEVsZW1lbnQoKSl9Y2F0Y2goZSl7Y29uc29sZS53YXJuKCJDb3VsZCBub3QgcmVtb3ZlQ29sTGVmdCIsZS5tZXNzYWdlKX19fSkpLHRoaXMudkRvbVBhZExlZnQrPWkuZ2V0V2lkdGgoKSx0aGlzLmxlZnRDb2wrKyx0aGlzLmdldFZpc2libGVSb3dzKCkuZm9yRWFjaCgoZT0+eyJncm91cCIhPT1lLnR5cGUmJihlLm1vZHVsZXMudmRvbUhvei5sZWZ0Q29sPXRoaXMubGVmdENvbCl9KSkpOnQ9ITF9ZSYmKHRoaXMudGFibGVFbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0PXRoaXMudkRvbVBhZExlZnQrInB4Iil9Zml0RGF0YUNvbEFjdHVhbFdpZHRoQ2hlY2soZSl7dmFyIHQsaTtyZXR1cm4gZS5tb2R1bGVzLnZkb21Ib3ouZml0RGF0YUNoZWNrJiYoZS5yZWluaXRpYWxpemVXaWR0aCgpLChpPSh0PWUuZ2V0V2lkdGgoKSktZS5tb2R1bGVzLnZkb21Ib3oud2lkdGgpJiYoZS5tb2R1bGVzLnZkb21Ib3oucmlnaHRQb3MrPWksZS5tb2R1bGVzLnZkb21Ib3oud2lkdGg9dCx0aGlzLmNvbFBvc2l0aW9uQWRqdXN0KHRoaXMuY29sdW1ucy5pbmRleE9mKGUpKzEsdGhpcy5jb2x1bW5zLmxlbmd0aCxpKSksZS5tb2R1bGVzLnZkb21Ib3ouZml0RGF0YUNoZWNrPSExKSxpfWluaXRpYWxpemVSb3coZSl7aWYoImdyb3VwIiE9PWUudHlwZSl7ZS5tb2R1bGVzLnZkb21Ib3o9e2xlZnRDb2w6dGhpcy5sZWZ0Q29sLHJpZ2h0Q29sOnRoaXMucmlnaHRDb2x9LHRoaXMudGFibGUubW9kdWxlcy5mcm96ZW5Db2x1bW5zJiZ0aGlzLnRhYmxlLm1vZHVsZXMuZnJvemVuQ29sdW1ucy5sZWZ0Q29sdW1ucy5mb3JFYWNoKCh0PT57dGhpcy5hcHBlbmRDZWxsKGUsdCl9KSk7Zm9yKGxldCB0PXRoaXMubGVmdENvbDt0PD10aGlzLnJpZ2h0Q29sO3QrKyl0aGlzLmFwcGVuZENlbGwoZSx0aGlzLmNvbHVtbnNbdF0pO3RoaXMudGFibGUubW9kdWxlcy5mcm96ZW5Db2x1bW5zJiZ0aGlzLnRhYmxlLm1vZHVsZXMuZnJvemVuQ29sdW1ucy5yaWdodENvbHVtbnMuZm9yRWFjaCgodD0+e3RoaXMuYXBwZW5kQ2VsbChlLHQpfSkpfX1hcHBlbmRDZWxsKGUsdCl7aWYodCYmdC52aXNpYmxlKXtsZXQgaT1lLmdldENlbGwodCk7ZS5nZXRFbGVtZW50KCkuYXBwZW5kQ2hpbGQoaS5nZXRFbGVtZW50KCkpLGkuY2VsbFJlbmRlcmVkKCl9fXJlaW5pdGlhbGl6ZVJvdyhlLHQpe2lmKCJncm91cCIhPT1lLnR5cGUmJih0fHwhZS5tb2R1bGVzLnZkb21Ib3p8fGUubW9kdWxlcy52ZG9tSG96LmxlZnRDb2whPT10aGlzLmxlZnRDb2x8fGUubW9kdWxlcy52ZG9tSG96LnJpZ2h0Q29sIT09dGhpcy5yaWdodENvbCkpe2Zvcih2YXIgaT1lLmdldEVsZW1lbnQoKTtpLmZpcnN0Q2hpbGQ7KWkucmVtb3ZlQ2hpbGQoaS5maXJzdENoaWxkKTt0aGlzLmluaXRpYWxpemVSb3coZSl9fX1jbGFzcyBjIGV4dGVuZHMgZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmJsb2NrSG96U2Nyb2xsRXZlbnQ9ITEsdGhpcy5oZWFkZXJzRWxlbWVudD1udWxsLHRoaXMuY29udGVudHNFbGVtZW50PW51bGwsdGhpcy5lbGVtZW50PW51bGwsdGhpcy5jb2x1bW5zPVtdLHRoaXMuY29sdW1uc0J5SW5kZXg9W10sdGhpcy5jb2x1bW5zQnlGaWVsZD17fSx0aGlzLnNjcm9sbExlZnQ9MCx0aGlzLm9wdGlvbnNMaXN0PW5ldyBhKHRoaXMudGFibGUsImNvbHVtbiBkZWZpbml0aW9uIixpKSx0aGlzLnJlZHJhd0Jsb2NrPSExLHRoaXMucmVkcmF3QmxvY2tVcGRhdGU9bnVsbCx0aGlzLnJlbmRlcmVyPW51bGx9aW5pdGlhbGl6ZSgpe3RoaXMuaW5pdGlhbGl6ZVJlbmRlcmVyKCksdGhpcy5oZWFkZXJzRWxlbWVudD10aGlzLmNyZWF0ZUhlYWRlcnNFbGVtZW50KCksdGhpcy5jb250ZW50c0VsZW1lbnQ9dGhpcy5jcmVhdGVIZWFkZXJDb250ZW50c0VsZW1lbnQoKSx0aGlzLmVsZW1lbnQ9dGhpcy5jcmVhdGVIZWFkZXJFbGVtZW50KCksdGhpcy5jb250ZW50c0VsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuaGVhZGVyc0VsZW1lbnQsdGhpcy5jb250ZW50c0VsZW1lbnQuZmlyc3RDaGlsZCksdGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLmNvbnRlbnRzRWxlbWVudCx0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCksdGhpcy5pbml0aWFsaXplU2Nyb2xsV2hlZWxXYXRjaGVyKCksdGhpcy5zdWJzY3JpYmUoInNjcm9sbC1ob3Jpem9udGFsIix0aGlzLnNjcm9sbEhvcml6b250YWwuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInNjcm9sbGJhci12ZXJ0aWNhbCIsdGhpcy5wYWRWZXJ0aWNhbFNjcm9sbGJhci5iaW5kKHRoaXMpKX1wYWRWZXJ0aWNhbFNjcm9sbGJhcihlKXt0aGlzLnRhYmxlLnJ0bD90aGlzLmhlYWRlcnNFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQ9ZSsicHgiOnRoaXMuaGVhZGVyc0VsZW1lbnQuc3R5bGUubWFyZ2luUmlnaHQ9ZSsicHgifWluaXRpYWxpemVSZW5kZXJlcigpe3ZhciBlLHQ9e3ZpcnR1YWw6ZCxiYXNpYzpofTsoZT0ic3RyaW5nIj09dHlwZW9mIHRoaXMudGFibGUub3B0aW9ucy5yZW5kZXJIb3Jpem9udGFsP3RbdGhpcy50YWJsZS5vcHRpb25zLnJlbmRlckhvcml6b250YWxdOnRoaXMudGFibGUub3B0aW9ucy5yZW5kZXJIb3Jpem9udGFsKT8odGhpcy5yZW5kZXJlcj1uZXcgZSh0aGlzLnRhYmxlLHRoaXMuZWxlbWVudCx0aGlzLnRhYmxlRWxlbWVudCksdGhpcy5yZW5kZXJlci5pbml0aWFsaXplKCkpOmNvbnNvbGUuZXJyb3IoIlVuYWJsZSB0byBmaW5kIG1hdGNoaW5nIHJlbmRlcmVyOiIsdGhpcy50YWJsZS5vcHRpb25zLnJlbmRlckhvcml6b250YWwpfWNyZWF0ZUhlYWRlcnNFbGVtZW50KCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWhlYWRlcnMiKSxlLnNldEF0dHJpYnV0ZSgicm9sZSIsInJvdyIpLGV9Y3JlYXRlSGVhZGVyQ29udGVudHNFbGVtZW50KCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWhlYWRlci1jb250ZW50cyIpLGUuc2V0QXR0cmlidXRlKCJyb2xlIiwicm93Z3JvdXAiKSxlfWNyZWF0ZUhlYWRlckVsZW1lbnQoKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItaGVhZGVyIiksZS5zZXRBdHRyaWJ1dGUoInJvbGUiLCJyb3dncm91cCIpLHRoaXMudGFibGUub3B0aW9ucy5oZWFkZXJWaXNpYmxlfHxlLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1oZWFkZXItaGlkZGVuIiksZX1nZXRFbGVtZW50KCl7cmV0dXJuIHRoaXMuZWxlbWVudH1nZXRDb250ZW50c0VsZW1lbnQoKXtyZXR1cm4gdGhpcy5jb250ZW50c0VsZW1lbnR9Z2V0SGVhZGVyc0VsZW1lbnQoKXtyZXR1cm4gdGhpcy5oZWFkZXJzRWxlbWVudH1zY3JvbGxIb3Jpem9udGFsKGUpe3RoaXMuY29udGVudHNFbGVtZW50LnNjcm9sbExlZnQ9ZSx0aGlzLnNjcm9sbExlZnQ9ZSx0aGlzLnJlbmRlcmVyLnNjcm9sbENvbHVtbnMoZSl9aW5pdGlhbGl6ZVNjcm9sbFdoZWVsV2F0Y2hlcigpe3RoaXMuY29udGVudHNFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoIndoZWVsIiwoZT0+e3ZhciB0O2UuZGVsdGFYJiYodD10aGlzLmNvbnRlbnRzRWxlbWVudC5zY3JvbGxMZWZ0K2UuZGVsdGFYLHRoaXMudGFibGUucm93TWFuYWdlci5zY3JvbGxIb3Jpem9udGFsKHQpLHRoaXMudGFibGUuY29sdW1uTWFuYWdlci5zY3JvbGxIb3Jpem9udGFsKHQpKX0pKX1nZW5lcmF0ZUNvbHVtbnNGcm9tUm93RGF0YShlKXt2YXIgdCxpLHM9W10sbz10aGlzLnRhYmxlLm9wdGlvbnMuYXV0b0NvbHVtbnNEZWZpbml0aW9ucztpZihlJiZlLmxlbmd0aCl7Zm9yKHZhciBuIGluIHQ9ZVswXSl7bGV0IGU9e2ZpZWxkOm4sdGl0bGU6bn0sbz10W25dO3N3aXRjaCh0eXBlb2Ygbyl7Y2FzZSJ1bmRlZmluZWQiOmk9InN0cmluZyI7YnJlYWs7Y2FzZSJib29sZWFuIjppPSJib29sZWFuIjticmVhaztjYXNlIm9iamVjdCI6aT1BcnJheS5pc0FycmF5KG8pPyJhcnJheSI6InN0cmluZyI7YnJlYWs7ZGVmYXVsdDppPWlzTmFOKG8pfHwiIj09PW8/by5tYXRjaCgvKCheWzAtOV0rW2Etel0rKXwoXlthLXpdK1swLTldKykpKyQvaSk/ImFscGhhbnVtIjoic3RyaW5nIjoibnVtYmVyIn1lLnNvcnRlcj1pLHMucHVzaChlKX1pZihvKXN3aXRjaCh0eXBlb2Ygbyl7Y2FzZSJmdW5jdGlvbiI6dGhpcy50YWJsZS5vcHRpb25zLmNvbHVtbnM9by5jYWxsKHRoaXMudGFibGUscyk7YnJlYWs7Y2FzZSJvYmplY3QiOkFycmF5LmlzQXJyYXkobyk/cy5mb3JFYWNoKChlPT57dmFyIHQ9by5maW5kKCh0PT50LmZpZWxkPT09ZS5maWVsZCkpO3QmJk9iamVjdC5hc3NpZ24oZSx0KX0pKTpzLmZvckVhY2goKGU9PntvW2UuZmllbGRdJiZPYmplY3QuYXNzaWduKGUsb1tlLmZpZWxkXSl9KSksdGhpcy50YWJsZS5vcHRpb25zLmNvbHVtbnM9c31lbHNlIHRoaXMudGFibGUub3B0aW9ucy5jb2x1bW5zPXM7dGhpcy5zZXRDb2x1bW5zKHRoaXMudGFibGUub3B0aW9ucy5jb2x1bW5zKX19c2V0Q29sdW1ucyhlLHQpe2Zvcig7dGhpcy5oZWFkZXJzRWxlbWVudC5maXJzdENoaWxkOyl0aGlzLmhlYWRlcnNFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuaGVhZGVyc0VsZW1lbnQuZmlyc3RDaGlsZCk7dGhpcy5jb2x1bW5zPVtdLHRoaXMuY29sdW1uc0J5SW5kZXg9W10sdGhpcy5jb2x1bW5zQnlGaWVsZD17fSx0aGlzLmRpc3BhdGNoKCJjb2x1bW5zLWxvYWRpbmciKSxlLmZvckVhY2goKChlLHQpPT57dGhpcy5fYWRkQ29sdW1uKGUpfSkpLHRoaXMuX3JlSW5kZXhDb2x1bW5zKCksdGhpcy5kaXNwYXRjaCgiY29sdW1ucy1sb2FkZWQiKSx0aGlzLnJlcmVuZGVyQ29sdW1ucyghMSwhMCksdGhpcy5yZWRyYXcoITApfV9hZGRDb2x1bW4oZSx0LGkpe3ZhciBzPW5ldyBuKGUsdGhpcyksbz1zLmdldEVsZW1lbnQoKSxyPWk/dGhpcy5maW5kQ29sdW1uSW5kZXgoaSk6aTtpZihpJiZyPi0xKXt2YXIgYT1pLmdldFRvcENvbHVtbigpLGw9dGhpcy5jb2x1bW5zLmluZGV4T2YoYSksaD1hLmdldEVsZW1lbnQoKTt0Pyh0aGlzLmNvbHVtbnMuc3BsaWNlKGwsMCxzKSxoLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG8saCkpOih0aGlzLmNvbHVtbnMuc3BsaWNlKGwrMSwwLHMpLGgucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobyxoLm5leHRTaWJsaW5nKSl9ZWxzZSB0Pyh0aGlzLmNvbHVtbnMudW5zaGlmdChzKSx0aGlzLmhlYWRlcnNFbGVtZW50Lmluc2VydEJlZm9yZShzLmdldEVsZW1lbnQoKSx0aGlzLmhlYWRlcnNFbGVtZW50LmZpcnN0Q2hpbGQpKToodGhpcy5jb2x1bW5zLnB1c2gocyksdGhpcy5oZWFkZXJzRWxlbWVudC5hcHBlbmRDaGlsZChzLmdldEVsZW1lbnQoKSkpO3JldHVybiBzLmNvbHVtblJlbmRlcmVkKCksc31yZWdpc3RlckNvbHVtbkZpZWxkKGUpe2UuZGVmaW5pdGlvbi5maWVsZCYmKHRoaXMuY29sdW1uc0J5RmllbGRbZS5kZWZpbml0aW9uLmZpZWxkXT1lKX1yZWdpc3RlckNvbHVtblBvc2l0aW9uKGUpe3RoaXMuY29sdW1uc0J5SW5kZXgucHVzaChlKX1fcmVJbmRleENvbHVtbnMoKXt0aGlzLmNvbHVtbnNCeUluZGV4PVtdLHRoaXMuY29sdW1ucy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnJlUmVnaXN0ZXJQb3NpdGlvbigpfSkpfXZlcnRpY2FsQWxpZ25IZWFkZXJzKCl7dmFyIGU9MDt0aGlzLnJlZHJhd0Jsb2NrfHwodGhpcy5oZWFkZXJzRWxlbWVudC5zdHlsZS5oZWlnaHQ9IiIsdGhpcy5jb2x1bW5zLmZvckVhY2goKGU9PntlLmNsZWFyVmVydGljYWxBbGlnbigpfSkpLHRoaXMuY29sdW1ucy5mb3JFYWNoKCh0PT57dmFyIGk9dC5nZXRIZWlnaHQoKTtpPmUmJihlPWkpfSkpLHRoaXMuaGVhZGVyc0VsZW1lbnQuc3R5bGUuaGVpZ2h0PWUrInB4Iix0aGlzLmNvbHVtbnMuZm9yRWFjaCgodD0+e3QudmVydGljYWxBbGlnbih0aGlzLnRhYmxlLm9wdGlvbnMuY29sdW1uSGVhZGVyVmVydEFsaWduLGUpfSkpLHRoaXMudGFibGUucm93TWFuYWdlci5hZGp1c3RUYWJsZVNpemUoKSl9ZmluZENvbHVtbihlKXt2YXIgaTtpZigib2JqZWN0IiE9dHlwZW9mIGUpcmV0dXJuIHRoaXMuY29sdW1uc0J5RmllbGRbZV18fCExO2lmKGUgaW5zdGFuY2VvZiBuKXJldHVybiBlO2lmKGUgaW5zdGFuY2VvZiB0KXJldHVybiBlLl9nZXRTZWxmKCl8fCExO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgSFRNTEVsZW1lbnQmJmUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCl7cmV0dXJuIGk9W10sdGhpcy5jb2x1bW5zLmZvckVhY2goKGU9PntpLnB1c2goZSksaT1pLmNvbmNhdChlLmdldENvbHVtbnMoITApKX0pKSxpLmZpbmQoKHQ9PnQuZWxlbWVudD09PWUpKXx8ITF9cmV0dXJuITF9Z2V0Q29sdW1uQnlGaWVsZChlKXtyZXR1cm4gdGhpcy5jb2x1bW5zQnlGaWVsZFtlXX1nZXRDb2x1bW5zQnlGaWVsZFJvb3QoZSl7dmFyIHQ9W107cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuY29sdW1uc0J5RmllbGQpLmZvckVhY2goKGk9PntpLnNwbGl0KCIuIilbMF09PT1lJiZ0LnB1c2godGhpcy5jb2x1bW5zQnlGaWVsZFtpXSl9KSksdH1nZXRDb2x1bW5CeUluZGV4KGUpe3JldHVybiB0aGlzLmNvbHVtbnNCeUluZGV4W2VdfWdldEZpcnN0VmlzaWJsZUNvbHVtbigpe3ZhciBlPXRoaXMuY29sdW1uc0J5SW5kZXguZmluZEluZGV4KChlPT5lLnZpc2libGUpKTtyZXR1cm4gZT4tMSYmdGhpcy5jb2x1bW5zQnlJbmRleFtlXX1nZXRDb2x1bW5zKCl7cmV0dXJuIHRoaXMuY29sdW1uc31maW5kQ29sdW1uSW5kZXgoZSl7cmV0dXJuIHRoaXMuY29sdW1uc0J5SW5kZXguZmluZEluZGV4KCh0PT5lPT09dCkpfWdldFJlYWxDb2x1bW5zKCl7cmV0dXJuIHRoaXMuY29sdW1uc0J5SW5kZXh9dHJhdmVyc2UoZSl7dGhpcy5jb2x1bW5zQnlJbmRleC5mb3JFYWNoKCgodCxpKT0+e2UodCxpKX0pKX1nZXREZWZpbml0aW9ucyhlKXt2YXIgdD1bXTtyZXR1cm4gdGhpcy5jb2x1bW5zQnlJbmRleC5mb3JFYWNoKChpPT57KCFlfHxlJiZpLnZpc2libGUpJiZ0LnB1c2goaS5nZXREZWZpbml0aW9uKCkpfSkpLHR9Z2V0RGVmaW5pdGlvblRyZWUoKXt2YXIgZT1bXTtyZXR1cm4gdGhpcy5jb2x1bW5zLmZvckVhY2goKHQ9PntlLnB1c2godC5nZXREZWZpbml0aW9uKCEwKSl9KSksZX1nZXRDb21wb25lbnRzKGUpe3ZhciB0PVtdO3JldHVybihlP3RoaXMuY29sdW1uczp0aGlzLmNvbHVtbnNCeUluZGV4KS5mb3JFYWNoKChlPT57dC5wdXNoKGUuZ2V0Q29tcG9uZW50KCkpfSkpLHR9Z2V0V2lkdGgoKXt2YXIgZT0wO3JldHVybiB0aGlzLmNvbHVtbnNCeUluZGV4LmZvckVhY2goKHQ9Pnt0LnZpc2libGUmJihlKz10LmdldFdpZHRoKCkpfSkpLGV9bW92ZUNvbHVtbihlLHQsaSl7dC5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUuZWxlbWVudCx0LmVsZW1lbnQpLGkmJnQuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0LmVsZW1lbnQsZS5lbGVtZW50KSx0aGlzLm1vdmVDb2x1bW5BY3R1YWwoZSx0LGkpLHRoaXMudmVydGljYWxBbGlnbkhlYWRlcnMoKSx0aGlzLnRhYmxlLnJvd01hbmFnZXIucmVpbml0aWFsaXplKCl9bW92ZUNvbHVtbkFjdHVhbChlLHQsaSl7ZS5wYXJlbnQuaXNHcm91cD90aGlzLl9tb3ZlQ29sdW1uSW5BcnJheShlLnBhcmVudC5jb2x1bW5zLGUsdCxpKTp0aGlzLl9tb3ZlQ29sdW1uSW5BcnJheSh0aGlzLmNvbHVtbnMsZSx0LGkpLHRoaXMuX21vdmVDb2x1bW5JbkFycmF5KHRoaXMuY29sdW1uc0J5SW5kZXgsZSx0LGksITApLHRoaXMucmVyZW5kZXJDb2x1bW5zKCEwKSx0aGlzLmRpc3BhdGNoKCJjb2x1bW4tbW92ZWQiLGUsdCxpKSx0aGlzLnN1YnNjcmliZWRFeHRlcm5hbCgiY29sdW1uTW92ZWQiKSYmdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJjb2x1bW5Nb3ZlZCIsZS5nZXRDb21wb25lbnQoKSx0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2V0Q29tcG9uZW50cygpKX1fbW92ZUNvbHVtbkluQXJyYXkoZSx0LGkscyxvKXt2YXIgbixyPWUuaW5kZXhPZih0KTtyPi0xJiYoZS5zcGxpY2UociwxKSwobj1lLmluZGV4T2YoaSkpPi0xP3MmJihuKz0xKTpuPXIsZS5zcGxpY2UobiwwLHQpLG8mJih0aGlzLmNoYWluKCJjb2x1bW4tbW92aW5nLXJvd3MiLFt0LGksc10sbnVsbCxbXSl8fFtdKS5jb25jYXQodGhpcy50YWJsZS5yb3dNYW5hZ2VyLnJvd3MpLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKGUuY2VsbHMubGVuZ3RoKXt2YXIgdD1lLmNlbGxzLnNwbGljZShyLDEpWzBdO2UuY2VsbHMuc3BsaWNlKG4sMCx0KX19KSkpfXNjcm9sbFRvQ29sdW1uKGUsdCxpKXt2YXIgcz0wLG89ZS5nZXRMZWZ0T2Zmc2V0KCksbj0wLHI9ZS5nZXRFbGVtZW50KCk7cmV0dXJuIG5ldyBQcm9taXNlKCgoYSxsKT0+e2lmKHZvaWQgMD09PXQmJih0PXRoaXMudGFibGUub3B0aW9ucy5zY3JvbGxUb0NvbHVtblBvc2l0aW9uKSx2b2lkIDA9PT1pJiYoaT10aGlzLnRhYmxlLm9wdGlvbnMuc2Nyb2xsVG9Db2x1bW5JZlZpc2libGUpLGUudmlzaWJsZSl7c3dpdGNoKHQpe2Nhc2UibWlkZGxlIjpjYXNlImNlbnRlciI6bj0tdGhpcy5lbGVtZW50LmNsaWVudFdpZHRoLzI7YnJlYWs7Y2FzZSJyaWdodCI6bj1yLmNsaWVudFdpZHRoLXRoaXMuaGVhZGVyc0VsZW1lbnQuY2xpZW50V2lkdGh9aWYoIWkmJm8+MCYmbytyLm9mZnNldFdpZHRoPHRoaXMuZWxlbWVudC5jbGllbnRXaWR0aClyZXR1cm4hMTtzPW8rbixzPU1hdGgubWF4KE1hdGgubWluKHMsdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmVsZW1lbnQuc2Nyb2xsV2lkdGgtdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmVsZW1lbnQuY2xpZW50V2lkdGgpLDApLHRoaXMudGFibGUucm93TWFuYWdlci5zY3JvbGxIb3Jpem9udGFsKHMpLHRoaXMuc2Nyb2xsSG9yaXpvbnRhbChzKSxhKCl9ZWxzZSBjb25zb2xlLndhcm4oIlNjcm9sbCBFcnJvciAtIENvbHVtbiBub3QgdmlzaWJsZSIpLGwoIlNjcm9sbCBFcnJvciAtIENvbHVtbiBub3QgdmlzaWJsZSIpfSkpfWdlbmVyYXRlQ2VsbHMoZSl7dmFyIHQ9W107cmV0dXJuIHRoaXMuY29sdW1uc0J5SW5kZXguZm9yRWFjaCgoaT0+e3QucHVzaChpLmdlbmVyYXRlQ2VsbChlKSl9KSksdH1nZXRGbGV4QmFzZVdpZHRoKCl7dmFyIGU9dGhpcy50YWJsZS5lbGVtZW50LmNsaWVudFdpZHRoLHQ9MDtyZXR1cm4gdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmVsZW1lbnQuc2Nyb2xsSGVpZ2h0PnRoaXMudGFibGUucm93TWFuYWdlci5lbGVtZW50LmNsaWVudEhlaWdodCYmKGUtPXRoaXMudGFibGUucm93TWFuYWdlci5lbGVtZW50Lm9mZnNldFdpZHRoLXRoaXMudGFibGUucm93TWFuYWdlci5lbGVtZW50LmNsaWVudFdpZHRoKSx0aGlzLmNvbHVtbnNCeUluZGV4LmZvckVhY2goKGZ1bmN0aW9uKGkpe3ZhciBzLG8sbjtpLnZpc2libGUmJihzPWkuZGVmaW5pdGlvbi53aWR0aHx8MCxvPXBhcnNlSW50KGkubWluV2lkdGgpLG49InN0cmluZyI9PXR5cGVvZiBzP3MuaW5kZXhPZigiJSIpPi0xP2UvMTAwKnBhcnNlSW50KHMpOnBhcnNlSW50KHMpOnMsdCs9bj5vP246byl9KSksdH1hZGRDb2x1bW4oZSx0LGkpe3JldHVybiBuZXcgUHJvbWlzZSgoKHMsbyk9Pnt2YXIgbj10aGlzLl9hZGRDb2x1bW4oZSx0LGkpO3RoaXMuX3JlSW5kZXhDb2x1bW5zKCksdGhpcy5kaXNwYXRjaCgiY29sdW1uLWFkZCIsZSx0LGkpLCJmaXRDb2x1bW5zIiE9dGhpcy5sYXlvdXRNb2RlKCkmJm4ucmVpbml0aWFsaXplV2lkdGgoKSx0aGlzLnJlZHJhdyghMCksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLnJlaW5pdGlhbGl6ZSgpLHRoaXMucmVyZW5kZXJDb2x1bW5zKCkscyhuKX0pKX1kZXJlZ2lzdGVyQ29sdW1uKGUpe3ZhciB0LGk9ZS5nZXRGaWVsZCgpO2kmJmRlbGV0ZSB0aGlzLmNvbHVtbnNCeUZpZWxkW2ldLCh0PXRoaXMuY29sdW1uc0J5SW5kZXguaW5kZXhPZihlKSk+LTEmJnRoaXMuY29sdW1uc0J5SW5kZXguc3BsaWNlKHQsMSksKHQ9dGhpcy5jb2x1bW5zLmluZGV4T2YoZSkpPi0xJiZ0aGlzLmNvbHVtbnMuc3BsaWNlKHQsMSksdGhpcy52ZXJ0aWNhbEFsaWduSGVhZGVycygpLHRoaXMucmVkcmF3KCl9cmVyZW5kZXJDb2x1bW5zKGUsdCl7dGhpcy5yZWRyYXdCbG9jaz8oITE9PT1lfHwhMD09PWUmJm51bGw9PT10aGlzLnJlZHJhd0Jsb2NrVXBkYXRlKSYmKHRoaXMucmVkcmF3QmxvY2tVcGRhdGU9ZSk6dGhpcy5yZW5kZXJlci5yZXJlbmRlckNvbHVtbnMoZSx0KX1ibG9ja1JlZHJhdygpe3RoaXMucmVkcmF3QmxvY2s9ITAsdGhpcy5yZWRyYXdCbG9ja1VwZGF0ZT1udWxsfXJlc3RvcmVSZWRyYXcoKXt0aGlzLnJlZHJhd0Jsb2NrPSExLHRoaXMudmVydGljYWxBbGlnbkhlYWRlcnMoKSx0aGlzLnJlbmRlcmVyLnJlcmVuZGVyQ29sdW1ucyh0aGlzLnJlZHJhd0Jsb2NrVXBkYXRlKX1yZWRyYXcoZSl7ci5lbFZpc2libGUodGhpcy5lbGVtZW50KSYmdGhpcy52ZXJ0aWNhbEFsaWduSGVhZGVycygpLGUmJih0aGlzLnRhYmxlLnJvd01hbmFnZXIucmVzZXRTY3JvbGwoKSx0aGlzLnRhYmxlLnJvd01hbmFnZXIucmVpbml0aWFsaXplKCkpLHRoaXMuY29uZmlybSgidGFibGUtcmVkcmF3aW5nIixlKXx8dGhpcy5sYXlvdXRSZWZyZXNoKGUpLHRoaXMuZGlzcGF0Y2goInRhYmxlLXJlZHJhdyIsZSksdGhpcy50YWJsZS5mb290ZXJNYW5hZ2VyLnJlZHJhdygpfX1jbGFzcyB1e2NvbnN0cnVjdG9yKGUpe3JldHVybiB0aGlzLl9yb3c9ZSxuZXcgUHJveHkodGhpcyx7Z2V0OmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gdm9pZCAwIT09ZVt0XT9lW3RdOmUuX3Jvdy50YWJsZS5jb21wb25lbnRGdW5jdGlvbkJpbmRlci5oYW5kbGUoInJvdyIsZS5fcm93LHQpfX0pfWdldERhdGEoZSl7cmV0dXJuIHRoaXMuX3Jvdy5nZXREYXRhKGUpfWdldEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fcm93LmdldEVsZW1lbnQoKX1nZXRDZWxscygpe3ZhciBlPVtdO3JldHVybiB0aGlzLl9yb3cuZ2V0Q2VsbHMoKS5mb3JFYWNoKChmdW5jdGlvbih0KXtlLnB1c2godC5nZXRDb21wb25lbnQoKSl9KSksZX1nZXRDZWxsKGUpe3ZhciB0PXRoaXMuX3Jvdy5nZXRDZWxsKGUpO3JldHVybiEhdCYmdC5nZXRDb21wb25lbnQoKX1nZXRJbmRleCgpe3JldHVybiB0aGlzLl9yb3cuZ2V0RGF0YSgiZGF0YSIpW3RoaXMuX3Jvdy50YWJsZS5vcHRpb25zLmluZGV4XX1nZXRQb3NpdGlvbigpe3JldHVybiB0aGlzLl9yb3cuZ2V0UG9zaXRpb24oKX13YXRjaFBvc2l0aW9uKGUpe3JldHVybiB0aGlzLl9yb3cud2F0Y2hQb3NpdGlvbihlKX1kZWxldGUoKXtyZXR1cm4gdGhpcy5fcm93LmRlbGV0ZSgpfXNjcm9sbFRvKGUsdCl7cmV0dXJuIHRoaXMuX3Jvdy50YWJsZS5yb3dNYW5hZ2VyLnNjcm9sbFRvUm93KHRoaXMuX3JvdyxlLHQpfW1vdmUoZSx0KXt0aGlzLl9yb3cubW92ZVRvUm93KGUsdCl9dXBkYXRlKGUpe3JldHVybiB0aGlzLl9yb3cudXBkYXRlRGF0YShlKX1ub3JtYWxpemVIZWlnaHQoKXt0aGlzLl9yb3cubm9ybWFsaXplSGVpZ2h0KCEwKX1fZ2V0U2VsZigpe3JldHVybiB0aGlzLl9yb3d9cmVmb3JtYXQoKXtyZXR1cm4gdGhpcy5fcm93LnJlaW5pdGlhbGl6ZSgpfWdldFRhYmxlKCl7cmV0dXJuIHRoaXMuX3Jvdy50YWJsZX1nZXROZXh0Um93KCl7dmFyIGU9dGhpcy5fcm93Lm5leHRSb3coKTtyZXR1cm4gZT9lLmdldENvbXBvbmVudCgpOmV9Z2V0UHJldlJvdygpe3ZhciBlPXRoaXMuX3Jvdy5wcmV2Um93KCk7cmV0dXJuIGU/ZS5nZXRDb21wb25lbnQoKTplfX1jbGFzcyBwIGV4dGVuZHMgZXtjb25zdHJ1Y3RvcihlLHQsaT0icm93Iil7c3VwZXIodC50YWJsZSksdGhpcy5wYXJlbnQ9dCx0aGlzLmRhdGE9e30sdGhpcy50eXBlPWksdGhpcy5lbGVtZW50PSExLHRoaXMubW9kdWxlcz17fSx0aGlzLmNlbGxzPVtdLHRoaXMuaGVpZ2h0PTAsdGhpcy5oZWlnaHRTdHlsZWQ9IiIsdGhpcy5tYW51YWxIZWlnaHQ9ITEsdGhpcy5vdXRlckhlaWdodD0wLHRoaXMuaW5pdGlhbGl6ZWQ9ITEsdGhpcy5oZWlnaHRJbml0aWFsaXplZD0hMSx0aGlzLnBvc2l0aW9uPTAsdGhpcy5wb3NpdGlvbldhdGNoZXJzPVtdLHRoaXMuY29tcG9uZW50PW51bGwsdGhpcy5jcmVhdGVkPSExLHRoaXMuc2V0RGF0YShlKX1jcmVhdGUoKXt0aGlzLmNyZWF0ZWR8fCh0aGlzLmNyZWF0ZWQ9ITAsdGhpcy5nZW5lcmF0ZUVsZW1lbnQoKSl9Y3JlYXRlRWxlbWVudCgpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2UuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXJvdyIpLGUuc2V0QXR0cmlidXRlKCJyb2xlIiwicm93IiksdGhpcy5lbGVtZW50PWV9Z2V0RWxlbWVudCgpe3JldHVybiB0aGlzLmNyZWF0ZSgpLHRoaXMuZWxlbWVudH1kZXRhY2hFbGVtZW50KCl7dGhpcy5lbGVtZW50JiZ0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSYmdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KX1nZW5lcmF0ZUVsZW1lbnQoKXt0aGlzLmNyZWF0ZUVsZW1lbnQoKSx0aGlzLmRpc3BhdGNoKCJyb3ctaW5pdCIsdGhpcyl9Z2VuZXJhdGVDZWxscygpe3RoaXMuY2VsbHM9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmdlbmVyYXRlQ2VsbHModGhpcyl9aW5pdGlhbGl6ZShlKXtpZih0aGlzLmNyZWF0ZSgpLCF0aGlzLmluaXRpYWxpemVkfHxlKXtmb3IodGhpcy5kZWxldGVDZWxscygpO3RoaXMuZWxlbWVudC5maXJzdENoaWxkOyl0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpO3RoaXMuZGlzcGF0Y2goInJvdy1sYXlvdXQtYmVmb3JlIix0aGlzKSx0aGlzLmdlbmVyYXRlQ2VsbHMoKSx0aGlzLmluaXRpYWxpemVkPSEwLHRoaXMudGFibGUuY29sdW1uTWFuYWdlci5yZW5kZXJlci5yZW5kZXJSb3dDZWxscyh0aGlzKSxlJiZ0aGlzLm5vcm1hbGl6ZUhlaWdodCgpLHRoaXMuZGlzcGF0Y2goInJvdy1sYXlvdXQiLHRoaXMpLHRoaXMudGFibGUub3B0aW9ucy5yb3dGb3JtYXR0ZXImJnRoaXMudGFibGUub3B0aW9ucy5yb3dGb3JtYXR0ZXIodGhpcy5nZXRDb21wb25lbnQoKSksdGhpcy5kaXNwYXRjaCgicm93LWxheW91dC1hZnRlciIsdGhpcyl9ZWxzZSB0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIucmVuZGVyZXIucmVyZW5kZXJSb3dDZWxscyh0aGlzKX1yZWluaXRpYWxpemVIZWlnaHQoKXt0aGlzLmhlaWdodEluaXRpYWxpemVkPSExLHRoaXMuZWxlbWVudCYmbnVsbCE9PXRoaXMuZWxlbWVudC5vZmZzZXRQYXJlbnQmJnRoaXMubm9ybWFsaXplSGVpZ2h0KCEwKX1kZWluaXRpYWxpemUoKXt0aGlzLmluaXRpYWxpemVkPSExfWRlaW5pdGlhbGl6ZUhlaWdodCgpe3RoaXMuaGVpZ2h0SW5pdGlhbGl6ZWQ9ITF9cmVpbml0aWFsaXplKGUpe3RoaXMuaW5pdGlhbGl6ZWQ9ITEsdGhpcy5oZWlnaHRJbml0aWFsaXplZD0hMSx0aGlzLm1hbnVhbEhlaWdodHx8KHRoaXMuaGVpZ2h0PTAsdGhpcy5oZWlnaHRTdHlsZWQ9IiIpLHRoaXMuZWxlbWVudCYmbnVsbCE9PXRoaXMuZWxlbWVudC5vZmZzZXRQYXJlbnQmJnRoaXMuaW5pdGlhbGl6ZSghMCksdGhpcy5kaXNwYXRjaCgicm93LXJlbGF5b3V0Iix0aGlzKX1jYWxjSGVpZ2h0KGUpe3ZhciB0LGk9MDt0aGlzLnRhYmxlLm9wdGlvbnMucm93SGVpZ2h0P3RoaXMuaGVpZ2h0PXRoaXMudGFibGUub3B0aW9ucy5yb3dIZWlnaHQ6KHQ9dGhpcy50YWJsZS5vcHRpb25zLnJlc2l6YWJsZVJvd3M/dGhpcy5lbGVtZW50LmNsaWVudEhlaWdodDowLHRoaXMuY2VsbHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRIZWlnaHQoKTt0PmkmJihpPXQpfSkpLHRoaXMuaGVpZ2h0PWU/TWF0aC5tYXgoaSx0KTp0aGlzLm1hbnVhbEhlaWdodD90aGlzLmhlaWdodDpNYXRoLm1heChpLHQpKSx0aGlzLmhlaWdodFN0eWxlZD10aGlzLmhlaWdodD90aGlzLmhlaWdodCsicHgiOiIiLHRoaXMub3V0ZXJIZWlnaHQ9dGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodH1zZXRDZWxsSGVpZ2h0KCl7dGhpcy5jZWxscy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnNldEhlaWdodCgpfSkpLHRoaXMuaGVpZ2h0SW5pdGlhbGl6ZWQ9ITB9Y2xlYXJDZWxsSGVpZ2h0KCl7dGhpcy5jZWxscy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmNsZWFySGVpZ2h0KCl9KSl9bm9ybWFsaXplSGVpZ2h0KGUpe2UmJiF0aGlzLnRhYmxlLm9wdGlvbnMucm93SGVpZ2h0JiZ0aGlzLmNsZWFyQ2VsbEhlaWdodCgpLHRoaXMuY2FsY0hlaWdodChlKSx0aGlzLnNldENlbGxIZWlnaHQoKX1zZXRIZWlnaHQoZSx0KXsodGhpcy5oZWlnaHQhPWV8fHQpJiYodGhpcy5tYW51YWxIZWlnaHQ9ITAsdGhpcy5oZWlnaHQ9ZSx0aGlzLmhlaWdodFN0eWxlZD1lP2UrInB4IjoiIix0aGlzLnNldENlbGxIZWlnaHQoKSx0aGlzLm91dGVySGVpZ2h0PXRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQpfWdldEhlaWdodCgpe3JldHVybiB0aGlzLm91dGVySGVpZ2h0fWdldFdpZHRoKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aH1kZWxldGVDZWxsKGUpe3ZhciB0PXRoaXMuY2VsbHMuaW5kZXhPZihlKTt0Pi0xJiZ0aGlzLmNlbGxzLnNwbGljZSh0LDEpfXNldERhdGEoZSl7dGhpcy5kYXRhPXRoaXMuY2hhaW4oInJvdy1kYXRhLWluaXQtYmVmb3JlIixbdGhpcyxlXSx2b2lkIDAsZSksdGhpcy5kaXNwYXRjaCgicm93LWRhdGEtaW5pdC1hZnRlciIsdGhpcyl9dXBkYXRlRGF0YShlKXt2YXIgdCxpPXRoaXMuZWxlbWVudCYmci5lbFZpc2libGUodGhpcy5lbGVtZW50KSxzPXt9O3JldHVybiBuZXcgUHJvbWlzZSgoKG8sbik9Pnsic3RyaW5nIj09dHlwZW9mIGUmJihlPUpTT04ucGFyc2UoZSkpLHRoaXMuZGlzcGF0Y2goInJvdy1kYXRhLXNhdmUtYmVmb3JlIix0aGlzKSx0aGlzLnN1YnNjcmliZWQoInJvdy1kYXRhLWNoYW5naW5nIikmJihzPU9iamVjdC5hc3NpZ24ocyx0aGlzLmRhdGEpLHM9T2JqZWN0LmFzc2lnbihzLGUpKSx0PXRoaXMuY2hhaW4oInJvdy1kYXRhLWNoYW5naW5nIixbdGhpcyxzLGVdLG51bGwsZSk7Zm9yKGxldCBlIGluIHQpdGhpcy5kYXRhW2VdPXRbZV07dGhpcy5kaXNwYXRjaCgicm93LWRhdGEtc2F2ZS1hZnRlciIsdGhpcyk7Zm9yKGxldCBzIGluIGUpe3RoaXMudGFibGUuY29sdW1uTWFuYWdlci5nZXRDb2x1bW5zQnlGaWVsZFJvb3QocykuZm9yRWFjaCgoZT0+e2xldCBzPXRoaXMuZ2V0Q2VsbChlLmdldEZpZWxkKCkpO2lmKHMpe2xldCBvPWUuZ2V0RmllbGRWYWx1ZSh0KTtzLmdldFZhbHVlKCkhPT1vJiYocy5zZXRWYWx1ZVByb2Nlc3NEYXRhKG8pLGkmJnMuY2VsbFJlbmRlcmVkKCkpfX0pKX1pPyh0aGlzLm5vcm1hbGl6ZUhlaWdodCghMCksdGhpcy50YWJsZS5vcHRpb25zLnJvd0Zvcm1hdHRlciYmdGhpcy50YWJsZS5vcHRpb25zLnJvd0Zvcm1hdHRlcih0aGlzLmdldENvbXBvbmVudCgpKSk6KHRoaXMuaW5pdGlhbGl6ZWQ9ITEsdGhpcy5oZWlnaHQ9MCx0aGlzLmhlaWdodFN0eWxlZD0iIiksdGhpcy5kaXNwYXRjaCgicm93LWRhdGEtY2hhbmdlZCIsdGhpcyxpLGUpLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgicm93VXBkYXRlZCIsdGhpcy5nZXRDb21wb25lbnQoKSksdGhpcy5zdWJzY3JpYmVkRXh0ZXJuYWwoImRhdGFDaGFuZ2VkIikmJnRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgiZGF0YUNoYW5nZWQiLHRoaXMudGFibGUucm93TWFuYWdlci5nZXREYXRhKCkpLG8oKX0pKX1nZXREYXRhKGUpe3JldHVybiBlP3RoaXMuY2hhaW4oInJvdy1kYXRhLXJldHJpZXZlIixbdGhpcyxlXSxudWxsLHRoaXMuZGF0YSk6dGhpcy5kYXRhfWdldENlbGwoZSl7cmV0dXJuIGU9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmZpbmRDb2x1bW4oZSksdGhpcy5pbml0aWFsaXplZHx8MCE9PXRoaXMuY2VsbHMubGVuZ3RofHx0aGlzLmdlbmVyYXRlQ2VsbHMoKSx0aGlzLmNlbGxzLmZpbmQoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbHVtbj09PWV9KSl9Z2V0Q2VsbEluZGV4KGUpe3JldHVybiB0aGlzLmNlbGxzLmZpbmRJbmRleCgoZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1lfSkpfWZpbmRDZWxsKGUpe3JldHVybiB0aGlzLmNlbGxzLmZpbmQoKHQ9PnQuZWxlbWVudD09PWUpKX1nZXRDZWxscygpe3JldHVybiB0aGlzLmluaXRpYWxpemVkfHwwIT09dGhpcy5jZWxscy5sZW5ndGh8fHRoaXMuZ2VuZXJhdGVDZWxscygpLHRoaXMuY2VsbHN9bmV4dFJvdygpe3JldHVybiB0aGlzLnRhYmxlLnJvd01hbmFnZXIubmV4dERpc3BsYXlSb3codGhpcywhMCl8fCExfXByZXZSb3coKXtyZXR1cm4gdGhpcy50YWJsZS5yb3dNYW5hZ2VyLnByZXZEaXNwbGF5Um93KHRoaXMsITApfHwhMX1tb3ZlVG9Sb3coZSx0KXt2YXIgaT10aGlzLnRhYmxlLnJvd01hbmFnZXIuZmluZFJvdyhlKTtpPyh0aGlzLnRhYmxlLnJvd01hbmFnZXIubW92ZVJvd0FjdHVhbCh0aGlzLGksIXQpLHRoaXMudGFibGUucm93TWFuYWdlci5yZWZyZXNoQWN0aXZlRGF0YSgiZGlzcGxheSIsITEsITApKTpjb25zb2xlLndhcm4oIk1vdmUgRXJyb3IgLSBObyBtYXRjaGluZyByb3cgZm91bmQ6IixlKX1kZWxldGUoKXtyZXR1cm4gdGhpcy5kaXNwYXRjaCgicm93LWRlbGV0ZSIsdGhpcyksdGhpcy5kZWxldGVBY3R1YWwoKSxQcm9taXNlLnJlc29sdmUoKX1kZWxldGVBY3R1YWwoZSl7dGhpcy5kZXRhY2hNb2R1bGVzKCksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmRlbGV0ZVJvdyh0aGlzLGUpLHRoaXMuZGVsZXRlQ2VsbHMoKSx0aGlzLmluaXRpYWxpemVkPSExLHRoaXMuaGVpZ2h0SW5pdGlhbGl6ZWQ9ITEsdGhpcy5lbGVtZW50PSExLHRoaXMuZGlzcGF0Y2goInJvdy1kZWxldGVkIix0aGlzKX1kZXRhY2hNb2R1bGVzKCl7dGhpcy5kaXNwYXRjaCgicm93LWRlbGV0aW5nIix0aGlzKX1kZWxldGVDZWxscygpe3ZhciBlPXRoaXMuY2VsbHMubGVuZ3RoO2ZvcihsZXQgdD0wO3Q8ZTt0KyspdGhpcy5jZWxsc1swXS5kZWxldGUoKX13aXBlKCl7aWYodGhpcy5kZXRhY2hNb2R1bGVzKCksdGhpcy5kZWxldGVDZWxscygpLHRoaXMuZWxlbWVudCl7Zm9yKDt0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZDspdGhpcy5lbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudC5maXJzdENoaWxkKTt0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSYmdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KX10aGlzLmVsZW1lbnQ9ITEsdGhpcy5tb2R1bGVzPXt9fWlzRGlzcGxheWVkKCl7cmV0dXJuIHRoaXMudGFibGUucm93TWFuYWdlci5nZXREaXNwbGF5Um93cygpLmluY2x1ZGVzKHRoaXMpfWdldFBvc2l0aW9uKCl7cmV0dXJuISF0aGlzLmlzRGlzcGxheWVkKCkmJnRoaXMucG9zaXRpb259c2V0UG9zaXRpb24oZSl7ZSE9dGhpcy5wb3NpdGlvbiYmKHRoaXMucG9zaXRpb249ZSx0aGlzLnBvc2l0aW9uV2F0Y2hlcnMuZm9yRWFjaCgoZT0+e2UodGhpcy5wb3NpdGlvbil9KSkpfXdhdGNoUG9zaXRpb24oZSl7dGhpcy5wb3NpdGlvbldhdGNoZXJzLnB1c2goZSksZSh0aGlzLnBvc2l0aW9uKX1nZXRHcm91cCgpe3JldHVybiB0aGlzLm1vZHVsZXMuZ3JvdXB8fCExfWdldENvbXBvbmVudCgpe3JldHVybiB0aGlzLmNvbXBvbmVudHx8KHRoaXMuY29tcG9uZW50PW5ldyB1KHRoaXMpKSx0aGlzLmNvbXBvbmVudH19Y2xhc3MgbSBleHRlbmRzIGx7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy52ZXJ0aWNhbEZpbGxNb2RlPSJmaWxsIix0aGlzLnNjcm9sbFRvcD0wLHRoaXMuc2Nyb2xsTGVmdD0wLHRoaXMuc2Nyb2xsVG9wPTAsdGhpcy5zY3JvbGxMZWZ0PTB9Y2xlYXJSb3dzKCl7Zm9yKHZhciBlPXRoaXMudGFibGVFbGVtZW50O2UuZmlyc3RDaGlsZDspZS5yZW1vdmVDaGlsZChlLmZpcnN0Q2hpbGQpO2Uuc2Nyb2xsVG9wPTAsZS5zY3JvbGxMZWZ0PTAsZS5zdHlsZS5taW5XaWR0aD0iIixlLnN0eWxlLm1pbkhlaWdodD0iIixlLnN0eWxlLmRpc3BsYXk9IiIsZS5zdHlsZS52aXNpYmlsaXR5PSIifXJlbmRlclJvd3MoKXt2YXIgZT10aGlzLnRhYmxlRWxlbWVudCx0PSEwLGk9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3RoaXMucm93cygpLmZvckVhY2goKChlLHMpPT57dGhpcy5zdHlsZVJvdyhlLHMpLGUuaW5pdGlhbGl6ZSghMCksImdyb3VwIiE9PWUudHlwZSYmKHQ9ITEpLGkuYXBwZW5kQ2hpbGQoZS5nZXRFbGVtZW50KCkpfSkpLGUuYXBwZW5kQ2hpbGQoaSksZS5zdHlsZS5taW5XaWR0aD10P3RoaXMudGFibGUuY29sdW1uTWFuYWdlci5nZXRXaWR0aCgpKyJweCI6IiJ9cmVyZW5kZXJSb3dzKGUpe3RoaXMuY2xlYXJSb3dzKCksZSYmZSgpLHRoaXMucmVuZGVyUm93cygpfXNjcm9sbFRvUm93TmVhcmVzdFRvcChlKXt2YXIgdD1yLmVsT2Zmc2V0KGUuZ2V0RWxlbWVudCgpKS50b3A7cmV0dXJuIShNYXRoLmFicyh0aGlzLmVsZW1lbnRWZXJ0aWNhbC5zY3JvbGxUb3AtdCk+TWF0aC5hYnModGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsVG9wK3RoaXMuZWxlbWVudFZlcnRpY2FsLmNsaWVudEhlaWdodC10KSl9c2Nyb2xsVG9Sb3coZSl7dmFyIHQ9ZS5nZXRFbGVtZW50KCk7dGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsVG9wPXIuZWxPZmZzZXQodCkudG9wLXIuZWxPZmZzZXQodGhpcy5lbGVtZW50VmVydGljYWwpLnRvcCt0aGlzLmVsZW1lbnRWZXJ0aWNhbC5zY3JvbGxUb3B9dmlzaWJsZVJvd3MoZSl7cmV0dXJuIHRoaXMucm93cygpfX1jbGFzcyBnIGV4dGVuZHMgbHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnZlcnRpY2FsRmlsbE1vZGU9ImZpbGwiLHRoaXMuc2Nyb2xsVG9wPTAsdGhpcy5zY3JvbGxMZWZ0PTAsdGhpcy52RG9tUm93SGVpZ2h0PTIwLHRoaXMudkRvbVRvcD0wLHRoaXMudkRvbUJvdHRvbT0wLHRoaXMudkRvbVNjcm9sbFBvc1RvcD0wLHRoaXMudkRvbVNjcm9sbFBvc0JvdHRvbT0wLHRoaXMudkRvbVRvcFBhZD0wLHRoaXMudkRvbUJvdHRvbVBhZD0wLHRoaXMudkRvbU1heFJlbmRlckNoYWluPTkwLHRoaXMudkRvbVdpbmRvd0J1ZmZlcj0wLHRoaXMudkRvbVdpbmRvd01pblRvdGFsUm93cz0yMCx0aGlzLnZEb21XaW5kb3dNaW5NYXJnaW5Sb3dzPTUsdGhpcy52RG9tVG9wTmV3Um93cz1bXSx0aGlzLnZEb21Cb3R0b21OZXdSb3dzPVtdfWNsZWFyUm93cygpe2Zvcih2YXIgZT10aGlzLnRhYmxlRWxlbWVudDtlLmZpcnN0Q2hpbGQ7KWUucmVtb3ZlQ2hpbGQoZS5maXJzdENoaWxkKTtlLnN0eWxlLnBhZGRpbmdUb3A9IiIsZS5zdHlsZS5wYWRkaW5nQm90dG9tPSIiLGUuc3R5bGUubWluSGVpZ2h0PSIiLGUuc3R5bGUuZGlzcGxheT0iIixlLnN0eWxlLnZpc2liaWxpdHk9IiIsdGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsVG9wPTAsdGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsTGVmdD0wLHRoaXMuc2Nyb2xsVG9wPTAsdGhpcy5zY3JvbGxMZWZ0PTAsdGhpcy52RG9tVG9wPTAsdGhpcy52RG9tQm90dG9tPTAsdGhpcy52RG9tVG9wUGFkPTAsdGhpcy52RG9tQm90dG9tUGFkPTAsdGhpcy52RG9tU2Nyb2xsUG9zVG9wPTAsdGhpcy52RG9tU2Nyb2xsUG9zQm90dG9tPTB9cmVuZGVyUm93cygpe3RoaXMuX3ZpcnR1YWxSZW5kZXJGaWxsKCl9cmVyZW5kZXJSb3dzKGUpe2Zvcih2YXIgdD10aGlzLmVsZW1lbnRWZXJ0aWNhbC5zY3JvbGxUb3AsaT0hMSxzPSExLG89dGhpcy50YWJsZS5yb3dNYW5hZ2VyLnNjcm9sbExlZnQsbj10aGlzLnJvd3MoKSxyPXRoaXMudkRvbVRvcDtyPD10aGlzLnZEb21Cb3R0b207cisrKWlmKG5bcl0pe3ZhciBhPXQtbltyXS5nZXRFbGVtZW50KCkub2Zmc2V0VG9wO2lmKCEoITE9PT1zfHxNYXRoLmFicyhhKTxzKSlicmVhaztzPWEsaT1yfW4uZm9yRWFjaCgoZT0+e2UuZGVpbml0aWFsaXplSGVpZ2h0KCl9KSksZSYmZSgpLHRoaXMucm93cygpLmxlbmd0aD90aGlzLl92aXJ0dWFsUmVuZGVyRmlsbCghMT09PWk/dGhpcy5yb3dzLmxlbmd0aC0xOmksITAsc3x8MCk6KHRoaXMuY2xlYXIoKSx0aGlzLnRhYmxlLnJvd01hbmFnZXIudGFibGVFbXB0eSgpKSx0aGlzLnNjcm9sbENvbHVtbnMobyl9c2Nyb2xsQ29sdW1ucyhlKXt0aGlzLnRhYmxlLnJvd01hbmFnZXIuc2Nyb2xsSG9yaXpvbnRhbChlKX1zY3JvbGxSb3dzKGUsdCl7dmFyIGk9ZS10aGlzLnZEb21TY3JvbGxQb3NUb3Ascz1lLXRoaXMudkRvbVNjcm9sbFBvc0JvdHRvbSxvPTIqdGhpcy52RG9tV2luZG93QnVmZmVyLG49dGhpcy5yb3dzKCk7aWYodGhpcy5zY3JvbGxUb3A9ZSwtaT5vfHxzPm8pe3ZhciByPXRoaXMudGFibGUucm93TWFuYWdlci5zY3JvbGxMZWZ0O3RoaXMuX3ZpcnR1YWxSZW5kZXJGaWxsKE1hdGguZmxvb3IodGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsVG9wL3RoaXMuZWxlbWVudFZlcnRpY2FsLnNjcm9sbEhlaWdodCpuLmxlbmd0aCkpLHRoaXMuc2Nyb2xsQ29sdW1ucyhyKX1lbHNlIHQ/KGk8MCYmdGhpcy5fYWRkVG9wUm93KG4sLWkpLHM8MCYmKHRoaXMudkRvbVNjcm9sbEhlaWdodC10aGlzLnNjcm9sbFRvcD50aGlzLnZEb21XaW5kb3dCdWZmZXI/dGhpcy5fcmVtb3ZlQm90dG9tUm93KG4sLXMpOnRoaXMudkRvbVNjcm9sbFBvc0JvdHRvbT10aGlzLnNjcm9sbFRvcCkpOihzPj0wJiZ0aGlzLl9hZGRCb3R0b21Sb3cobixzKSxpPj0wJiYodGhpcy5zY3JvbGxUb3A+dGhpcy52RG9tV2luZG93QnVmZmVyP3RoaXMuX3JlbW92ZVRvcFJvdyhuLGkpOnRoaXMudkRvbVNjcm9sbFBvc1RvcD10aGlzLnNjcm9sbFRvcCkpfXJlc2l6ZSgpe3RoaXMudkRvbVdpbmRvd0J1ZmZlcj10aGlzLnRhYmxlLm9wdGlvbnMucmVuZGVyVmVydGljYWxCdWZmZXJ8fHRoaXMuZWxlbWVudFZlcnRpY2FsLmNsaWVudEhlaWdodH1zY3JvbGxUb1Jvd05lYXJlc3RUb3AoZSl7dmFyIHQ9dGhpcy5yb3dzKCkuaW5kZXhPZihlKTtyZXR1cm4hKE1hdGguYWJzKHRoaXMudkRvbVRvcC10KT5NYXRoLmFicyh0aGlzLnZEb21Cb3R0b20tdCkpfXNjcm9sbFRvUm93KGUpe3ZhciB0PXRoaXMucm93cygpLmluZGV4T2YoZSk7dD4tMSYmdGhpcy5fdmlydHVhbFJlbmRlckZpbGwodCwhMCl9dmlzaWJsZVJvd3MoZSl7dmFyIHQ9dGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsVG9wLGk9dGhpcy5lbGVtZW50VmVydGljYWwuY2xpZW50SGVpZ2h0K3Qscz0hMSxvPTAsbj0wLHI9dGhpcy5yb3dzKCk7aWYoZSlvPXRoaXMudkRvbVRvcCxuPXRoaXMudkRvbUJvdHRvbTtlbHNlIGZvcih2YXIgYT10aGlzLnZEb21Ub3A7YTw9dGhpcy52RG9tQm90dG9tO2ErKylpZihyW2FdKWlmKHMpe2lmKCEoaS1yW2FdLmdldEVsZW1lbnQoKS5vZmZzZXRUb3A+PTApKWJyZWFrO249YX1lbHNlIGlmKHQtclthXS5nZXRFbGVtZW50KCkub2Zmc2V0VG9wPj0wKW89YTtlbHNle2lmKHM9ITAsIShpLXJbYV0uZ2V0RWxlbWVudCgpLm9mZnNldFRvcD49MCkpYnJlYWs7bj1hfXJldHVybiByLnNsaWNlKG8sbisxKX1fdmlydHVhbFJlbmRlckZpbGwoZSx0LGkpe3ZhciBzLG8sbj10aGlzLnRhYmxlRWxlbWVudCxhPXRoaXMuZWxlbWVudFZlcnRpY2FsLGw9MCxoPTAsZD0wLGM9MCx1PTAscD0wLG09dGhpcy5yb3dzKCksZz1tLmxlbmd0aCxiPTAsZj1bXSx2PTAsdz0wLEM9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmZpeGVkSGVpZ2h0LEU9dGhpcy5lbGVtZW50VmVydGljYWwuY2xpZW50SGVpZ2h0LHk9dGhpcy50YWJsZS5vcHRpb25zLnJvd0hlaWdodCxSPSEwO2lmKGk9aXx8MCxlPWV8fDApe2Zvcig7bi5maXJzdENoaWxkOyluLnJlbW92ZUNoaWxkKG4uZmlyc3RDaGlsZCk7KGM9KGctZSsxKSp0aGlzLnZEb21Sb3dIZWlnaHQpPEUmJihlLT1NYXRoLmNlaWwoKEUtYykvdGhpcy52RG9tUm93SGVpZ2h0KSk8MCYmKGU9MCksZS09bD1NYXRoLm1pbihNYXRoLm1heChNYXRoLmZsb29yKHRoaXMudkRvbVdpbmRvd0J1ZmZlci90aGlzLnZEb21Sb3dIZWlnaHQpLHRoaXMudkRvbVdpbmRvd01pbk1hcmdpblJvd3MpLGUpfWVsc2UgdGhpcy5jbGVhcigpO2lmKGcmJnIuZWxWaXNpYmxlKHRoaXMuZWxlbWVudFZlcnRpY2FsKSl7Zm9yKHRoaXMudkRvbVRvcD1lLHRoaXMudkRvbUJvdHRvbT1lLTEsQ3x8dGhpcy50YWJsZS5vcHRpb25zLm1heEhlaWdodD8oeSYmKHc9RS95K3RoaXMudkRvbVdpbmRvd0J1ZmZlci95KSx3PU1hdGgubWF4KHRoaXMudkRvbVdpbmRvd01pblRvdGFsUm93cyxNYXRoLmNlaWwodykpKTp3PWc7KHc9PWd8fGg8PUUrdGhpcy52RG9tV2luZG93QnVmZmVyfHx2PHRoaXMudkRvbVdpbmRvd01pblRvdGFsUm93cykmJnRoaXMudkRvbUJvdHRvbTxnLTE7KXtmb3IoZj1bXSxvPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxwPTA7cDx3JiZ0aGlzLnZEb21Cb3R0b208Zy0xOylzPW1bYj10aGlzLnZEb21Cb3R0b20rMV0sdGhpcy5zdHlsZVJvdyhzLGIpLHMuaW5pdGlhbGl6ZSgpLHMuaGVpZ2h0SW5pdGlhbGl6ZWR8fHRoaXMudGFibGUub3B0aW9ucy5yb3dIZWlnaHR8fHMuY2xlYXJDZWxsSGVpZ2h0KCksby5hcHBlbmRDaGlsZChzLmdldEVsZW1lbnQoKSksZi5wdXNoKHMpLHRoaXMudkRvbUJvdHRvbSsrLHArKztpZighZi5sZW5ndGgpYnJlYWs7bi5hcHBlbmRDaGlsZChvKSxmLmZvckVhY2goKGU9PntlLmhlaWdodEluaXRpYWxpemVkfHxlLmNhbGNIZWlnaHQoITApfSkpLGYuZm9yRWFjaCgoZT0+e2UuaGVpZ2h0SW5pdGlhbGl6ZWR8fGUuc2V0Q2VsbEhlaWdodCgpfSkpLGYuZm9yRWFjaCgoZT0+e2Q9ZS5nZXRIZWlnaHQoKSx2PGw/dSs9ZDpoKz1kLGQ+dGhpcy52RG9tV2luZG93QnVmZmVyJiYodGhpcy52RG9tV2luZG93QnVmZmVyPTIqZCksdisrfSkpLFI9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmFkanVzdFRhYmxlU2l6ZSgpLEU9dGhpcy5lbGVtZW50VmVydGljYWwuY2xpZW50SGVpZ2h0LFImJihDfHx0aGlzLnRhYmxlLm9wdGlvbnMubWF4SGVpZ2h0KSYmKHk9aC92LHc9TWF0aC5tYXgodGhpcy52RG9tV2luZG93TWluVG90YWxSb3dzLE1hdGguY2VpbChFL3krdGhpcy52RG9tV2luZG93QnVmZmVyL3kpKSl9ZT8odGhpcy52RG9tVG9wUGFkPXQ/dGhpcy52RG9tUm93SGVpZ2h0KnRoaXMudkRvbVRvcCtpOnRoaXMuc2Nyb2xsVG9wLXUsdGhpcy52RG9tQm90dG9tUGFkPXRoaXMudkRvbUJvdHRvbT09Zy0xPzA6TWF0aC5tYXgodGhpcy52RG9tU2Nyb2xsSGVpZ2h0LXRoaXMudkRvbVRvcFBhZC1oLXUsMCkpOih0aGlzLnZEb21Ub3BQYWQ9MCx0aGlzLnZEb21Sb3dIZWlnaHQ9TWF0aC5mbG9vcigoaCt1KS92KSx0aGlzLnZEb21Cb3R0b21QYWQ9dGhpcy52RG9tUm93SGVpZ2h0KihnLXRoaXMudkRvbUJvdHRvbS0xKSx0aGlzLnZEb21TY3JvbGxIZWlnaHQ9dStoK3RoaXMudkRvbUJvdHRvbVBhZC1FKSxuLnN0eWxlLnBhZGRpbmdUb3A9dGhpcy52RG9tVG9wUGFkKyJweCIsbi5zdHlsZS5wYWRkaW5nQm90dG9tPXRoaXMudkRvbUJvdHRvbVBhZCsicHgiLHQmJih0aGlzLnNjcm9sbFRvcD10aGlzLnZEb21Ub3BQYWQrdStpLSh0aGlzLmVsZW1lbnRWZXJ0aWNhbC5zY3JvbGxXaWR0aD50aGlzLmVsZW1lbnRWZXJ0aWNhbC5jbGllbnRXaWR0aD90aGlzLmVsZW1lbnRWZXJ0aWNhbC5vZmZzZXRIZWlnaHQtRTowKSksdGhpcy5zY3JvbGxUb3A9TWF0aC5taW4odGhpcy5zY3JvbGxUb3AsdGhpcy5lbGVtZW50VmVydGljYWwuc2Nyb2xsSGVpZ2h0LUUpLHRoaXMuZWxlbWVudFZlcnRpY2FsLnNjcm9sbFdpZHRoPnRoaXMuZWxlbWVudFZlcnRpY2FsLmNsaWVudFdpZHRoJiZ0JiYodGhpcy5zY3JvbGxUb3ArPXRoaXMuZWxlbWVudFZlcnRpY2FsLm9mZnNldEhlaWdodC1FKSx0aGlzLnZEb21TY3JvbGxQb3NUb3A9dGhpcy5zY3JvbGxUb3AsdGhpcy52RG9tU2Nyb2xsUG9zQm90dG9tPXRoaXMuc2Nyb2xsVG9wLGEuc2Nyb2xsVG9wPXRoaXMuc2Nyb2xsVG9wLHRoaXMuZGlzcGF0Y2goInJlbmRlci12aXJ0dWFsLWZpbGwiKX19X2FkZFRvcFJvdyhlLHQpe2Zvcih2YXIgaT10aGlzLnRhYmxlRWxlbWVudCxzPVtdLG89MCxuPXRoaXMudkRvbVRvcC0xLHI9MCxhPSEwO2E7KWlmKHRoaXMudkRvbVRvcCl7bGV0IGwsaCxkPWVbbl07ZCYmcjx0aGlzLnZEb21NYXhSZW5kZXJDaGFpbj8obD1kLmdldEhlaWdodCgpfHx0aGlzLnZEb21Sb3dIZWlnaHQsaD1kLmluaXRpYWxpemVkLHQ+PWw/KHRoaXMuc3R5bGVSb3coZCxuKSxpLmluc2VydEJlZm9yZShkLmdldEVsZW1lbnQoKSxpLmZpcnN0Q2hpbGQpLGQuaW5pdGlhbGl6ZWQmJmQuaGVpZ2h0SW5pdGlhbGl6ZWR8fHMucHVzaChkKSxkLmluaXRpYWxpemUoKSxofHwobD1kLmdldEVsZW1lbnQoKS5vZmZzZXRIZWlnaHQsbD50aGlzLnZEb21XaW5kb3dCdWZmZXImJih0aGlzLnZEb21XaW5kb3dCdWZmZXI9MipsKSksdC09bCxvKz1sLHRoaXMudkRvbVRvcC0tLG4tLSxyKyspOmE9ITEpOmE9ITF9ZWxzZSBhPSExO2ZvcihsZXQgZSBvZiBzKWUuY2xlYXJDZWxsSGVpZ2h0KCk7dGhpcy5fcXVpY2tOb3JtYWxpemVSb3dIZWlnaHQocyksbyYmKHRoaXMudkRvbVRvcFBhZC09byx0aGlzLnZEb21Ub3BQYWQ8MCYmKHRoaXMudkRvbVRvcFBhZD1uKnRoaXMudkRvbVJvd0hlaWdodCksbjwxJiYodGhpcy52RG9tVG9wUGFkPTApLGkuc3R5bGUucGFkZGluZ1RvcD10aGlzLnZEb21Ub3BQYWQrInB4Iix0aGlzLnZEb21TY3JvbGxQb3NUb3AtPW8pfV9yZW1vdmVUb3BSb3coZSx0KXtmb3IodmFyIGk9W10scz0wLG89MCxuPSEwO247KXtsZXQgcixhPWVbdGhpcy52RG9tVG9wXTthJiZvPHRoaXMudkRvbU1heFJlbmRlckNoYWluPyhyPWEuZ2V0SGVpZ2h0KCl8fHRoaXMudkRvbVJvd0hlaWdodCx0Pj1yPyh0aGlzLnZEb21Ub3ArKyx0LT1yLHMrPXIsaS5wdXNoKGEpLG8rKyk6bj0hMSk6bj0hMX1mb3IobGV0IGUgb2YgaSl7bGV0IHQ9ZS5nZXRFbGVtZW50KCk7dC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCl9cyYmKHRoaXMudkRvbVRvcFBhZCs9cyx0aGlzLnRhYmxlRWxlbWVudC5zdHlsZS5wYWRkaW5nVG9wPXRoaXMudkRvbVRvcFBhZCsicHgiLHRoaXMudkRvbVNjcm9sbFBvc1RvcCs9dGhpcy52RG9tVG9wP3M6cyt0aGlzLnZEb21XaW5kb3dCdWZmZXIpfV9hZGRCb3R0b21Sb3coZSx0KXtmb3IodmFyIGk9dGhpcy50YWJsZUVsZW1lbnQscz1bXSxvPTAsbj10aGlzLnZEb21Cb3R0b20rMSxyPTAsYT0hMDthOyl7bGV0IGwsaCxkPWVbbl07ZCYmcjx0aGlzLnZEb21NYXhSZW5kZXJDaGFpbj8obD1kLmdldEhlaWdodCgpfHx0aGlzLnZEb21Sb3dIZWlnaHQsaD1kLmluaXRpYWxpemVkLHQ+PWw/KHRoaXMuc3R5bGVSb3coZCxuKSxpLmFwcGVuZENoaWxkKGQuZ2V0RWxlbWVudCgpKSxkLmluaXRpYWxpemVkJiZkLmhlaWdodEluaXRpYWxpemVkfHxzLnB1c2goZCksZC5pbml0aWFsaXplKCksaHx8KGw9ZC5nZXRFbGVtZW50KCkub2Zmc2V0SGVpZ2h0LGw+dGhpcy52RG9tV2luZG93QnVmZmVyJiYodGhpcy52RG9tV2luZG93QnVmZmVyPTIqbCkpLHQtPWwsbys9bCx0aGlzLnZEb21Cb3R0b20rKyxuKysscisrKTphPSExKTphPSExfWZvcihsZXQgZSBvZiBzKWUuY2xlYXJDZWxsSGVpZ2h0KCk7dGhpcy5fcXVpY2tOb3JtYWxpemVSb3dIZWlnaHQocyksbyYmKHRoaXMudkRvbUJvdHRvbVBhZC09bywodGhpcy52RG9tQm90dG9tUGFkPDB8fG49PWUubGVuZ3RoLTEpJiYodGhpcy52RG9tQm90dG9tUGFkPTApLGkuc3R5bGUucGFkZGluZ0JvdHRvbT10aGlzLnZEb21Cb3R0b21QYWQrInB4Iix0aGlzLnZEb21TY3JvbGxQb3NCb3R0b20rPW8pfV9yZW1vdmVCb3R0b21Sb3coZSx0KXtmb3IodmFyIGk9W10scz0wLG89MCxuPSEwO247KXtsZXQgcixhPWVbdGhpcy52RG9tQm90dG9tXTthJiZvPHRoaXMudkRvbU1heFJlbmRlckNoYWluPyhyPWEuZ2V0SGVpZ2h0KCl8fHRoaXMudkRvbVJvd0hlaWdodCx0Pj1yPyh0aGlzLnZEb21Cb3R0b20tLSx0LT1yLHMrPXIsaS5wdXNoKGEpLG8rKyk6bj0hMSk6bj0hMX1mb3IobGV0IGUgb2YgaSl7bGV0IHQ9ZS5nZXRFbGVtZW50KCk7dC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCl9cyYmKHRoaXMudkRvbUJvdHRvbVBhZCs9cyx0aGlzLnZEb21Cb3R0b21QYWQ8MCYmKHRoaXMudkRvbUJvdHRvbVBhZD0wKSx0aGlzLnRhYmxlRWxlbWVudC5zdHlsZS5wYWRkaW5nQm90dG9tPXRoaXMudkRvbUJvdHRvbVBhZCsicHgiLHRoaXMudkRvbVNjcm9sbFBvc0JvdHRvbS09cyl9X3F1aWNrTm9ybWFsaXplUm93SGVpZ2h0KGUpe2ZvcihsZXQgdCBvZiBlKXQuY2FsY0hlaWdodCgpO2ZvcihsZXQgdCBvZiBlKXQuc2V0Q2VsbEhlaWdodCgpfX1jbGFzcyBiIGV4dGVuZHMgZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmVsZW1lbnQ9dGhpcy5jcmVhdGVIb2xkZXJFbGVtZW50KCksdGhpcy50YWJsZUVsZW1lbnQ9dGhpcy5jcmVhdGVUYWJsZUVsZW1lbnQoKSx0aGlzLmhlaWdodEZpeGVyPXRoaXMuY3JlYXRlVGFibGVFbGVtZW50KCksdGhpcy5wbGFjZWhvbGRlcj1udWxsLHRoaXMucGxhY2Vob2xkZXJDb250ZW50cz1udWxsLHRoaXMuZmlyc3RSZW5kZXI9ITEsdGhpcy5yZW5kZXJNb2RlPSJ2aXJ0dWFsIix0aGlzLmZpeGVkSGVpZ2h0PSExLHRoaXMucm93cz1bXSx0aGlzLmFjdGl2ZVJvd3NQaXBlbGluZT1bXSx0aGlzLmFjdGl2ZVJvd3M9W10sdGhpcy5hY3RpdmVSb3dzQ291bnQ9MCx0aGlzLmRpc3BsYXlSb3dzPVtdLHRoaXMuZGlzcGxheVJvd3NDb3VudD0wLHRoaXMuc2Nyb2xsVG9wPTAsdGhpcy5zY3JvbGxMZWZ0PTAsdGhpcy5yZWRyYXdCbG9jaz0hMSx0aGlzLnJlZHJhd0Jsb2NrUmVzdG9yZUNvbmZpZz0hMSx0aGlzLnJlZHJhd0Jsb2NrUmVuZGVySW5Qb3NpdGlvbj0hMSx0aGlzLmRhdGFQaXBlbGluZT1bXSx0aGlzLmRpc3BsYXlQaXBlbGluZT1bXSx0aGlzLnNjcm9sbGJhcldpZHRoPTAsdGhpcy5yZW5kZXJlcj1udWxsfWNyZWF0ZUhvbGRlckVsZW1lbnQoKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItdGFibGVob2xkZXIiKSxlLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLDApLGV9Y3JlYXRlVGFibGVFbGVtZW50KCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXRhYmxlIiksZS5zZXRBdHRyaWJ1dGUoInJvbGUiLCJyb3dncm91cCIpLGV9aW5pdGlhbGl6ZVBsYWNlaG9sZGVyKCl7dmFyIGU9dGhpcy50YWJsZS5vcHRpb25zLnBsYWNlaG9sZGVyO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBlJiYoZT1lLmNhbGwodGhpcy50YWJsZSkpLGU9dGhpcy5jaGFpbigicGxhY2Vob2xkZXIiLFtlXSxlLGUpfHxlKXtsZXQgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZih0LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1wbGFjZWhvbGRlciIpLCJzdHJpbmciPT10eXBlb2YgZSl7bGV0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7aS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItcGxhY2Vob2xkZXItY29udGVudHMiKSxpLmlubmVySFRNTD1lLHQuYXBwZW5kQ2hpbGQoaSksdGhpcy5wbGFjZWhvbGRlckNvbnRlbnRzPWl9ZWxzZSJ1bmRlZmluZWQiIT10eXBlb2YgSFRNTEVsZW1lbnQmJmUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudD8odC5hcHBlbmRDaGlsZChlKSx0aGlzLnBsYWNlaG9sZGVyQ29udGVudHM9ZSk6KGNvbnNvbGUud2FybigiSW52YWxpZCBwbGFjZWhvbGRlciBwcm92aWRlZCwgbXVzdCBiZSBzdHJpbmcgb3IgSFRNTCBFbGVtZW50IixlKSx0aGlzLmVsPW51bGwpO3RoaXMucGxhY2Vob2xkZXI9dH19Z2V0RWxlbWVudCgpe3JldHVybiB0aGlzLmVsZW1lbnR9Z2V0VGFibGVFbGVtZW50KCl7cmV0dXJuIHRoaXMudGFibGVFbGVtZW50fWluaXRpYWxpemUoKXt0aGlzLmluaXRpYWxpemVQbGFjZWhvbGRlcigpLHRoaXMuaW5pdGlhbGl6ZVJlbmRlcmVyKCksdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudGFibGVFbGVtZW50KSx0aGlzLmZpcnN0UmVuZGVyPSEwLHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCgoKT0+e3ZhciBlPXRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0LHQ9dGhpcy5zY3JvbGxMZWZ0PmUsaT10aGlzLmVsZW1lbnQuc2Nyb2xsVG9wLHM9dGhpcy5zY3JvbGxUb3A+aTt0aGlzLnNjcm9sbExlZnQhPWUmJih0aGlzLnNjcm9sbExlZnQ9ZSx0aGlzLmRpc3BhdGNoKCJzY3JvbGwtaG9yaXpvbnRhbCIsZSx0KSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoInNjcm9sbEhvcml6b250YWwiLGUsdCksdGhpcy5fcG9zaXRpb25QbGFjZWhvbGRlcigpKSx0aGlzLnNjcm9sbFRvcCE9aSYmKHRoaXMuc2Nyb2xsVG9wPWksdGhpcy5yZW5kZXJlci5zY3JvbGxSb3dzKGkscyksdGhpcy5kaXNwYXRjaCgic2Nyb2xsLXZlcnRpY2FsIixpLHMpLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgic2Nyb2xsVmVydGljYWwiLGkscykpfSkpfWZpbmRSb3coZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlKXtpZih2b2lkIDA9PT1lKXJldHVybiExO3JldHVybiB0aGlzLnJvd3MuZmluZCgodD0+dC5kYXRhW3RoaXMudGFibGUub3B0aW9ucy5pbmRleF09PWUpKXx8ITF9aWYoZSBpbnN0YW5jZW9mIHApcmV0dXJuIGU7aWYoZSBpbnN0YW5jZW9mIHUpcmV0dXJuIGUuX2dldFNlbGYoKXx8ITE7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBIVE1MRWxlbWVudCYmZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KXtyZXR1cm4gdGhpcy5yb3dzLmZpbmQoKHQ9PnQuZ2V0RWxlbWVudCgpPT09ZSkpfHwhMX1yZXR1cm4hMX1nZXRSb3dGcm9tRGF0YU9iamVjdChlKXtyZXR1cm4gdGhpcy5yb3dzLmZpbmQoKHQ9PnQuZGF0YT09PWUpKXx8ITF9Z2V0Um93RnJvbVBvc2l0aW9uKGUpe3JldHVybiB0aGlzLmdldERpc3BsYXlSb3dzKCkuZmluZCgodD0+dC5nZXRQb3NpdGlvbigpPT09ZSYmdC5pc0Rpc3BsYXllZCgpKSl9c2Nyb2xsVG9Sb3coZSx0LGkpe3JldHVybiB0aGlzLnJlbmRlcmVyLnNjcm9sbFRvUm93UG9zaXRpb24oZSx0LGkpfXNldERhdGEoZSx0LGkpe3JldHVybiBuZXcgUHJvbWlzZSgoKHMsbyk9Pnt0JiZ0aGlzLmdldERpc3BsYXlSb3dzKCkubGVuZ3RoP3RoaXMudGFibGUub3B0aW9ucy5wYWdpbmF0aW9uP3RoaXMuX3NldERhdGFBY3R1YWwoZSwhMCk6dGhpcy5yZVJlbmRlckluUG9zaXRpb24oKCgpPT57dGhpcy5fc2V0RGF0YUFjdHVhbChlKX0pKToodGhpcy50YWJsZS5vcHRpb25zLmF1dG9Db2x1bW5zJiZpJiZ0aGlzLnRhYmxlLmluaXRpYWxpemVkJiZ0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2VuZXJhdGVDb2x1bW5zRnJvbVJvd0RhdGEoZSksdGhpcy5yZXNldFNjcm9sbCgpLHRoaXMuX3NldERhdGFBY3R1YWwoZSkpLHMoKX0pKX1fc2V0RGF0YUFjdHVhbChlLHQpe3RoaXMuZGlzcGF0Y2hFeHRlcm5hbCgiZGF0YVByb2Nlc3NpbmciLGUpLHRoaXMuX3dpcGVFbGVtZW50cygpLEFycmF5LmlzQXJyYXkoZSk/KHRoaXMuZGlzcGF0Y2goImRhdGEtcHJvY2Vzc2luZyIsZSksZS5mb3JFYWNoKCgoZSx0KT0+e2lmKGUmJiJvYmplY3QiPT10eXBlb2YgZSl7dmFyIGk9bmV3IHAoZSx0aGlzKTt0aGlzLnJvd3MucHVzaChpKX1lbHNlIGNvbnNvbGUud2FybigiRGF0YSBMb2FkaW5nIFdhcm5pbmcgLSBJbnZhbGlkIHJvdyBkYXRhIGRldGVjdGVkIGFuZCBpZ25vcmVkLCBleHBlY3Rpbmcgb2JqZWN0IGJ1dCByZWNlaXZlZDoiLGUpfSkpLHRoaXMucmVmcmVzaEFjdGl2ZURhdGEoITEsITEsdCksdGhpcy5kaXNwYXRjaCgiZGF0YS1wcm9jZXNzZWQiLGUpLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgiZGF0YVByb2Nlc3NlZCIsZSkpOmNvbnNvbGUuZXJyb3IoIkRhdGEgTG9hZGluZyBFcnJvciAtIFVuYWJsZSB0byBwcm9jZXNzIGRhdGEgZHVlIHRvIGludmFsaWQgZGF0YSB0eXBlIFxuRXhwZWN0aW5nOiBhcnJheSBcblJlY2VpdmVkOiAiLHR5cGVvZiBlLCJcbkRhdGE6ICAgICAiLGUpfV93aXBlRWxlbWVudHMoKXt0aGlzLmRpc3BhdGNoKCJyb3dzLXdpcGUiKSx0aGlzLmRlc3Ryb3koKSx0aGlzLmFkanVzdFRhYmxlU2l6ZSgpLHRoaXMuZGlzcGF0Y2goInJvd3Mtd2lwZWQiKX1kZXN0cm95KCl7dGhpcy5yb3dzLmZvckVhY2goKGU9PntlLndpcGUoKX0pKSx0aGlzLnJvd3M9W10sdGhpcy5hY3RpdmVSb3dzPVtdLHRoaXMuYWN0aXZlUm93c1BpcGVsaW5lPVtdLHRoaXMuYWN0aXZlUm93c0NvdW50PTAsdGhpcy5kaXNwbGF5Um93cz1bXSx0aGlzLmRpc3BsYXlSb3dzQ291bnQ9MH1kZWxldGVSb3coZSx0KXt2YXIgaT10aGlzLnJvd3MuaW5kZXhPZihlKSxzPXRoaXMuYWN0aXZlUm93cy5pbmRleE9mKGUpO3M+LTEmJnRoaXMuYWN0aXZlUm93cy5zcGxpY2UocywxKSxpPi0xJiZ0aGlzLnJvd3Muc3BsaWNlKGksMSksdGhpcy5zZXRBY3RpdmVSb3dzKHRoaXMuYWN0aXZlUm93cyksdGhpcy5kaXNwbGF5Um93SXRlcmF0b3IoKHQ9Pnt2YXIgaT10LmluZGV4T2YoZSk7aT4tMSYmdC5zcGxpY2UoaSwxKX0pKSx0fHx0aGlzLnJlUmVuZGVySW5Qb3NpdGlvbigpLHRoaXMucmVnZW5lcmF0ZVJvd1Bvc2l0aW9ucygpLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgicm93RGVsZXRlZCIsZS5nZXRDb21wb25lbnQoKSksdGhpcy5kaXNwbGF5Um93c0NvdW50fHx0aGlzLnRhYmxlRW1wdHkoKSx0aGlzLnN1YnNjcmliZWRFeHRlcm5hbCgiZGF0YUNoYW5nZWQiKSYmdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJkYXRhQ2hhbmdlZCIsdGhpcy5nZXREYXRhKCkpfWFkZFJvdyhlLHQsaSxzKXtyZXR1cm4gdGhpcy5hZGRSb3dBY3R1YWwoZSx0LGkscyl9YWRkUm93cyhlLHQsaSxzKXt2YXIgbz1bXTtyZXR1cm4gbmV3IFByb21pc2UoKChuLHIpPT57dD10aGlzLmZpbmRBZGRSb3dQb3ModCksQXJyYXkuaXNBcnJheShlKXx8KGU9W2VdKSwodm9pZCAwPT09aSYmdHx8dm9pZCAwIT09aSYmIXQpJiZlLnJldmVyc2UoKSxlLmZvckVhY2goKChlLHMpPT57dmFyIG49dGhpcy5hZGRSb3coZSx0LGksITApO28ucHVzaChuKSx0aGlzLmRpc3BhdGNoKCJyb3ctYWRkZWQiLG4sZSx0LGkpfSkpLHRoaXMucmVmcmVzaEFjdGl2ZURhdGEoISFzJiYiZGlzcGxheVBpcGVsaW5lIiwhMSwhMCksdGhpcy5yZWdlbmVyYXRlUm93UG9zaXRpb25zKCksby5sZW5ndGgmJnRoaXMuX2NsZWFyUGxhY2Vob2xkZXIoKSxuKG8pfSkpfWZpbmRBZGRSb3dQb3MoZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPXRoaXMudGFibGUub3B0aW9ucy5hZGRSb3dQb3MpLCJwb3MiPT09ZSYmKGU9ITApLCJib3R0b20iPT09ZSYmKGU9ITEpLGV9YWRkUm93QWN0dWFsKGUsdCxpLHMpe3ZhciBvLG4scj1lIGluc3RhbmNlb2YgcD9lOm5ldyBwKGV8fHt9LHRoaXMpLGE9dGhpcy5maW5kQWRkUm93UG9zKHQpLGw9LTE7cmV0dXJuIGl8fChuPXRoaXMuY2hhaW4oInJvdy1hZGRpbmctcG9zaXRpb24iLFtyLGFdLG51bGwse2luZGV4OmksdG9wOmF9KSxpPW4uaW5kZXgsYT1uLnRvcCksdm9pZCAwIT09aSYmKGk9dGhpcy5maW5kUm93KGkpKSwoaT10aGlzLmNoYWluKCJyb3ctYWRkaW5nLWluZGV4IixbcixpLGFdLG51bGwsaSkpJiYobD10aGlzLnJvd3MuaW5kZXhPZihpKSksaSYmbD4tMT8obz10aGlzLmFjdGl2ZVJvd3MuaW5kZXhPZihpKSx0aGlzLmRpc3BsYXlSb3dJdGVyYXRvcigoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbmRleE9mKGkpO3Q+LTEmJmUuc3BsaWNlKGE/dDp0KzEsMCxyKX0pKSxvPi0xJiZ0aGlzLmFjdGl2ZVJvd3Muc3BsaWNlKGE/bzpvKzEsMCxyKSx0aGlzLnJvd3Muc3BsaWNlKGE/bDpsKzEsMCxyKSk6YT8odGhpcy5kaXNwbGF5Um93SXRlcmF0b3IoKGZ1bmN0aW9uKGUpe2UudW5zaGlmdChyKX0pKSx0aGlzLmFjdGl2ZVJvd3MudW5zaGlmdChyKSx0aGlzLnJvd3MudW5zaGlmdChyKSk6KHRoaXMuZGlzcGxheVJvd0l0ZXJhdG9yKChmdW5jdGlvbihlKXtlLnB1c2gocil9KSksdGhpcy5hY3RpdmVSb3dzLnB1c2gociksdGhpcy5yb3dzLnB1c2gocikpLHRoaXMuc2V0QWN0aXZlUm93cyh0aGlzLmFjdGl2ZVJvd3MpLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgicm93QWRkZWQiLHIuZ2V0Q29tcG9uZW50KCkpLHRoaXMuc3Vic2NyaWJlZEV4dGVybmFsKCJkYXRhQ2hhbmdlZCIpJiZ0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoImRhdGFDaGFuZ2VkIix0aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0RGF0YSgpKSxzfHx0aGlzLnJlUmVuZGVySW5Qb3NpdGlvbigpLHJ9bW92ZVJvdyhlLHQsaSl7dGhpcy5kaXNwYXRjaCgicm93LW1vdmUiLGUsdCxpKSx0aGlzLm1vdmVSb3dBY3R1YWwoZSx0LGkpLHRoaXMucmVnZW5lcmF0ZVJvd1Bvc2l0aW9ucygpLHRoaXMuZGlzcGF0Y2goInJvdy1tb3ZlZCIsZSx0LGkpLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgicm93TW92ZWQiLGUuZ2V0Q29tcG9uZW50KCkpfW1vdmVSb3dBY3R1YWwoZSx0LGkpe3RoaXMubW92ZVJvd0luQXJyYXkodGhpcy5yb3dzLGUsdCxpKSx0aGlzLm1vdmVSb3dJbkFycmF5KHRoaXMuYWN0aXZlUm93cyxlLHQsaSksdGhpcy5kaXNwbGF5Um93SXRlcmF0b3IoKHM9Pnt0aGlzLm1vdmVSb3dJbkFycmF5KHMsZSx0LGkpfSkpLHRoaXMuZGlzcGF0Y2goInJvdy1tb3ZpbmciLGUsdCxpKX1tb3ZlUm93SW5BcnJheShlLHQsaSxzKXt2YXIgbyxuLHI7aWYodCE9PWkmJigobz1lLmluZGV4T2YodCkpPi0xJiYoZS5zcGxpY2UobywxKSwobj1lLmluZGV4T2YoaSkpPi0xP3M/ZS5zcGxpY2UobisxLDAsdCk6ZS5zcGxpY2UobiwwLHQpOmUuc3BsaWNlKG8sMCx0KSksZT09PXRoaXMuZ2V0RGlzcGxheVJvd3MoKSkpe3I9bj5vP246bysxO2ZvcihsZXQgdD1vPG4/bzpuO3Q8PXI7dCsrKWVbdF0mJnRoaXMuc3R5bGVSb3coZVt0XSx0KX19Y2xlYXJEYXRhKCl7dGhpcy5zZXREYXRhKFtdKX1nZXRSb3dJbmRleChlKXtyZXR1cm4gdGhpcy5maW5kUm93SW5kZXgoZSx0aGlzLnJvd3MpfWdldERpc3BsYXlSb3dJbmRleChlKXt2YXIgdD10aGlzLmdldERpc3BsYXlSb3dzKCkuaW5kZXhPZihlKTtyZXR1cm4gdD4tMSYmdH1uZXh0RGlzcGxheVJvdyhlLHQpe3ZhciBpPXRoaXMuZ2V0RGlzcGxheVJvd0luZGV4KGUpLHM9ITE7cmV0dXJuITEhPT1pJiZpPHRoaXMuZGlzcGxheVJvd3NDb3VudC0xJiYocz10aGlzLmdldERpc3BsYXlSb3dzKClbaSsxXSksIXN8fHMgaW5zdGFuY2VvZiBwJiYicm93Ij09cy50eXBlP3M6dGhpcy5uZXh0RGlzcGxheVJvdyhzLHQpfXByZXZEaXNwbGF5Um93KGUsdCl7dmFyIGk9dGhpcy5nZXREaXNwbGF5Um93SW5kZXgoZSkscz0hMTtyZXR1cm4gaSYmKHM9dGhpcy5nZXREaXNwbGF5Um93cygpW2ktMV0pLCF0fHwhc3x8cyBpbnN0YW5jZW9mIHAmJiJyb3ciPT1zLnR5cGU/czp0aGlzLnByZXZEaXNwbGF5Um93KHMsdCl9ZmluZFJvd0luZGV4KGUsdCl7dmFyIGk7cmV0dXJuISEoKGU9dGhpcy5maW5kUm93KGUpKSYmKGk9dC5pbmRleE9mKGUpKT4tMSkmJml9Z2V0RGF0YShlLHQpe3ZhciBpPVtdO3JldHVybiB0aGlzLmdldFJvd3MoZSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7InJvdyI9PWUudHlwZSYmaS5wdXNoKGUuZ2V0RGF0YSh0fHwiZGF0YSIpKX0pKSxpfWdldENvbXBvbmVudHMoZSl7dmFyIHQ9W107cmV0dXJuIHRoaXMuZ2V0Um93cyhlKS5mb3JFYWNoKChmdW5jdGlvbihlKXt0LnB1c2goZS5nZXRDb21wb25lbnQoKSl9KSksdH1nZXREYXRhQ291bnQoZSl7cmV0dXJuIHRoaXMuZ2V0Um93cyhlKS5sZW5ndGh9c2Nyb2xsSG9yaXpvbnRhbChlKXt0aGlzLnNjcm9sbExlZnQ9ZSx0aGlzLmVsZW1lbnQuc2Nyb2xsTGVmdD1lLHRoaXMuZGlzcGF0Y2goInNjcm9sbC1ob3Jpem9udGFsIixlKX1yZWdpc3RlckRhdGFQaXBlbGluZUhhbmRsZXIoZSx0KXt2b2lkIDAhPT10Pyh0aGlzLmRhdGFQaXBlbGluZS5wdXNoKHtoYW5kbGVyOmUscHJpb3JpdHk6dH0pLHRoaXMuZGF0YVBpcGVsaW5lLnNvcnQoKChlLHQpPT5lLnByaW9yaXR5LXQucHJpb3JpdHkpKSk6Y29uc29sZS5lcnJvcigiRGF0YSBwaXBlbGluZSBoYW5kbGVycyBtdXN0IGhhdmUgYSBwcmlvcml0eSBpbiBvcmRlciB0byBiZSByZWdpc3RlcmVkIil9cmVnaXN0ZXJEaXNwbGF5UGlwZWxpbmVIYW5kbGVyKGUsdCl7dm9pZCAwIT09dD8odGhpcy5kaXNwbGF5UGlwZWxpbmUucHVzaCh7aGFuZGxlcjplLHByaW9yaXR5OnR9KSx0aGlzLmRpc3BsYXlQaXBlbGluZS5zb3J0KCgoZSx0KT0+ZS5wcmlvcml0eS10LnByaW9yaXR5KSkpOmNvbnNvbGUuZXJyb3IoIkRpc3BsYXkgcGlwZWxpbmUgaGFuZGxlcnMgbXVzdCBoYXZlIGEgcHJpb3JpdHkgaW4gb3JkZXIgdG8gYmUgcmVnaXN0ZXJlZCIpfXJlZnJlc2hBY3RpdmVEYXRhKGUsdCxpKXt2YXIgcz10aGlzLnRhYmxlLG89IiIsbj0wLGE9WyJhbGwiLCJkYXRhUGlwZWxpbmUiLCJkaXNwbGF5IiwiZGlzcGxheVBpcGVsaW5lIiwiZW5kIl07aWYoIXRoaXMudGFibGUuZGVzdHJveWVkKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgZSlpZigobj10aGlzLmRhdGFQaXBlbGluZS5maW5kSW5kZXgoKHQ9PnQuaGFuZGxlcj09PWUpKSk+LTEpbz0iZGF0YVBpcGVsaW5lIix0JiYobj09dGhpcy5kYXRhUGlwZWxpbmUubGVuZ3RoLTE/bz0iZGlzcGxheSI6bisrKTtlbHNle2lmKCEoKG49dGhpcy5kaXNwbGF5UGlwZWxpbmUuZmluZEluZGV4KCh0PT50LmhhbmRsZXI9PT1lKSkpPi0xKSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJVbmFibGUgdG8gcmVmcmVzaCBkYXRhLCBpbnZhbGlkIGhhbmRsZXIgcHJvdmlkZWQiLGUpO289ImRpc3BsYXlQaXBlbGluZSIsdCYmKG49PXRoaXMuZGlzcGxheVBpcGVsaW5lLmxlbmd0aC0xP289ImVuZCI6bisrKX1lbHNlIG89ZXx8ImFsbCIsbj0wO2lmKHRoaXMucmVkcmF3QmxvY2spcmV0dXJuIHZvaWQoKCF0aGlzLnJlZHJhd0Jsb2NrUmVzdG9yZUNvbmZpZ3x8dGhpcy5yZWRyYXdCbG9ja1Jlc3RvcmVDb25maWcmJih0aGlzLnJlZHJhd0Jsb2NrUmVzdG9yZUNvbmZpZy5zdGFnZT09PW8mJm48dGhpcy5yZWRyYXdCbG9ja1Jlc3RvcmVDb25maWcuaW5kZXh8fGEuaW5kZXhPZihvKTxhLmluZGV4T2YodGhpcy5yZWRyYXdCbG9ja1Jlc3RvcmVDb25maWcuc3RhZ2UpKSkmJih0aGlzLnJlZHJhd0Jsb2NrUmVzdG9yZUNvbmZpZz17aGFuZGxlcjplLHNraXBTdGFnZTp0LHJlbmRlckluUG9zaXRpb246aSxzdGFnZTpvLGluZGV4Om59KSk7ci5lbFZpc2libGUodGhpcy5lbGVtZW50KT9pP3RoaXMucmVSZW5kZXJJblBvc2l0aW9uKHRoaXMucmVmcmVzaFBpcGVsaW5lcy5iaW5kKHRoaXMsZSxvLG4saSkpOih0aGlzLnJlZnJlc2hQaXBlbGluZXMoZSxvLG4saSksZXx8dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLnJlbmRlcmVyLnJlbmRlckNvbHVtbnMoKSx0aGlzLnJlbmRlclRhYmxlKCkscy5vcHRpb25zLmxheW91dENvbHVtbnNPbk5ld0RhdGEmJnRoaXMudGFibGUuY29sdW1uTWFuYWdlci5yZWRyYXcoITApKTp0aGlzLnJlZnJlc2hQaXBlbGluZXMoZSxvLG4saSksdGhpcy5kaXNwYXRjaCgiZGF0YS1yZWZyZXNoZWQiKX19cmVmcmVzaFBpcGVsaW5lcyhlLHQsaSxzKXtzd2l0Y2godGhpcy5kaXNwYXRjaCgiZGF0YS1yZWZyZXNoaW5nIiksZXx8KHRoaXMuYWN0aXZlUm93c1BpcGVsaW5lWzBdPXRoaXMucm93cy5zbGljZSgwKSksdCl7Y2FzZSJhbGwiOmNhc2UiZGF0YVBpcGVsaW5lIjpmb3IobGV0IGU9aTtlPHRoaXMuZGF0YVBpcGVsaW5lLmxlbmd0aDtlKyspe2xldCB0PXRoaXMuZGF0YVBpcGVsaW5lW2VdLmhhbmRsZXIodGhpcy5hY3RpdmVSb3dzUGlwZWxpbmVbZV0uc2xpY2UoMCkpO3RoaXMuYWN0aXZlUm93c1BpcGVsaW5lW2UrMV09dHx8dGhpcy5hY3RpdmVSb3dzUGlwZWxpbmVbZV0uc2xpY2UoMCl9dGhpcy5zZXRBY3RpdmVSb3dzKHRoaXMuYWN0aXZlUm93c1BpcGVsaW5lW3RoaXMuZGF0YVBpcGVsaW5lLmxlbmd0aF0pO2Nhc2UiZGlzcGxheSI6aT0wLHRoaXMucmVzZXREaXNwbGF5Um93cygpO2Nhc2UiZGlzcGxheVBpcGVsaW5lIjpmb3IobGV0IGU9aTtlPHRoaXMuZGlzcGxheVBpcGVsaW5lLmxlbmd0aDtlKyspe2xldCB0PXRoaXMuZGlzcGxheVBpcGVsaW5lW2VdLmhhbmRsZXIoKGU/dGhpcy5nZXREaXNwbGF5Um93cyhlLTEpOnRoaXMuYWN0aXZlUm93cykuc2xpY2UoMCkscyk7dGhpcy5zZXREaXNwbGF5Um93cyh0fHx0aGlzLmdldERpc3BsYXlSb3dzKGUtMSkuc2xpY2UoMCksZSl9Y2FzZSJlbmQiOnRoaXMucmVnZW5lcmF0ZVJvd1Bvc2l0aW9ucygpfXRoaXMuZ2V0RGlzcGxheVJvd3MoKS5sZW5ndGgmJnRoaXMuX2NsZWFyUGxhY2Vob2xkZXIoKX1yZWdlbmVyYXRlUm93UG9zaXRpb25zKCl7dmFyIGU9dGhpcy5nZXREaXNwbGF5Um93cygpLHQ9MTtlLmZvckVhY2goKGU9Pnsicm93Ij09PWUudHlwZSYmKGUuc2V0UG9zaXRpb24odCksdCsrKX0pKX1zZXRBY3RpdmVSb3dzKGUpe3RoaXMuYWN0aXZlUm93cz10aGlzLmFjdGl2ZVJvd3M9T2JqZWN0LmFzc2lnbihbXSxlKSx0aGlzLmFjdGl2ZVJvd3NDb3VudD10aGlzLmFjdGl2ZVJvd3MubGVuZ3RofXJlc2V0RGlzcGxheVJvd3MoKXt0aGlzLmRpc3BsYXlSb3dzPVtdLHRoaXMuZGlzcGxheVJvd3MucHVzaCh0aGlzLmFjdGl2ZVJvd3Muc2xpY2UoMCkpLHRoaXMuZGlzcGxheVJvd3NDb3VudD10aGlzLmRpc3BsYXlSb3dzWzBdLmxlbmd0aH1zZXREaXNwbGF5Um93cyhlLHQpe3RoaXMuZGlzcGxheVJvd3NbdF09ZSx0PT10aGlzLmRpc3BsYXlSb3dzLmxlbmd0aC0xJiYodGhpcy5kaXNwbGF5Um93c0NvdW50PXRoaXMuZGlzcGxheVJvd3NbdGhpcy5kaXNwbGF5Um93cy5sZW5ndGgtMV0ubGVuZ3RoKX1nZXREaXNwbGF5Um93cyhlKXtyZXR1cm4gdm9pZCAwPT09ZT90aGlzLmRpc3BsYXlSb3dzLmxlbmd0aD90aGlzLmRpc3BsYXlSb3dzW3RoaXMuZGlzcGxheVJvd3MubGVuZ3RoLTFdOltdOnRoaXMuZGlzcGxheVJvd3NbZV18fFtdfWdldFZpc2libGVSb3dzKGUsdCl7dmFyIGk9T2JqZWN0LmFzc2lnbihbXSx0aGlzLnJlbmRlcmVyLnZpc2libGVSb3dzKCF0KSk7cmV0dXJuIGUmJihpPXRoaXMuY2hhaW4oInJvd3MtdmlzaWJsZSIsW3RdLGksaSkpLGl9ZGlzcGxheVJvd0l0ZXJhdG9yKGUpe3RoaXMuYWN0aXZlUm93c1BpcGVsaW5lLmZvckVhY2goZSksdGhpcy5kaXNwbGF5Um93cy5mb3JFYWNoKGUpLHRoaXMuZGlzcGxheVJvd3NDb3VudD10aGlzLmRpc3BsYXlSb3dzW3RoaXMuZGlzcGxheVJvd3MubGVuZ3RoLTFdLmxlbmd0aH1nZXRSb3dzKGUpe3ZhciB0PVtdO3N3aXRjaChlKXtjYXNlImFjdGl2ZSI6dD10aGlzLmFjdGl2ZVJvd3M7YnJlYWs7Y2FzZSJkaXNwbGF5Ijp0PXRoaXMudGFibGUucm93TWFuYWdlci5nZXREaXNwbGF5Um93cygpO2JyZWFrO2Nhc2UidmlzaWJsZSI6dD10aGlzLmdldFZpc2libGVSb3dzKCExLCEwKTticmVhaztkZWZhdWx0OnQ9dGhpcy5jaGFpbigicm93cy1yZXRyaWV2ZSIsZSxudWxsLHRoaXMucm93cyl8fHRoaXMucm93c31yZXR1cm4gdH1yZVJlbmRlckluUG9zaXRpb24oZSl7dGhpcy5yZWRyYXdCbG9jaz9lP2UoKTp0aGlzLnJlZHJhd0Jsb2NrUmVuZGVySW5Qb3NpdGlvbj0hMDoodGhpcy5kaXNwYXRjaEV4dGVybmFsKCJyZW5kZXJTdGFydGVkIiksdGhpcy5yZW5kZXJlci5yZXJlbmRlclJvd3MoZSksdGhpcy5maXhlZEhlaWdodHx8dGhpcy5hZGp1c3RUYWJsZVNpemUoKSx0aGlzLnNjcm9sbEJhckNoZWNrKCksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJyZW5kZXJDb21wbGV0ZSIpKX1zY3JvbGxCYXJDaGVjaygpe3ZhciBlPTA7dGhpcy5lbGVtZW50LnNjcm9sbEhlaWdodD50aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0JiYoZT10aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGgtdGhpcy5lbGVtZW50LmNsaWVudFdpZHRoKSxlIT09dGhpcy5zY3JvbGxiYXJXaWR0aCYmKHRoaXMuc2Nyb2xsYmFyV2lkdGg9ZSx0aGlzLmRpc3BhdGNoKCJzY3JvbGxiYXItdmVydGljYWwiLGUpKX1pbml0aWFsaXplUmVuZGVyZXIoKXt2YXIgZSx0PXt2aXJ0dWFsOmcsYmFzaWM6bX07KGU9InN0cmluZyI9PXR5cGVvZiB0aGlzLnRhYmxlLm9wdGlvbnMucmVuZGVyVmVydGljYWw/dFt0aGlzLnRhYmxlLm9wdGlvbnMucmVuZGVyVmVydGljYWxdOnRoaXMudGFibGUub3B0aW9ucy5yZW5kZXJWZXJ0aWNhbCk/KHRoaXMucmVuZGVyTW9kZT10aGlzLnRhYmxlLm9wdGlvbnMucmVuZGVyVmVydGljYWwsdGhpcy5yZW5kZXJlcj1uZXcgZSh0aGlzLnRhYmxlLHRoaXMuZWxlbWVudCx0aGlzLnRhYmxlRWxlbWVudCksdGhpcy5yZW5kZXJlci5pbml0aWFsaXplKCksIXRoaXMudGFibGUuZWxlbWVudC5jbGllbnRIZWlnaHQmJiF0aGlzLnRhYmxlLm9wdGlvbnMuaGVpZ2h0fHx0aGlzLnRhYmxlLm9wdGlvbnMubWluSGVpZ2h0JiZ0aGlzLnRhYmxlLm9wdGlvbnMubWF4SGVpZ2h0P3RoaXMuZml4ZWRIZWlnaHQ9ITE6dGhpcy5maXhlZEhlaWdodD0hMCk6Y29uc29sZS5lcnJvcigiVW5hYmxlIHRvIGZpbmQgbWF0Y2hpbmcgcmVuZGVyZXI6Iix0aGlzLnRhYmxlLm9wdGlvbnMucmVuZGVyVmVydGljYWwpfWdldFJlbmRlck1vZGUoKXtyZXR1cm4gdGhpcy5yZW5kZXJNb2RlfXJlbmRlclRhYmxlKCl7dGhpcy5kaXNwYXRjaEV4dGVybmFsKCJyZW5kZXJTdGFydGVkIiksdGhpcy5lbGVtZW50LnNjcm9sbFRvcD0wLHRoaXMuX2NsZWFyVGFibGUoKSx0aGlzLmRpc3BsYXlSb3dzQ291bnQ/KHRoaXMucmVuZGVyZXIucmVuZGVyUm93cygpLHRoaXMuZmlyc3RSZW5kZXImJih0aGlzLmZpcnN0UmVuZGVyPSExLHRoaXMuZml4ZWRIZWlnaHR8fHRoaXMuYWRqdXN0VGFibGVTaXplKCksdGhpcy5sYXlvdXRSZWZyZXNoKCEwKSkpOnRoaXMucmVuZGVyRW1wdHlTY3JvbGwoKSx0aGlzLmZpeGVkSGVpZ2h0fHx0aGlzLmFkanVzdFRhYmxlU2l6ZSgpLHRoaXMuZGlzcGF0Y2goInRhYmxlLWxheW91dCIpLHRoaXMuZGlzcGxheVJvd3NDb3VudHx8dGhpcy5fc2hvd1BsYWNlaG9sZGVyKCksdGhpcy5zY3JvbGxCYXJDaGVjaygpLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgicmVuZGVyQ29tcGxldGUiKX1yZW5kZXJFbXB0eVNjcm9sbCgpe3RoaXMucGxhY2Vob2xkZXI/dGhpcy50YWJsZUVsZW1lbnQuc3R5bGUuZGlzcGxheT0ibm9uZSI6dGhpcy50YWJsZUVsZW1lbnQuc3R5bGUubWluV2lkdGg9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmdldFdpZHRoKCkrInB4In1fY2xlYXJUYWJsZSgpe3RoaXMuX2NsZWFyUGxhY2Vob2xkZXIoKSx0aGlzLnNjcm9sbFRvcD0wLHRoaXMuc2Nyb2xsTGVmdD0wLHRoaXMucmVuZGVyZXIuY2xlYXJSb3dzKCl9dGFibGVFbXB0eSgpe3RoaXMucmVuZGVyRW1wdHlTY3JvbGwoKSx0aGlzLl9zaG93UGxhY2Vob2xkZXIoKX1fc2hvd1BsYWNlaG9sZGVyKCl7dGhpcy5wbGFjZWhvbGRlciYmKHRoaXMucGxhY2Vob2xkZXImJnRoaXMucGxhY2Vob2xkZXIucGFyZW50Tm9kZSYmdGhpcy5wbGFjZWhvbGRlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGxhY2Vob2xkZXIpLHRoaXMuaW5pdGlhbGl6ZVBsYWNlaG9sZGVyKCksdGhpcy5wbGFjZWhvbGRlci5zZXRBdHRyaWJ1dGUoInRhYnVsYXRvci1yZW5kZXItbW9kZSIsdGhpcy5yZW5kZXJNb2RlKSx0aGlzLmdldEVsZW1lbnQoKS5hcHBlbmRDaGlsZCh0aGlzLnBsYWNlaG9sZGVyKSx0aGlzLl9wb3NpdGlvblBsYWNlaG9sZGVyKCkpfV9jbGVhclBsYWNlaG9sZGVyKCl7dGhpcy5wbGFjZWhvbGRlciYmdGhpcy5wbGFjZWhvbGRlci5wYXJlbnROb2RlJiZ0aGlzLnBsYWNlaG9sZGVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wbGFjZWhvbGRlciksdGhpcy50YWJsZUVsZW1lbnQuc3R5bGUubWluV2lkdGg9IiIsdGhpcy50YWJsZUVsZW1lbnQuc3R5bGUuZGlzcGxheT0iIn1fcG9zaXRpb25QbGFjZWhvbGRlcigpe3RoaXMucGxhY2Vob2xkZXImJnRoaXMucGxhY2Vob2xkZXIucGFyZW50Tm9kZSYmKHRoaXMucGxhY2Vob2xkZXIuc3R5bGUud2lkdGg9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmdldFdpZHRoKCkrInB4Iix0aGlzLnBsYWNlaG9sZGVyQ29udGVudHMuc3R5bGUud2lkdGg9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmVsZW1lbnQuY2xpZW50V2lkdGgrInB4Iix0aGlzLnBsYWNlaG9sZGVyQ29udGVudHMuc3R5bGUubWFyZ2luTGVmdD10aGlzLnNjcm9sbExlZnQrInB4Iil9c3R5bGVSb3coZSx0KXt2YXIgaT1lLmdldEVsZW1lbnQoKTt0JTI/KGkuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXJvdy1ldmVuIiksaS5jbGFzc0xpc3QucmVtb3ZlKCJ0YWJ1bGF0b3Itcm93LW9kZCIpKTooaS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3Itcm93LW9kZCIpLGkuY2xhc3NMaXN0LnJlbW92ZSgidGFidWxhdG9yLXJvdy1ldmVuIikpfW5vcm1hbGl6ZUhlaWdodCgpe3RoaXMuYWN0aXZlUm93cy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLm5vcm1hbGl6ZUhlaWdodCgpfSkpfWFkanVzdFRhYmxlU2l6ZSgpe2xldCBlLHQ9dGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCxpPSExO2lmKCJmaWxsIj09PXRoaXMucmVuZGVyZXIudmVydGljYWxGaWxsTW9kZSl7bGV0IHM9TWF0aC5mbG9vcih0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2V0RWxlbWVudCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCsodGhpcy50YWJsZS5mb290ZXJNYW5hZ2VyJiZ0aGlzLnRhYmxlLmZvb3Rlck1hbmFnZXIuYWN0aXZlJiYhdGhpcy50YWJsZS5mb290ZXJNYW5hZ2VyLmV4dGVybmFsP3RoaXMudGFibGUuZm9vdGVyTWFuYWdlci5nZXRFbGVtZW50KCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0OjApKTtpZih0aGlzLmZpeGVkSGVpZ2h0KXtlPWlzTmFOKHRoaXMudGFibGUub3B0aW9ucy5taW5IZWlnaHQpP3RoaXMudGFibGUub3B0aW9ucy5taW5IZWlnaHQ6dGhpcy50YWJsZS5vcHRpb25zLm1pbkhlaWdodCsicHgiO2NvbnN0IHQ9ImNhbGMoMTAwJSAtICIrcysicHgpIjt0aGlzLmVsZW1lbnQuc3R5bGUubWluSGVpZ2h0PWV8fCJjYWxjKDEwMCUgLSAiK3MrInB4KSIsdGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodD10LHRoaXMuZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQ9dH1lbHNlIHRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQ9IiIsdGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodD10aGlzLnRhYmxlLmVsZW1lbnQuY2xpZW50SGVpZ2h0LXMrInB4Iix0aGlzLmVsZW1lbnQuc2Nyb2xsVG9wPXRoaXMuc2Nyb2xsVG9wO3RoaXMucmVuZGVyZXIucmVzaXplKCksdGhpcy5maXhlZEhlaWdodHx8dD09dGhpcy5lbGVtZW50LmNsaWVudEhlaWdodHx8KGk9ITAsdGhpcy5zdWJzY3JpYmVkKCJ0YWJsZS1yZXNpemUiKT90aGlzLmRpc3BhdGNoKCJ0YWJsZS1yZXNpemUiKTp0aGlzLnJlZHJhdygpKSx0aGlzLnNjcm9sbEJhckNoZWNrKCl9cmV0dXJuIHRoaXMuX3Bvc2l0aW9uUGxhY2Vob2xkZXIoKSxpfXJlaW5pdGlhbGl6ZSgpe3RoaXMucm93cy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnJlaW5pdGlhbGl6ZSghMCl9KSl9YmxvY2tSZWRyYXcoKXt0aGlzLnJlZHJhd0Jsb2NrPSEwLHRoaXMucmVkcmF3QmxvY2tSZXN0b3JlQ29uZmlnPSExfXJlc3RvcmVSZWRyYXcoKXt0aGlzLnJlZHJhd0Jsb2NrPSExLHRoaXMucmVkcmF3QmxvY2tSZXN0b3JlQ29uZmlnPyh0aGlzLnJlZnJlc2hBY3RpdmVEYXRhKHRoaXMucmVkcmF3QmxvY2tSZXN0b3JlQ29uZmlnLmhhbmRsZXIsdGhpcy5yZWRyYXdCbG9ja1Jlc3RvcmVDb25maWcuc2tpcFN0YWdlLHRoaXMucmVkcmF3QmxvY2tSZXN0b3JlQ29uZmlnLnJlbmRlckluUG9zaXRpb24pLHRoaXMucmVkcmF3QmxvY2tSZXN0b3JlQ29uZmlnPSExKTp0aGlzLnJlZHJhd0Jsb2NrUmVuZGVySW5Qb3NpdGlvbiYmdGhpcy5yZVJlbmRlckluUG9zaXRpb24oKSx0aGlzLnJlZHJhd0Jsb2NrUmVuZGVySW5Qb3NpdGlvbj0hMX1yZWRyYXcoZSl7Y29uc3QgdD10aGlzLmFkanVzdFRhYmxlU2l6ZSgpO3RoaXMudGFibGUudGFibGVXaWR0aD10aGlzLnRhYmxlLmVsZW1lbnQuY2xpZW50V2lkdGgsZT90aGlzLnJlbmRlclRhYmxlKCk6KHQmJnRoaXMucmVSZW5kZXJJblBvc2l0aW9uKCksdGhpcy5zY3JvbGxIb3Jpem9udGFsKHRoaXMuc2Nyb2xsTGVmdCkpfXJlc2V0U2Nyb2xsKCl7aWYodGhpcy5lbGVtZW50LnNjcm9sbExlZnQ9MCx0aGlzLmVsZW1lbnQuc2Nyb2xsVG9wPTAsImllIj09PXRoaXMudGFibGUuYnJvd3Nlcil7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50Iik7ZS5pbml0RXZlbnQoInNjcm9sbCIsITEsITApLHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KGUpfWVsc2UgdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJzY3JvbGwiKSl9fWNsYXNzIGYgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuYWN0aXZlPSExLHRoaXMuZWxlbWVudD10aGlzLmNyZWF0ZUVsZW1lbnQoKSx0aGlzLmNvbnRhaW5lckVsZW1lbnQ9dGhpcy5jcmVhdGVDb250YWluZXJFbGVtZW50KCksdGhpcy5leHRlcm5hbD0hMX1pbml0aWFsaXplKCl7dGhpcy5pbml0aWFsaXplRWxlbWVudCgpfWNyZWF0ZUVsZW1lbnQoKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItZm9vdGVyIiksZX1jcmVhdGVDb250YWluZXJFbGVtZW50KCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWZvb3Rlci1jb250ZW50cyIpLHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlKSxlfWluaXRpYWxpemVFbGVtZW50KCl7aWYodGhpcy50YWJsZS5vcHRpb25zLmZvb3RlckVsZW1lbnQpaWYoInN0cmluZyI9PXR5cGVvZiB0aGlzLnRhYmxlLm9wdGlvbnMuZm9vdGVyRWxlbWVudCkiPCI9PT10aGlzLnRhYmxlLm9wdGlvbnMuZm9vdGVyRWxlbWVudFswXT90aGlzLmNvbnRhaW5lckVsZW1lbnQuaW5uZXJIVE1MPXRoaXMudGFibGUub3B0aW9ucy5mb290ZXJFbGVtZW50Oih0aGlzLmV4dGVybmFsPSEwLHRoaXMuY29udGFpbmVyRWxlbWVudD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMudGFibGUub3B0aW9ucy5mb290ZXJFbGVtZW50KSk7ZWxzZSB0aGlzLmVsZW1lbnQ9dGhpcy50YWJsZS5vcHRpb25zLmZvb3RlckVsZW1lbnR9Z2V0RWxlbWVudCgpe3JldHVybiB0aGlzLmVsZW1lbnR9YXBwZW5kKGUpe3RoaXMuYWN0aXZhdGUoKSx0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoZSksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmFkanVzdFRhYmxlU2l6ZSgpfXByZXBlbmQoZSl7dGhpcy5hY3RpdmF0ZSgpLHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUoZSx0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmFkanVzdFRhYmxlU2l6ZSgpfXJlbW92ZShlKXtlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSksdGhpcy5kZWFjdGl2YXRlKCl9ZGVhY3RpdmF0ZShlKXt0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCYmIWV8fCh0aGlzLmV4dGVybmFsfHx0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuYWN0aXZlPSExKX1hY3RpdmF0ZSgpe3RoaXMuYWN0aXZlfHwodGhpcy5hY3RpdmU9ITAsdGhpcy5leHRlcm5hbHx8KHRoaXMudGFibGUuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmdldEVsZW1lbnQoKSksdGhpcy50YWJsZS5lbGVtZW50LnN0eWxlLmRpc3BsYXk9IiIpKX1yZWRyYXcoKXt0aGlzLmRpc3BhdGNoKCJmb290ZXItcmVkcmF3Iil9fWNsYXNzIHYgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuZWw9bnVsbCx0aGlzLmFib3J0Q2xhc3Nlcz1bInRhYnVsYXRvci1oZWFkZXJzIiwidGFidWxhdG9yLXRhYmxlIl0sdGhpcy5wcmV2aW91c1RhcmdldHM9e30sdGhpcy5saXN0ZW5lcnM9WyJjbGljayIsImRibGNsaWNrIiwiY29udGV4dG1lbnUiLCJtb3VzZWVudGVyIiwibW91c2VsZWF2ZSIsIm1vdXNlb3ZlciIsIm1vdXNlb3V0IiwibW91c2Vtb3ZlIiwibW91c2V1cCIsIm1vdXNlZG93biIsInRvdWNoc3RhcnQiLCJ0b3VjaGVuZCJdLHRoaXMuY29tcG9uZW50TWFwPXsidGFidWxhdG9yLWNlbGwiOiJjZWxsIiwidGFidWxhdG9yLXJvdyI6InJvdyIsInRhYnVsYXRvci1ncm91cCI6Imdyb3VwIiwidGFidWxhdG9yLWNvbCI6ImNvbHVtbiJ9LHRoaXMucHNldWRvVHJhY2tlcnM9e3Jvdzp7c3Vic2NyaWJlcjpudWxsLHRhcmdldDpudWxsfSxjZWxsOntzdWJzY3JpYmVyOm51bGwsdGFyZ2V0Om51bGx9LGdyb3VwOntzdWJzY3JpYmVyOm51bGwsdGFyZ2V0Om51bGx9LGNvbHVtbjp7c3Vic2NyaWJlcjpudWxsLHRhcmdldDpudWxsfX0sdGhpcy5wc2V1ZG9UcmFja2luZz0hMX1pbml0aWFsaXplKCl7dGhpcy5lbD10aGlzLnRhYmxlLmVsZW1lbnQsdGhpcy5idWlsZExpc3RlbmVyTWFwKCksdGhpcy5iaW5kU3Vic2NyaXB0aW9uV2F0Y2hlcnMoKX1idWlsZExpc3RlbmVyTWFwKCl7dmFyIGU9e307dGhpcy5saXN0ZW5lcnMuZm9yRWFjaCgodD0+e2VbdF09e2hhbmRsZXI6bnVsbCxjb21wb25lbnRzOltdfX0pKSx0aGlzLmxpc3RlbmVycz1lfWJpbmRQc2V1ZG9FdmVudHMoKXtPYmplY3Qua2V5cyh0aGlzLnBzZXVkb1RyYWNrZXJzKS5mb3JFYWNoKChlPT57dGhpcy5wc2V1ZG9UcmFja2Vyc1tlXS5zdWJzY3JpYmVyPXRoaXMucHNldWRvTW91c2VFbnRlci5iaW5kKHRoaXMsZSksdGhpcy5zdWJzY3JpYmUoZSsiLW1vdXNlb3ZlciIsdGhpcy5wc2V1ZG9UcmFja2Vyc1tlXS5zdWJzY3JpYmVyKX0pKSx0aGlzLnBzZXVkb1RyYWNraW5nPSEwfXBzZXVkb01vdXNlRW50ZXIoZSx0LGkpe3RoaXMucHNldWRvVHJhY2tlcnNbZV0udGFyZ2V0IT09aSYmKHRoaXMucHNldWRvVHJhY2tlcnNbZV0udGFyZ2V0JiZ0aGlzLmRpc3BhdGNoKGUrIi1tb3VzZWxlYXZlIix0LHRoaXMucHNldWRvVHJhY2tlcnNbZV0udGFyZ2V0KSx0aGlzLnBzZXVkb01vdXNlTGVhdmUoZSx0KSx0aGlzLnBzZXVkb1RyYWNrZXJzW2VdLnRhcmdldD1pLHRoaXMuZGlzcGF0Y2goZSsiLW1vdXNlZW50ZXIiLHQsaSkpfXBzZXVkb01vdXNlTGVhdmUoZSx0KXt2YXIgaT1PYmplY3Qua2V5cyh0aGlzLnBzZXVkb1RyYWNrZXJzKSxzPXtyb3c6WyJjZWxsIl0sY2VsbDpbInJvdyJdfTsoaT1pLmZpbHRlcigodD0+e3ZhciBpPXNbZV07cmV0dXJuIHQhPT1lJiYoIWl8fGkmJiFpLmluY2x1ZGVzKHQpKX0pKSkuZm9yRWFjaCgoZT0+e3ZhciBpPXRoaXMucHNldWRvVHJhY2tlcnNbZV0udGFyZ2V0O3RoaXMucHNldWRvVHJhY2tlcnNbZV0udGFyZ2V0JiYodGhpcy5kaXNwYXRjaChlKyItbW91c2VsZWF2ZSIsdCxpKSx0aGlzLnBzZXVkb1RyYWNrZXJzW2VdLnRhcmdldD1udWxsKX0pKX1iaW5kU3Vic2NyaXB0aW9uV2F0Y2hlcnMoKXt2YXIgZT1PYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycyksdD1PYmplY3QudmFsdWVzKHRoaXMuY29tcG9uZW50TWFwKTtmb3IobGV0IGkgb2YgdClmb3IobGV0IHQgb2YgZSl7bGV0IGU9aSsiLSIrdDt0aGlzLnN1YnNjcmlwdGlvbkNoYW5nZShlLHRoaXMuc3Vic2NyaXB0aW9uQ2hhbmdlZC5iaW5kKHRoaXMsaSx0KSl9dGhpcy5zdWJzY3JpYmUoInRhYmxlLWRlc3Ryb3kiLHRoaXMuY2xlYXJXYXRjaGVycy5iaW5kKHRoaXMpKX1zdWJzY3JpcHRpb25DaGFuZ2VkKGUsdCxpKXt2YXIgcz10aGlzLmxpc3RlbmVyc1t0XS5jb21wb25lbnRzLG89cy5pbmRleE9mKGUpLG49ITE7aT8tMT09PW8mJihzLnB1c2goZSksbj0hMCk6dGhpcy5zdWJzY3JpYmVkKGUrIi0iK3QpfHxvPi0xJiYocy5zcGxpY2UobywxKSxuPSEwKSwibW91c2VlbnRlciIhPT10JiYibW91c2VsZWF2ZSIhPT10fHx0aGlzLnBzZXVkb1RyYWNraW5nfHx0aGlzLmJpbmRQc2V1ZG9FdmVudHMoKSxuJiZ0aGlzLnVwZGF0ZUV2ZW50TGlzdGVuZXJzKCl9dXBkYXRlRXZlbnRMaXN0ZW5lcnMoKXtmb3IobGV0IGUgaW4gdGhpcy5saXN0ZW5lcnMpe2xldCB0PXRoaXMubGlzdGVuZXJzW2VdO3QuY29tcG9uZW50cy5sZW5ndGg/dC5oYW5kbGVyfHwodC5oYW5kbGVyPXRoaXMudHJhY2suYmluZCh0aGlzLGUpLHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihlLHQuaGFuZGxlcikpOnQuaGFuZGxlciYmKHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQuaGFuZGxlciksdC5oYW5kbGVyPW51bGwpfX10cmFjayhlLHQpe3ZhciBpPXQuY29tcG9zZWRQYXRoJiZ0LmNvbXBvc2VkUGF0aCgpfHx0LnBhdGgscz10aGlzLmZpbmRUYXJnZXRzKGkpO3M9dGhpcy5iaW5kQ29tcG9uZW50cyhlLHMpLHRoaXMudHJpZ2dlckV2ZW50cyhlLHQscyksIXRoaXMucHNldWRvVHJhY2tpbmd8fCJtb3VzZW92ZXIiIT1lJiYibW91c2VsZWF2ZSIhPWV8fE9iamVjdC5rZXlzKHMpLmxlbmd0aHx8dGhpcy5wc2V1ZG9Nb3VzZUxlYXZlKCJub25lIix0KX1maW5kVGFyZ2V0cyhlKXt2YXIgdD17fTtsZXQgaT1PYmplY3Qua2V5cyh0aGlzLmNvbXBvbmVudE1hcCk7Zm9yKGxldCBzIG9mIGUpe2xldCBlPXMuY2xhc3NMaXN0P1suLi5zLmNsYXNzTGlzdF06W107aWYoZS5maWx0ZXIoKGU9PnRoaXMuYWJvcnRDbGFzc2VzLmluY2x1ZGVzKGUpKSkubGVuZ3RoKWJyZWFrO2xldCBvPWUuZmlsdGVyKChlPT5pLmluY2x1ZGVzKGUpKSk7Zm9yKGxldCBlIG9mIG8pdFt0aGlzLmNvbXBvbmVudE1hcFtlXV18fCh0W3RoaXMuY29tcG9uZW50TWFwW2VdXT1zKX1yZXR1cm4gdC5ncm91cCYmdC5ncm91cD09PXQucm93JiZkZWxldGUgdC5yb3csdH1iaW5kQ29tcG9uZW50cyhlLHQpe3ZhciBpPU9iamVjdC5rZXlzKHQpLnJldmVyc2UoKSxzPXRoaXMubGlzdGVuZXJzW2VdLG89e30sbj17fTtmb3IobGV0IGUgb2YgaSl7bGV0IGkscj10W2VdLGE9dGhpcy5wcmV2aW91c1RhcmdldHNbZV07aWYoYSYmYS50YXJnZXQ9PT1yKWk9YS5jb21wb25lbnQ7ZWxzZSBzd2l0Y2goZSl7Y2FzZSJyb3ciOmNhc2UiZ3JvdXAiOmlmKHMuY29tcG9uZW50cy5pbmNsdWRlcygicm93Iil8fHMuY29tcG9uZW50cy5pbmNsdWRlcygiY2VsbCIpfHxzLmNvbXBvbmVudHMuaW5jbHVkZXMoImdyb3VwIikpe2k9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldFZpc2libGVSb3dzKCEwKS5maW5kKChlPT5lLmdldEVsZW1lbnQoKT09PXIpKSx0LnJvdyYmdC5yb3cucGFyZW50Tm9kZSYmdC5yb3cucGFyZW50Tm9kZS5jbG9zZXN0KCIudGFidWxhdG9yLXJvdyIpJiYodFtlXT0hMSl9YnJlYWs7Y2FzZSJjb2x1bW4iOnMuY29tcG9uZW50cy5pbmNsdWRlcygiY29sdW1uIikmJihpPXRoaXMudGFibGUuY29sdW1uTWFuYWdlci5maW5kQ29sdW1uKHIpKTticmVhaztjYXNlImNlbGwiOnMuY29tcG9uZW50cy5pbmNsdWRlcygiY2VsbCIpJiYoby5yb3cgaW5zdGFuY2VvZiBwP2k9by5yb3cuZmluZENlbGwocik6dC5yb3cmJmNvbnNvbGUud2FybigiRXZlbnQgVGFyZ2V0IExvb2t1cCBFcnJvciAtIFRoZSByb3cgdGhpcyBjZWxsIGlzIGF0dGFjaGVkIHRvIGNhbm5vdCBiZSBmb3VuZCwgaGFzIHRoZSB0YWJsZSBiZWVuIHJlaW5pdGlhbGl6ZWQgd2l0aG91dCBiZWluZyBkZXN0cm95ZWQgZmlyc3Q/IikpfWkmJihvW2VdPWksbltlXT17dGFyZ2V0OnIsY29tcG9uZW50Oml9KX1yZXR1cm4gdGhpcy5wcmV2aW91c1RhcmdldHM9bixvfXRyaWdnZXJFdmVudHMoZSx0LGkpe3ZhciBzPXRoaXMubGlzdGVuZXJzW2VdO2ZvcihsZXQgbyBpbiBpKWlbb10mJnMuY29tcG9uZW50cy5pbmNsdWRlcyhvKSYmdGhpcy5kaXNwYXRjaChvKyItIitlLHQsaVtvXSl9Y2xlYXJXYXRjaGVycygpe2ZvcihsZXQgZSBpbiB0aGlzLmxpc3RlbmVycyl7bGV0IHQ9dGhpcy5saXN0ZW5lcnNbZV07dC5oYW5kbGVyJiYodGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKGUsdC5oYW5kbGVyKSx0LmhhbmRsZXI9bnVsbCl9fX1jbGFzcyB3e2NvbnN0cnVjdG9yKGUpe3RoaXMudGFibGU9ZSx0aGlzLmJpbmRpbmdzPXt9fWJpbmQoZSx0LGkpe3RoaXMuYmluZGluZ3NbZV18fCh0aGlzLmJpbmRpbmdzW2VdPXt9KSx0aGlzLmJpbmRpbmdzW2VdW3RdP2NvbnNvbGUud2FybigiVW5hYmxlIHRvIGJpbmQgY29tcG9uZW50IGhhbmRsZXIsIGEgbWF0Y2hpbmcgZnVuY3Rpb24gbmFtZSBpcyBhbHJlYWR5IGJvdW5kIixlLHQsaSk6dGhpcy5iaW5kaW5nc1tlXVt0XT1pfWhhbmRsZShlLHQsaSl7aWYodGhpcy5iaW5kaW5nc1tlXSYmdGhpcy5iaW5kaW5nc1tlXVtpXSYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuYmluZGluZ3NbZV1baV0uYmluZClyZXR1cm4gdGhpcy5iaW5kaW5nc1tlXVtpXS5iaW5kKG51bGwsdCk7InRoZW4iPT09aXx8InN0cmluZyIhPXR5cGVvZiBpfHxpLnN0YXJ0c1dpdGgoIl8iKXx8dGhpcy50YWJsZS5vcHRpb25zLmRlYnVnSW52YWxpZENvbXBvbmVudEZ1bmNzJiZjb25zb2xlLmVycm9yKCJUaGUgIitlKyIgY29tcG9uZW50IGRvZXMgbm90IGhhdmUgYSAiK2krIiBmdW5jdGlvbiwgaGF2ZSB5b3UgY2hlY2tlZCB0aGF0IHlvdSBoYXZlIHRoZSBjb3JyZWN0IFRhYnVsYXRvciBtb2R1bGUgaW5zdGFsbGVkPyIpfX1jbGFzcyBDIGV4dGVuZHMgZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnJlcXVlc3RPcmRlcj0wLHRoaXMubG9hZGluZz0hMX1pbml0aWFsaXplKCl7fWxvYWQoZSx0LGkscyxvLG4pe3ZhciByPSsrdGhpcy5yZXF1ZXN0T3JkZXI7cmV0dXJuIHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgiZGF0YUxvYWRpbmciLGUpLCFlfHwwIT1lLmluZGV4T2YoInsiKSYmMCE9ZS5pbmRleE9mKCJbIil8fChlPUpTT04ucGFyc2UoZSkpLHRoaXMuY29uZmlybSgiZGF0YS1sb2FkaW5nIixbZSx0LGksb10pPyh0aGlzLmxvYWRpbmc9ITAsb3x8dGhpcy5hbGVydExvYWRlcigpLHQ9dGhpcy5jaGFpbigiZGF0YS1wYXJhbXMiLFtlLGksb10sdHx8e30sdHx8e30pLHQ9dGhpcy5tYXBQYXJhbXModCx0aGlzLnRhYmxlLm9wdGlvbnMuZGF0YVNlbmRQYXJhbXMpLHRoaXMuY2hhaW4oImRhdGEtbG9hZCIsW2UsdCxpLG9dLCExLFByb21pc2UucmVzb2x2ZShbXSkpLnRoZW4oKGU9PntBcnJheS5pc0FycmF5KGUpfHwib2JqZWN0IiE9dHlwZW9mIGV8fChlPXRoaXMubWFwUGFyYW1zKGUsdGhpcy5vYmplY3RJbnZlcnQodGhpcy50YWJsZS5vcHRpb25zLmRhdGFSZWNlaXZlUGFyYW1zKSkpO3ZhciB0PXRoaXMuY2hhaW4oImRhdGEtbG9hZGVkIixlLG51bGwsZSk7cj09dGhpcy5yZXF1ZXN0T3JkZXI/KHRoaXMuY2xlYXJBbGVydCgpLCExIT09dCYmKHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgiZGF0YUxvYWRlZCIsdCksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLnNldERhdGEodCxzLHZvaWQgMD09PW4/IXM6bikpKTpjb25zb2xlLndhcm4oIkRhdGEgTG9hZCBSZXNwb25zZSBCbG9ja2VkIC0gQW4gYWN0aXZlIGRhdGEgbG9hZCByZXF1ZXN0IHdhcyBibG9ja2VkIGJ5IGFuIGF0dGVtcHQgdG8gY2hhbmdlIHRhYmxlIGRhdGEgd2hpbGUgdGhlIHJlcXVlc3Qgd2FzIGJlaW5nIG1hZGUiKX0pKS5jYXRjaCgoZT0+e2NvbnNvbGUuZXJyb3IoIkRhdGEgTG9hZCBFcnJvcjogIixlKSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoImRhdGFMb2FkRXJyb3IiLGUpLG98fHRoaXMuYWxlcnRFcnJvcigpLHNldFRpbWVvdXQoKCgpPT57dGhpcy5jbGVhckFsZXJ0KCl9KSx0aGlzLnRhYmxlLm9wdGlvbnMuZGF0YUxvYWRlckVycm9yVGltZW91dCl9KSkuZmluYWxseSgoKCk9Pnt0aGlzLmxvYWRpbmc9ITF9KSkpOih0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoImRhdGFMb2FkZWQiLGUpLGV8fChlPVtdKSx0aGlzLnRhYmxlLnJvd01hbmFnZXIuc2V0RGF0YShlLHMsdm9pZCAwPT09bj8hczpuKSxQcm9taXNlLnJlc29sdmUoKSl9bWFwUGFyYW1zKGUsdCl7dmFyIGk9e307Zm9yKGxldCBzIGluIGUpaVt0Lmhhc093blByb3BlcnR5KHMpP3Rbc106c109ZVtzXTtyZXR1cm4gaX1vYmplY3RJbnZlcnQoZSl7dmFyIHQ9e307Zm9yKGxldCBpIGluIGUpdFtlW2ldXT1pO3JldHVybiB0fWJsb2NrQWN0aXZlTG9hZCgpe3RoaXMucmVxdWVzdE9yZGVyKyt9YWxlcnRMb2FkZXIoKXsoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMudGFibGUub3B0aW9ucy5kYXRhTG9hZGVyP3RoaXMudGFibGUub3B0aW9ucy5kYXRhTG9hZGVyKCk6dGhpcy50YWJsZS5vcHRpb25zLmRhdGFMb2FkZXIpJiZ0aGlzLnRhYmxlLmFsZXJ0TWFuYWdlci5hbGVydCh0aGlzLnRhYmxlLm9wdGlvbnMuZGF0YUxvYWRlckxvYWRpbmd8fHRoaXMubGFuZ1RleHQoImRhdGF8bG9hZGluZyIpKX1hbGVydEVycm9yKCl7dGhpcy50YWJsZS5hbGVydE1hbmFnZXIuYWxlcnQodGhpcy50YWJsZS5vcHRpb25zLmRhdGFMb2FkZXJFcnJvcnx8dGhpcy5sYW5nVGV4dCgiZGF0YXxlcnJvciIpLCJlcnJvciIpfWNsZWFyQWxlcnQoKXt0aGlzLnRhYmxlLmFsZXJ0TWFuYWdlci5jbGVhcigpfX1jbGFzcyBFe2NvbnN0cnVjdG9yKGUsdCxpKXt0aGlzLnRhYmxlPWUsdGhpcy5ldmVudHM9e30sdGhpcy5vcHRpb25zTGlzdD10fHx7fSx0aGlzLnN1YnNjcmlwdGlvbk5vdGlmaWVycz17fSx0aGlzLmRpc3BhdGNoPWk/dGhpcy5fZGVidWdEaXNwYXRjaC5iaW5kKHRoaXMpOnRoaXMuX2Rpc3BhdGNoLmJpbmQodGhpcyksdGhpcy5kZWJ1Zz1pfXN1YnNjcmlwdGlvbkNoYW5nZShlLHQpe3RoaXMuc3Vic2NyaXB0aW9uTm90aWZpZXJzW2VdfHwodGhpcy5zdWJzY3JpcHRpb25Ob3RpZmllcnNbZV09W10pLHRoaXMuc3Vic2NyaXB0aW9uTm90aWZpZXJzW2VdLnB1c2godCksdGhpcy5zdWJzY3JpYmVkKGUpJiZ0aGlzLl9ub3RpZnlTdWJzY3JpcHRpb25DaGFuZ2UoZSwhMCl9c3Vic2NyaWJlKGUsdCl7dGhpcy5ldmVudHNbZV18fCh0aGlzLmV2ZW50c1tlXT1bXSksdGhpcy5ldmVudHNbZV0ucHVzaCh0KSx0aGlzLl9ub3RpZnlTdWJzY3JpcHRpb25DaGFuZ2UoZSwhMCl9dW5zdWJzY3JpYmUoZSx0KXt2YXIgaTtpZih0aGlzLmV2ZW50c1tlXSl7aWYodCl7aWYoISgoaT10aGlzLmV2ZW50c1tlXS5maW5kSW5kZXgoKGU9PmU9PT10KSkpPi0xKSlyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oIkNhbm5vdCByZW1vdmUgZXZlbnQsIG5vIG1hdGNoaW5nIGV2ZW50IGZvdW5kOiIsZSx0KTt0aGlzLmV2ZW50c1tlXS5zcGxpY2UoaSwxKX1lbHNlIGRlbGV0ZSB0aGlzLmV2ZW50c1tlXTt0aGlzLl9ub3RpZnlTdWJzY3JpcHRpb25DaGFuZ2UoZSwhMSl9ZWxzZSBjb25zb2xlLndhcm4oIkNhbm5vdCByZW1vdmUgZXZlbnQsIG5vIGV2ZW50cyBzZXQgb246IixlKX1zdWJzY3JpYmVkKGUpe3JldHVybiB0aGlzLmV2ZW50c1tlXSYmdGhpcy5ldmVudHNbZV0ubGVuZ3RofV9ub3RpZnlTdWJzY3JpcHRpb25DaGFuZ2UoZSx0KXt2YXIgaT10aGlzLnN1YnNjcmlwdGlvbk5vdGlmaWVyc1tlXTtpJiZpLmZvckVhY2goKGU9PntlKHQpfSkpfV9kaXNwYXRjaCgpe3ZhciBlLHQ9QXJyYXkuZnJvbShhcmd1bWVudHMpLGk9dC5zaGlmdCgpO3JldHVybiB0aGlzLmV2ZW50c1tpXSYmdGhpcy5ldmVudHNbaV0uZm9yRWFjaCgoKGkscyk9PntsZXQgbz1pLmFwcGx5KHRoaXMudGFibGUsdCk7c3x8KGU9byl9KSksZX1fZGVidWdEaXNwYXRjaCgpe3ZhciBlPUFycmF5LmZyb20oYXJndW1lbnRzKSx0PWVbMF07cmV0dXJuIGVbMF09IkV4dGVybmFsRXZlbnQ6IitlWzBdLCghMD09PXRoaXMuZGVidWd8fHRoaXMuZGVidWcuaW5jbHVkZXModCkpJiZjb25zb2xlLmxvZyguLi5lKSx0aGlzLl9kaXNwYXRjaCguLi5hcmd1bWVudHMpfX1jbGFzcyB5e2NvbnN0cnVjdG9yKGUpe3RoaXMuZXZlbnRzPXt9LHRoaXMuc3Vic2NyaXB0aW9uTm90aWZpZXJzPXt9LHRoaXMuZGlzcGF0Y2g9ZT90aGlzLl9kZWJ1Z0Rpc3BhdGNoLmJpbmQodGhpcyk6dGhpcy5fZGlzcGF0Y2guYmluZCh0aGlzKSx0aGlzLmNoYWluPWU/dGhpcy5fZGVidWdDaGFpbi5iaW5kKHRoaXMpOnRoaXMuX2NoYWluLmJpbmQodGhpcyksdGhpcy5jb25maXJtPWU/dGhpcy5fZGVidWdDb25maXJtLmJpbmQodGhpcyk6dGhpcy5fY29uZmlybS5iaW5kKHRoaXMpLHRoaXMuZGVidWc9ZX1zdWJzY3JpcHRpb25DaGFuZ2UoZSx0KXt0aGlzLnN1YnNjcmlwdGlvbk5vdGlmaWVyc1tlXXx8KHRoaXMuc3Vic2NyaXB0aW9uTm90aWZpZXJzW2VdPVtdKSx0aGlzLnN1YnNjcmlwdGlvbk5vdGlmaWVyc1tlXS5wdXNoKHQpLHRoaXMuc3Vic2NyaWJlZChlKSYmdGhpcy5fbm90aWZ5U3Vic2NyaXB0aW9uQ2hhbmdlKGUsITApfXN1YnNjcmliZShlLHQsaT0xZTQpe3RoaXMuZXZlbnRzW2VdfHwodGhpcy5ldmVudHNbZV09W10pLHRoaXMuZXZlbnRzW2VdLnB1c2goe2NhbGxiYWNrOnQscHJpb3JpdHk6aX0pLHRoaXMuZXZlbnRzW2VdLnNvcnQoKChlLHQpPT5lLnByaW9yaXR5LXQucHJpb3JpdHkpKSx0aGlzLl9ub3RpZnlTdWJzY3JpcHRpb25DaGFuZ2UoZSwhMCl9dW5zdWJzY3JpYmUoZSx0KXt2YXIgaTtpZih0aGlzLmV2ZW50c1tlXSl7aWYodCl7aWYoISgoaT10aGlzLmV2ZW50c1tlXS5maW5kSW5kZXgoKGU9PmUuY2FsbGJhY2s9PT10KSkpPi0xKSlyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oIkNhbm5vdCByZW1vdmUgZXZlbnQsIG5vIG1hdGNoaW5nIGV2ZW50IGZvdW5kOiIsZSx0KTt0aGlzLmV2ZW50c1tlXS5zcGxpY2UoaSwxKX10aGlzLl9ub3RpZnlTdWJzY3JpcHRpb25DaGFuZ2UoZSwhMSl9ZWxzZSBjb25zb2xlLndhcm4oIkNhbm5vdCByZW1vdmUgZXZlbnQsIG5vIGV2ZW50cyBzZXQgb246IixlKX1zdWJzY3JpYmVkKGUpe3JldHVybiB0aGlzLmV2ZW50c1tlXSYmdGhpcy5ldmVudHNbZV0ubGVuZ3RofV9jaGFpbihlLHQsaSxzKXt2YXIgbz1pO3JldHVybiBBcnJheS5pc0FycmF5KHQpfHwodD1bdF0pLHRoaXMuc3Vic2NyaWJlZChlKT8odGhpcy5ldmVudHNbZV0uZm9yRWFjaCgoKGUsaSk9PntvPWUuY2FsbGJhY2suYXBwbHkodGhpcyx0LmNvbmNhdChbb10pKX0pKSxvKToiZnVuY3Rpb24iPT10eXBlb2Ygcz9zKCk6c31fY29uZmlybShlLHQpe3ZhciBpPSExO3JldHVybiBBcnJheS5pc0FycmF5KHQpfHwodD1bdF0pLHRoaXMuc3Vic2NyaWJlZChlKSYmdGhpcy5ldmVudHNbZV0uZm9yRWFjaCgoKGUscyk9PntlLmNhbGxiYWNrLmFwcGx5KHRoaXMsdCkmJihpPSEwKX0pKSxpfV9ub3RpZnlTdWJzY3JpcHRpb25DaGFuZ2UoZSx0KXt2YXIgaT10aGlzLnN1YnNjcmlwdGlvbk5vdGlmaWVyc1tlXTtpJiZpLmZvckVhY2goKGU9PntlKHQpfSkpfV9kaXNwYXRjaCgpe3ZhciBlPUFycmF5LmZyb20oYXJndW1lbnRzKSx0PWUuc2hpZnQoKTt0aGlzLmV2ZW50c1t0XSYmdGhpcy5ldmVudHNbdF0uZm9yRWFjaCgodD0+e3QuY2FsbGJhY2suYXBwbHkodGhpcyxlKX0pKX1fZGVidWdEaXNwYXRjaCgpe3ZhciBlPUFycmF5LmZyb20oYXJndW1lbnRzKSx0PWVbMF07cmV0dXJuIGVbMF09IkludGVybmFsRXZlbnQ6Iit0LCghMD09PXRoaXMuZGVidWd8fHRoaXMuZGVidWcuaW5jbHVkZXModCkpJiZjb25zb2xlLmxvZyguLi5lKSx0aGlzLl9kaXNwYXRjaCguLi5hcmd1bWVudHMpfV9kZWJ1Z0NoYWluKCl7dmFyIGU9QXJyYXkuZnJvbShhcmd1bWVudHMpLHQ9ZVswXTtyZXR1cm4gZVswXT0iSW50ZXJuYWxFdmVudDoiK3QsKCEwPT09dGhpcy5kZWJ1Z3x8dGhpcy5kZWJ1Zy5pbmNsdWRlcyh0KSkmJmNvbnNvbGUubG9nKC4uLmUpLHRoaXMuX2NoYWluKC4uLmFyZ3VtZW50cyl9X2RlYnVnQ29uZmlybSgpe3ZhciBlPUFycmF5LmZyb20oYXJndW1lbnRzKSx0PWVbMF07cmV0dXJuIGVbMF09IkludGVybmFsRXZlbnQ6Iit0LCghMD09PXRoaXMuZGVidWd8fHRoaXMuZGVidWcuaW5jbHVkZXModCkpJiZjb25zb2xlLmxvZyguLi5lKSx0aGlzLl9jb25maXJtKC4uLmFyZ3VtZW50cyl9fWNsYXNzIFIgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpfV93YXJuVXNlcigpe3RoaXMub3B0aW9ucygiZGVidWdEZXByZWNhdGlvbiIpJiZjb25zb2xlLndhcm4oLi4uYXJndW1lbnRzKX1jaGVjayhlLHQpe3ZhciBpPSIiO3JldHVybiB2b2lkIDA9PT10aGlzLm9wdGlvbnMoZSl8fChpPSJEZXByZWNhdGVkIFNldHVwIE9wdGlvbiAtIFVzZSBvZiB0aGUgJWMiK2UrIiVjIG9wdGlvbiBpcyBub3cgZGVwcmVjYXRlZCIsdD8oaT1pKyIsIFBsZWFzZSB1c2UgdGhlICVjIit0KyIlYyBvcHRpb24gaW5zdGVhZCIsdGhpcy5fd2FyblVzZXIoaSwiZm9udC13ZWlnaHQ6IGJvbGQ7IiwiZm9udC13ZWlnaHQ6IG5vcm1hbDsiLCJmb250LXdlaWdodDogYm9sZDsiLCJmb250LXdlaWdodDogbm9ybWFsOyIpKTp0aGlzLl93YXJuVXNlcihpLCJmb250LXdlaWdodDogYm9sZDsiLCJmb250LXdlaWdodDogbm9ybWFsOyIpLCExKX1jaGVja01zZyhlLHQpe3JldHVybiB2b2lkIDA9PT10aGlzLm9wdGlvbnMoZSl8fCh0aGlzLl93YXJuVXNlcigiJWNEZXByZWNhdGVkIFNldHVwIE9wdGlvbiAtIFVzZSBvZiB0aGUgJWMiK2UrIiAlYyBvcHRpb24gaXMgbm93IGRlcHJlY2F0ZWQsICIrdCwiZm9udC13ZWlnaHQ6IG5vcm1hbDsiLCJmb250LXdlaWdodDogYm9sZDsiLCJmb250LXdlaWdodDogbm9ybWFsOyIpLCExKX1tc2coZSl7dGhpcy5fd2FyblVzZXIoZSl9fWNsYXNzIHh7c3RhdGljIHJlZ2lzdGVyKGUpe3gudGFibGVzLnB1c2goZSl9c3RhdGljIGRlcmVnaXN0ZXIoZSl7dmFyIHQ9eC50YWJsZXMuaW5kZXhPZihlKTt0Pi0xJiZ4LnRhYmxlcy5zcGxpY2UodCwxKX1zdGF0aWMgbG9va3VwVGFibGUoZSx0KXt2YXIgaSxzLG89W107aWYoInN0cmluZyI9PXR5cGVvZiBlKXtpZigoaT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGUpKS5sZW5ndGgpZm9yKHZhciBuPTA7bjxpLmxlbmd0aDtuKyspKHM9eC5tYXRjaEVsZW1lbnQoaVtuXSkpJiZvLnB1c2gocyl9ZWxzZSJ1bmRlZmluZWQiIT10eXBlb2YgSFRNTEVsZW1lbnQmJmUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudHx8ZSBpbnN0YW5jZW9mIE8/KHM9eC5tYXRjaEVsZW1lbnQoZSkpJiZvLnB1c2gocyk6QXJyYXkuaXNBcnJheShlKT9lLmZvckVhY2goKGZ1bmN0aW9uKGUpe289by5jb25jYXQoeC5sb29rdXBUYWJsZShlKSl9KSk6dHx8Y29uc29sZS53YXJuKCJUYWJsZSBDb25uZWN0aW9uIEVycm9yIC0gSW52YWxpZCBTZWxlY3RvciIsZSk7cmV0dXJuIG99c3RhdGljIG1hdGNoRWxlbWVudChlKXtyZXR1cm4geC50YWJsZXMuZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIGUgaW5zdGFuY2VvZiBPP3Q9PT1lOnQuZWxlbWVudD09PWV9KSl9fXgudGFibGVzPVtdO2NsYXNzIFQgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcihlKSx0aGlzLmVsZW1lbnQ9dCx0aGlzLmNvbnRhaW5lcj10aGlzLl9sb29rdXBDb250YWluZXIoKSx0aGlzLnBhcmVudD1pLHRoaXMucmV2ZXJzZWRYPSExLHRoaXMuY2hpbGRQb3B1cD1udWxsLHRoaXMuYmx1cmFibGU9ITEsdGhpcy5ibHVyQ2FsbGJhY2s9bnVsbCx0aGlzLmJsdXJFdmVudHNCb3VuZD0hMSx0aGlzLnJlbmRlcmVkQ2FsbGJhY2s9bnVsbCx0aGlzLnZpc2libGU9ITEsdGhpcy5oaWRlYWJsZT0hMCx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXBvcHVwLWNvbnRhaW5lciIpLHRoaXMuYmx1ckV2ZW50PXRoaXMuaGlkZS5iaW5kKHRoaXMsITEpLHRoaXMuZXNjRXZlbnQ9dGhpcy5fZXNjYXBlQ2hlY2suYmluZCh0aGlzKSx0aGlzLmRlc3Ryb3lCaW5kaW5nPXRoaXMudGFibGVEZXN0cm95ZWQuYmluZCh0aGlzKSx0aGlzLmRlc3Ryb3llZD0hMX10YWJsZURlc3Ryb3llZCgpe3RoaXMuZGVzdHJveWVkPSEwLHRoaXMuaGlkZSghMCl9X2xvb2t1cENvbnRhaW5lcigpe3ZhciBlPXRoaXMudGFibGUub3B0aW9ucy5wb3B1cENvbnRhaW5lcjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/KGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKSl8fGNvbnNvbGUud2FybigiTWVudSBFcnJvciAtIG5vIGNvbnRhaW5lciBlbGVtZW50IGZvdW5kIG1hdGNoaW5nIHNlbGVjdG9yOiIsdGhpcy50YWJsZS5vcHRpb25zLnBvcHVwQ29udGFpbmVyLCIoZGVmYXVsdGluZyB0byBkb2N1bWVudCBib2R5KSIpOiEwPT09ZSYmKGU9dGhpcy50YWJsZS5lbGVtZW50KSxlJiYhdGhpcy5fY2hlY2tDb250YWluZXJJc1BhcmVudChlKSYmKGU9ITEsY29uc29sZS53YXJuKCJNZW51IEVycm9yIC0gY29udGFpbmVyIGVsZW1lbnQgZG9lcyBub3QgY29udGFpbiB0aGlzIHRhYmxlOiIsdGhpcy50YWJsZS5vcHRpb25zLnBvcHVwQ29udGFpbmVyLCIoZGVmYXVsdGluZyB0byBkb2N1bWVudCBib2R5KSIpKSxlfHwoZT1kb2N1bWVudC5ib2R5KSxlfV9jaGVja0NvbnRhaW5lcklzUGFyZW50KGUsdD10aGlzLnRhYmxlLmVsZW1lbnQpe3JldHVybiBlPT09dHx8ISF0LnBhcmVudE5vZGUmJnRoaXMuX2NoZWNrQ29udGFpbmVySXNQYXJlbnQoZSx0LnBhcmVudE5vZGUpfXJlbmRlckNhbGxiYWNrKGUpe3RoaXMucmVuZGVyZWRDYWxsYmFjaz1lfWNvbnRhaW5lckV2ZW50Q29vcmRzKGUpe3ZhciB0PSEoZSBpbnN0YW5jZW9mIE1vdXNlRXZlbnQpLGk9dD9lLnRvdWNoZXNbMF0ucGFnZVg6ZS5wYWdlWCxzPXQ/ZS50b3VjaGVzWzBdLnBhZ2VZOmUucGFnZVk7aWYodGhpcy5jb250YWluZXIhPT1kb2N1bWVudC5ib2R5KXtsZXQgZT1yLmVsT2Zmc2V0KHRoaXMuY29udGFpbmVyKTtpLT1lLmxlZnQscy09ZS50b3B9cmV0dXJue3g6aSx5OnN9fWVsZW1lbnRQb3NpdGlvbkNvb3JkcyhlLHQ9InJpZ2h0Iil7dmFyIGkscyxvLG49ci5lbE9mZnNldChlKTtzd2l0Y2godGhpcy5jb250YWluZXIhPT1kb2N1bWVudC5ib2R5JiYoaT1yLmVsT2Zmc2V0KHRoaXMuY29udGFpbmVyKSxuLmxlZnQtPWkubGVmdCxuLnRvcC09aS50b3ApLHQpe2Nhc2UicmlnaHQiOnM9bi5sZWZ0K2Uub2Zmc2V0V2lkdGgsbz1uLnRvcC0xO2JyZWFrO2Nhc2UiYm90dG9tIjpzPW4ubGVmdCxvPW4udG9wK2Uub2Zmc2V0SGVpZ2h0O2JyZWFrO2Nhc2UibGVmdCI6cz1uLmxlZnQsbz1uLnRvcC0xO2JyZWFrO2Nhc2UidG9wIjpzPW4ubGVmdCxvPW4udG9wO2JyZWFrO2Nhc2UiY2VudGVyIjpzPW4ubGVmdCtlLm9mZnNldFdpZHRoLzIsbz1uLnRvcCtlLm9mZnNldEhlaWdodC8yfXJldHVybnt4OnMseTpvLG9mZnNldDpufX1zaG93KGUsdCl7dmFyIGkscyxvLG4scjtyZXR1cm4gdGhpcy5kZXN0cm95ZWR8fHRoaXMudGFibGUuZGVzdHJveWVkfHwoZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50PyhvPWUsbj0ocj10aGlzLmVsZW1lbnRQb3NpdGlvbkNvb3JkcyhlLHQpKS5vZmZzZXQsaT1yLngscz1yLnkpOiJudW1iZXIiPT10eXBlb2YgZT8obj17dG9wOjAsbGVmdDowfSxpPWUscz10KTooaT0ocj10aGlzLmNvbnRhaW5lckV2ZW50Q29vcmRzKGUpKS54LHM9ci55LHRoaXMucmV2ZXJzZWRYPSExKSx0aGlzLmVsZW1lbnQuc3R5bGUudG9wPXMrInB4Iix0aGlzLmVsZW1lbnQuc3R5bGUubGVmdD1pKyJweCIsdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KSwiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZW5kZXJlZENhbGxiYWNrJiZ0aGlzLnJlbmRlcmVkQ2FsbGJhY2soKSx0aGlzLl9maXRUb1NjcmVlbihpLHMsbyxuLHQpLHRoaXMudmlzaWJsZT0hMCx0aGlzLnN1YnNjcmliZSgidGFibGUtZGVzdHJveSIsdGhpcy5kZXN0cm95QmluZGluZyksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsKGU9PntlLnN0b3BQcm9wYWdhdGlvbigpfSkpKSx0aGlzfV9maXRUb1NjcmVlbihlLHQsaSxzLG8pe3ZhciBuPXRoaXMuY29udGFpbmVyPT09ZG9jdW1lbnQuYm9keT9kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOnRoaXMuY29udGFpbmVyLnNjcm9sbFRvcDtpZigoZSt0aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGg+PXRoaXMuY29udGFpbmVyLm9mZnNldFdpZHRofHx0aGlzLnJldmVyc2VkWCkmJih0aGlzLmVsZW1lbnQuc3R5bGUubGVmdD0iIix0aGlzLmVsZW1lbnQuc3R5bGUucmlnaHQ9aT90aGlzLmNvbnRhaW5lci5vZmZzZXRXaWR0aC1zLmxlZnQrInB4Ijp0aGlzLmNvbnRhaW5lci5vZmZzZXRXaWR0aC1lKyJweCIsdGhpcy5yZXZlcnNlZFg9ITApLHQrdGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodD5NYXRoLm1heCh0aGlzLmNvbnRhaW5lci5vZmZzZXRIZWlnaHQsbj90aGlzLmNvbnRhaW5lci5zY3JvbGxIZWlnaHQ6MCkpaWYoaSlpZigiYm90dG9tIj09PW8pdGhpcy5lbGVtZW50LnN0eWxlLnRvcD1wYXJzZUludCh0aGlzLmVsZW1lbnQuc3R5bGUudG9wKS10aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0LWkub2Zmc2V0SGVpZ2h0LTErInB4IjtlbHNlIHRoaXMuZWxlbWVudC5zdHlsZS50b3A9cGFyc2VJbnQodGhpcy5lbGVtZW50LnN0eWxlLnRvcCktdGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodCtpLm9mZnNldEhlaWdodCsxKyJweCI7ZWxzZSB0aGlzLmVsZW1lbnQuc3R5bGUudG9wPXBhcnNlSW50KHRoaXMuZWxlbWVudC5zdHlsZS50b3ApLXRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQrInB4In1pc1Zpc2libGUoKXtyZXR1cm4gdGhpcy52aXNpYmxlfWhpZGVPbkJsdXIoZSl7cmV0dXJuIHRoaXMuYmx1cmFibGU9ITAsdGhpcy52aXNpYmxlJiYoc2V0VGltZW91dCgoKCk9Pnt0aGlzLnZpc2libGUmJih0aGlzLnRhYmxlLnJvd01hbmFnZXIuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLHRoaXMuYmx1ckV2ZW50KSx0aGlzLnN1YnNjcmliZSgiY2VsbC1lZGl0aW5nIix0aGlzLmJsdXJFdmVudCksZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5ibHVyRXZlbnQpLGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigiY29udGV4dG1lbnUiLHRoaXMuYmx1ckV2ZW50KSxkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsdGhpcy5ibHVyRXZlbnQpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLHRoaXMuYmx1ckV2ZW50KSxkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLHRoaXMuZXNjRXZlbnQpLHRoaXMuYmx1ckV2ZW50c0JvdW5kPSEwKX0pLDEwMCksdGhpcy5ibHVyQ2FsbGJhY2s9ZSksdGhpc31fZXNjYXBlQ2hlY2soZSl7Mjc9PWUua2V5Q29kZSYmdGhpcy5oaWRlKCl9YmxvY2tIaWRlKCl7dGhpcy5oaWRlYWJsZT0hMX1yZXN0b3JlSGlkZSgpe3RoaXMuaGlkZWFibGU9ITB9aGlkZShlPSExKXtyZXR1cm4gdGhpcy52aXNpYmxlJiZ0aGlzLmhpZGVhYmxlJiYodGhpcy5ibHVyYWJsZSYmdGhpcy5ibHVyRXZlbnRzQm91bmQmJihkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleWRvd24iLHRoaXMuZXNjRXZlbnQpLGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLHRoaXMuYmx1ckV2ZW50KSxkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoImNvbnRleHRtZW51Iix0aGlzLmJsdXJFdmVudCksZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLHRoaXMuYmx1ckV2ZW50KSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIix0aGlzLmJsdXJFdmVudCksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2Nyb2xsIix0aGlzLmJsdXJFdmVudCksdGhpcy51bnN1YnNjcmliZSgiY2VsbC1lZGl0aW5nIix0aGlzLmJsdXJFdmVudCksdGhpcy5ibHVyRXZlbnRzQm91bmQ9ITEpLHRoaXMuY2hpbGRQb3B1cCYmdGhpcy5jaGlsZFBvcHVwLmhpZGUoKSx0aGlzLnBhcmVudCYmKHRoaXMucGFyZW50LmNoaWxkUG9wdXA9bnVsbCksdGhpcy5lbGVtZW50LnBhcmVudE5vZGUmJnRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy52aXNpYmxlPSExLHRoaXMuYmx1ckNhbGxiYWNrJiYhZSYmdGhpcy5ibHVyQ2FsbGJhY2soKSx0aGlzLnVuc3Vic2NyaWJlKCJ0YWJsZS1kZXN0cm95Iix0aGlzLmRlc3Ryb3lCaW5kaW5nKSksdGhpc31jaGlsZChlKXtyZXR1cm4gdGhpcy5jaGlsZFBvcHVwJiZ0aGlzLmNoaWxkUG9wdXAuaGlkZSgpLHRoaXMuY2hpbGRQb3B1cD1uZXcgVCh0aGlzLnRhYmxlLGUsdGhpcyksdGhpcy5jaGlsZFBvcHVwfX1jbGFzcyBrIGV4dGVuZHMgZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUpLHRoaXMuX2hhbmRsZXI9bnVsbH1pbml0aWFsaXplKCl7fXJlZ2lzdGVyVGFibGVPcHRpb24oZSx0KXt0aGlzLnRhYmxlLm9wdGlvbnNMaXN0LnJlZ2lzdGVyKGUsdCl9cmVnaXN0ZXJDb2x1bW5PcHRpb24oZSx0KXt0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIub3B0aW9uc0xpc3QucmVnaXN0ZXIoZSx0KX1yZWdpc3RlclRhYmxlRnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10aGlzLnRhYmxlW2VdP3RoaXMudGFibGVbZV09KC4uLmkpPT4odGhpcy50YWJsZS5pbml0R3VhcmQoZSksdCguLi5pKSk6Y29uc29sZS53YXJuKCJVbmFibGUgdG8gYmluZCB0YWJsZSBmdW5jdGlvbiwgbmFtZSBhbHJlYWR5IGluIHVzZSIsZSl9cmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbihlLHQsaSl7cmV0dXJuIHRoaXMudGFibGUuY29tcG9uZW50RnVuY3Rpb25CaW5kZXIuYmluZChlLHQsaSl9cmVnaXN0ZXJEYXRhSGFuZGxlcihlLHQpe3RoaXMudGFibGUucm93TWFuYWdlci5yZWdpc3RlckRhdGFQaXBlbGluZUhhbmRsZXIoZSx0KSx0aGlzLl9oYW5kbGVyPWV9cmVnaXN0ZXJEaXNwbGF5SGFuZGxlcihlLHQpe3RoaXMudGFibGUucm93TWFuYWdlci5yZWdpc3RlckRpc3BsYXlQaXBlbGluZUhhbmRsZXIoZSx0KSx0aGlzLl9oYW5kbGVyPWV9ZGlzcGxheVJvd3MoZSl7dmFyIHQsaT10aGlzLnRhYmxlLnJvd01hbmFnZXIuZGlzcGxheVJvd3MubGVuZ3RoLTE7aWYodGhpcy5faGFuZGxlciYmKHQ9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmRpc3BsYXlQaXBlbGluZS5maW5kSW5kZXgoKGU9PmUuaGFuZGxlcj09PXRoaXMuX2hhbmRsZXIpKSk+LTEmJihpPXQpLGUmJihpKz1lKSx0aGlzLl9oYW5kbGVyKXJldHVybiBpPi0xP3RoaXMudGFibGUucm93TWFuYWdlci5nZXREaXNwbGF5Um93cyhpKTp0aGlzLmFjdGl2ZVJvd3MoKX1hY3RpdmVSb3dzKCl7cmV0dXJuIHRoaXMudGFibGUucm93TWFuYWdlci5hY3RpdmVSb3dzfXJlZnJlc2hEYXRhKGUsdCl7dHx8KHQ9dGhpcy5faGFuZGxlciksdCYmdGhpcy50YWJsZS5yb3dNYW5hZ2VyLnJlZnJlc2hBY3RpdmVEYXRhKHQsITEsZSl9Zm9vdGVyQXBwZW5kKGUpe3JldHVybiB0aGlzLnRhYmxlLmZvb3Rlck1hbmFnZXIuYXBwZW5kKGUpfWZvb3RlclByZXBlbmQoZSl7cmV0dXJuIHRoaXMudGFibGUuZm9vdGVyTWFuYWdlci5wcmVwZW5kKGUpfWZvb3RlclJlbW92ZShlKXtyZXR1cm4gdGhpcy50YWJsZS5mb290ZXJNYW5hZ2VyLnJlbW92ZShlKX1wb3B1cChlLHQpe3JldHVybiBuZXcgVCh0aGlzLnRhYmxlLGUsdCl9YWxlcnQoZSx0KXtyZXR1cm4gdGhpcy50YWJsZS5hbGVydE1hbmFnZXIuYWxlcnQoZSx0KX1jbGVhckFsZXJ0KCl7cmV0dXJuIHRoaXMudGFibGUuYWxlcnRNYW5hZ2VyLmNsZWFyKCl9fWZ1bmN0aW9uIE0oZSx0KXtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UucmVpbml0aWFsaXplV2lkdGgoKX0pKSx0aGlzLnRhYmxlLm9wdGlvbnMucmVzcG9uc2l2ZUxheW91dCYmdGhpcy50YWJsZS5tb2RFeGlzdHMoInJlc3BvbnNpdmVMYXlvdXQiLCEwKSYmdGhpcy50YWJsZS5tb2R1bGVzLnJlc3BvbnNpdmVMYXlvdXQudXBkYXRlKCl9dmFyIEw9e2ZpdERhdGE6ZnVuY3Rpb24oZSx0KXt0JiZ0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIucmVuZGVyZXIucmVpbml0aWFsaXplQ29sdW1uV2lkdGhzKGUpLHRoaXMudGFibGUub3B0aW9ucy5yZXNwb25zaXZlTGF5b3V0JiZ0aGlzLnRhYmxlLm1vZEV4aXN0cygicmVzcG9uc2l2ZUxheW91dCIsITApJiZ0aGlzLnRhYmxlLm1vZHVsZXMucmVzcG9uc2l2ZUxheW91dC51cGRhdGUoKX0sZml0RGF0YUZpbGw6TSxmaXREYXRhVGFibGU6TSxmaXREYXRhU3RyZXRjaDpmdW5jdGlvbihlLHQpe3ZhciBpPTAscz10aGlzLnRhYmxlLnJvd01hbmFnZXIuZWxlbWVudC5jbGllbnRXaWR0aCxvPTAsbj0hMTtlLmZvckVhY2goKChlLHQpPT57ZS53aWR0aEZpeGVkfHxlLnJlaW5pdGlhbGl6ZVdpZHRoKCksKHRoaXMudGFibGUub3B0aW9ucy5yZXNwb25zaXZlTGF5b3V0P2UubW9kdWxlcy5yZXNwb25zaXZlLnZpc2libGU6ZS52aXNpYmxlKSYmKG49ZSksZS52aXNpYmxlJiYoaSs9ZS5nZXRXaWR0aCgpKX0pKSxuPyhvPXMtaStuLmdldFdpZHRoKCksdGhpcy50YWJsZS5vcHRpb25zLnJlc3BvbnNpdmVMYXlvdXQmJnRoaXMudGFibGUubW9kRXhpc3RzKCJyZXNwb25zaXZlTGF5b3V0IiwhMCkmJihuLnNldFdpZHRoKDApLHRoaXMudGFibGUubW9kdWxlcy5yZXNwb25zaXZlTGF5b3V0LnVwZGF0ZSgpKSxvPjA/bi5zZXRXaWR0aChvKTpuLnJlaW5pdGlhbGl6ZVdpZHRoKCkpOnRoaXMudGFibGUub3B0aW9ucy5yZXNwb25zaXZlTGF5b3V0JiZ0aGlzLnRhYmxlLm1vZEV4aXN0cygicmVzcG9uc2l2ZUxheW91dCIsITApJiZ0aGlzLnRhYmxlLm1vZHVsZXMucmVzcG9uc2l2ZUxheW91dC51cGRhdGUoKX0sZml0Q29sdW1uczpmdW5jdGlvbihlLHQpe3ZhciBpLHMsbz10aGlzLnRhYmxlLnJvd01hbmFnZXIuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCxuPTAscj0wLGE9MCxsPVtdLGg9W10sZD0wLGM9MDtmdW5jdGlvbiB1KGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZT9lLmluZGV4T2YoIiUiKT4tMT9vLzEwMCpwYXJzZUludChlKTpwYXJzZUludChlKTplfWZ1bmN0aW9uIHAoZSx0LGkscyl7dmFyIG89W10sbj0wLHI9MCxsPTAsaD1hLGQ9MCxjPTAsbT1bXTtmdW5jdGlvbiBnKGUpe3JldHVybiBpKihlLmNvbHVtbi5kZWZpbml0aW9uLndpZHRoR3Jvd3x8MSl9ZnVuY3Rpb24gYihlKXtyZXR1cm4gdShlLndpZHRoKS1pKihlLmNvbHVtbi5kZWZpbml0aW9uLndpZHRoU2hyaW5rfHwwKX1yZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlLG4pe3ZhciByPXM/YihlKTpnKGUpO2UuY29sdW1uLm1pbldpZHRoPj1yP28ucHVzaChlKTplLmNvbHVtbi5tYXhXaWR0aCYmZS5jb2x1bW4ubWF4V2lkdGg8cj8oZS53aWR0aD1lLmNvbHVtbi5tYXhXaWR0aCx0LT1lLmNvbHVtbi5tYXhXaWR0aCwoaC09cz9lLmNvbHVtbi5kZWZpbml0aW9uLndpZHRoU2hyaW5rfHwxOmUuY29sdW1uLmRlZmluaXRpb24ud2lkdGhHcm93fHwxKSYmKGk9TWF0aC5mbG9vcih0L2gpKSk6KG0ucHVzaChlKSxjKz1zP2UuY29sdW1uLmRlZmluaXRpb24ud2lkdGhTaHJpbmt8fDE6ZS5jb2x1bW4uZGVmaW5pdGlvbi53aWR0aEdyb3d8fDEpfSkpLG8ubGVuZ3RoPyhvLmZvckVhY2goKGZ1bmN0aW9uKGUpe24rPXM/ZS53aWR0aC1lLmNvbHVtbi5taW5XaWR0aDplLmNvbHVtbi5taW5XaWR0aCxlLndpZHRoPWUuY29sdW1uLm1pbldpZHRofSkpLHI9dC1uLGw9Yz9NYXRoLmZsb29yKHIvYyk6cixkPXAobSxyLGwscykpOihkPWM/dC1NYXRoLmZsb29yKHQvYykqYzp0LG0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS53aWR0aD1zP2IoZSk6ZyhlKX0pKSksZH10aGlzLnRhYmxlLm9wdGlvbnMucmVzcG9uc2l2ZUxheW91dCYmdGhpcy50YWJsZS5tb2RFeGlzdHMoInJlc3BvbnNpdmVMYXlvdXQiLCEwKSYmdGhpcy50YWJsZS5tb2R1bGVzLnJlc3BvbnNpdmVMYXlvdXQudXBkYXRlKCksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmVsZW1lbnQuc2Nyb2xsSGVpZ2h0PnRoaXMudGFibGUucm93TWFuYWdlci5lbGVtZW50LmNsaWVudEhlaWdodCYmKG8tPXRoaXMudGFibGUucm93TWFuYWdlci5lbGVtZW50Lm9mZnNldFdpZHRoLXRoaXMudGFibGUucm93TWFuYWdlci5lbGVtZW50LmNsaWVudFdpZHRoKSxlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0LGkscztlLnZpc2libGUmJih0PWUuZGVmaW5pdGlvbi53aWR0aCxpPXBhcnNlSW50KGUubWluV2lkdGgpLHQ/KHM9dSh0KSxuKz1zPmk/czppLGUuZGVmaW5pdGlvbi53aWR0aFNocmluayYmKGgucHVzaCh7Y29sdW1uOmUsd2lkdGg6cz5pP3M6aX0pLGQrPWUuZGVmaW5pdGlvbi53aWR0aFNocmluaykpOihsLnB1c2goe2NvbHVtbjplLHdpZHRoOjB9KSxhKz1lLmRlZmluaXRpb24ud2lkdGhHcm93fHwxKSl9KSkscj1vLW4saT1NYXRoLmZsb29yKHIvYSksYz1wKGwscixpLCExKSxsLmxlbmd0aCYmYz4wJiYobFtsLmxlbmd0aC0xXS53aWR0aCs9YyksbC5mb3JFYWNoKChmdW5jdGlvbihlKXtyLT1lLndpZHRofSkpLChzPU1hdGguYWJzKGMpK3IpPjAmJmQmJihjPXAoaCxzLE1hdGguZmxvb3Iocy9kKSwhMCkpLGMmJmgubGVuZ3RoJiYoaFtoLmxlbmd0aC0xXS53aWR0aC09YyksbC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmNvbHVtbi5zZXRXaWR0aChlLndpZHRoKX0pKSxoLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuY29sdW1uLnNldFdpZHRoKGUud2lkdGgpfSkpfX07Y2xhc3MgRCBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSwibGF5b3V0IiksdGhpcy5tb2RlPW51bGwsdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJsYXlvdXQiLCJmaXREYXRhIiksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJsYXlvdXRDb2x1bW5zT25OZXdEYXRhIiwhMSksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigid2lkdGhHcm93IiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigid2lkdGhTaHJpbmsiKX1pbml0aWFsaXplKCl7dmFyIGU9dGhpcy50YWJsZS5vcHRpb25zLmxheW91dDtELm1vZGVzW2VdP3RoaXMubW9kZT1lOihjb25zb2xlLndhcm4oIkxheW91dCBFcnJvciAtIGludmFsaWQgbW9kZSBzZXQsIGRlZmF1bHRpbmcgdG8gJ2ZpdERhdGEnIDogIitlKSx0aGlzLm1vZGU9ImZpdERhdGEiKSx0aGlzLnRhYmxlLmVsZW1lbnQuc2V0QXR0cmlidXRlKCJ0YWJ1bGF0b3ItbGF5b3V0Iix0aGlzLm1vZGUpfWdldE1vZGUoKXtyZXR1cm4gdGhpcy5tb2RlfWxheW91dChlKXt0aGlzLmRpc3BhdGNoKCJsYXlvdXQtcmVmcmVzaGluZyIpLEQubW9kZXNbdGhpcy5tb2RlXS5jYWxsKHRoaXMsdGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmNvbHVtbnNCeUluZGV4LGUpLHRoaXMuZGlzcGF0Y2goImxheW91dC1yZWZyZXNoZWQiKX19RC5tb2R1bGVOYW1lPSJsYXlvdXQiLEQubW9kZXM9TDtjbGFzcyBTIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmxvY2FsZT0iZGVmYXVsdCIsdGhpcy5sYW5nPSExLHRoaXMuYmluZGluZ3M9e30sdGhpcy5sYW5nTGlzdD17fSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImxvY2FsZSIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigibGFuZ3MiLHt9KX1pbml0aWFsaXplKCl7dGhpcy5sYW5nTGlzdD1yLmRlZXBDbG9uZShTLmxhbmdzKSwhMSE9PXRoaXMudGFibGUub3B0aW9ucy5jb2x1bW5EZWZhdWx0cy5oZWFkZXJGaWx0ZXJQbGFjZWhvbGRlciYmdGhpcy5zZXRIZWFkZXJGaWx0ZXJQbGFjZWhvbGRlcih0aGlzLnRhYmxlLm9wdGlvbnMuY29sdW1uRGVmYXVsdHMuaGVhZGVyRmlsdGVyUGxhY2Vob2xkZXIpO2ZvcihsZXQgZSBpbiB0aGlzLnRhYmxlLm9wdGlvbnMubGFuZ3MpdGhpcy5pbnN0YWxsTGFuZyhlLHRoaXMudGFibGUub3B0aW9ucy5sYW5nc1tlXSk7dGhpcy5zZXRMb2NhbGUodGhpcy50YWJsZS5vcHRpb25zLmxvY2FsZSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oInNldExvY2FsZSIsdGhpcy5zZXRMb2NhbGUuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImdldExvY2FsZSIsdGhpcy5nZXRMb2NhbGUuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImdldExhbmciLHRoaXMuZ2V0TGFuZy5iaW5kKHRoaXMpKX1zZXRIZWFkZXJGaWx0ZXJQbGFjZWhvbGRlcihlKXt0aGlzLmxhbmdMaXN0LmRlZmF1bHQuaGVhZGVyRmlsdGVycy5kZWZhdWx0PWV9aW5zdGFsbExhbmcoZSx0KXt0aGlzLmxhbmdMaXN0W2VdP3RoaXMuX3NldExhbmdQcm9wKHRoaXMubGFuZ0xpc3RbZV0sdCk6dGhpcy5sYW5nTGlzdFtlXT10fV9zZXRMYW5nUHJvcChlLHQpe2ZvcihsZXQgaSBpbiB0KWVbaV0mJiJvYmplY3QiPT10eXBlb2YgZVtpXT90aGlzLl9zZXRMYW5nUHJvcChlW2ldLHRbaV0pOmVbaV09dFtpXX1zZXRMb2NhbGUoZSl7aWYoITA9PT0oZT1lfHwiZGVmYXVsdCIpJiZuYXZpZ2F0b3IubGFuZ3VhZ2UmJihlPW5hdmlnYXRvci5sYW5ndWFnZS50b0xvd2VyQ2FzZSgpKSxlJiYhdGhpcy5sYW5nTGlzdFtlXSl7bGV0IHQ9ZS5zcGxpdCgiLSIpWzBdO3RoaXMubGFuZ0xpc3RbdF0/KGNvbnNvbGUud2FybigiTG9jYWxpemF0aW9uIEVycm9yIC0gRXhhY3QgbWF0Y2hpbmcgbG9jYWxlIG5vdCBmb3VuZCwgdXNpbmcgY2xvc2VzdCBtYXRjaDogIixlLHQpLGU9dCk6KGNvbnNvbGUud2FybigiTG9jYWxpemF0aW9uIEVycm9yIC0gTWF0Y2hpbmcgbG9jYWxlIG5vdCBmb3VuZCwgdXNpbmcgZGVmYXVsdDogIixlKSxlPSJkZWZhdWx0Iil9dGhpcy5sb2NhbGU9ZSx0aGlzLmxhbmc9ci5kZWVwQ2xvbmUodGhpcy5sYW5nTGlzdC5kZWZhdWx0fHx7fSksImRlZmF1bHQiIT1lJiZmdW5jdGlvbiBlKHQsaSl7Zm9yKHZhciBzIGluIHQpIm9iamVjdCI9PXR5cGVvZiB0W3NdPyhpW3NdfHwoaVtzXT17fSksZSh0W3NdLGlbc10pKTppW3NdPXRbc119KHRoaXMubGFuZ0xpc3RbZV0sdGhpcy5sYW5nKSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoImxvY2FsaXplZCIsdGhpcy5sb2NhbGUsdGhpcy5sYW5nKSx0aGlzLl9leGVjdXRlQmluZGluZ3MoKX1nZXRMb2NhbGUoZSl7cmV0dXJuIHRoaXMubG9jYWxlfWdldExhbmcoZSl7cmV0dXJuIGU/dGhpcy5sYW5nTGlzdFtlXTp0aGlzLmxhbmd9Z2V0VGV4dChlLHQpe3ZhciBpPSh0P2UrInwiK3Q6ZSkuc3BsaXQoInwiKTtyZXR1cm4gdGhpcy5fZ2V0TGFuZ0VsZW1lbnQoaSx0aGlzLmxvY2FsZSl8fCIifV9nZXRMYW5nRWxlbWVudChlLHQpe3ZhciBpPXRoaXMubGFuZztyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdDtpJiYodD1pW2VdLGk9dm9pZCAwIT09dCYmdCl9KSksaX1iaW5kKGUsdCl7dGhpcy5iaW5kaW5nc1tlXXx8KHRoaXMuYmluZGluZ3NbZV09W10pLHRoaXMuYmluZGluZ3NbZV0ucHVzaCh0KSx0KHRoaXMuZ2V0VGV4dChlKSx0aGlzLmxhbmcpfV9leGVjdXRlQmluZGluZ3MoKXtmb3IobGV0IGUgaW4gdGhpcy5iaW5kaW5ncyl0aGlzLmJpbmRpbmdzW2VdLmZvckVhY2goKHQ9Pnt0KHRoaXMuZ2V0VGV4dChlKSx0aGlzLmxhbmcpfSkpfX1TLm1vZHVsZU5hbWU9ImxvY2FsaXplIixTLmxhbmdzPXtkZWZhdWx0Ontncm91cHM6e2l0ZW06Iml0ZW0iLGl0ZW1zOiJpdGVtcyJ9LGNvbHVtbnM6e30sZGF0YTp7bG9hZGluZzoiTG9hZGluZyIsZXJyb3I6IkVycm9yIn0scGFnaW5hdGlvbjp7cGFnZV9zaXplOiJQYWdlIFNpemUiLHBhZ2VfdGl0bGU6IlNob3cgUGFnZSIsZmlyc3Q6IkZpcnN0IixmaXJzdF90aXRsZToiRmlyc3QgUGFnZSIsbGFzdDoiTGFzdCIsbGFzdF90aXRsZToiTGFzdCBQYWdlIixwcmV2OiJQcmV2IixwcmV2X3RpdGxlOiJQcmV2IFBhZ2UiLG5leHQ6Ik5leHQiLG5leHRfdGl0bGU6Ik5leHQgUGFnZSIsYWxsOiJBbGwiLGNvdW50ZXI6e3Nob3dpbmc6IlNob3dpbmciLG9mOiJvZiIscm93czoicm93cyIscGFnZXM6InBhZ2VzIn19LGhlYWRlckZpbHRlcnM6e2RlZmF1bHQ6ImZpbHRlciBjb2x1bW4uLi4iLGNvbHVtbnM6e319fX07Y2xhc3MgUCBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSl9aW5pdGlhbGl6ZSgpe3RoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJ0YWJsZUNvbW1zIix0aGlzLnJlY2VpdmUuYmluZCh0aGlzKSl9Z2V0Q29ubmVjdGlvbnMoZSl7dmFyIHQ9W107cmV0dXJuIHgubG9va3VwVGFibGUoZSkuZm9yRWFjaCgoZT0+e3RoaXMudGFibGUhPT1lJiZ0LnB1c2goZSl9KSksdH1zZW5kKGUsdCxpLHMpe3ZhciBvPXRoaXMuZ2V0Q29ubmVjdGlvbnMoZSk7by5mb3JFYWNoKChlPT57ZS50YWJsZUNvbW1zKHRoaXMudGFibGUuZWxlbWVudCx0LGkscyl9KSksIW8ubGVuZ3RoJiZlJiZjb25zb2xlLndhcm4oIlRhYmxlIENvbm5lY3Rpb24gRXJyb3IgLSBObyB0YWJsZXMgbWF0Y2hpbmcgc2VsZWN0b3IgZm91bmQiLGUpfXJlY2VpdmUoZSx0LGkscyl7aWYodGhpcy50YWJsZS5tb2RFeGlzdHModCkpcmV0dXJuIHRoaXMudGFibGUubW9kdWxlc1t0XS5jb21tc1JlY2VpdmVkKGUsaSxzKTtjb25zb2xlLndhcm4oIkludGVyLXRhYmxlIENvbW1zIEVycm9yIC0gbm8gc3VjaCBtb2R1bGU6Iix0KX19UC5tb2R1bGVOYW1lPSJjb21tcyI7dmFyIHo9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsTGF5b3V0TW9kdWxlOkQsTG9jYWxpemVNb2R1bGU6UyxDb21tc01vZHVsZTpQfSk7Y2xhc3MgRntjb25zdHJ1Y3RvcihlLHQpe3RoaXMuYmluZFN0YXRpY0Z1bmN0aW9uYWxpdHkoZSksdGhpcy5iaW5kTW9kdWxlcyhlLHosITApLHQmJnRoaXMuYmluZE1vZHVsZXMoZSx0KX1iaW5kU3RhdGljRnVuY3Rpb25hbGl0eShlKXtlLm1vZHVsZUJpbmRpbmdzPXt9LGUuZXh0ZW5kTW9kdWxlPWZ1bmN0aW9uKHQsaSxzKXtpZihlLm1vZHVsZUJpbmRpbmdzW3RdKXt2YXIgbz1lLm1vZHVsZUJpbmRpbmdzW3RdW2ldO2lmKG8paWYoIm9iamVjdCI9PXR5cGVvZiBzKWZvcihsZXQgZSBpbiBzKW9bZV09c1tlXTtlbHNlIGNvbnNvbGUud2FybigiTW9kdWxlIEVycm9yIC0gSW52YWxpZCB2YWx1ZSB0eXBlLCBpdCBtdXN0IGJlIGFuIG9iamVjdCIpO2Vsc2UgY29uc29sZS53YXJuKCJNb2R1bGUgRXJyb3IgLSBwcm9wZXJ0eSBkb2VzIG5vdCBleGlzdDoiLGkpfWVsc2UgY29uc29sZS53YXJuKCJNb2R1bGUgRXJyb3IgLSBtb2R1bGUgZG9lcyBub3QgZXhpc3Q6Iix0KX0sZS5yZWdpc3Rlck1vZHVsZT1mdW5jdGlvbih0KXtBcnJheS5pc0FycmF5KHQpfHwodD1bdF0pLHQuZm9yRWFjaCgodD0+e2UucmVnaXN0ZXJNb2R1bGVCaW5kaW5nKHQpfSkpfSxlLnJlZ2lzdGVyTW9kdWxlQmluZGluZz1mdW5jdGlvbih0KXtlLm1vZHVsZUJpbmRpbmdzW3QubW9kdWxlTmFtZV09dH0sZS5maW5kVGFibGU9ZnVuY3Rpb24oZSl7dmFyIHQ9eC5sb29rdXBUYWJsZShlLCEwKTtyZXR1cm4hKEFycmF5LmlzQXJyYXkodCkmJiF0Lmxlbmd0aCkmJnR9LGUucHJvdG90eXBlLmJpbmRNb2R1bGVzPWZ1bmN0aW9uKCl7dmFyIHQ9W10saT1bXSxzPVtdO2Zvcih2YXIgbyBpbiB0aGlzLm1vZHVsZXM9e30sZS5tb2R1bGVCaW5kaW5ncyl7bGV0IG49ZS5tb2R1bGVCaW5kaW5nc1tvXSxyPW5ldyBuKHRoaXMpO3RoaXMubW9kdWxlc1tvXT1yLG4ucHJvdG90eXBlLm1vZHVsZUNvcmU/dGhpcy5tb2R1bGVzQ29yZS5wdXNoKHIpOm4ubW9kdWxlSW5pdE9yZGVyP24ubW9kdWxlSW5pdE9yZGVyPDA/dC5wdXNoKHIpOmkucHVzaChyKTpzLnB1c2gocil9dC5zb3J0KCgoZSx0KT0+ZS5tb2R1bGVJbml0T3JkZXI+dC5tb2R1bGVJbml0T3JkZXI/MTotMSkpLGkuc29ydCgoKGUsdCk9PmUubW9kdWxlSW5pdE9yZGVyPnQubW9kdWxlSW5pdE9yZGVyPzE6LTEpKSx0aGlzLm1vZHVsZXNSZWd1bGFyPXQuY29uY2F0KHMuY29uY2F0KGkpKX19YmluZE1vZHVsZXMoZSx0LGkpe3ZhciBzPU9iamVjdC52YWx1ZXModCk7aSYmcy5mb3JFYWNoKChlPT57ZS5wcm90b3R5cGUubW9kdWxlQ29yZT0hMH0pKSxlLnJlZ2lzdGVyTW9kdWxlKHMpfX1jbGFzcyBIIGV4dGVuZHMgZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmVsZW1lbnQ9dGhpcy5fY3JlYXRlQWxlcnRFbGVtZW50KCksdGhpcy5tc2dFbGVtZW50PXRoaXMuX2NyZWF0ZU1zZ0VsZW1lbnQoKSx0aGlzLnR5cGU9bnVsbCx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5tc2dFbGVtZW50KX1fY3JlYXRlQWxlcnRFbGVtZW50KCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWFsZXJ0IiksZX1fY3JlYXRlTXNnRWxlbWVudCgpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBlLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1hbGVydC1tc2ciKSxlLnNldEF0dHJpYnV0ZSgicm9sZSIsImFsZXJ0IiksZX1fdHlwZUNsYXNzKCl7cmV0dXJuInRhYnVsYXRvci1hbGVydC1zdGF0ZS0iK3RoaXMudHlwZX1hbGVydChlLHQ9Im1zZyIpe2lmKGUpe2Zvcih0aGlzLmNsZWFyKCksdGhpcy50eXBlPXQ7dGhpcy5tc2dFbGVtZW50LmZpcnN0Q2hpbGQ7KXRoaXMubXNnRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLm1zZ0VsZW1lbnQuZmlyc3RDaGlsZCk7dGhpcy5tc2dFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdHlwZUNsYXNzKCkpLCJmdW5jdGlvbiI9PXR5cGVvZiBlJiYoZT1lKCkpLGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudD90aGlzLm1zZ0VsZW1lbnQuYXBwZW5kQ2hpbGQoZSk6dGhpcy5tc2dFbGVtZW50LmlubmVySFRNTD1lLHRoaXMudGFibGUuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpfX1jbGVhcigpe3RoaXMuZWxlbWVudC5wYXJlbnROb2RlJiZ0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMubXNnRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3R5cGVDbGFzcygpKX19Y2xhc3MgT3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMub3B0aW9ucz17fSx0aGlzLmNvbHVtbk1hbmFnZXI9bnVsbCx0aGlzLnJvd01hbmFnZXI9bnVsbCx0aGlzLmZvb3Rlck1hbmFnZXI9bnVsbCx0aGlzLmFsZXJ0TWFuYWdlcj1udWxsLHRoaXMudmRvbUhvej1udWxsLHRoaXMuZXh0ZXJuYWxFdmVudHM9bnVsbCx0aGlzLmV2ZW50QnVzPW51bGwsdGhpcy5pbnRlcmFjdGlvbk1vbml0b3I9ITEsdGhpcy5icm93c2VyPSIiLHRoaXMuYnJvd3NlclNsb3c9ITEsdGhpcy5icm93c2VyTW9iaWxlPSExLHRoaXMucnRsPSExLHRoaXMub3JpZ2luYWxFbGVtZW50PW51bGwsdGhpcy5jb21wb25lbnRGdW5jdGlvbkJpbmRlcj1uZXcgdyh0aGlzKSx0aGlzLmRhdGFMb2FkZXI9ITEsdGhpcy5tb2R1bGVzPXt9LHRoaXMubW9kdWxlc0NvcmU9W10sdGhpcy5tb2R1bGVzUmVndWxhcj1bXSx0aGlzLmRlcHJlY2F0aW9uQWR2aXNvcj1uZXcgUih0aGlzKSx0aGlzLm9wdGlvbnNMaXN0PW5ldyBhKHRoaXMsInRhYmxlIGNvbnN0cnVjdG9yIiksdGhpcy5pbml0aWFsaXplZD0hMSx0aGlzLmRlc3Ryb3llZD0hMSx0aGlzLmluaXRpYWxpemVFbGVtZW50KGUpJiYodGhpcy5pbml0aWFsaXplQ29yZVN5c3RlbXModCksc2V0VGltZW91dCgoKCk9Pnt0aGlzLl9jcmVhdGUoKX0pKSkseC5yZWdpc3Rlcih0aGlzKX1pbml0aWFsaXplRWxlbWVudChlKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxFbGVtZW50JiZlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ/KHRoaXMuZWxlbWVudD1lLCEwKToic3RyaW5nIj09dHlwZW9mIGU/KHRoaXMuZWxlbWVudD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUpLCEhdGhpcy5lbGVtZW50fHwoY29uc29sZS5lcnJvcigiVGFidWxhdG9yIENyZWF0aW9uIEVycm9yIC0gbm8gZWxlbWVudCBmb3VuZCBtYXRjaGluZyBzZWxlY3RvcjogIixlKSwhMSkpOihjb25zb2xlLmVycm9yKCJUYWJ1bGF0b3IgQ3JlYXRpb24gRXJyb3IgLSBJbnZhbGlkIGVsZW1lbnQgcHJvdmlkZWQ6IixlKSwhMSl9aW5pdGlhbGl6ZUNvcmVTeXN0ZW1zKGUpe3RoaXMuY29sdW1uTWFuYWdlcj1uZXcgYyh0aGlzKSx0aGlzLnJvd01hbmFnZXI9bmV3IGIodGhpcyksdGhpcy5mb290ZXJNYW5hZ2VyPW5ldyBmKHRoaXMpLHRoaXMuZGF0YUxvYWRlcj1uZXcgQyh0aGlzKSx0aGlzLmFsZXJ0TWFuYWdlcj1uZXcgSCh0aGlzKSx0aGlzLmJpbmRNb2R1bGVzKCksdGhpcy5vcHRpb25zPXRoaXMub3B0aW9uc0xpc3QuZ2VuZXJhdGUoTy5kZWZhdWx0T3B0aW9ucyxlKSx0aGlzLl9jbGVhck9iamVjdFBvaW50ZXJzKCksdGhpcy5fbWFwRGVwcmVjYXRlZEZ1bmN0aW9uYWxpdHkoKSx0aGlzLmV4dGVybmFsRXZlbnRzPW5ldyBFKHRoaXMsdGhpcy5vcHRpb25zLHRoaXMub3B0aW9ucy5kZWJ1Z0V2ZW50c0V4dGVybmFsKSx0aGlzLmV2ZW50QnVzPW5ldyB5KHRoaXMub3B0aW9ucy5kZWJ1Z0V2ZW50c0ludGVybmFsKSx0aGlzLmludGVyYWN0aW9uTW9uaXRvcj1uZXcgdih0aGlzKSx0aGlzLmRhdGFMb2FkZXIuaW5pdGlhbGl6ZSgpLHRoaXMuZm9vdGVyTWFuYWdlci5pbml0aWFsaXplKCl9X21hcERlcHJlY2F0ZWRGdW5jdGlvbmFsaXR5KCl7fV9jbGVhclNlbGVjdGlvbigpe3RoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItYmxvY2stc2VsZWN0Iiksd2luZG93LmdldFNlbGVjdGlvbj93aW5kb3cuZ2V0U2VsZWN0aW9uKCkuZW1wdHk/d2luZG93LmdldFNlbGVjdGlvbigpLmVtcHR5KCk6d2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcyYmd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpOmRvY3VtZW50LnNlbGVjdGlvbiYmZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KCksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInRhYnVsYXRvci1ibG9jay1zZWxlY3QiKX1fY3JlYXRlKCl7dGhpcy5leHRlcm5hbEV2ZW50cy5kaXNwYXRjaCgidGFibGVCdWlsZGluZyIpLHRoaXMuZXZlbnRCdXMuZGlzcGF0Y2goInRhYmxlLWJ1aWxkaW5nIiksdGhpcy5fcnRsQ2hlY2soKSx0aGlzLl9idWlsZEVsZW1lbnQoKSx0aGlzLl9pbml0aWFsaXplVGFibGUoKSx0aGlzLl9sb2FkSW5pdGlhbERhdGEoKSx0aGlzLmluaXRpYWxpemVkPSEwLHRoaXMuZXh0ZXJuYWxFdmVudHMuZGlzcGF0Y2goInRhYmxlQnVpbHQiKX1fcnRsQ2hlY2soKXt2YXIgZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQpO3N3aXRjaCh0aGlzLm9wdGlvbnMudGV4dERpcmVjdGlvbil7Y2FzZSJhdXRvIjppZigicnRsIiE9PWUuZGlyZWN0aW9uKWJyZWFrO2Nhc2UicnRsIjp0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXJ0bCIpLHRoaXMucnRsPSEwO2JyZWFrO2Nhc2UibHRyIjp0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWx0ciIpO2RlZmF1bHQ6dGhpcy5ydGw9ITF9fV9jbGVhck9iamVjdFBvaW50ZXJzKCl7dGhpcy5vcHRpb25zLmNvbHVtbnM9dGhpcy5vcHRpb25zLmNvbHVtbnMuc2xpY2UoMCksQXJyYXkuaXNBcnJheSh0aGlzLm9wdGlvbnMuZGF0YSkmJiF0aGlzLm9wdGlvbnMucmVhY3RpdmVEYXRhJiYodGhpcy5vcHRpb25zLmRhdGE9dGhpcy5vcHRpb25zLmRhdGEuc2xpY2UoMCkpfV9idWlsZEVsZW1lbnQoKXt2YXIgZSx0PXRoaXMuZWxlbWVudCxpPXRoaXMub3B0aW9ucztpZigiVEFCTEUiPT09dC50YWdOYW1lKXt0aGlzLm9yaWdpbmFsRWxlbWVudD10aGlzLmVsZW1lbnQsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt2YXIgcz10LmF0dHJpYnV0ZXM7Zm9yKHZhciBvIGluIHMpIm9iamVjdCI9PXR5cGVvZiBzW29dJiZlLnNldEF0dHJpYnV0ZShzW29dLm5hbWUsc1tvXS52YWx1ZSk7dC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlLHQpLHRoaXMuZWxlbWVudD10PWV9Zm9yKHQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yIiksdC5zZXRBdHRyaWJ1dGUoInJvbGUiLCJncmlkIik7dC5maXJzdENoaWxkOyl0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCk7aS5oZWlnaHQmJihpLmhlaWdodD1pc05hTihpLmhlaWdodCk/aS5oZWlnaHQ6aS5oZWlnaHQrInB4Iix0LnN0eWxlLmhlaWdodD1pLmhlaWdodCksITEhPT1pLm1pbkhlaWdodCYmKGkubWluSGVpZ2h0PWlzTmFOKGkubWluSGVpZ2h0KT9pLm1pbkhlaWdodDppLm1pbkhlaWdodCsicHgiLHQuc3R5bGUubWluSGVpZ2h0PWkubWluSGVpZ2h0KSwhMSE9PWkubWF4SGVpZ2h0JiYoaS5tYXhIZWlnaHQ9aXNOYU4oaS5tYXhIZWlnaHQpP2kubWF4SGVpZ2h0OmkubWF4SGVpZ2h0KyJweCIsdC5zdHlsZS5tYXhIZWlnaHQ9aS5tYXhIZWlnaHQpfV9pbml0aWFsaXplVGFibGUoKXt2YXIgZT10aGlzLmVsZW1lbnQsdD10aGlzLm9wdGlvbnM7dGhpcy5pbnRlcmFjdGlvbk1vbml0b3IuaW5pdGlhbGl6ZSgpLHRoaXMuY29sdW1uTWFuYWdlci5pbml0aWFsaXplKCksdGhpcy5yb3dNYW5hZ2VyLmluaXRpYWxpemUoKSx0aGlzLl9kZXRlY3RCcm93c2VyKCksdGhpcy5tb2R1bGVzQ29yZS5mb3JFYWNoKChlPT57ZS5pbml0aWFsaXplKCl9KSksZS5hcHBlbmRDaGlsZCh0aGlzLmNvbHVtbk1hbmFnZXIuZ2V0RWxlbWVudCgpKSxlLmFwcGVuZENoaWxkKHRoaXMucm93TWFuYWdlci5nZXRFbGVtZW50KCkpLHQuZm9vdGVyRWxlbWVudCYmdGhpcy5mb290ZXJNYW5hZ2VyLmFjdGl2YXRlKCksdC5hdXRvQ29sdW1ucyYmdC5kYXRhJiZ0aGlzLmNvbHVtbk1hbmFnZXIuZ2VuZXJhdGVDb2x1bW5zRnJvbVJvd0RhdGEodGhpcy5vcHRpb25zLmRhdGEpLHRoaXMubW9kdWxlc1JlZ3VsYXIuZm9yRWFjaCgoZT0+e2UuaW5pdGlhbGl6ZSgpfSkpLHRoaXMuY29sdW1uTWFuYWdlci5zZXRDb2x1bW5zKHQuY29sdW1ucyksdGhpcy5ldmVudEJ1cy5kaXNwYXRjaCgidGFibGUtYnVpbHQiKX1fbG9hZEluaXRpYWxEYXRhKCl7dGhpcy5kYXRhTG9hZGVyLmxvYWQodGhpcy5vcHRpb25zLmRhdGEpfWRlc3Ryb3koKXt2YXIgZT10aGlzLmVsZW1lbnQ7Zm9yKHRoaXMuZGVzdHJveWVkPSEwLHguZGVyZWdpc3Rlcih0aGlzKSx0aGlzLmV2ZW50QnVzLmRpc3BhdGNoKCJ0YWJsZS1kZXN0cm95IiksdGhpcy5yb3dNYW5hZ2VyLmRlc3Ryb3koKTtlLmZpcnN0Q2hpbGQ7KWUucmVtb3ZlQ2hpbGQoZS5maXJzdENoaWxkKTtlLmNsYXNzTGlzdC5yZW1vdmUoInRhYnVsYXRvciIpLHRoaXMuZXh0ZXJuYWxFdmVudHMuZGlzcGF0Y2goInRhYmxlRGVzdHJveWVkIil9X2RldGVjdEJyb3dzZXIoKXt2YXIgZT1uYXZpZ2F0b3IudXNlckFnZW50fHxuYXZpZ2F0b3IudmVuZG9yfHx3aW5kb3cub3BlcmE7ZS5pbmRleE9mKCJUcmlkZW50Iik+LTE/KHRoaXMuYnJvd3Nlcj0iaWUiLHRoaXMuYnJvd3NlclNsb3c9ITApOmUuaW5kZXhPZigiRWRnZSIpPi0xPyh0aGlzLmJyb3dzZXI9ImVkZ2UiLHRoaXMuYnJvd3NlclNsb3c9ITApOmUuaW5kZXhPZigiRmlyZWZveCIpPi0xPyh0aGlzLmJyb3dzZXI9ImZpcmVmb3giLHRoaXMuYnJvd3NlclNsb3c9ITEpOmUuaW5kZXhPZigiTWFjIE9TIik+LTE/KHRoaXMuYnJvd3Nlcj0ic2FmYXJpIix0aGlzLmJyb3dzZXJTbG93PSExKToodGhpcy5icm93c2VyPSJvdGhlciIsdGhpcy5icm93c2VyU2xvdz0hMSksdGhpcy5icm93c2VyTW9iaWxlPS8oYW5kcm9pZHxiYlxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWlub3xhbmRyb2lkfGlwYWR8cGxheWJvb2t8c2lsay9pLnRlc3QoZSl8fC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3LShufHUpfGM1NVwvfGNhcGl8Y2N3YXxjZG0tfGNlbGx8Y2h0bXxjbGRjfGNtZC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGMtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2YtNXxnLW1vfGdvKFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZC0obXxwfHQpfGhlaS18aGkocHR8dGEpfGhwKCBpfGlwKXxocy1jfGh0KGMoLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGktKDIwfGdvfG1hKXxpMjMwfGlhYyggfC18XC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XC8pfGtsb258a3B0IHxrd2MtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcLyhrfGx8dSl8NTB8NTR8LVthLXddKXxsaWJ3fGx5bnh8bTEtd3xtM2dhfG01MFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bS1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dCgtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSktfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3wtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdC1nfHFhLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8LVsyLTddfGktKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoLXxvb3xwLSl8c2RrXC98c2UoYygtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaC18c2hhcnxzaWUoLXxtKXxzay0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGgtfHYtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsLXx0ZGctfHRlbChpfG0pfHRpbS18dC1tb3x0byhwbHxzaCl8dHMoNzB8bS18bTN8bTUpfHR4LTl8dXAoXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118LXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhcy18eW91cnx6ZXRvfHp0ZS0vaS50ZXN0KGUuc2xpY2UoMCw0KSl9aW5pdEd1YXJkKGUsdCl7dmFyIGkscztyZXR1cm4gdGhpcy5vcHRpb25zLmRlYnVnSW5pdGlhbGl6YXRpb24mJiF0aGlzLmluaXRpYWxpemVkJiYoZXx8KGU9IiAiPT0ocz0iRXJyb3IiPT0oaT0obmV3IEVycm9yKS5zdGFjay5zcGxpdCgiXG4iKSlbMF0/aVsyXTppWzFdKVswXT9zLnRyaW0oKS5zcGxpdCgiICIpWzFdLnNwbGl0KCIuIilbMV06cy50cmltKCkuc3BsaXQoIkAiKVswXSksY29uc29sZS53YXJuKCJUYWJsZSBOb3QgSW5pdGlhbGl6ZWQgLSBDYWxsaW5nIHRoZSAiK2UrIiBmdW5jdGlvbiBiZWZvcmUgdGhlIHRhYmxlIGlzIGluaXRpYWxpemVkIG1heSByZXN1bHQgaW4gaW5jb25zaXN0ZW50IGJlaGF2aW9yLCBQbGVhc2Ugd2FpdCBmb3IgdGhlIGB0YWJsZUJ1aWx0YCBldmVudCBiZWZvcmUgY2FsbGluZyB0aGlzIGZ1bmN0aW9uLiIrKHQ/IiAiK3Q6IiIpKSksdGhpcy5pbml0aWFsaXplZH1ibG9ja1JlZHJhdygpe3RoaXMuaW5pdEd1YXJkKCksdGhpcy5ldmVudEJ1cy5kaXNwYXRjaCgicmVkcmF3LWJsb2NraW5nIiksdGhpcy5yb3dNYW5hZ2VyLmJsb2NrUmVkcmF3KCksdGhpcy5jb2x1bW5NYW5hZ2VyLmJsb2NrUmVkcmF3KCksdGhpcy5ldmVudEJ1cy5kaXNwYXRjaCgicmVkcmF3LWJsb2NrZWQiKX1yZXN0b3JlUmVkcmF3KCl7dGhpcy5pbml0R3VhcmQoKSx0aGlzLmV2ZW50QnVzLmRpc3BhdGNoKCJyZWRyYXctcmVzdG9yaW5nIiksdGhpcy5yb3dNYW5hZ2VyLnJlc3RvcmVSZWRyYXcoKSx0aGlzLmNvbHVtbk1hbmFnZXIucmVzdG9yZVJlZHJhdygpLHRoaXMuZXZlbnRCdXMuZGlzcGF0Y2goInJlZHJhdy1yZXN0b3JlZCIpfXNldERhdGEoZSx0LGkpe3JldHVybiB0aGlzLmluaXRHdWFyZCghMSwiVG8gc2V0IGluaXRpYWwgZGF0YSBwbGVhc2UgdXNlIHRoZSAnZGF0YScgcHJvcGVydHkgaW4gdGhlIHRhYmxlIGNvbnN0cnVjdG9yLiIpLHRoaXMuZGF0YUxvYWRlci5sb2FkKGUsdCxpLCExKX1jbGVhckRhdGEoKXt0aGlzLmluaXRHdWFyZCgpLHRoaXMuZGF0YUxvYWRlci5ibG9ja0FjdGl2ZUxvYWQoKSx0aGlzLnJvd01hbmFnZXIuY2xlYXJEYXRhKCl9Z2V0RGF0YShlKXtyZXR1cm4gdGhpcy5yb3dNYW5hZ2VyLmdldERhdGEoZSl9Z2V0RGF0YUNvdW50KGUpe3JldHVybiB0aGlzLnJvd01hbmFnZXIuZ2V0RGF0YUNvdW50KGUpfXJlcGxhY2VEYXRhKGUsdCxpKXtyZXR1cm4gdGhpcy5pbml0R3VhcmQoKSx0aGlzLmRhdGFMb2FkZXIubG9hZChlLHQsaSwhMCwhMCl9dXBkYXRlRGF0YShlKXt2YXIgdD0wO3JldHVybiB0aGlzLmluaXRHdWFyZCgpLG5ldyBQcm9taXNlKCgoaSxzKT0+e3RoaXMuZGF0YUxvYWRlci5ibG9ja0FjdGl2ZUxvYWQoKSwic3RyaW5nIj09dHlwZW9mIGUmJihlPUpTT04ucGFyc2UoZSkpLGUmJmUubGVuZ3RoPjA/ZS5mb3JFYWNoKChlPT57dmFyIG89dGhpcy5yb3dNYW5hZ2VyLmZpbmRSb3coZVt0aGlzLm9wdGlvbnMuaW5kZXhdKTtvPyh0Kyssby51cGRhdGVEYXRhKGUpLnRoZW4oKCgpPT57LS10fHxpKCl9KSkuY2F0Y2goKHQ9PntzKCJVcGRhdGUgRXJyb3IgLSBVbmFibGUgdG8gdXBkYXRlIHJvdyIsZSx0KX0pKSk6cygiVXBkYXRlIEVycm9yIC0gVW5hYmxlIHRvIGZpbmQgcm93IixlKX0pKTooY29uc29sZS53YXJuKCJVcGRhdGUgRXJyb3IgLSBObyBkYXRhIHByb3ZpZGVkIikscygiVXBkYXRlIEVycm9yIC0gTm8gZGF0YSBwcm92aWRlZCIpKX0pKX1hZGREYXRhKGUsdCxpKXtyZXR1cm4gdGhpcy5pbml0R3VhcmQoKSxuZXcgUHJvbWlzZSgoKHMsbyk9Pnt0aGlzLmRhdGFMb2FkZXIuYmxvY2tBY3RpdmVMb2FkKCksInN0cmluZyI9PXR5cGVvZiBlJiYoZT1KU09OLnBhcnNlKGUpKSxlP3RoaXMucm93TWFuYWdlci5hZGRSb3dzKGUsdCxpKS50aGVuKChlPT57dmFyIHQ9W107ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0LnB1c2goZS5nZXRDb21wb25lbnQoKSl9KSkscyh0KX0pKTooY29uc29sZS53YXJuKCJVcGRhdGUgRXJyb3IgLSBObyBkYXRhIHByb3ZpZGVkIiksbygiVXBkYXRlIEVycm9yIC0gTm8gZGF0YSBwcm92aWRlZCIpKX0pKX11cGRhdGVPckFkZERhdGEoZSl7dmFyIHQ9W10saT0wO3JldHVybiB0aGlzLmluaXRHdWFyZCgpLG5ldyBQcm9taXNlKCgocyxvKT0+e3RoaXMuZGF0YUxvYWRlci5ibG9ja0FjdGl2ZUxvYWQoKSwic3RyaW5nIj09dHlwZW9mIGUmJihlPUpTT04ucGFyc2UoZSkpLGUmJmUubGVuZ3RoPjA/ZS5mb3JFYWNoKChlPT57dmFyIG89dGhpcy5yb3dNYW5hZ2VyLmZpbmRSb3coZVt0aGlzLm9wdGlvbnMuaW5kZXhdKTtpKyssbz9vLnVwZGF0ZURhdGEoZSkudGhlbigoKCk9PntpLS0sdC5wdXNoKG8uZ2V0Q29tcG9uZW50KCkpLGl8fHModCl9KSk6dGhpcy5yb3dNYW5hZ2VyLmFkZFJvd3MoZSkudGhlbigoZT0+e2ktLSx0LnB1c2goZVswXS5nZXRDb21wb25lbnQoKSksaXx8cyh0KX0pKX0pKTooY29uc29sZS53YXJuKCJVcGRhdGUgRXJyb3IgLSBObyBkYXRhIHByb3ZpZGVkIiksbygiVXBkYXRlIEVycm9yIC0gTm8gZGF0YSBwcm92aWRlZCIpKX0pKX1nZXRSb3coZSl7dmFyIHQ9dGhpcy5yb3dNYW5hZ2VyLmZpbmRSb3coZSk7cmV0dXJuIHQ/dC5nZXRDb21wb25lbnQoKTooY29uc29sZS53YXJuKCJGaW5kIEVycm9yIC0gTm8gbWF0Y2hpbmcgcm93IGZvdW5kOiIsZSksITEpfWdldFJvd0Zyb21Qb3NpdGlvbihlKXt2YXIgdD10aGlzLnJvd01hbmFnZXIuZ2V0Um93RnJvbVBvc2l0aW9uKGUpO3JldHVybiB0P3QuZ2V0Q29tcG9uZW50KCk6KGNvbnNvbGUud2FybigiRmluZCBFcnJvciAtIE5vIG1hdGNoaW5nIHJvdyBmb3VuZDoiLGUpLCExKX1kZWxldGVSb3coZSl7dmFyIHQ9W107dGhpcy5pbml0R3VhcmQoKSxBcnJheS5pc0FycmF5KGUpfHwoZT1bZV0pO2ZvcihsZXQgaSBvZiBlKXtsZXQgZT10aGlzLnJvd01hbmFnZXIuZmluZFJvdyhpLCEwKTtpZighZSlyZXR1cm4gY29uc29sZS5lcnJvcigiRGVsZXRlIEVycm9yIC0gTm8gbWF0Y2hpbmcgcm93IGZvdW5kOiIsaSksUHJvbWlzZS5yZWplY3QoIkRlbGV0ZSBFcnJvciAtIE5vIG1hdGNoaW5nIHJvdyBmb3VuZCIpO3QucHVzaChlKX1yZXR1cm4gdC5zb3J0KCgoZSx0KT0+dGhpcy5yb3dNYW5hZ2VyLnJvd3MuaW5kZXhPZihlKT50aGlzLnJvd01hbmFnZXIucm93cy5pbmRleE9mKHQpPzE6LTEpKSx0LmZvckVhY2goKGU9PntlLmRlbGV0ZSgpfSkpLHRoaXMucm93TWFuYWdlci5yZVJlbmRlckluUG9zaXRpb24oKSxQcm9taXNlLnJlc29sdmUoKX1hZGRSb3coZSx0LGkpe3JldHVybiB0aGlzLmluaXRHdWFyZCgpLCJzdHJpbmciPT10eXBlb2YgZSYmKGU9SlNPTi5wYXJzZShlKSksdGhpcy5yb3dNYW5hZ2VyLmFkZFJvd3MoZSx0LGksITApLnRoZW4oKGU9PmVbMF0uZ2V0Q29tcG9uZW50KCkpKX11cGRhdGVPckFkZFJvdyhlLHQpe3ZhciBpPXRoaXMucm93TWFuYWdlci5maW5kUm93KGUpO3JldHVybiB0aGlzLmluaXRHdWFyZCgpLCJzdHJpbmciPT10eXBlb2YgdCYmKHQ9SlNPTi5wYXJzZSh0KSksaT9pLnVwZGF0ZURhdGEodCkudGhlbigoKCk9PmkuZ2V0Q29tcG9uZW50KCkpKTp0aGlzLnJvd01hbmFnZXIuYWRkUm93cyh0KS50aGVuKChlPT5lWzBdLmdldENvbXBvbmVudCgpKSl9dXBkYXRlUm93KGUsdCl7dmFyIGk9dGhpcy5yb3dNYW5hZ2VyLmZpbmRSb3coZSk7cmV0dXJuIHRoaXMuaW5pdEd1YXJkKCksInN0cmluZyI9PXR5cGVvZiB0JiYodD1KU09OLnBhcnNlKHQpKSxpP2kudXBkYXRlRGF0YSh0KS50aGVuKCgoKT0+UHJvbWlzZS5yZXNvbHZlKGkuZ2V0Q29tcG9uZW50KCkpKSk6KGNvbnNvbGUud2FybigiVXBkYXRlIEVycm9yIC0gTm8gbWF0Y2hpbmcgcm93IGZvdW5kOiIsZSksUHJvbWlzZS5yZWplY3QoIlVwZGF0ZSBFcnJvciAtIE5vIG1hdGNoaW5nIHJvdyBmb3VuZCIpKX1zY3JvbGxUb1JvdyhlLHQsaSl7dmFyIHM9dGhpcy5yb3dNYW5hZ2VyLmZpbmRSb3coZSk7cmV0dXJuIHM/dGhpcy5yb3dNYW5hZ2VyLnNjcm9sbFRvUm93KHMsdCxpKTooY29uc29sZS53YXJuKCJTY3JvbGwgRXJyb3IgLSBObyBtYXRjaGluZyByb3cgZm91bmQ6IixlKSxQcm9taXNlLnJlamVjdCgiU2Nyb2xsIEVycm9yIC0gTm8gbWF0Y2hpbmcgcm93IGZvdW5kIikpfW1vdmVSb3coZSx0LGkpe3ZhciBzPXRoaXMucm93TWFuYWdlci5maW5kUm93KGUpO3RoaXMuaW5pdEd1YXJkKCkscz9zLm1vdmVUb1Jvdyh0LGkpOmNvbnNvbGUud2FybigiTW92ZSBFcnJvciAtIE5vIG1hdGNoaW5nIHJvdyBmb3VuZDoiLGUpfWdldFJvd3MoZSl7cmV0dXJuIHRoaXMucm93TWFuYWdlci5nZXRDb21wb25lbnRzKGUpfWdldFJvd1Bvc2l0aW9uKGUpe3ZhciB0PXRoaXMucm93TWFuYWdlci5maW5kUm93KGUpO3JldHVybiB0P3QuZ2V0UG9zaXRpb24oKTooY29uc29sZS53YXJuKCJQb3NpdGlvbiBFcnJvciAtIE5vIG1hdGNoaW5nIHJvdyBmb3VuZDoiLGUpLCExKX1zZXRDb2x1bW5zKGUpe3RoaXMuaW5pdEd1YXJkKCExLCJUbyBzZXQgaW5pdGlhbCBjb2x1bW5zIHBsZWFzZSB1c2UgdGhlICdjb2x1bW5zJyBwcm9wZXJ0eSBpbiB0aGUgdGFibGUgY29uc3RydWN0b3IiKSx0aGlzLmNvbHVtbk1hbmFnZXIuc2V0Q29sdW1ucyhlKX1nZXRDb2x1bW5zKGUpe3JldHVybiB0aGlzLmNvbHVtbk1hbmFnZXIuZ2V0Q29tcG9uZW50cyhlKX1nZXRDb2x1bW4oZSl7dmFyIHQ9dGhpcy5jb2x1bW5NYW5hZ2VyLmZpbmRDb2x1bW4oZSk7cmV0dXJuIHQ/dC5nZXRDb21wb25lbnQoKTooY29uc29sZS53YXJuKCJGaW5kIEVycm9yIC0gTm8gbWF0Y2hpbmcgY29sdW1uIGZvdW5kOiIsZSksITEpfWdldENvbHVtbkRlZmluaXRpb25zKCl7cmV0dXJuIHRoaXMuY29sdW1uTWFuYWdlci5nZXREZWZpbml0aW9uVHJlZSgpfXNob3dDb2x1bW4oZSl7dmFyIHQ9dGhpcy5jb2x1bW5NYW5hZ2VyLmZpbmRDb2x1bW4oZSk7aWYodGhpcy5pbml0R3VhcmQoKSwhdClyZXR1cm4gY29uc29sZS53YXJuKCJDb2x1bW4gU2hvdyBFcnJvciAtIE5vIG1hdGNoaW5nIGNvbHVtbiBmb3VuZDoiLGUpLCExO3Quc2hvdygpfWhpZGVDb2x1bW4oZSl7dmFyIHQ9dGhpcy5jb2x1bW5NYW5hZ2VyLmZpbmRDb2x1bW4oZSk7aWYodGhpcy5pbml0R3VhcmQoKSwhdClyZXR1cm4gY29uc29sZS53YXJuKCJDb2x1bW4gSGlkZSBFcnJvciAtIE5vIG1hdGNoaW5nIGNvbHVtbiBmb3VuZDoiLGUpLCExO3QuaGlkZSgpfXRvZ2dsZUNvbHVtbihlKXt2YXIgdD10aGlzLmNvbHVtbk1hbmFnZXIuZmluZENvbHVtbihlKTtpZih0aGlzLmluaXRHdWFyZCgpLCF0KXJldHVybiBjb25zb2xlLndhcm4oIkNvbHVtbiBWaXNpYmlsaXR5IFRvZ2dsZSBFcnJvciAtIE5vIG1hdGNoaW5nIGNvbHVtbiBmb3VuZDoiLGUpLCExO3QudmlzaWJsZT90LmhpZGUoKTp0LnNob3coKX1hZGRDb2x1bW4oZSx0LGkpe3ZhciBzPXRoaXMuY29sdW1uTWFuYWdlci5maW5kQ29sdW1uKGkpO3JldHVybiB0aGlzLmluaXRHdWFyZCgpLHRoaXMuY29sdW1uTWFuYWdlci5hZGRDb2x1bW4oZSx0LHMpLnRoZW4oKGU9PmUuZ2V0Q29tcG9uZW50KCkpKX1kZWxldGVDb2x1bW4oZSl7dmFyIHQ9dGhpcy5jb2x1bW5NYW5hZ2VyLmZpbmRDb2x1bW4oZSk7cmV0dXJuIHRoaXMuaW5pdEd1YXJkKCksdD90LmRlbGV0ZSgpOihjb25zb2xlLndhcm4oIkNvbHVtbiBEZWxldGUgRXJyb3IgLSBObyBtYXRjaGluZyBjb2x1bW4gZm91bmQ6IixlKSxQcm9taXNlLnJlamVjdCgpKX11cGRhdGVDb2x1bW5EZWZpbml0aW9uKGUsdCl7dmFyIGk9dGhpcy5jb2x1bW5NYW5hZ2VyLmZpbmRDb2x1bW4oZSk7cmV0dXJuIHRoaXMuaW5pdEd1YXJkKCksaT9pLnVwZGF0ZURlZmluaXRpb24odCk6KGNvbnNvbGUud2FybigiQ29sdW1uIFVwZGF0ZSBFcnJvciAtIE5vIG1hdGNoaW5nIGNvbHVtbiBmb3VuZDoiLGUpLFByb21pc2UucmVqZWN0KCkpfW1vdmVDb2x1bW4oZSx0LGkpe3ZhciBzPXRoaXMuY29sdW1uTWFuYWdlci5maW5kQ29sdW1uKGUpLG89dGhpcy5jb2x1bW5NYW5hZ2VyLmZpbmRDb2x1bW4odCk7dGhpcy5pbml0R3VhcmQoKSxzP28/dGhpcy5jb2x1bW5NYW5hZ2VyLm1vdmVDb2x1bW4ocyxvLGkpOmNvbnNvbGUud2FybigiTW92ZSBFcnJvciAtIE5vIG1hdGNoaW5nIGNvbHVtbiBmb3VuZDoiLG8pOmNvbnNvbGUud2FybigiTW92ZSBFcnJvciAtIE5vIG1hdGNoaW5nIGNvbHVtbiBmb3VuZDoiLGUpfXNjcm9sbFRvQ29sdW1uKGUsdCxpKXtyZXR1cm4gbmV3IFByb21pc2UoKChzLG8pPT57dmFyIG49dGhpcy5jb2x1bW5NYW5hZ2VyLmZpbmRDb2x1bW4oZSk7cmV0dXJuIG4/dGhpcy5jb2x1bW5NYW5hZ2VyLnNjcm9sbFRvQ29sdW1uKG4sdCxpKTooY29uc29sZS53YXJuKCJTY3JvbGwgRXJyb3IgLSBObyBtYXRjaGluZyBjb2x1bW4gZm91bmQ6IixlKSxQcm9taXNlLnJlamVjdCgiU2Nyb2xsIEVycm9yIC0gTm8gbWF0Y2hpbmcgY29sdW1uIGZvdW5kIikpfSkpfXJlZHJhdyhlKXt0aGlzLmluaXRHdWFyZCgpLHRoaXMuY29sdW1uTWFuYWdlci5yZWRyYXcoZSksdGhpcy5yb3dNYW5hZ2VyLnJlZHJhdyhlKX1zZXRIZWlnaHQoZSl7dGhpcy5vcHRpb25zLmhlaWdodD1pc05hTihlKT9lOmUrInB4Iix0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0PXRoaXMub3B0aW9ucy5oZWlnaHQsdGhpcy5yb3dNYW5hZ2VyLmluaXRpYWxpemVSZW5kZXJlcigpLHRoaXMucm93TWFuYWdlci5yZWRyYXcoKX1vbihlLHQpe3RoaXMuZXh0ZXJuYWxFdmVudHMuc3Vic2NyaWJlKGUsdCl9b2ZmKGUsdCl7dGhpcy5leHRlcm5hbEV2ZW50cy51bnN1YnNjcmliZShlLHQpfWRpc3BhdGNoRXZlbnQoKXtBcnJheS5mcm9tKGFyZ3VtZW50cykuc2hpZnQoKSx0aGlzLmV4dGVybmFsRXZlbnRzLmRpc3BhdGNoKC4uLmFyZ3VtZW50cyl9YWxlcnQoZSx0KXt0aGlzLmluaXRHdWFyZCgpLHRoaXMuYWxlcnRNYW5hZ2VyLmFsZXJ0KGUsdCl9Y2xlYXJBbGVydCgpe3RoaXMuaW5pdEd1YXJkKCksdGhpcy5hbGVydE1hbmFnZXIuY2xlYXIoKX1tb2RFeGlzdHMoZSx0KXtyZXR1cm4hIXRoaXMubW9kdWxlc1tlXXx8KHQmJmNvbnNvbGUuZXJyb3IoIlRhYnVsYXRvciBNb2R1bGUgTm90IEluc3RhbGxlZDogIitlKSwhMSl9bW9kdWxlKGUpe3ZhciB0PXRoaXMubW9kdWxlc1tlXTtyZXR1cm4gdHx8Y29uc29sZS5lcnJvcigiVGFidWxhdG9yIG1vZHVsZSBub3QgaW5zdGFsbGVkOiAiK2UpLHR9fU8uZGVmYXVsdE9wdGlvbnM9e2RlYnVnRXZlbnRzRXh0ZXJuYWw6ITEsZGVidWdFdmVudHNJbnRlcm5hbDohMSxkZWJ1Z0ludmFsaWRPcHRpb25zOiEwLGRlYnVnSW52YWxpZENvbXBvbmVudEZ1bmNzOiEwLGRlYnVnSW5pdGlhbGl6YXRpb246ITAsZGVidWdEZXByZWNhdGlvbjohMCxoZWlnaHQ6ITEsbWluSGVpZ2h0OiExLG1heEhlaWdodDohMSxjb2x1bW5IZWFkZXJWZXJ0QWxpZ246InRvcCIscG9wdXBDb250YWluZXI6ITEsY29sdW1uczpbXSxjb2x1bW5EZWZhdWx0czp7fSxkYXRhOiExLGF1dG9Db2x1bW5zOiExLGF1dG9Db2x1bW5zRGVmaW5pdGlvbnM6ITEsbmVzdGVkRmllbGRTZXBhcmF0b3I6Ii4iLGZvb3RlckVsZW1lbnQ6ITEsaW5kZXg6ImlkIix0ZXh0RGlyZWN0aW9uOiJhdXRvIixhZGRSb3dQb3M6ImJvdHRvbSIsaGVhZGVyVmlzaWJsZTohMCxyZW5kZXJWZXJ0aWNhbDoidmlydHVhbCIscmVuZGVySG9yaXpvbnRhbDoiYmFzaWMiLHJlbmRlclZlcnRpY2FsQnVmZmVyOjAsc2Nyb2xsVG9Sb3dQb3NpdGlvbjoidG9wIixzY3JvbGxUb1Jvd0lmVmlzaWJsZTohMCxzY3JvbGxUb0NvbHVtblBvc2l0aW9uOiJsZWZ0IixzY3JvbGxUb0NvbHVtbklmVmlzaWJsZTohMCxyb3dGb3JtYXR0ZXI6ITEscm93Rm9ybWF0dGVyUHJpbnQ6bnVsbCxyb3dGb3JtYXR0ZXJDbGlwYm9hcmQ6bnVsbCxyb3dGb3JtYXR0ZXJIdG1sT3V0cHV0Om51bGwscm93SGVpZ2h0Om51bGwscGxhY2Vob2xkZXI6ITEsZGF0YUxvYWRlcjohMCxkYXRhTG9hZGVyTG9hZGluZzohMSxkYXRhTG9hZGVyRXJyb3I6ITEsZGF0YUxvYWRlckVycm9yVGltZW91dDozZTMsZGF0YVNlbmRQYXJhbXM6e30sZGF0YVJlY2VpdmVQYXJhbXM6e319LG5ldyBGKE8pO2NsYXNzIEEgZXh0ZW5kcyBre2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuYWxsb3dlZFR5cGVzPVsiIiwiZGF0YSIsImRvd25sb2FkIiwiY2xpcGJvYXJkIiwicHJpbnQiLCJodG1sT3V0cHV0Il0sdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiYWNjZXNzb3IiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJhY2Nlc3NvclBhcmFtcyIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImFjY2Vzc29yRGF0YSIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImFjY2Vzc29yRGF0YVBhcmFtcyIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImFjY2Vzc29yRG93bmxvYWQiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJhY2Nlc3NvckRvd25sb2FkUGFyYW1zIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiYWNjZXNzb3JDbGlwYm9hcmQiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJhY2Nlc3NvckNsaXBib2FyZFBhcmFtcyIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImFjY2Vzc29yUHJpbnQiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJhY2Nlc3NvclByaW50UGFyYW1zIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiYWNjZXNzb3JIdG1sT3V0cHV0IiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiYWNjZXNzb3JIdG1sT3V0cHV0UGFyYW1zIil9aW5pdGlhbGl6ZSgpe3RoaXMuc3Vic2NyaWJlKCJjb2x1bW4tbGF5b3V0Iix0aGlzLmluaXRpYWxpemVDb2x1bW4uYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvdy1kYXRhLXJldHJpZXZlIix0aGlzLnRyYW5zZm9ybVJvdy5iaW5kKHRoaXMpKX1pbml0aWFsaXplQ29sdW1uKGUpe3ZhciB0PSExLGk9e307dGhpcy5hbGxvd2VkVHlwZXMuZm9yRWFjaCgocz0+e3ZhciBvLG49ImFjY2Vzc29yIisocy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzLnNsaWNlKDEpKTtlLmRlZmluaXRpb25bbl0mJihvPXRoaXMubG9va3VwQWNjZXNzb3IoZS5kZWZpbml0aW9uW25dKSkmJih0PSEwLGlbbl09e2FjY2Vzc29yOm8scGFyYW1zOmUuZGVmaW5pdGlvbltuKyJQYXJhbXMiXXx8e319KX0pKSx0JiYoZS5tb2R1bGVzLmFjY2Vzc29yPWkpfWxvb2t1cEFjY2Vzc29yKGUpe3ZhciB0PSExO3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSJzdHJpbmciOkEuYWNjZXNzb3JzW2VdP3Q9QS5hY2Nlc3NvcnNbZV06Y29uc29sZS53YXJuKCJBY2Nlc3NvciBFcnJvciAtIE5vIHN1Y2ggYWNjZXNzb3IgZm91bmQsIGlnbm9yaW5nOiAiLGUpO2JyZWFrO2Nhc2UiZnVuY3Rpb24iOnQ9ZX1yZXR1cm4gdH10cmFuc2Zvcm1Sb3coZSx0KXt2YXIgaT0iYWNjZXNzb3IiKyh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSkpLHM9ZS5nZXRDb21wb25lbnQoKSxvPXIuZGVlcENsb25lKGUuZGF0YXx8e30pO3JldHVybiB0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIudHJhdmVyc2UoKGZ1bmN0aW9uKGUpe3ZhciBuLHIsYSxsO2UubW9kdWxlcy5hY2Nlc3NvciYmKHI9ZS5tb2R1bGVzLmFjY2Vzc29yW2ldfHxlLm1vZHVsZXMuYWNjZXNzb3IuYWNjZXNzb3J8fCExKSYmInVuZGVmaW5lZCIhPShuPWUuZ2V0RmllbGRWYWx1ZShvKSkmJihsPWUuZ2V0Q29tcG9uZW50KCksYT0iZnVuY3Rpb24iPT10eXBlb2Ygci5wYXJhbXM/ci5wYXJhbXMobixvLHQsbCxzKTpyLnBhcmFtcyxlLnNldEZpZWxkVmFsdWUobyxyLmFjY2Vzc29yKG4sbyx0LGEsbCxzKSkpfSkpLG99fUEubW9kdWxlTmFtZT0iYWNjZXNzb3IiLEEuYWNjZXNzb3JzPXt9O2Z1bmN0aW9uIF8oZSx0KXt2YXIgaT1bXTtpZih0PXR8fCIiLEFycmF5LmlzQXJyYXkoZSkpZS5mb3JFYWNoKCgoZSxzKT0+e2k9aS5jb25jYXQoXyhlLHQ/dCsiWyIrcysiXSI6cykpfSkpO2Vsc2UgaWYoIm9iamVjdCI9PXR5cGVvZiBlKWZvcih2YXIgcyBpbiBlKWk9aS5jb25jYXQoXyhlW3NdLHQ/dCsiWyIrcysiXSI6cykpO2Vsc2UgaS5wdXNoKHtrZXk6dCx2YWx1ZTplfSk7cmV0dXJuIGl9ZnVuY3Rpb24gQihlKXt2YXIgdD1fKGUpLGk9W107cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChlLmtleSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChlLnZhbHVlKSl9KSksaS5qb2luKCImIil9ZnVuY3Rpb24gSShlLHQsaSl7cmV0dXJuIGUmJmkmJk9iamVjdC5rZXlzKGkpLmxlbmd0aCYmKHQubWV0aG9kJiYiZ2V0IiE9dC5tZXRob2QudG9Mb3dlckNhc2UoKXx8KHQubWV0aG9kPSJnZXQiLGUrPShlLmluY2x1ZGVzKCI/Iik/IiYiOiI/IikrQihpKSkpLGV9ZnVuY3Rpb24gVihlLHQpe3ZhciBpPVtdO2lmKHQ9dHx8IiIsQXJyYXkuaXNBcnJheShlKSllLmZvckVhY2goKChlLHMpPT57aT1pLmNvbmNhdChWKGUsdD90KyJbIitzKyJdIjpzKSl9KSk7ZWxzZSBpZigib2JqZWN0Ij09dHlwZW9mIGUpZm9yKHZhciBzIGluIGUpaT1pLmNvbmNhdChWKGVbc10sdD90KyJbIitzKyJdIjpzKSk7ZWxzZSBpLnB1c2goe2tleTp0LHZhbHVlOmV9KTtyZXR1cm4gaX12YXIgTj17anNvbjp7aGVhZGVyczp7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL2pzb24ifSxib2R5OmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoaSl9fSxmb3JtOntoZWFkZXJzOnt9LGJvZHk6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPVYoaSksbz1uZXcgRm9ybURhdGE7cmV0dXJuIHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7by5hcHBlbmQoZS5rZXksZS52YWx1ZSl9KSksb319fTtjbGFzcyBXIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmNvbmZpZz17fSx0aGlzLnVybD0iIix0aGlzLnVybEdlbmVyYXRvcj0hMSx0aGlzLnBhcmFtcz0hMSx0aGlzLmxvYWRlclByb21pc2U9ITEsdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJhamF4VVJMIiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJhamF4VVJMR2VuZXJhdG9yIiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJhamF4UGFyYW1zIix7fSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJhamF4Q29uZmlnIiwiZ2V0IiksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJhamF4Q29udGVudFR5cGUiLCJmb3JtIiksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJhamF4UmVxdWVzdEZ1bmMiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImFqYXhSZXF1ZXN0aW5nIiwoZnVuY3Rpb24oKXt9KSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJhamF4UmVzcG9uc2UiLCExKSx0aGlzLmNvbnRlbnRUeXBlRm9ybWF0dGVycz1XLmNvbnRlbnRUeXBlRm9ybWF0dGVyc31pbml0aWFsaXplKCl7dGhpcy5sb2FkZXJQcm9taXNlPXRoaXMudGFibGUub3B0aW9ucy5hamF4UmVxdWVzdEZ1bmN8fFcuZGVmYXVsdExvYWRlclByb21pc2UsdGhpcy51cmxHZW5lcmF0b3I9dGhpcy50YWJsZS5vcHRpb25zLmFqYXhVUkxHZW5lcmF0b3J8fFcuZGVmYXVsdFVSTEdlbmVyYXRvcix0aGlzLnRhYmxlLm9wdGlvbnMuYWpheFVSTCYmdGhpcy5zZXRVcmwodGhpcy50YWJsZS5vcHRpb25zLmFqYXhVUkwpLHRoaXMuc2V0RGVmYXVsdENvbmZpZyh0aGlzLnRhYmxlLm9wdGlvbnMuYWpheENvbmZpZyksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImdldEFqYXhVcmwiLHRoaXMuZ2V0VXJsLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJkYXRhLWxvYWRpbmciLHRoaXMucmVxdWVzdERhdGFDaGVjay5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiZGF0YS1wYXJhbXMiLHRoaXMucmVxdWVzdFBhcmFtcy5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiZGF0YS1sb2FkIix0aGlzLnJlcXVlc3REYXRhLmJpbmQodGhpcykpfXJlcXVlc3RQYXJhbXMoZSx0LGkscyl7dmFyIG89dGhpcy50YWJsZS5vcHRpb25zLmFqYXhQYXJhbXM7cmV0dXJuIG8mJigiZnVuY3Rpb24iPT10eXBlb2YgbyYmKG89by5jYWxsKHRoaXMudGFibGUpKSxzPU9iamVjdC5hc3NpZ24ocyxvKSksc31yZXF1ZXN0RGF0YUNoZWNrKGUsdCxpLHMpe3JldHVybiEoKGV8fCF0aGlzLnVybCkmJiJzdHJpbmciIT10eXBlb2YgZSl9cmVxdWVzdERhdGEoZSx0LGkscyxvKXt2YXIgbjtyZXR1cm4hbyYmdGhpcy5yZXF1ZXN0RGF0YUNoZWNrKGUpPyhlJiZ0aGlzLnNldFVybChlKSxuPXRoaXMuZ2VuZXJhdGVDb25maWcoaSksdGhpcy5zZW5kUmVxdWVzdCh0aGlzLnVybCx0LG4pKTpvfXNldERlZmF1bHRDb25maWcoZT17fSl7dGhpcy5jb25maWc9T2JqZWN0LmFzc2lnbih7fSxXLmRlZmF1bHRDb25maWcpLCJzdHJpbmciPT10eXBlb2YgZT90aGlzLmNvbmZpZy5tZXRob2Q9ZTpPYmplY3QuYXNzaWduKHRoaXMuY29uZmlnLGUpfWdlbmVyYXRlQ29uZmlnKGU9e30pe3ZhciB0PU9iamVjdC5hc3NpZ24oe30sdGhpcy5jb25maWcpO3JldHVybiJzdHJpbmciPT10eXBlb2YgZT90Lm1ldGhvZD1lOk9iamVjdC5hc3NpZ24odCxlKSx0fXNldFVybChlKXt0aGlzLnVybD1lfWdldFVybCgpe3JldHVybiB0aGlzLnVybH1zZW5kUmVxdWVzdChlLHQsaSl7cmV0dXJuITEhPT10aGlzLnRhYmxlLm9wdGlvbnMuYWpheFJlcXVlc3RpbmcuY2FsbCh0aGlzLnRhYmxlLGUsdCk/dGhpcy5sb2FkZXJQcm9taXNlKGUsaSx0KS50aGVuKChpPT4odGhpcy50YWJsZS5vcHRpb25zLmFqYXhSZXNwb25zZSYmKGk9dGhpcy50YWJsZS5vcHRpb25zLmFqYXhSZXNwb25zZS5jYWxsKHRoaXMudGFibGUsZSx0LGkpKSxpKSkpOlByb21pc2UucmVqZWN0KCl9fVcubW9kdWxlTmFtZT0iYWpheCIsVy5kZWZhdWx0Q29uZmlnPXttZXRob2Q6IkdFVCJ9LFcuZGVmYXVsdFVSTEdlbmVyYXRvcj1JLFcuZGVmYXVsdExvYWRlclByb21pc2U9ZnVuY3Rpb24oZSx0LGkpe3ZhciBzO3JldHVybiBuZXcgUHJvbWlzZSgoKG8sbik9PntpZihlPXRoaXMudXJsR2VuZXJhdG9yLmNhbGwodGhpcy50YWJsZSxlLHQsaSksIkdFVCIhPXQubWV0aG9kLnRvVXBwZXJDYXNlKCkpaWYocz0ib2JqZWN0Ij09dHlwZW9mIHRoaXMudGFibGUub3B0aW9ucy5hamF4Q29udGVudFR5cGU/dGhpcy50YWJsZS5vcHRpb25zLmFqYXhDb250ZW50VHlwZTp0aGlzLmNvbnRlbnRUeXBlRm9ybWF0dGVyc1t0aGlzLnRhYmxlLm9wdGlvbnMuYWpheENvbnRlbnRUeXBlXSl7Zm9yKHZhciByIGluIHMuaGVhZGVycyl0LmhlYWRlcnN8fCh0LmhlYWRlcnM9e30pLHZvaWQgMD09PXQuaGVhZGVyc1tyXSYmKHQuaGVhZGVyc1tyXT1zLmhlYWRlcnNbcl0pO3QuYm9keT1zLmJvZHkuY2FsbCh0aGlzLGUsdCxpKX1lbHNlIGNvbnNvbGUud2FybigiQWpheCBFcnJvciAtIEludmFsaWQgYWpheENvbnRlbnRUeXBlIHZhbHVlOiIsdGhpcy50YWJsZS5vcHRpb25zLmFqYXhDb250ZW50VHlwZSk7ZT8odm9pZCAwPT09dC5oZWFkZXJzJiYodC5oZWFkZXJzPXt9KSx2b2lkIDA9PT10LmhlYWRlcnMuQWNjZXB0JiYodC5oZWFkZXJzLkFjY2VwdD0iYXBwbGljYXRpb24vanNvbiIpLHZvaWQgMD09PXQuaGVhZGVyc1siWC1SZXF1ZXN0ZWQtV2l0aCJdJiYodC5oZWFkZXJzWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0Iiksdm9pZCAwPT09dC5tb2RlJiYodC5tb2RlPSJjb3JzIiksImNvcnMiPT10Lm1vZGU/KHZvaWQgMD09PXQuaGVhZGVycy5PcmlnaW4mJih0LmhlYWRlcnMuT3JpZ2luPXdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pLHZvaWQgMD09PXQuY3JlZGVudGlhbHMmJih0LmNyZWRlbnRpYWxzPSJzYW1lLW9yaWdpbiIpKTp2b2lkIDA9PT10LmNyZWRlbnRpYWxzJiYodC5jcmVkZW50aWFscz0iaW5jbHVkZSIpLGZldGNoKGUsdCkudGhlbigoZT0+e2Uub2s/ZS5qc29uKCkudGhlbigoZT0+e28oZSl9KSkuY2F0Y2goKGU9PntuKGUpLGNvbnNvbGUud2FybigiQWpheCBMb2FkIEVycm9yIC0gSW52YWxpZCBKU09OIHJldHVybmVkIixlKX0pKTooY29uc29sZS5lcnJvcigiQWpheCBMb2FkIEVycm9yIC0gQ29ubmVjdGlvbiBFcnJvcjogIitlLnN0YXR1cyxlLnN0YXR1c1RleHQpLG4oZSkpfSkpLmNhdGNoKChlPT57Y29uc29sZS5lcnJvcigiQWpheCBMb2FkIEVycm9yIC0gQ29ubmVjdGlvbiBFcnJvcjogIixlKSxuKGUpfSkpKTooY29uc29sZS53YXJuKCJBamF4IExvYWQgRXJyb3IgLSBObyBVUkwgU2V0IiksbyhbXSkpfSkpfSxXLmNvbnRlbnRUeXBlRm9ybWF0dGVycz1OO2NsYXNzIGogZXh0ZW5kcyBre2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMubW9kZT0hMCx0aGlzLnBhc3RlUGFyc2VyPWZ1bmN0aW9uKCl7fSx0aGlzLnBhc3RlQWN0aW9uPWZ1bmN0aW9uKCl7fSx0aGlzLmN1c3RvbVNlbGVjdGlvbj0hMSx0aGlzLnJvd1JhbmdlPSExLHRoaXMuYmxvY2tlZD0hMCx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImNsaXBib2FyZCIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiY2xpcGJvYXJkQ29weVN0eWxlZCIsITApLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiY2xpcGJvYXJkQ29weUNvbmZpZyIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiY2xpcGJvYXJkQ29weUZvcm1hdHRlciIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiY2xpcGJvYXJkQ29weVJvd1JhbmdlIiwiYWN0aXZlIiksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJjbGlwYm9hcmRQYXN0ZVBhcnNlciIsInRhYmxlIiksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJjbGlwYm9hcmRQYXN0ZUFjdGlvbiIsImluc2VydCIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImNsaXBib2FyZCIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oInRpdGxlQ2xpcGJvYXJkIil9aW5pdGlhbGl6ZSgpe3RoaXMubW9kZT10aGlzLnRhYmxlLm9wdGlvbnMuY2xpcGJvYXJkLHRoaXMucm93UmFuZ2U9dGhpcy50YWJsZS5vcHRpb25zLmNsaXBib2FyZENvcHlSb3dSYW5nZSwhMCE9PXRoaXMubW9kZSYmImNvcHkiIT09dGhpcy5tb2RlfHx0aGlzLnRhYmxlLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY29weSIsKGU9Pnt2YXIgdCxpLHM7dGhpcy5ibG9ja2VkfHwoZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuY3VzdG9tU2VsZWN0aW9uPyh0PXRoaXMuY3VzdG9tU2VsZWN0aW9uLHRoaXMudGFibGUub3B0aW9ucy5jbGlwYm9hcmRDb3B5Rm9ybWF0dGVyJiYodD10aGlzLnRhYmxlLm9wdGlvbnMuY2xpcGJvYXJkQ29weUZvcm1hdHRlcigicGxhaW4iLHQpKSk6KHM9dGhpcy50YWJsZS5tb2R1bGVzLmV4cG9ydC5nZW5lcmF0ZUV4cG9ydExpc3QodGhpcy50YWJsZS5vcHRpb25zLmNsaXBib2FyZENvcHlDb25maWcsdGhpcy50YWJsZS5vcHRpb25zLmNsaXBib2FyZENvcHlTdHlsZWQsdGhpcy5yb3dSYW5nZSwiY2xpcGJvYXJkIiksdD0oaT10aGlzLnRhYmxlLm1vZHVsZXMuZXhwb3J0LmdlbmVyYXRlSFRNTFRhYmxlKHMpKT90aGlzLmdlbmVyYXRlUGxhaW5Db250ZW50KHMpOiIiLHRoaXMudGFibGUub3B0aW9ucy5jbGlwYm9hcmRDb3B5Rm9ybWF0dGVyJiYodD10aGlzLnRhYmxlLm9wdGlvbnMuY2xpcGJvYXJkQ29weUZvcm1hdHRlcigicGxhaW4iLHQpLGk9dGhpcy50YWJsZS5vcHRpb25zLmNsaXBib2FyZENvcHlGb3JtYXR0ZXIoImh0bWwiLGkpKSksd2luZG93LmNsaXBib2FyZERhdGEmJndpbmRvdy5jbGlwYm9hcmREYXRhLnNldERhdGE/d2luZG93LmNsaXBib2FyZERhdGEuc2V0RGF0YSgiVGV4dCIsdCk6ZS5jbGlwYm9hcmREYXRhJiZlLmNsaXBib2FyZERhdGEuc2V0RGF0YT8oZS5jbGlwYm9hcmREYXRhLnNldERhdGEoInRleHQvcGxhaW4iLHQpLGkmJmUuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCJ0ZXh0L2h0bWwiLGkpKTplLm9yaWdpbmFsRXZlbnQmJmUub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhLnNldERhdGEmJihlLm9yaWdpbmFsRXZlbnQuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCJ0ZXh0L3BsYWluIix0KSxpJiZlLm9yaWdpbmFsRXZlbnQuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCJ0ZXh0L2h0bWwiLGkpKSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoImNsaXBib2FyZENvcGllZCIsdCxpKSx0aGlzLnJlc2V0KCkpfSkpLCEwIT09dGhpcy5tb2RlJiYicGFzdGUiIT09dGhpcy5tb2RlfHx0aGlzLnRhYmxlLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicGFzdGUiLChlPT57dGhpcy5wYXN0ZShlKX0pKSx0aGlzLnNldFBhc3RlUGFyc2VyKHRoaXMudGFibGUub3B0aW9ucy5jbGlwYm9hcmRQYXN0ZVBhcnNlciksdGhpcy5zZXRQYXN0ZUFjdGlvbih0aGlzLnRhYmxlLm9wdGlvbnMuY2xpcGJvYXJkUGFzdGVBY3Rpb24pLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJjb3B5VG9DbGlwYm9hcmQiLHRoaXMuY29weS5iaW5kKHRoaXMpKX1yZXNldCgpe3RoaXMuYmxvY2tlZD0hMCx0aGlzLmN1c3RvbVNlbGVjdGlvbj0hMX1nZW5lcmF0ZVBsYWluQ29udGVudChlKXt2YXIgdD1bXTtyZXR1cm4gZS5mb3JFYWNoKChlPT57dmFyIGk9W107ZS5jb2x1bW5zLmZvckVhY2goKHQ9Pnt2YXIgcz0iIjtpZih0KWlmKCJncm91cCI9PT1lLnR5cGUmJih0LnZhbHVlPXQuY29tcG9uZW50LmdldEtleSgpKSxudWxsPT09dC52YWx1ZSlzPSIiO2Vsc2Ugc3dpdGNoKHR5cGVvZiB0LnZhbHVlKXtjYXNlIm9iamVjdCI6cz1KU09OLnN0cmluZ2lmeSh0LnZhbHVlKTticmVhaztjYXNlInVuZGVmaW5lZCI6cz0iIjticmVhaztkZWZhdWx0OnM9dC52YWx1ZX1pLnB1c2gocyl9KSksdC5wdXNoKGkuam9pbigiXHQiKSl9KSksdC5qb2luKCJcbiIpfWNvcHkoZSx0KXt2YXIgaSxzO3RoaXMuYmxvY2tlZD0hMSx0aGlzLmN1c3RvbVNlbGVjdGlvbj0hMSwhMCE9PXRoaXMubW9kZSYmImNvcHkiIT09dGhpcy5tb2RlfHwodGhpcy5yb3dSYW5nZT1lfHx0aGlzLnRhYmxlLm9wdGlvbnMuY2xpcGJvYXJkQ29weVJvd1JhbmdlLHZvaWQgMCE9PXdpbmRvdy5nZXRTZWxlY3Rpb24mJnZvaWQgMCE9PWRvY3VtZW50LmNyZWF0ZVJhbmdlPygoZT1kb2N1bWVudC5jcmVhdGVSYW5nZSgpKS5zZWxlY3ROb2RlQ29udGVudHModGhpcy50YWJsZS5lbGVtZW50KSwoaT13aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLnRvU3RyaW5nKCkmJnQmJih0aGlzLmN1c3RvbVNlbGVjdGlvbj1pLnRvU3RyaW5nKCkpLGkucmVtb3ZlQWxsUmFuZ2VzKCksaS5hZGRSYW5nZShlKSk6dm9pZCAwIT09ZG9jdW1lbnQuc2VsZWN0aW9uJiZ2b2lkIDAhPT1kb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSYmKChzPWRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCkpLm1vdmVUb0VsZW1lbnRUZXh0KHRoaXMudGFibGUuZWxlbWVudCkscy5zZWxlY3QoKSksZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKSxpJiZpLnJlbW92ZUFsbFJhbmdlcygpKX1zZXRQYXN0ZUFjdGlvbihlKXtzd2l0Y2godHlwZW9mIGUpe2Nhc2Uic3RyaW5nIjp0aGlzLnBhc3RlQWN0aW9uPWoucGFzdGVBY3Rpb25zW2VdLHRoaXMucGFzdGVBY3Rpb258fGNvbnNvbGUud2FybigiQ2xpcGJvYXJkIEVycm9yIC0gTm8gc3VjaCBwYXN0ZSBhY3Rpb24gZm91bmQ6IixlKTticmVhaztjYXNlImZ1bmN0aW9uIjp0aGlzLnBhc3RlQWN0aW9uPWV9fXNldFBhc3RlUGFyc2VyKGUpe3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSJzdHJpbmciOnRoaXMucGFzdGVQYXJzZXI9ai5wYXN0ZVBhcnNlcnNbZV0sdGhpcy5wYXN0ZVBhcnNlcnx8Y29uc29sZS53YXJuKCJDbGlwYm9hcmQgRXJyb3IgLSBObyBzdWNoIHBhc3RlIHBhcnNlciBmb3VuZDoiLGUpO2JyZWFrO2Nhc2UiZnVuY3Rpb24iOnRoaXMucGFzdGVQYXJzZXI9ZX19cGFzdGUoZSl7dmFyIHQsaSxzO3RoaXMuY2hlY2tQYXNlT3JpZ2luKGUpJiYodD10aGlzLmdldFBhc3RlRGF0YShlKSwoaT10aGlzLnBhc3RlUGFyc2VyLmNhbGwodGhpcyx0KSk/KGUucHJldmVudERlZmF1bHQoKSx0aGlzLnRhYmxlLm1vZEV4aXN0cygibXV0YXRvciIpJiYoaT10aGlzLm11dGF0ZURhdGEoaSkpLHM9dGhpcy5wYXN0ZUFjdGlvbi5jYWxsKHRoaXMsaSksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJjbGlwYm9hcmRQYXN0ZWQiLHQsaSxzKSk6dGhpcy5kaXNwYXRjaEV4dGVybmFsKCJjbGlwYm9hcmRQYXN0ZUVycm9yIix0KSl9bXV0YXRlRGF0YShlKXt2YXIgdD1bXTtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lLmZvckVhY2goKGU9Pnt0LnB1c2godGhpcy50YWJsZS5tb2R1bGVzLm11dGF0b3IudHJhbnNmb3JtUm93KGUsImNsaXBib2FyZCIpKX0pKTp0PWUsdH1jaGVja1Bhc2VPcmlnaW4oZSl7dmFyIHQ9ITA7cmV0dXJuKCJESVYiIT1lLnRhcmdldC50YWdOYW1lfHx0aGlzLnRhYmxlLm1vZHVsZXMuZWRpdC5jdXJyZW50Q2VsbCkmJih0PSExKSx0fWdldFBhc3RlRGF0YShlKXt2YXIgdDtyZXR1cm4gd2luZG93LmNsaXBib2FyZERhdGEmJndpbmRvdy5jbGlwYm9hcmREYXRhLmdldERhdGE/dD13aW5kb3cuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCJUZXh0Iik6ZS5jbGlwYm9hcmREYXRhJiZlLmNsaXBib2FyZERhdGEuZ2V0RGF0YT90PWUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCJ0ZXh0L3BsYWluIik6ZS5vcmlnaW5hbEV2ZW50JiZlLm9yaWdpbmFsRXZlbnQuY2xpcGJvYXJkRGF0YS5nZXREYXRhJiYodD1lLm9yaWdpbmFsRXZlbnQuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCJ0ZXh0L3BsYWluIikpLHR9fWoubW9kdWxlTmFtZT0iY2xpcGJvYXJkIixqLnBhc3RlQWN0aW9ucz17cmVwbGFjZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50YWJsZS5zZXREYXRhKGUpfSx1cGRhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGFibGUudXBkYXRlT3JBZGREYXRhKGUpfSxpbnNlcnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGFibGUuYWRkRGF0YShlKX19LGoucGFzdGVQYXJzZXJzPXt0YWJsZTpmdW5jdGlvbihlKXt2YXIgdD1bXSxpPSEwLHM9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmNvbHVtbnMsbz1bXSxuPVtdO3JldHVybihlPWUuc3BsaXQoIlxuIikpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QucHVzaChlLnNwbGl0KCJcdCIpKX0pKSwhKCF0Lmxlbmd0aHx8MT09PXQubGVuZ3RoJiZ0WzBdLmxlbmd0aDwyKSYmKHRbMF0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9cy5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gZSYmdC5kZWZpbml0aW9uLnRpdGxlJiZlLnRyaW0oKSYmdC5kZWZpbml0aW9uLnRpdGxlLnRyaW0oKT09PWUudHJpbSgpfSkpO3Q/by5wdXNoKHQpOmk9ITF9KSksaXx8KGk9ITAsbz1bXSx0WzBdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PXMuZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIGUmJnQuZmllbGQmJmUudHJpbSgpJiZ0LmZpZWxkLnRyaW0oKT09PWUudHJpbSgpfSkpO3Q/by5wdXNoKHQpOmk9ITF9KSksaXx8KG89dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmNvbHVtbnNCeUluZGV4KSksaSYmdC5zaGlmdCgpLHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9e307ZS5mb3JFYWNoKChmdW5jdGlvbihlLGkpe29baV0mJih0W29baV0uZmllbGRdPWUpfSkpLG4ucHVzaCh0KX0pKSxuKX19O2NsYXNzIEd7Y29uc3RydWN0b3IoZSl7cmV0dXJuIHRoaXMuX3Jvdz1lLG5ldyBQcm94eSh0aGlzLHtnZXQ6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiB2b2lkIDAhPT1lW3RdP2VbdF06ZS5fcm93LnRhYmxlLmNvbXBvbmVudEZ1bmN0aW9uQmluZGVyLmhhbmRsZSgicm93IixlLl9yb3csdCl9fSl9Z2V0RGF0YShlKXtyZXR1cm4gdGhpcy5fcm93LmdldERhdGEoZSl9Z2V0RWxlbWVudCgpe3JldHVybiB0aGlzLl9yb3cuZ2V0RWxlbWVudCgpfWdldFRhYmxlKCl7cmV0dXJuIHRoaXMuX3Jvdy50YWJsZX1nZXRDZWxscygpe3ZhciBlPVtdO3JldHVybiB0aGlzLl9yb3cuZ2V0Q2VsbHMoKS5mb3JFYWNoKChmdW5jdGlvbih0KXtlLnB1c2godC5nZXRDb21wb25lbnQoKSl9KSksZX1nZXRDZWxsKGUpe3ZhciB0PXRoaXMuX3Jvdy5nZXRDZWxsKGUpO3JldHVybiEhdCYmdC5nZXRDb21wb25lbnQoKX1fZ2V0U2VsZigpe3JldHVybiB0aGlzLl9yb3d9fXZhciBVPXthdmc6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPTAsbz12b2lkIDAhPT1pLnByZWNpc2lvbj9pLnByZWNpc2lvbjoyO3JldHVybiBlLmxlbmd0aCYmKHM9ZS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIE51bWJlcihlKStOdW1iZXIodCl9KSkscy89ZS5sZW5ndGgscz0hMSE9PW8/cy50b0ZpeGVkKG8pOnMpLHBhcnNlRmxvYXQocykudG9TdHJpbmcoKX0sbWF4OmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz1udWxsLG89dm9pZCAwIT09aS5wcmVjaXNpb24mJmkucHJlY2lzaW9uO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpeygoZT1OdW1iZXIoZSkpPnN8fG51bGw9PT1zKSYmKHM9ZSl9KSksbnVsbCE9PXM/ITEhPT1vP3MudG9GaXhlZChvKTpzOiIifSxtaW46ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPW51bGwsbz12b2lkIDAhPT1pLnByZWNpc2lvbiYmaS5wcmVjaXNpb247cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7KChlPU51bWJlcihlKSk8c3x8bnVsbD09PXMpJiYocz1lKX0pKSxudWxsIT09cz8hMSE9PW8/cy50b0ZpeGVkKG8pOnM6IiJ9LHN1bTpmdW5jdGlvbihlLHQsaSl7dmFyIHM9MCxvPXZvaWQgMCE9PWkucHJlY2lzaW9uJiZpLnByZWNpc2lvbjtyZXR1cm4gZS5sZW5ndGgmJmUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZT1OdW1iZXIoZSkscys9aXNOYU4oZSk/MDpOdW1iZXIoZSl9KSksITEhPT1vP3MudG9GaXhlZChvKTpzfSxjb25jYXQ6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPTA7cmV0dXJuIGUubGVuZ3RoJiYocz1lLnJlZHVjZSgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gU3RyaW5nKGUpK1N0cmluZyh0KX0pKSksc30sY291bnQ6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPTA7cmV0dXJuIGUubGVuZ3RoJiZlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UmJnMrK30pKSxzfSx1bmlxdWU6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBlLmZpbHRlcigoKHQsaSk9PihlfHwwPT09dCkmJmUuaW5kZXhPZih0KT09PWkpKS5sZW5ndGh9fTtjbGFzcyBYIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnRvcENhbGNzPVtdLHRoaXMuYm90Q2FsY3M9W10sdGhpcy5nZW5Db2x1bW49ITEsdGhpcy50b3BFbGVtZW50PXRoaXMuY3JlYXRlRWxlbWVudCgpLHRoaXMuYm90RWxlbWVudD10aGlzLmNyZWF0ZUVsZW1lbnQoKSx0aGlzLnRvcFJvdz0hMSx0aGlzLmJvdFJvdz0hMSx0aGlzLnRvcEluaXRpYWxpemVkPSExLHRoaXMuYm90SW5pdGlhbGl6ZWQ9ITEsdGhpcy5ibG9ja2VkPSExLHRoaXMucmVjYWxjQWZ0ZXJCbG9jaz0hMSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImNvbHVtbkNhbGNzIiwhMCksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigidG9wQ2FsYyIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oInRvcENhbGNQYXJhbXMiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJ0b3BDYWxjRm9ybWF0dGVyIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigidG9wQ2FsY0Zvcm1hdHRlclBhcmFtcyIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImJvdHRvbUNhbGMiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJib3R0b21DYWxjUGFyYW1zIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiYm90dG9tQ2FsY0Zvcm1hdHRlciIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImJvdHRvbUNhbGNGb3JtYXR0ZXJQYXJhbXMiKX1jcmVhdGVFbGVtZW50KCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWNhbGNzLWhvbGRlciIpLGV9aW5pdGlhbGl6ZSgpe3RoaXMuZ2VuQ29sdW1uPW5ldyBuKHtmaWVsZDoidmFsdWUifSx0aGlzKSx0aGlzLnN1YnNjcmliZSgiY2VsbC12YWx1ZS1jaGFuZ2VkIix0aGlzLmNlbGxWYWx1ZUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1pbml0Iix0aGlzLmluaXRpYWxpemVDb2x1bW5DaGVjay5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgicm93LWRlbGV0ZWQiLHRoaXMucm93c1VwZGF0ZWQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInNjcm9sbC1ob3Jpem9udGFsIix0aGlzLnNjcm9sbEhvcml6b250YWwuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvdy1hZGRlZCIsdGhpcy5yb3dzVXBkYXRlZC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLW1vdmVkIix0aGlzLnJlY2FsY0FjdGl2ZVJvd3MuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1hZGQiLHRoaXMucmVjYWxjQWN0aXZlUm93cy5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiZGF0YS1yZWZyZXNoZWQiLHRoaXMucmVjYWxjQWN0aXZlUm93c1JlZnJlc2guYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInRhYmxlLXJlZHJhdyIsdGhpcy50YWJsZVJlZHJhdy5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgicm93cy12aXNpYmxlIix0aGlzLnZpc2libGVSb3dzLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJzY3JvbGxiYXItdmVydGljYWwiLHRoaXMuYWRqdXN0Rm9yU2Nyb2xsYmFyLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJyZWRyYXctYmxvY2tlZCIsdGhpcy5ibG9ja1JlZHJhdy5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgicmVkcmF3LXJlc3RvcmVkIix0aGlzLnJlc3RvcmVSZWRyYXcuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInRhYmxlLXJlZHJhd2luZyIsdGhpcy5yZXNpemVIb2xkZXJXaWR0aC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLXJlc2l6ZWQiLHRoaXMucmVzaXplSG9sZGVyV2lkdGguYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1zaG93Iix0aGlzLnJlc2l6ZUhvbGRlcldpZHRoLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4taGlkZSIsdGhpcy5yZXNpemVIb2xkZXJXaWR0aC5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigiZ2V0Q2FsY1Jlc3VsdHMiLHRoaXMuZ2V0UmVzdWx0cy5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigicmVjYWxjIix0aGlzLnVzZXJSZWNhbGMuYmluZCh0aGlzKSksdGhpcy5yZXNpemVIb2xkZXJXaWR0aCgpfXJlc2l6ZUhvbGRlcldpZHRoKCl7dGhpcy50b3BFbGVtZW50LnN0eWxlLm1pbldpZHRoPXRoaXMudGFibGUuY29sdW1uTWFuYWdlci5oZWFkZXJzRWxlbWVudC5vZmZzZXRXaWR0aCsicHgifXRhYmxlUmVkcmF3KGUpe3RoaXMucmVjYWxjKHRoaXMudGFibGUucm93TWFuYWdlci5hY3RpdmVSb3dzKSxlJiZ0aGlzLnJlZHJhdygpfWJsb2NrUmVkcmF3KCl7dGhpcy5ibG9ja2VkPSEwLHRoaXMucmVjYWxjQWZ0ZXJCbG9jaz0hMX1yZXN0b3JlUmVkcmF3KCl7dGhpcy5ibG9ja2VkPSExLHRoaXMucmVjYWxjQWZ0ZXJCbG9jayYmKHRoaXMucmVjYWxjQWZ0ZXJCbG9jaz0hMSx0aGlzLnJlY2FsY0FjdGl2ZVJvd3NSZWZyZXNoKCkpfXVzZXJSZWNhbGMoKXt0aGlzLnJlY2FsYyh0aGlzLnRhYmxlLnJvd01hbmFnZXIuYWN0aXZlUm93cyl9YmxvY2tDaGVjaygpe3JldHVybiB0aGlzLmJsb2NrZWQmJih0aGlzLnJlY2FsY0FmdGVyQmxvY2s9ITApLHRoaXMuYmxvY2tlZH12aXNpYmxlUm93cyhlLHQpe3JldHVybiB0aGlzLnRvcFJvdyYmdC51bnNoaWZ0KHRoaXMudG9wUm93KSx0aGlzLmJvdFJvdyYmdC5wdXNoKHRoaXMuYm90Um93KSx0fXJvd3NVcGRhdGVkKGUpe3RoaXMudGFibGUub3B0aW9ucy5ncm91cEJ5P3RoaXMucmVjYWxjUm93R3JvdXAoZSk6dGhpcy5yZWNhbGNBY3RpdmVSb3dzKCl9cmVjYWxjQWN0aXZlUm93c1JlZnJlc2goKXt0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBCeSYmdGhpcy50YWJsZS5vcHRpb25zLmRhdGFUcmVlU3RhcnRFeHBhbmRlZCYmdGhpcy50YWJsZS5vcHRpb25zLmRhdGFUcmVlP3RoaXMucmVjYWxjQWxsKCk6dGhpcy5yZWNhbGNBY3RpdmVSb3dzKCl9cmVjYWxjQWN0aXZlUm93cygpe3RoaXMucmVjYWxjKHRoaXMudGFibGUucm93TWFuYWdlci5hY3RpdmVSb3dzKX1jZWxsVmFsdWVDaGFuZ2VkKGUpeyhlLmNvbHVtbi5kZWZpbml0aW9uLnRvcENhbGN8fGUuY29sdW1uLmRlZmluaXRpb24uYm90dG9tQ2FsYykmJih0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBCeT8oInRhYmxlIiE9dGhpcy50YWJsZS5vcHRpb25zLmNvbHVtbkNhbGNzJiYiYm90aCIhPXRoaXMudGFibGUub3B0aW9ucy5jb2x1bW5DYWxjc3x8dGhpcy5yZWNhbGNBY3RpdmVSb3dzKCksInRhYmxlIiE9dGhpcy50YWJsZS5vcHRpb25zLmNvbHVtbkNhbGNzJiZ0aGlzLnJlY2FsY1Jvd0dyb3VwKGUucm93KSk6dGhpcy5yZWNhbGNBY3RpdmVSb3dzKCkpfWluaXRpYWxpemVDb2x1bW5DaGVjayhlKXsoZS5kZWZpbml0aW9uLnRvcENhbGN8fGUuZGVmaW5pdGlvbi5ib3R0b21DYWxjKSYmdGhpcy5pbml0aWFsaXplQ29sdW1uKGUpfWluaXRpYWxpemVDb2x1bW4oZSl7dmFyIHQ9ZS5kZWZpbml0aW9uLGk9e3RvcENhbGNQYXJhbXM6dC50b3BDYWxjUGFyYW1zfHx7fSxib3RDYWxjUGFyYW1zOnQuYm90dG9tQ2FsY1BhcmFtc3x8e319O2lmKHQudG9wQ2FsYyl7c3dpdGNoKHR5cGVvZiB0LnRvcENhbGMpe2Nhc2Uic3RyaW5nIjpYLmNhbGN1bGF0aW9uc1t0LnRvcENhbGNdP2kudG9wQ2FsYz1YLmNhbGN1bGF0aW9uc1t0LnRvcENhbGNdOmNvbnNvbGUud2FybigiQ29sdW1uIENhbGMgRXJyb3IgLSBObyBzdWNoIGNhbGN1bGF0aW9uIGZvdW5kLCBpZ25vcmluZzogIix0LnRvcENhbGMpO2JyZWFrO2Nhc2UiZnVuY3Rpb24iOmkudG9wQ2FsYz10LnRvcENhbGN9aS50b3BDYWxjJiYoZS5tb2R1bGVzLmNvbHVtbkNhbGNzPWksdGhpcy50b3BDYWxjcy5wdXNoKGUpLCJncm91cCIhPXRoaXMudGFibGUub3B0aW9ucy5jb2x1bW5DYWxjcyYmdGhpcy5pbml0aWFsaXplVG9wUm93KCkpfWlmKHQuYm90dG9tQ2FsYyl7c3dpdGNoKHR5cGVvZiB0LmJvdHRvbUNhbGMpe2Nhc2Uic3RyaW5nIjpYLmNhbGN1bGF0aW9uc1t0LmJvdHRvbUNhbGNdP2kuYm90Q2FsYz1YLmNhbGN1bGF0aW9uc1t0LmJvdHRvbUNhbGNdOmNvbnNvbGUud2FybigiQ29sdW1uIENhbGMgRXJyb3IgLSBObyBzdWNoIGNhbGN1bGF0aW9uIGZvdW5kLCBpZ25vcmluZzogIix0LmJvdHRvbUNhbGMpO2JyZWFrO2Nhc2UiZnVuY3Rpb24iOmkuYm90Q2FsYz10LmJvdHRvbUNhbGN9aS5ib3RDYWxjJiYoZS5tb2R1bGVzLmNvbHVtbkNhbGNzPWksdGhpcy5ib3RDYWxjcy5wdXNoKGUpLCJncm91cCIhPXRoaXMudGFibGUub3B0aW9ucy5jb2x1bW5DYWxjcyYmdGhpcy5pbml0aWFsaXplQm90dG9tUm93KCkpfX1yZWdpc3RlckNvbHVtbkZpZWxkKCl7fXJlbW92ZUNhbGNzKCl7dmFyIGU9ITE7dGhpcy50b3BJbml0aWFsaXplZCYmKHRoaXMudG9wSW5pdGlhbGl6ZWQ9ITEsdGhpcy50b3BFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy50b3BFbGVtZW50KSxlPSEwKSx0aGlzLmJvdEluaXRpYWxpemVkJiYodGhpcy5ib3RJbml0aWFsaXplZD0hMSx0aGlzLmZvb3RlclJlbW92ZSh0aGlzLmJvdEVsZW1lbnQpLGU9ITApLGUmJnRoaXMudGFibGUucm93TWFuYWdlci5hZGp1c3RUYWJsZVNpemUoKX1yZWluaXRpYWxpemVDYWxjcygpe3RoaXMudG9wQ2FsY3MubGVuZ3RoJiZ0aGlzLmluaXRpYWxpemVUb3BSb3coKSx0aGlzLmJvdENhbGNzLmxlbmd0aCYmdGhpcy5pbml0aWFsaXplQm90dG9tUm93KCl9aW5pdGlhbGl6ZVRvcFJvdygpe3RoaXMudG9wSW5pdGlhbGl6ZWR8fCh0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2V0Q29udGVudHNFbGVtZW50KCkuaW5zZXJ0QmVmb3JlKHRoaXMudG9wRWxlbWVudCx0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuaGVhZGVyc0VsZW1lbnQubmV4dFNpYmxpbmcpLHRoaXMudG9wSW5pdGlhbGl6ZWQ9ITApfWluaXRpYWxpemVCb3R0b21Sb3coKXt0aGlzLmJvdEluaXRpYWxpemVkfHwodGhpcy5mb290ZXJQcmVwZW5kKHRoaXMuYm90RWxlbWVudCksdGhpcy5ib3RJbml0aWFsaXplZD0hMCl9c2Nyb2xsSG9yaXpvbnRhbChlKXt0aGlzLmJvdEluaXRpYWxpemVkJiZ0aGlzLmJvdFJvdyYmKHRoaXMuYm90RWxlbWVudC5zY3JvbGxMZWZ0PWUpfXJlY2FsYyhlKXt2YXIgdCxpO2lmKCF0aGlzLmJsb2NrQ2hlY2soKSYmKHRoaXMudG9wSW5pdGlhbGl6ZWR8fHRoaXMuYm90SW5pdGlhbGl6ZWQpKXtpZih0PXRoaXMucm93c1RvRGF0YShlKSx0aGlzLnRvcEluaXRpYWxpemVkKXtmb3IodGhpcy50b3BSb3cmJnRoaXMudG9wUm93LmRlbGV0ZUNlbGxzKCksaT10aGlzLmdlbmVyYXRlUm93KCJ0b3AiLHQpLHRoaXMudG9wUm93PWk7dGhpcy50b3BFbGVtZW50LmZpcnN0Q2hpbGQ7KXRoaXMudG9wRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLnRvcEVsZW1lbnQuZmlyc3RDaGlsZCk7dGhpcy50b3BFbGVtZW50LmFwcGVuZENoaWxkKGkuZ2V0RWxlbWVudCgpKSxpLmluaXRpYWxpemUoITApfWlmKHRoaXMuYm90SW5pdGlhbGl6ZWQpe2Zvcih0aGlzLmJvdFJvdyYmdGhpcy5ib3RSb3cuZGVsZXRlQ2VsbHMoKSxpPXRoaXMuZ2VuZXJhdGVSb3coImJvdHRvbSIsdCksdGhpcy5ib3RSb3c9aTt0aGlzLmJvdEVsZW1lbnQuZmlyc3RDaGlsZDspdGhpcy5ib3RFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuYm90RWxlbWVudC5maXJzdENoaWxkKTt0aGlzLmJvdEVsZW1lbnQuYXBwZW5kQ2hpbGQoaS5nZXRFbGVtZW50KCkpLGkuaW5pdGlhbGl6ZSghMCl9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmFkanVzdFRhYmxlU2l6ZSgpLHRoaXMudGFibGUubW9kRXhpc3RzKCJmcm96ZW5Db2x1bW5zIikmJnRoaXMudGFibGUubW9kdWxlcy5mcm96ZW5Db2x1bW5zLmxheW91dCgpfX1yZWNhbGNSb3dHcm91cChlKXt0aGlzLnJlY2FsY0dyb3VwKHRoaXMudGFibGUubW9kdWxlcy5ncm91cFJvd3MuZ2V0Um93R3JvdXAoZSkpfXJlY2FsY0FsbCgpeyh0aGlzLnRvcENhbGNzLmxlbmd0aHx8dGhpcy5ib3RDYWxjcy5sZW5ndGgpJiYoImdyb3VwIiE9PXRoaXMudGFibGUub3B0aW9ucy5jb2x1bW5DYWxjcyYmdGhpcy5yZWNhbGNBY3RpdmVSb3dzKCksdGhpcy50YWJsZS5vcHRpb25zLmdyb3VwQnkmJiJ0YWJsZSIhPT10aGlzLnRhYmxlLm9wdGlvbnMuY29sdW1uQ2FsY3MmJnRoaXMudGFibGUubW9kdWxlcy5ncm91cFJvd3MuZ2V0Q2hpbGRHcm91cHMoKS5mb3JFYWNoKChlPT57dGhpcy5yZWNhbGNHcm91cChlKX0pKSl9cmVjYWxjR3JvdXAoZSl7dmFyIHQsaTt0aGlzLmJsb2NrQ2hlY2soKXx8ZSYmZS5jYWxjcyYmKGUuY2FsY3MuYm90dG9tJiYodD10aGlzLnJvd3NUb0RhdGEoZS5yb3dzKSxpPXRoaXMuZ2VuZXJhdGVSb3dEYXRhKCJib3R0b20iLHQpLGUuY2FsY3MuYm90dG9tLnVwZGF0ZURhdGEoaSksZS5jYWxjcy5ib3R0b20ucmVpbml0aWFsaXplKCkpLGUuY2FsY3MudG9wJiYodD10aGlzLnJvd3NUb0RhdGEoZS5yb3dzKSxpPXRoaXMuZ2VuZXJhdGVSb3dEYXRhKCJ0b3AiLHQpLGUuY2FsY3MudG9wLnVwZGF0ZURhdGEoaSksZS5jYWxjcy50b3AucmVpbml0aWFsaXplKCkpKX1nZW5lcmF0ZVRvcFJvdyhlKXtyZXR1cm4gdGhpcy5nZW5lcmF0ZVJvdygidG9wIix0aGlzLnJvd3NUb0RhdGEoZSkpfWdlbmVyYXRlQm90dG9tUm93KGUpe3JldHVybiB0aGlzLmdlbmVyYXRlUm93KCJib3R0b20iLHRoaXMucm93c1RvRGF0YShlKSl9cm93c1RvRGF0YShlKXt2YXIgdD1bXTtyZXR1cm4gZS5mb3JFYWNoKChlPT57aWYodC5wdXNoKGUuZ2V0RGF0YSgpKSx0aGlzLnRhYmxlLm9wdGlvbnMuZGF0YVRyZWUmJnRoaXMudGFibGUub3B0aW9ucy5kYXRhVHJlZUNoaWxkQ29sdW1uQ2FsY3MmJmUubW9kdWxlcy5kYXRhVHJlZSYmZS5tb2R1bGVzLmRhdGFUcmVlLm9wZW4pe3ZhciBpPXRoaXMucm93c1RvRGF0YSh0aGlzLnRhYmxlLm1vZHVsZXMuZGF0YVRyZWUuZ2V0RmlsdGVyZWRUcmVlQ2hpbGRyZW4oZSkpO3Q9dC5jb25jYXQoaSl9fSkpLHR9Z2VuZXJhdGVSb3coZSx0KXt2YXIgaSxzPXRoaXMuZ2VuZXJhdGVSb3dEYXRhKGUsdCk7cmV0dXJuIHRoaXMudGFibGUubW9kRXhpc3RzKCJtdXRhdG9yIikmJnRoaXMudGFibGUubW9kdWxlcy5tdXRhdG9yLmRpc2FibGUoKSxpPW5ldyBwKHMsdGhpcywiY2FsYyIpLHRoaXMudGFibGUubW9kRXhpc3RzKCJtdXRhdG9yIikmJnRoaXMudGFibGUubW9kdWxlcy5tdXRhdG9yLmVuYWJsZSgpLGkuZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1jYWxjcyIsInRhYnVsYXRvci1jYWxjcy0iK2UpLGkuY29tcG9uZW50PSExLGkuZ2V0Q29tcG9uZW50PSgpPT4oaS5jb21wb25lbnR8fChpLmNvbXBvbmVudD1uZXcgRyhpKSksaS5jb21wb25lbnQpLGkuZ2VuZXJhdGVDZWxscz0oKT0+e3ZhciB0PVtdO3RoaXMudGFibGUuY29sdW1uTWFuYWdlci5jb2x1bW5zQnlJbmRleC5mb3JFYWNoKChzPT57dGhpcy5nZW5Db2x1bW4uc2V0RmllbGQocy5nZXRGaWVsZCgpKSx0aGlzLmdlbkNvbHVtbi5ob3pBbGlnbj1zLmhvekFsaWduLHMuZGVmaW5pdGlvbltlKyJDYWxjRm9ybWF0dGVyIl0mJnRoaXMudGFibGUubW9kRXhpc3RzKCJmb3JtYXQiKT90aGlzLmdlbkNvbHVtbi5tb2R1bGVzLmZvcm1hdD17Zm9ybWF0dGVyOnRoaXMudGFibGUubW9kdWxlcy5mb3JtYXQuZ2V0Rm9ybWF0dGVyKHMuZGVmaW5pdGlvbltlKyJDYWxjRm9ybWF0dGVyIl0pLHBhcmFtczpzLmRlZmluaXRpb25bZSsiQ2FsY0Zvcm1hdHRlclBhcmFtcyJdfHx7fX06dGhpcy5nZW5Db2x1bW4ubW9kdWxlcy5mb3JtYXQ9e2Zvcm1hdHRlcjp0aGlzLnRhYmxlLm1vZHVsZXMuZm9ybWF0LmdldEZvcm1hdHRlcigicGxhaW50ZXh0IikscGFyYW1zOnt9fSx0aGlzLmdlbkNvbHVtbi5kZWZpbml0aW9uLmNzc0NsYXNzPXMuZGVmaW5pdGlvbi5jc3NDbGFzczt2YXIgbj1uZXcgbyh0aGlzLmdlbkNvbHVtbixpKTtuLmdldEVsZW1lbnQoKSxuLmNvbHVtbj1zLG4uc2V0V2lkdGgoKSxzLmNlbGxzLnB1c2gobiksdC5wdXNoKG4pLHMudmlzaWJsZXx8bi5oaWRlKCl9KSksaS5jZWxscz10fSxpfWdlbmVyYXRlUm93RGF0YShlLHQpe3ZhciBpLHMsbz17fSxuPSJ0b3AiPT1lP3RoaXMudG9wQ2FsY3M6dGhpcy5ib3RDYWxjcyxyPSJ0b3AiPT1lPyJ0b3BDYWxjIjoiYm90Q2FsYyI7cmV0dXJuIG4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49W107ZS5tb2R1bGVzLmNvbHVtbkNhbGNzJiZlLm1vZHVsZXMuY29sdW1uQ2FsY3Nbcl0mJih0LmZvckVhY2goKGZ1bmN0aW9uKHQpe24ucHVzaChlLmdldEZpZWxkVmFsdWUodCkpfSkpLHM9cisiUGFyYW1zIixpPSJmdW5jdGlvbiI9PXR5cGVvZiBlLm1vZHVsZXMuY29sdW1uQ2FsY3Nbc10/ZS5tb2R1bGVzLmNvbHVtbkNhbGNzW3NdKG4sdCk6ZS5tb2R1bGVzLmNvbHVtbkNhbGNzW3NdLGUuc2V0RmllbGRWYWx1ZShvLGUubW9kdWxlcy5jb2x1bW5DYWxjc1tyXShuLHQsaSkpKX0pKSxvfWhhc1RvcENhbGNzKCl7cmV0dXJuISF0aGlzLnRvcENhbGNzLmxlbmd0aH1oYXNCb3R0b21DYWxjcygpe3JldHVybiEhdGhpcy5ib3RDYWxjcy5sZW5ndGh9cmVkcmF3KCl7dGhpcy50b3BSb3cmJnRoaXMudG9wUm93Lm5vcm1hbGl6ZUhlaWdodCghMCksdGhpcy5ib3RSb3cmJnRoaXMuYm90Um93Lm5vcm1hbGl6ZUhlaWdodCghMCl9Z2V0UmVzdWx0cygpe3ZhciBlPXt9O3JldHVybiB0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBCeSYmdGhpcy50YWJsZS5tb2RFeGlzdHMoImdyb3VwUm93cyIpP3RoaXMudGFibGUubW9kdWxlcy5ncm91cFJvd3MuZ2V0R3JvdXBzKCEwKS5mb3JFYWNoKCh0PT57ZVt0LmdldEtleSgpXT10aGlzLmdldEdyb3VwUmVzdWx0cyh0KX0pKTplPXt0b3A6dGhpcy50b3BSb3c/dGhpcy50b3BSb3cuZ2V0RGF0YSgpOnt9LGJvdHRvbTp0aGlzLmJvdFJvdz90aGlzLmJvdFJvdy5nZXREYXRhKCk6e319LGV9Z2V0R3JvdXBSZXN1bHRzKGUpe3ZhciB0PWUuX2dldFNlbGYoKSxpPWUuZ2V0U3ViR3JvdXBzKCkscz17fTtyZXR1cm4gaS5mb3JFYWNoKChlPT57c1tlLmdldEtleSgpXT10aGlzLmdldEdyb3VwUmVzdWx0cyhlKX0pKSx7dG9wOnQuY2FsY3MudG9wP3QuY2FsY3MudG9wLmdldERhdGEoKTp7fSxib3R0b206dC5jYWxjcy5ib3R0b20/dC5jYWxjcy5ib3R0b20uZ2V0RGF0YSgpOnt9LGdyb3VwczpzfX1hZGp1c3RGb3JTY3JvbGxiYXIoZSl7dGhpcy5ib3RSb3cmJih0aGlzLnRhYmxlLnJ0bD90aGlzLmJvdEVsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQ9ZSsicHgiOnRoaXMuYm90RWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQ9ZSsicHgiKX19WC5tb2R1bGVOYW1lPSJjb2x1bW5DYWxjcyIsWC5jYWxjdWxhdGlvbnM9VTtjbGFzcyBxIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmluZGVudD0xMCx0aGlzLmZpZWxkPSIiLHRoaXMuY29sbGFwc2VFbD1udWxsLHRoaXMuZXhwYW5kRWw9bnVsbCx0aGlzLmJyYW5jaEVsPW51bGwsdGhpcy5lbGVtZW50RmllbGQ9ITEsdGhpcy5zdGFydE9wZW49ZnVuY3Rpb24oKXt9LHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiZGF0YVRyZWUiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImRhdGFUcmVlRmlsdGVyIiwhMCksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJkYXRhVHJlZVNvcnQiLCEwKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImRhdGFUcmVlRWxlbWVudENvbHVtbiIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiZGF0YVRyZWVCcmFuY2hFbGVtZW50IiwhMCksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJkYXRhVHJlZUNoaWxkSW5kZW50Iiw5KSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImRhdGFUcmVlQ2hpbGRGaWVsZCIsIl9jaGlsZHJlbiIpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiZGF0YVRyZWVDb2xsYXBzZUVsZW1lbnQiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImRhdGFUcmVlRXhwYW5kRWxlbWVudCIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiZGF0YVRyZWVTdGFydEV4cGFuZGVkIiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJkYXRhVHJlZUNoaWxkQ29sdW1uQ2FsY3MiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImRhdGFUcmVlU2VsZWN0UHJvcGFnYXRlIiwhMSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJyb3ciLCJ0cmVlQ29sbGFwc2UiLHRoaXMuY29sbGFwc2VSb3cuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJyb3ciLCJ0cmVlRXhwYW5kIix0aGlzLmV4cGFuZFJvdy5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyQ29tcG9uZW50RnVuY3Rpb24oInJvdyIsInRyZWVUb2dnbGUiLHRoaXMudG9nZ2xlUm93LmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbigicm93IiwiZ2V0VHJlZVBhcmVudCIsdGhpcy5nZXRUcmVlUGFyZW50LmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbigicm93IiwiZ2V0VHJlZUNoaWxkcmVuIix0aGlzLmdldFJvd0NoaWxkcmVuLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbigicm93IiwiYWRkVHJlZUNoaWxkIix0aGlzLmFkZFRyZWVDaGlsZFJvdy5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyQ29tcG9uZW50RnVuY3Rpb24oInJvdyIsImlzVHJlZUV4cGFuZGVkIix0aGlzLmlzUm93RXhwYW5kZWQuYmluZCh0aGlzKSl9aW5pdGlhbGl6ZSgpe2lmKHRoaXMudGFibGUub3B0aW9ucy5kYXRhVHJlZSl7dmFyIGU9bnVsbCx0PXRoaXMudGFibGUub3B0aW9ucztzd2l0Y2godGhpcy5maWVsZD10LmRhdGFUcmVlQ2hpbGRGaWVsZCx0aGlzLmluZGVudD10LmRhdGFUcmVlQ2hpbGRJbmRlbnQsdGhpcy5vcHRpb25zKCJtb3ZhYmxlUm93cyIpJiZjb25zb2xlLndhcm4oIlRoZSBtb3ZhYmxlUm93cyBvcHRpb24gaXMgbm90IGF2YWlsYWJsZSB3aXRoIGRhdGFUcmVlIGVuYWJsZWQsIG1vdmluZyBvZiBjaGlsZCByb3dzIGNvdWxkIHJlc3VsdCBpbiB1bnByZWRpY3RhYmxlIGJlaGF2aW9yIiksdC5kYXRhVHJlZUJyYW5jaEVsZW1lbnQmJighMD09PXQuZGF0YVRyZWVCcmFuY2hFbGVtZW50Pyh0aGlzLmJyYW5jaEVsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuYnJhbmNoRWwuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWRhdGEtdHJlZS1icmFuY2giKSk6InN0cmluZyI9PXR5cGVvZiB0LmRhdGFUcmVlQnJhbmNoRWxlbWVudD8oKGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmlubmVySFRNTD10LmRhdGFUcmVlQnJhbmNoRWxlbWVudCx0aGlzLmJyYW5jaEVsPWUuZmlyc3RDaGlsZCk6dGhpcy5icmFuY2hFbD10LmRhdGFUcmVlQnJhbmNoRWxlbWVudCksdC5kYXRhVHJlZUNvbGxhcHNlRWxlbWVudD8ic3RyaW5nIj09dHlwZW9mIHQuZGF0YVRyZWVDb2xsYXBzZUVsZW1lbnQ/KChlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5pbm5lckhUTUw9dC5kYXRhVHJlZUNvbGxhcHNlRWxlbWVudCx0aGlzLmNvbGxhcHNlRWw9ZS5maXJzdENoaWxkKTp0aGlzLmNvbGxhcHNlRWw9dC5kYXRhVHJlZUNvbGxhcHNlRWxlbWVudDoodGhpcy5jb2xsYXBzZUVsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuY29sbGFwc2VFbC5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItZGF0YS10cmVlLWNvbnRyb2wiKSx0aGlzLmNvbGxhcHNlRWwudGFiSW5kZXg9MCx0aGlzLmNvbGxhcHNlRWwuaW5uZXJIVE1MPSI8ZGl2IGNsYXNzPSd0YWJ1bGF0b3ItZGF0YS10cmVlLWNvbnRyb2wtY29sbGFwc2UnPjwvZGl2PiIpLHQuZGF0YVRyZWVFeHBhbmRFbGVtZW50PyJzdHJpbmciPT10eXBlb2YgdC5kYXRhVHJlZUV4cGFuZEVsZW1lbnQ/KChlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5pbm5lckhUTUw9dC5kYXRhVHJlZUV4cGFuZEVsZW1lbnQsdGhpcy5leHBhbmRFbD1lLmZpcnN0Q2hpbGQpOnRoaXMuZXhwYW5kRWw9dC5kYXRhVHJlZUV4cGFuZEVsZW1lbnQ6KHRoaXMuZXhwYW5kRWw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5leHBhbmRFbC5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItZGF0YS10cmVlLWNvbnRyb2wiKSx0aGlzLmV4cGFuZEVsLnRhYkluZGV4PTAsdGhpcy5leHBhbmRFbC5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J3RhYnVsYXRvci1kYXRhLXRyZWUtY29udHJvbC1leHBhbmQnPjwvZGl2PiIpLHR5cGVvZiB0LmRhdGFUcmVlU3RhcnRFeHBhbmRlZCl7Y2FzZSJib29sZWFuIjp0aGlzLnN0YXJ0T3Blbj1mdW5jdGlvbihlLGkpe3JldHVybiB0LmRhdGFUcmVlU3RhcnRFeHBhbmRlZH07YnJlYWs7Y2FzZSJmdW5jdGlvbiI6dGhpcy5zdGFydE9wZW49dC5kYXRhVHJlZVN0YXJ0RXhwYW5kZWQ7YnJlYWs7ZGVmYXVsdDp0aGlzLnN0YXJ0T3Blbj1mdW5jdGlvbihlLGkpe3JldHVybiB0LmRhdGFUcmVlU3RhcnRFeHBhbmRlZFtpXX19dGhpcy5zdWJzY3JpYmUoInJvdy1pbml0Iix0aGlzLmluaXRpYWxpemVSb3cuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvdy1sYXlvdXQtYWZ0ZXIiLHRoaXMubGF5b3V0Um93LmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJyb3ctZGVsZXRlZCIsdGhpcy5yb3dEZWxldGUuYmluZCh0aGlzKSwwKSx0aGlzLnN1YnNjcmliZSgicm93LWRhdGEtY2hhbmdlZCIsdGhpcy5yb3dEYXRhQ2hhbmdlZC5iaW5kKHRoaXMpLDEwKSx0aGlzLnN1YnNjcmliZSgiY2VsbC12YWx1ZS11cGRhdGVkIix0aGlzLmNlbGxWYWx1ZUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImVkaXQtY2FuY2VsbGVkIix0aGlzLmNlbGxWYWx1ZUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1tb3Zpbmctcm93cyIsdGhpcy5jb2x1bW5Nb3ZpbmcuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInRhYmxlLWJ1aWx0Iix0aGlzLmluaXRpYWxpemVFbGVtZW50RmllbGQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInRhYmxlLXJlZHJhd2luZyIsdGhpcy50YWJsZVJlZHJhd2luZy5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyRGlzcGxheUhhbmRsZXIodGhpcy5nZXRSb3dzLmJpbmQodGhpcyksMzApfX10YWJsZVJlZHJhd2luZyhlKXtlJiZ0aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0Um93cygpLmZvckVhY2goKGU9Pnt0aGlzLnJlaW5pdGlhbGl6ZVJvd0NoaWxkcmVuKGUpfSkpfWluaXRpYWxpemVFbGVtZW50RmllbGQoKXt2YXIgZT10aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2V0Rmlyc3RWaXNpYmxlQ29sdW1uKCk7dGhpcy5lbGVtZW50RmllbGQ9dGhpcy50YWJsZS5vcHRpb25zLmRhdGFUcmVlRWxlbWVudENvbHVtbnx8ISFlJiZlLmZpZWxkfWdldFJvd0NoaWxkcmVuKGUpe3JldHVybiB0aGlzLmdldFRyZWVDaGlsZHJlbihlLCEwKX1jb2x1bW5Nb3ZpbmcoKXt2YXIgZT1bXTtyZXR1cm4gdGhpcy50YWJsZS5yb3dNYW5hZ2VyLnJvd3MuZm9yRWFjaCgodD0+e2U9ZS5jb25jYXQodGhpcy5nZXRUcmVlQ2hpbGRyZW4odCwhMSwhMCkpfSkpLGV9cm93RGF0YUNoYW5nZWQoZSx0LGkpe3RoaXMucmVkcmF3TmVlZGVkKGkpJiYodGhpcy5pbml0aWFsaXplUm93KGUpLHQmJih0aGlzLmxheW91dFJvdyhlKSx0aGlzLnJlZnJlc2hEYXRhKCEwKSkpfWNlbGxWYWx1ZUNoYW5nZWQoZSl7ZS5jb2x1bW4uZ2V0RmllbGQoKT09PXRoaXMuZWxlbWVudEZpZWxkJiZ0aGlzLmxheW91dFJvdyhlLnJvdyl9aW5pdGlhbGl6ZVJvdyhlKXt2YXIgdD1lLmdldERhdGEoKVt0aGlzLmZpZWxkXSxpPUFycmF5LmlzQXJyYXkodCkscz1pfHwhaSYmIm9iamVjdCI9PXR5cGVvZiB0JiZudWxsIT09dDshcyYmZS5tb2R1bGVzLmRhdGFUcmVlJiZlLm1vZHVsZXMuZGF0YVRyZWUuYnJhbmNoRWwmJmUubW9kdWxlcy5kYXRhVHJlZS5icmFuY2hFbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUubW9kdWxlcy5kYXRhVHJlZS5icmFuY2hFbCksIXMmJmUubW9kdWxlcy5kYXRhVHJlZSYmZS5tb2R1bGVzLmRhdGFUcmVlLmNvbnRyb2xFbCYmZS5tb2R1bGVzLmRhdGFUcmVlLmNvbnRyb2xFbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUubW9kdWxlcy5kYXRhVHJlZS5jb250cm9sRWwpLGUubW9kdWxlcy5kYXRhVHJlZT17aW5kZXg6ZS5tb2R1bGVzLmRhdGFUcmVlP2UubW9kdWxlcy5kYXRhVHJlZS5pbmRleDowLG9wZW46ISFzJiYoZS5tb2R1bGVzLmRhdGFUcmVlP2UubW9kdWxlcy5kYXRhVHJlZS5vcGVuOnRoaXMuc3RhcnRPcGVuKGUuZ2V0Q29tcG9uZW50KCksMCkpLGNvbnRyb2xFbDohKCFlLm1vZHVsZXMuZGF0YVRyZWV8fCFzKSYmZS5tb2R1bGVzLmRhdGFUcmVlLmNvbnRyb2xFbCxicmFuY2hFbDohKCFlLm1vZHVsZXMuZGF0YVRyZWV8fCFzKSYmZS5tb2R1bGVzLmRhdGFUcmVlLmJyYW5jaEVsLHBhcmVudDohIWUubW9kdWxlcy5kYXRhVHJlZSYmZS5tb2R1bGVzLmRhdGFUcmVlLnBhcmVudCxjaGlsZHJlbjpzfX1yZWluaXRpYWxpemVSb3dDaGlsZHJlbihlKXt0aGlzLmdldFRyZWVDaGlsZHJlbihlLCExLCEwKS5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnJlaW5pdGlhbGl6ZSghMCl9KSl9bGF5b3V0Um93KGUpe3ZhciB0PSh0aGlzLmVsZW1lbnRGaWVsZD9lLmdldENlbGwodGhpcy5lbGVtZW50RmllbGQpOmUuZ2V0Q2VsbHMoKVswXSkuZ2V0RWxlbWVudCgpLGk9ZS5tb2R1bGVzLmRhdGFUcmVlO2kuYnJhbmNoRWwmJihpLmJyYW5jaEVsLnBhcmVudE5vZGUmJmkuYnJhbmNoRWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpLmJyYW5jaEVsKSxpLmJyYW5jaEVsPSExKSxpLmNvbnRyb2xFbCYmKGkuY29udHJvbEVsLnBhcmVudE5vZGUmJmkuY29udHJvbEVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaS5jb250cm9sRWwpLGkuY29udHJvbEVsPSExKSx0aGlzLmdlbmVyYXRlQ29udHJvbEVsZW1lbnQoZSx0KSxlLmdldEVsZW1lbnQoKS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItdHJlZS1sZXZlbC0iK2kuaW5kZXgpLGkuaW5kZXgmJih0aGlzLmJyYW5jaEVsPyhpLmJyYW5jaEVsPXRoaXMuYnJhbmNoRWwuY2xvbmVOb2RlKCEwKSx0Lmluc2VydEJlZm9yZShpLmJyYW5jaEVsLHQuZmlyc3RDaGlsZCksdGhpcy50YWJsZS5ydGw/aS5icmFuY2hFbC5zdHlsZS5tYXJnaW5SaWdodD0oaS5icmFuY2hFbC5vZmZzZXRXaWR0aCtpLmJyYW5jaEVsLnN0eWxlLm1hcmdpbkxlZnQpKihpLmluZGV4LTEpK2kuaW5kZXgqdGhpcy5pbmRlbnQrInB4IjppLmJyYW5jaEVsLnN0eWxlLm1hcmdpbkxlZnQ9KGkuYnJhbmNoRWwub2Zmc2V0V2lkdGgraS5icmFuY2hFbC5zdHlsZS5tYXJnaW5SaWdodCkqKGkuaW5kZXgtMSkraS5pbmRleCp0aGlzLmluZGVudCsicHgiKTp0aGlzLnRhYmxlLnJ0bD90LnN0eWxlLnBhZGRpbmdSaWdodD1wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0LG51bGwpLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctcmlnaHQiKSkraS5pbmRleCp0aGlzLmluZGVudCsicHgiOnQuc3R5bGUucGFkZGluZ0xlZnQ9cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodCxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCJwYWRkaW5nLWxlZnQiKSkraS5pbmRleCp0aGlzLmluZGVudCsicHgiKX1nZW5lcmF0ZUNvbnRyb2xFbGVtZW50KGUsdCl7dmFyIGk9ZS5tb2R1bGVzLmRhdGFUcmVlLHM9aS5jb250cm9sRWw7dD10fHxlLmdldENlbGxzKClbMF0uZ2V0RWxlbWVudCgpLCExIT09aS5jaGlsZHJlbiYmKGkub3Blbj8oaS5jb250cm9sRWw9dGhpcy5jb2xsYXBzZUVsLmNsb25lTm9kZSghMCksaS5jb250cm9sRWwuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCh0PT57dC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLmNvbGxhcHNlUm93KGUpfSkpKTooaS5jb250cm9sRWw9dGhpcy5leHBhbmRFbC5jbG9uZU5vZGUoITApLGkuY29udHJvbEVsLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwodD0+e3Quc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5leHBhbmRSb3coZSl9KSkpLGkuY29udHJvbEVsLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsKGU9PntlLnN0b3BQcm9wYWdhdGlvbigpfSkpLHMmJnMucGFyZW50Tm9kZT09PXQ/cy5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChpLmNvbnRyb2xFbCxzKTp0Lmluc2VydEJlZm9yZShpLmNvbnRyb2xFbCx0LmZpcnN0Q2hpbGQpKX1nZXRSb3dzKGUpe3ZhciB0PVtdO3JldHVybiBlLmZvckVhY2goKChlLGkpPT57dmFyIHM7dC5wdXNoKGUpLGUgaW5zdGFuY2VvZiBwJiYoZS5jcmVhdGUoKSwocz1lLm1vZHVsZXMuZGF0YVRyZWUpLmluZGV4fHwhMT09PXMuY2hpbGRyZW58fHRoaXMuZ2V0Q2hpbGRyZW4oZSkuZm9yRWFjaCgoZT0+e2UuY3JlYXRlKCksdC5wdXNoKGUpfSkpKX0pKSx0fWdldENoaWxkcmVuKGUsdCl7dmFyIGk9ZS5tb2R1bGVzLmRhdGFUcmVlLHM9W10sbz1bXTtyZXR1cm4hMSE9PWkuY2hpbGRyZW4mJihpLm9wZW58fHQpJiYoQXJyYXkuaXNBcnJheShpLmNoaWxkcmVuKXx8KGkuY2hpbGRyZW49dGhpcy5nZW5lcmF0ZUNoaWxkcmVuKGUpKSxzPXRoaXMudGFibGUubW9kRXhpc3RzKCJmaWx0ZXIiKSYmdGhpcy50YWJsZS5vcHRpb25zLmRhdGFUcmVlRmlsdGVyP3RoaXMudGFibGUubW9kdWxlcy5maWx0ZXIuZmlsdGVyKGkuY2hpbGRyZW4pOmkuY2hpbGRyZW4sdGhpcy50YWJsZS5tb2RFeGlzdHMoInNvcnQiKSYmdGhpcy50YWJsZS5vcHRpb25zLmRhdGFUcmVlU29ydCYmdGhpcy50YWJsZS5tb2R1bGVzLnNvcnQuc29ydChzKSxzLmZvckVhY2goKGU9PntvLnB1c2goZSksdGhpcy5nZXRDaGlsZHJlbihlKS5mb3JFYWNoKChlPT57by5wdXNoKGUpfSkpfSkpKSxvfWdlbmVyYXRlQ2hpbGRyZW4oZSl7dmFyIHQ9W10saT1lLmdldERhdGEoKVt0aGlzLmZpZWxkXTtyZXR1cm4gQXJyYXkuaXNBcnJheShpKXx8KGk9W2ldKSxpLmZvckVhY2goKGk9Pnt2YXIgcz1uZXcgcChpfHx7fSx0aGlzLnRhYmxlLnJvd01hbmFnZXIpO3MuY3JlYXRlKCkscy5tb2R1bGVzLmRhdGFUcmVlLmluZGV4PWUubW9kdWxlcy5kYXRhVHJlZS5pbmRleCsxLHMubW9kdWxlcy5kYXRhVHJlZS5wYXJlbnQ9ZSxzLm1vZHVsZXMuZGF0YVRyZWUuY2hpbGRyZW4mJihzLm1vZHVsZXMuZGF0YVRyZWUub3Blbj10aGlzLnN0YXJ0T3BlbihzLmdldENvbXBvbmVudCgpLHMubW9kdWxlcy5kYXRhVHJlZS5pbmRleCkpLHQucHVzaChzKX0pKSx0fWV4cGFuZFJvdyhlLHQpe3ZhciBpPWUubW9kdWxlcy5kYXRhVHJlZTshMSE9PWkuY2hpbGRyZW4mJihpLm9wZW49ITAsZS5yZWluaXRpYWxpemUoKSx0aGlzLnJlZnJlc2hEYXRhKCEwKSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoImRhdGFUcmVlUm93RXhwYW5kZWQiLGUuZ2V0Q29tcG9uZW50KCksZS5tb2R1bGVzLmRhdGFUcmVlLmluZGV4KSl9Y29sbGFwc2VSb3coZSl7dmFyIHQ9ZS5tb2R1bGVzLmRhdGFUcmVlOyExIT09dC5jaGlsZHJlbiYmKHQub3Blbj0hMSxlLnJlaW5pdGlhbGl6ZSgpLHRoaXMucmVmcmVzaERhdGEoITApLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgiZGF0YVRyZWVSb3dDb2xsYXBzZWQiLGUuZ2V0Q29tcG9uZW50KCksZS5tb2R1bGVzLmRhdGFUcmVlLmluZGV4KSl9dG9nZ2xlUm93KGUpe3ZhciB0PWUubW9kdWxlcy5kYXRhVHJlZTshMSE9PXQuY2hpbGRyZW4mJih0Lm9wZW4/dGhpcy5jb2xsYXBzZVJvdyhlKTp0aGlzLmV4cGFuZFJvdyhlKSl9aXNSb3dFeHBhbmRlZChlKXtyZXR1cm4gZS5tb2R1bGVzLmRhdGFUcmVlLm9wZW59Z2V0VHJlZVBhcmVudChlKXtyZXR1cm4hIWUubW9kdWxlcy5kYXRhVHJlZS5wYXJlbnQmJmUubW9kdWxlcy5kYXRhVHJlZS5wYXJlbnQuZ2V0Q29tcG9uZW50KCl9Z2V0VHJlZVBhcmVudFJvb3QoZSl7cmV0dXJuIGUubW9kdWxlcy5kYXRhVHJlZSYmZS5tb2R1bGVzLmRhdGFUcmVlLnBhcmVudD90aGlzLmdldFRyZWVQYXJlbnRSb290KGUubW9kdWxlcy5kYXRhVHJlZS5wYXJlbnQpOmV9Z2V0RmlsdGVyZWRUcmVlQ2hpbGRyZW4oZSl7dmFyIHQ9ZS5tb2R1bGVzLmRhdGFUcmVlLGk9W107cmV0dXJuIHQuY2hpbGRyZW4mJihBcnJheS5pc0FycmF5KHQuY2hpbGRyZW4pfHwodC5jaGlsZHJlbj10aGlzLmdlbmVyYXRlQ2hpbGRyZW4oZSkpLCh0aGlzLnRhYmxlLm1vZEV4aXN0cygiZmlsdGVyIikmJnRoaXMudGFibGUub3B0aW9ucy5kYXRhVHJlZUZpbHRlcj90aGlzLnRhYmxlLm1vZHVsZXMuZmlsdGVyLmZpbHRlcih0LmNoaWxkcmVuKTp0LmNoaWxkcmVuKS5mb3JFYWNoKChlPT57ZSBpbnN0YW5jZW9mIHAmJmkucHVzaChlKX0pKSksaX1yb3dEZWxldGUoZSl7dmFyIHQsaT1lLm1vZHVsZXMuZGF0YVRyZWUucGFyZW50O2kmJighMSE9PSh0PXRoaXMuZmluZENoaWxkSW5kZXgoZSxpKSkmJmkuZGF0YVt0aGlzLmZpZWxkXS5zcGxpY2UodCwxKSxpLmRhdGFbdGhpcy5maWVsZF0ubGVuZ3RofHxkZWxldGUgaS5kYXRhW3RoaXMuZmllbGRdLHRoaXMuaW5pdGlhbGl6ZVJvdyhpKSx0aGlzLmxheW91dFJvdyhpKSksdGhpcy5yZWZyZXNoRGF0YSghMCl9YWRkVHJlZUNoaWxkUm93KGUsdCxpLHMpe3ZhciBvPSExOyJzdHJpbmciPT10eXBlb2YgdCYmKHQ9SlNPTi5wYXJzZSh0KSksQXJyYXkuaXNBcnJheShlLmRhdGFbdGhpcy5maWVsZF0pfHwoZS5kYXRhW3RoaXMuZmllbGRdPVtdLGUubW9kdWxlcy5kYXRhVHJlZS5vcGVuPXRoaXMuc3RhcnRPcGVuKGUuZ2V0Q29tcG9uZW50KCksZS5tb2R1bGVzLmRhdGFUcmVlLmluZGV4KSksdm9pZCAwIT09cyYmITEhPT0obz10aGlzLmZpbmRDaGlsZEluZGV4KHMsZSkpJiZlLmRhdGFbdGhpcy5maWVsZF0uc3BsaWNlKGk/bzpvKzEsMCx0KSwhMT09PW8mJihpP2UuZGF0YVt0aGlzLmZpZWxkXS51bnNoaWZ0KHQpOmUuZGF0YVt0aGlzLmZpZWxkXS5wdXNoKHQpKSx0aGlzLmluaXRpYWxpemVSb3coZSksdGhpcy5sYXlvdXRSb3coZSksdGhpcy5yZWZyZXNoRGF0YSghMCl9ZmluZENoaWxkSW5kZXgoZSx0KXt2YXIgaT0hMTtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIGU/ZSBpbnN0YW5jZW9mIHA/aT1lLmRhdGE6ZSBpbnN0YW5jZW9mIHU/aT1lLl9nZXRTZWxmKCkuZGF0YToidW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxFbGVtZW50JiZlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ/dC5tb2R1bGVzLmRhdGFUcmVlJiYoaT10Lm1vZHVsZXMuZGF0YVRyZWUuY2hpbGRyZW4uZmluZCgodD0+dCBpbnN0YW5jZW9mIHAmJnQuZWxlbWVudD09PWUpKSkmJihpPWkuZGF0YSk6bnVsbD09PWUmJihpPSExKTppPXZvaWQgMCE9PWUmJnQuZGF0YVt0aGlzLmZpZWxkXS5maW5kKCh0PT50LmRhdGFbdGhpcy50YWJsZS5vcHRpb25zLmluZGV4XT09ZSkpLGkmJihBcnJheS5pc0FycmF5KHQuZGF0YVt0aGlzLmZpZWxkXSkmJihpPXQuZGF0YVt0aGlzLmZpZWxkXS5pbmRleE9mKGkpKSwtMT09aSYmKGk9ITEpKSxpfWdldFRyZWVDaGlsZHJlbihlLHQsaSl7dmFyIHM9ZS5tb2R1bGVzLmRhdGFUcmVlLG89W107cmV0dXJuIHMuY2hpbGRyZW4mJihBcnJheS5pc0FycmF5KHMuY2hpbGRyZW4pfHwocy5jaGlsZHJlbj10aGlzLmdlbmVyYXRlQ2hpbGRyZW4oZSkpLHMuY2hpbGRyZW4uZm9yRWFjaCgoZT0+e2UgaW5zdGFuY2VvZiBwJiYoby5wdXNoKHQ/ZS5nZXRDb21wb25lbnQoKTplKSxpJiYobz1vLmNvbmNhdCh0aGlzLmdldFRyZWVDaGlsZHJlbihlLHQsaSkpKSl9KSkpLG99Z2V0Q2hpbGRGaWVsZCgpe3JldHVybiB0aGlzLmZpZWxkfXJlZHJhd05lZWRlZChlKXtyZXR1cm4hIXRoaXMuZmllbGQmJnZvaWQgMCE9PWVbdGhpcy5maWVsZF18fCEhdGhpcy5lbGVtZW50RmllbGQmJnZvaWQgMCE9PWVbdGhpcy5lbGVtZW50RmllbGRdfX1xLm1vZHVsZU5hbWU9ImRhdGFUcmVlIjt2YXIgSz17Y3N2OmZ1bmN0aW9uKGUsdD17fSxpKXt2YXIgcz10LmRlbGltaXRlcj90LmRlbGltaXRlcjoiLCIsbz1bXSxuPVtdO2UuZm9yRWFjaCgoZT0+e3ZhciB0PVtdO3N3aXRjaChlLnR5cGUpe2Nhc2UiZ3JvdXAiOmNvbnNvbGUud2FybigiRG93bmxvYWQgV2FybmluZyAtIENTViBkb3dubG9hZGVyIGNhbm5vdCBwcm9jZXNzIHJvdyBncm91cHMiKTticmVhaztjYXNlImNhbGMiOmNvbnNvbGUud2FybigiRG93bmxvYWQgV2FybmluZyAtIENTViBkb3dubG9hZGVyIGNhbm5vdCBwcm9jZXNzIGNvbHVtbiBjYWxjdWxhdGlvbnMiKTticmVhaztjYXNlImhlYWRlciI6ZS5jb2x1bW5zLmZvckVhY2goKChlLHQpPT57ZSYmMT09PWUuZGVwdGgmJihuW3RdPXZvaWQgMD09PWUudmFsdWV8fG51bGw9PT1lLnZhbHVlPyIiOiciJytTdHJpbmcoZS52YWx1ZSkuc3BsaXQoJyInKS5qb2luKCciIicpKyciJyl9KSk7YnJlYWs7Y2FzZSJyb3ciOmUuY29sdW1ucy5mb3JFYWNoKChlPT57aWYoZSl7c3dpdGNoKHR5cGVvZiBlLnZhbHVlKXtjYXNlIm9iamVjdCI6ZS52YWx1ZT1udWxsIT09ZS52YWx1ZT9KU09OLnN0cmluZ2lmeShlLnZhbHVlKToiIjticmVhaztjYXNlInVuZGVmaW5lZCI6ZS52YWx1ZT0iIn10LnB1c2goJyInK1N0cmluZyhlLnZhbHVlKS5zcGxpdCgnIicpLmpvaW4oJyIiJykrJyInKX19KSksby5wdXNoKHQuam9pbihzKSl9fSkpLG4ubGVuZ3RoJiZvLnVuc2hpZnQobi5qb2luKHMpKSxvPW8uam9pbigiXG4iKSx0LmJvbSYmKG89Ilx1ZmVmZiIrbyksaShvLCJ0ZXh0L2NzdiIpfSxqc29uOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz1bXTtlLmZvckVhY2goKGU9Pnt2YXIgdD17fTtzd2l0Y2goZS50eXBlKXtjYXNlImhlYWRlciI6YnJlYWs7Y2FzZSJncm91cCI6Y29uc29sZS53YXJuKCJEb3dubG9hZCBXYXJuaW5nIC0gSlNPTiBkb3dubG9hZGVyIGNhbm5vdCBwcm9jZXNzIHJvdyBncm91cHMiKTticmVhaztjYXNlImNhbGMiOmNvbnNvbGUud2FybigiRG93bmxvYWQgV2FybmluZyAtIEpTT04gZG93bmxvYWRlciBjYW5ub3QgcHJvY2VzcyBjb2x1bW4gY2FsY3VsYXRpb25zIik7YnJlYWs7Y2FzZSJyb3ciOmUuY29sdW1ucy5mb3JFYWNoKChlPT57ZSYmKHRbZS5jb21wb25lbnQuZ2V0VGl0bGVEb3dubG9hZCgpfHxlLmNvbXBvbmVudC5nZXRGaWVsZCgpXT1lLnZhbHVlKX0pKSxzLnB1c2godCl9fSkpLGkocz1KU09OLnN0cmluZ2lmeShzLG51bGwsIlx0IiksImFwcGxpY2F0aW9uL2pzb24iKX0sanNvbkxpbmVzOmZ1bmN0aW9uKGUsdCxpKXtjb25zdCBzPVtdO2UuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9e307c3dpdGNoKGUudHlwZSl7Y2FzZSJoZWFkZXIiOmJyZWFrO2Nhc2UiZ3JvdXAiOmNvbnNvbGUud2FybigiRG93bmxvYWQgV2FybmluZyAtIEpTT04gZG93bmxvYWRlciBjYW5ub3QgcHJvY2VzcyByb3cgZ3JvdXBzIik7YnJlYWs7Y2FzZSJjYWxjIjpjb25zb2xlLndhcm4oIkRvd25sb2FkIFdhcm5pbmcgLSBKU09OIGRvd25sb2FkZXIgY2Fubm90IHByb2Nlc3MgY29sdW1uIGNhbGN1bGF0aW9ucyIpO2JyZWFrO2Nhc2Uicm93IjplLmNvbHVtbnMuZm9yRWFjaCgoZT0+e2UmJih0W2UuY29tcG9uZW50LmdldFRpdGxlRG93bmxvYWQoKXx8ZS5jb21wb25lbnQuZ2V0RmllbGQoKV09ZS52YWx1ZSl9KSkscy5wdXNoKEpTT04uc3RyaW5naWZ5KHQpKX19KSksaShzLmpvaW4oIlxuIiksImFwcGxpY2F0aW9uL3gtbmRqc29uIil9LHBkZjpmdW5jdGlvbihlLHQ9e30saSl7dmFyIHM9W10sbz1bXSxuPXt9LHI9dC5yb3dHcm91cFN0eWxlc3x8e2ZvbnRTdHlsZToiYm9sZCIsZm9udFNpemU6MTIsY2VsbFBhZGRpbmc6NixmaWxsQ29sb3I6MjIwfSxhPXQucm93Q2FsY1N0eWxlc3x8e2ZvbnRTdHlsZToiYm9sZCIsZm9udFNpemU6MTAsY2VsbFBhZGRpbmc6NCxmaWxsQ29sb3I6MjMyfSxsPXQuanNQREZ8fHt9LGg9dC50aXRsZT90LnRpdGxlOiIiO2Z1bmN0aW9uIGQoZSx0KXt2YXIgaT1bXTtyZXR1cm4gZS5jb2x1bW5zLmZvckVhY2goKGU9Pnt2YXIgcztpZihlKXtzd2l0Y2godHlwZW9mIGUudmFsdWUpe2Nhc2Uib2JqZWN0IjplLnZhbHVlPW51bGwhPT1lLnZhbHVlP0pTT04uc3RyaW5naWZ5KGUudmFsdWUpOiIiO2JyZWFrO2Nhc2UidW5kZWZpbmVkIjplLnZhbHVlPSIifXM9e2NvbnRlbnQ6ZS52YWx1ZSxjb2xTcGFuOmUud2lkdGgscm93U3BhbjplLmhlaWdodH0sdCYmKHMuc3R5bGVzPXQpLGkucHVzaChzKX19KSksaX1sLm9yaWVudGF0aW9ufHwobC5vcmllbnRhdGlvbj10Lm9yaWVudGF0aW9ufHwibGFuZHNjYXBlIiksbC51bml0fHwobC51bml0PSJwdCIpLGUuZm9yRWFjaCgoZT0+e3N3aXRjaChlLnR5cGUpe2Nhc2UiaGVhZGVyIjpzLnB1c2goZChlKSk7YnJlYWs7Y2FzZSJncm91cCI6by5wdXNoKGQoZSxyKSk7YnJlYWs7Y2FzZSJjYWxjIjpvLnB1c2goZChlLGEpKTticmVhaztjYXNlInJvdyI6by5wdXNoKGQoZSkpfX0pKTt2YXIgYz1uZXcganNwZGYuanNQREYobCk7dC5hdXRvVGFibGUmJihuPSJmdW5jdGlvbiI9PXR5cGVvZiB0LmF1dG9UYWJsZT90LmF1dG9UYWJsZShjKXx8e306dC5hdXRvVGFibGUpLGgmJihuLmRpZERyYXdQYWdlPWZ1bmN0aW9uKGUpe2MudGV4dChoLDQwLDMwKX0pLG4uaGVhZD1zLG4uYm9keT1vLGMuYXV0b1RhYmxlKG4pLHQuZG9jdW1lbnRQcm9jZXNzaW5nJiZ0LmRvY3VtZW50UHJvY2Vzc2luZyhjKSxpKGMub3V0cHV0KCJhcnJheWJ1ZmZlciIpLCJhcHBsaWNhdGlvbi9wZGYiKX0seGxzeDpmdW5jdGlvbih0LGkscyl7dmFyIG89aS5zaGVldE5hbWV8fCJTaGVldDEiLG49WExTWC51dGlscy5ib29rX25ldygpLHI9bmV3IGUodGhpcyksYT0hKCJjb21wcmVzcyJpbiBpKXx8aS5jb21wcmVzcyxsPWkud3JpdGVPcHRpb25zfHx7Ym9va1R5cGU6Inhsc3giLGJvb2tTU1Q6ITAsY29tcHJlc3Npb246YX07ZnVuY3Rpb24gaCgpe3ZhciBlPVtdLGk9W10scz17fSxvPXtzOntjOjAscjowfSxlOntjOnRbMF0/dFswXS5jb2x1bW5zLnJlZHVjZSgoKGUsdCk9PmUrKHQmJnQud2lkdGg/dC53aWR0aDoxKSksMCk6MCxyOnQubGVuZ3RofX07cmV0dXJuIHQuZm9yRWFjaCgoKHQscyk9Pnt2YXIgbz1bXTt0LmNvbHVtbnMuZm9yRWFjaCgoZnVuY3Rpb24oZSx0KXtlPyhvLnB1c2goZS52YWx1ZSBpbnN0YW5jZW9mIERhdGV8fCJvYmplY3QiIT10eXBlb2YgZS52YWx1ZT9lLnZhbHVlOkpTT04uc3RyaW5naWZ5KGUudmFsdWUpKSwoZS53aWR0aD4xfHxlLmhlaWdodD4tMSkmJihlLmhlaWdodD4xfHxlLndpZHRoPjEpJiZpLnB1c2goe3M6e3I6cyxjOnR9LGU6e3I6cytlLmhlaWdodC0xLGM6dCtlLndpZHRoLTF9fSkpOm8ucHVzaCgiIil9KSksZS5wdXNoKG8pfSkpLFhMU1gudXRpbHMuc2hlZXRfYWRkX2FvYShzLGUpLHNbIiFyZWYiXT1YTFNYLnV0aWxzLmVuY29kZV9yYW5nZShvKSxpLmxlbmd0aCYmKHNbIiFtZXJnZXMiXT1pKSxzfWlmKGwudHlwZT0iYmluYXJ5IixuLlNoZWV0TmFtZXM9W10sbi5TaGVldHM9e30saS5zaGVldE9ubHkpcyhoKCkpO2Vsc2V7aWYoaS5zaGVldHMpZm9yKHZhciBkIGluIGkuc2hlZXRzKSEwPT09aS5zaGVldHNbZF0/KG4uU2hlZXROYW1lcy5wdXNoKGQpLG4uU2hlZXRzW2RdPWgoKSk6KG4uU2hlZXROYW1lcy5wdXNoKGQpLHIuY29tbXNTZW5kKGkuc2hlZXRzW2RdLCJkb3dubG9hZCIsImludGVyY2VwdCIse3R5cGU6Inhsc3giLG9wdGlvbnM6e3NoZWV0T25seTohMH0sYWN0aXZlOnRoaXMuYWN0aXZlLGludGVyY2VwdDpmdW5jdGlvbihlKXtuLlNoZWV0c1tkXT1lfX0pKTtlbHNlIG4uU2hlZXROYW1lcy5wdXNoKG8pLG4uU2hlZXRzW29dPWgoKTtpLmRvY3VtZW50UHJvY2Vzc2luZyYmKG49aS5kb2N1bWVudFByb2Nlc3NpbmcobikpLHMoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBBcnJheUJ1ZmZlcihlLmxlbmd0aCksaT1uZXcgVWludDhBcnJheSh0KSxzPTA7cyE9ZS5sZW5ndGg7KytzKWlbc109MjU1JmUuY2hhckNvZGVBdChzKTtyZXR1cm4gdH0oWExTWC53cml0ZShuLGwpKSwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIil9fSxodG1sOmZ1bmN0aW9uKGUsdCxpKXt0aGlzLm1vZEV4aXN0cygiZXhwb3J0IiwhMCkmJmkodGhpcy5tb2R1bGVzLmV4cG9ydC5nZW5lcmF0ZUhUTUxUYWJsZShlKSwidGV4dC9odG1sIil9fTtjbGFzcyBKIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImRvd25sb2FkRW5jb2RlciIsKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBCbG9iKFtlXSx7dHlwZTp0fSl9KSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJkb3dubG9hZFJlYWR5Iix2b2lkIDApLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiZG93bmxvYWRDb25maWciLHt9KSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImRvd25sb2FkUm93UmFuZ2UiLCJhY3RpdmUiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJkb3dubG9hZCIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oInRpdGxlRG93bmxvYWQiKX1pbml0aWFsaXplKCl7dGhpcy5kZXByZWNhdGVkT3B0aW9uc0NoZWNrKCksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImRvd25sb2FkIix0aGlzLmRvd25sb2FkLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJkb3dubG9hZFRvVGFiIix0aGlzLmRvd25sb2FkVG9UYWIuYmluZCh0aGlzKSl9ZGVwcmVjYXRlZE9wdGlvbnNDaGVjaygpe3RoaXMuZGVwcmVjYXRpb25DaGVjaygiZG93bmxvYWRSZWFkeSIsImRvd25sb2FkRW5jb2RlciIpfWRvd25sb2FkVG9UYWIoZSx0LGkscyl7dGhpcy5kb3dubG9hZChlLHQsaSxzLCEwKX1kb3dubG9hZChlLHQsaSxzLG8pe3ZhciBuPSExO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBlP249ZTpKLmRvd25sb2FkZXJzW2VdP249Si5kb3dubG9hZGVyc1tlXTpjb25zb2xlLndhcm4oIkRvd25sb2FkIEVycm9yIC0gTm8gc3VjaCBkb3dubG9hZCB0eXBlIGZvdW5kOiAiLGUpLG4pe3ZhciByPXRoaXMuZ2VuZXJhdGVFeHBvcnRMaXN0KHMpO24uY2FsbCh0aGlzLnRhYmxlLHIsaXx8e30sZnVuY3Rpb24oaSxzKXtvPyEwPT09bz90aGlzLnRyaWdnZXJEb3dubG9hZChpLHMsZSx0LCEwKTpvKGkpOnRoaXMudHJpZ2dlckRvd25sb2FkKGkscyxlLHQpfS5iaW5kKHRoaXMpKX19Z2VuZXJhdGVFeHBvcnRMaXN0KGUpe3ZhciB0PXRoaXMudGFibGUubW9kdWxlcy5leHBvcnQuZ2VuZXJhdGVFeHBvcnRMaXN0KHRoaXMudGFibGUub3B0aW9ucy5kb3dubG9hZENvbmZpZywhMSxlfHx0aGlzLnRhYmxlLm9wdGlvbnMuZG93bmxvYWRSb3dSYW5nZSwiZG93bmxvYWQiKSxpPXRoaXMudGFibGUub3B0aW9ucy5ncm91cEhlYWRlckRvd25sb2FkO3JldHVybiBpJiYhQXJyYXkuaXNBcnJheShpKSYmKGk9W2ldKSx0LmZvckVhY2goKGU9Pnt2YXIgdDsiZ3JvdXAiPT09ZS50eXBlJiYodD1lLmNvbHVtbnNbMF0saSYmaVtlLmluZGVudF0mJih0LnZhbHVlPWlbZS5pbmRlbnRdKHQudmFsdWUsZS5jb21wb25lbnQuX2dyb3VwLmdldFJvd0NvdW50KCksZS5jb21wb25lbnQuX2dyb3VwLmdldERhdGEoKSxlLmNvbXBvbmVudCkpKX0pKSx0fXRyaWdnZXJEb3dubG9hZChlLHQsaSxzLG8pe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSxyPXRoaXMudGFibGUub3B0aW9ucy5kb3dubG9hZEVuY29kZXIoZSx0KTtyJiYobz93aW5kb3cub3Blbih3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChyKSk6KHM9c3x8IlRhYnVsYXRvci4iKygiZnVuY3Rpb24iPT10eXBlb2YgaT8idHh0IjppKSxuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYj9uYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihyLHMpOihuLnNldEF0dHJpYnV0ZSgiaHJlZiIsd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwocikpLG4uc2V0QXR0cmlidXRlKCJkb3dubG9hZCIscyksbi5zdHlsZS5kaXNwbGF5PSJub25lIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG4pLG4uY2xpY2soKSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG4pKSksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJkb3dubG9hZENvbXBsZXRlIikpfWNvbW1zUmVjZWl2ZWQoZSx0LGkpe2lmKCJpbnRlcmNlcHQiPT09dCl0aGlzLmRvd25sb2FkKGkudHlwZSwiIixpLm9wdGlvbnMsaS5hY3RpdmUsaS5pbnRlcmNlcHQpfX1mdW5jdGlvbiBZKGUsdCl7dmFyIGk9dC5tYXNrLHM9dm9pZCAwIT09dC5tYXNrTGV0dGVyQ2hhcj90Lm1hc2tMZXR0ZXJDaGFyOiJBIixvPXZvaWQgMCE9PXQubWFza051bWJlckNoYXI/dC5tYXNrTnVtYmVyQ2hhcjoiOSIsbj12b2lkIDAhPT10Lm1hc2tXaWxkY2FyZENoYXI/dC5tYXNrV2lsZGNhcmRDaGFyOiIqIjtmdW5jdGlvbiByKHQpe3ZhciBhPWlbdF07dm9pZCAwIT09YSYmYSE9PW4mJmEhPT1zJiZhIT09byYmKGUudmFsdWU9ZS52YWx1ZSsiIithLHIodCsxKSl9ZS5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwodD0+e3ZhciByPWUudmFsdWUubGVuZ3RoLGE9dC5rZXk7aWYodC5rZXlDb2RlPjQ2JiYhdC5jdHJsS2V5JiYhdC5tZXRhS2V5KXtpZihyPj1pLmxlbmd0aClyZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksITE7c3dpdGNoKGlbcl0pe2Nhc2UgczppZihhLnRvVXBwZXJDYXNlKCk9PWEudG9Mb3dlckNhc2UoKSlyZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksITE7YnJlYWs7Y2FzZSBvOmlmKGlzTmFOKGEpKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSwhMTticmVhaztjYXNlIG46YnJlYWs7ZGVmYXVsdDppZihhIT09aVtyXSlyZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksITF9fX0pKSxlLmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwoaT0+e2kua2V5Q29kZT40NiYmdC5tYXNrQXV0b0ZpbGwmJnIoZS52YWx1ZS5sZW5ndGgpfSkpLGUucGxhY2Vob2xkZXJ8fChlLnBsYWNlaG9sZGVyPWkpLHQubWFza0F1dG9GaWxsJiZyKGUudmFsdWUubGVuZ3RoKX1KLm1vZHVsZU5hbWU9ImRvd25sb2FkIixKLmRvd25sb2FkZXJzPUs7Y2xhc3MgJHtjb25zdHJ1Y3RvcihlLHQsaSxzLG8sbil7dGhpcy5lZGl0PWUsdGhpcy50YWJsZT1lLnRhYmxlLHRoaXMuY2VsbD10LHRoaXMucGFyYW1zPXRoaXMuX2luaXRpYWxpemVQYXJhbXMobiksdGhpcy5kYXRhPVtdLHRoaXMuZGlzcGxheUl0ZW1zPVtdLHRoaXMuY3VycmVudEl0ZW1zPVtdLHRoaXMuZm9jdXNlZEl0ZW09bnVsbCx0aGlzLmlucHV0PXRoaXMuX2NyZWF0ZUlucHV0RWxlbWVudCgpLHRoaXMubGlzdEVsPXRoaXMuX2NyZWF0ZUxpc3RFbGVtZW50KCksdGhpcy5pbml0aWFsVmFsdWVzPW51bGwsdGhpcy5pc0ZpbHRlcj0iaGVhZGVyIj09PXQuZ2V0VHlwZSgpLHRoaXMuZmlsdGVyVGltZW91dD1udWxsLHRoaXMuZmlsdGVyZWQ9ITEsdGhpcy50eXBpbmc9ITEsdGhpcy52YWx1ZXM9W10sdGhpcy5wb3B1cD1udWxsLHRoaXMubGlzdEl0ZXJhdGlvbj0wLHRoaXMubGFzdEFjdGlvbj0iIix0aGlzLmZpbHRlclRlcm09IiIsdGhpcy5ibHVyYWJsZT0hMCx0aGlzLmFjdGlvbnM9e3N1Y2Nlc3M6cyxjYW5jZWw6b30sdGhpcy5fZGVwcmVjYXRlZE9wdGlvbnNDaGVjaygpLHRoaXMuX2luaXRpYWxpemVWYWx1ZSgpLGkodGhpcy5fb25SZW5kZXJlZC5iaW5kKHRoaXMpKX1fZGVwcmVjYXRlZE9wdGlvbnNDaGVjaygpe3RoaXMucGFyYW1zLmxpc3RJdGVtRm9ybWF0dGVyJiZ0aGlzLmNlbGwuZ2V0VGFibGUoKS5kZXByZWNhdGlvbkFkdmlzb3IubXNnKCJUaGUgbGlzdEl0ZW1Gb3JtYXR0ZXIgZWRpdG9yIHBhcmFtIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSBzZWUgdGhlIGxhdGVzdCBlZGl0b3IgZG9jdW1lbnRhdGlvbiBmb3IgdXBkYXRlZCBvcHRpb25zIiksdGhpcy5wYXJhbXMuc29ydFZhbHVlc0xpc3QmJnRoaXMuY2VsbC5nZXRUYWJsZSgpLmRlcHJlY2F0aW9uQWR2aXNvci5tc2coIlRoZSBzb3J0VmFsdWVzTGlzdCBlZGl0b3IgcGFyYW0gaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHNlZSB0aGUgbGF0ZXN0IGVkaXRvciBkb2N1bWVudGF0aW9uIGZvciB1cGRhdGVkIG9wdGlvbnMiKSx0aGlzLnBhcmFtcy5zZWFyY2hGdW5jJiZ0aGlzLmNlbGwuZ2V0VGFibGUoKS5kZXByZWNhdGlvbkFkdmlzb3IubXNnKCJUaGUgc2VhcmNoRnVuYyBlZGl0b3IgcGFyYW0gaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHNlZSB0aGUgbGF0ZXN0IGVkaXRvciBkb2N1bWVudGF0aW9uIGZvciB1cGRhdGVkIG9wdGlvbnMiKSx0aGlzLnBhcmFtcy5zZWFyY2hpbmdQbGFjZWhvbGRlciYmdGhpcy5jZWxsLmdldFRhYmxlKCkuZGVwcmVjYXRpb25BZHZpc29yLm1zZygiVGhlIHNlYXJjaGluZ1BsYWNlaG9sZGVyIGVkaXRvciBwYXJhbSBoYXMgYmVlbiBkZXByZWNhdGVkLCBwbGVhc2Ugc2VlIHRoZSBsYXRlc3QgZWRpdG9yIGRvY3VtZW50YXRpb24gZm9yIHVwZGF0ZWQgb3B0aW9ucyIpfV9pbml0aWFsaXplVmFsdWUoKXt2YXIgZT10aGlzLmNlbGwuZ2V0VmFsdWUoKTt2b2lkIDA9PT1lJiZ2b2lkIDAhPT10aGlzLnBhcmFtcy5kZWZhdWx0VmFsdWUmJihlPXRoaXMucGFyYW1zLmRlZmF1bHRWYWx1ZSksdGhpcy5pbml0aWFsVmFsdWVzPXRoaXMucGFyYW1zLm11bHRpc2VsZWN0P2U6W2VdLHRoaXMuaXNGaWx0ZXImJih0aGlzLmlucHV0LnZhbHVlPXRoaXMuaW5pdGlhbFZhbHVlcz90aGlzLmluaXRpYWxWYWx1ZXMuam9pbigiLCIpOiIiLHRoaXMuaGVhZGVyRmlsdGVySW5pdGlhbExpc3RHZW4oKSl9X29uUmVuZGVyZWQoKXt2YXIgZT10aGlzLmNlbGwuZ2V0RWxlbWVudCgpO2Z1bmN0aW9uIHQoZSl7ZS5zdG9wUHJvcGFnYXRpb24oKX10aGlzLmlzRmlsdGVyfHwodGhpcy5pbnB1dC5zdHlsZS5oZWlnaHQ9IjEwMCUiLHRoaXMuaW5wdXQuZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KSksZS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsdCksc2V0VGltZW91dCgoKCk9PntlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIix0KX0pLDFlMyksdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLHRoaXMuX3ByZXZlbnRQb3B1cEJsdXIuYmluZCh0aGlzKSl9X2NyZWF0ZUxpc3RFbGVtZW50KCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWVkaXQtbGlzdCIpLGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIix0aGlzLl9wcmV2ZW50Qmx1ci5iaW5kKHRoaXMpKSxlLmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLHRoaXMuX2lucHV0S2V5RG93bi5iaW5kKHRoaXMpKSxlfV9zZXRMaXN0V2lkdGgoKXt2YXIgZT10aGlzLmlzRmlsdGVyP3RoaXMuaW5wdXQ6dGhpcy5jZWxsLmdldEVsZW1lbnQoKTt0aGlzLmxpc3RFbC5zdHlsZS5taW5XaWR0aD1lLm9mZnNldFdpZHRoKyJweCIsdGhpcy5wYXJhbXMubWF4V2lkdGgmJighMD09PXRoaXMucGFyYW1zLm1heFdpZHRoP3RoaXMubGlzdEVsLnN0eWxlLm1heFdpZHRoPWUub2Zmc2V0V2lkdGgrInB4IjoibnVtYmVyIj09dHlwZW9mIHRoaXMucGFyYW1zLm1heFdpZHRoP3RoaXMubGlzdEVsLnN0eWxlLm1heFdpZHRoPXRoaXMucGFyYW1zLm1heFdpZHRoKyJweCI6dGhpcy5saXN0RWwuc3R5bGUubWF4V2lkdGg9dGhpcy5wYXJhbXMubWF4V2lkdGgpfV9jcmVhdGVJbnB1dEVsZW1lbnQoKXt2YXIgZT10aGlzLnBhcmFtcy5lbGVtZW50QXR0cmlidXRlcyx0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7aWYodC5zZXRBdHRyaWJ1dGUoInR5cGUiLHRoaXMucGFyYW1zLmNsZWFyYWJsZT8ic2VhcmNoIjoidGV4dCIpLHQuc3R5bGUucGFkZGluZz0iNHB4Iix0LnN0eWxlLndpZHRoPSIxMDAlIix0LnN0eWxlLmJveFNpemluZz0iYm9yZGVyLWJveCIsdGhpcy5wYXJhbXMuYXV0b2NvbXBsZXRlfHwodC5zdHlsZS5jdXJzb3I9ImRlZmF1bHQiLHQuc3R5bGUuY2FyZXRDb2xvcj0idHJhbnNwYXJlbnQiKSxlJiYib2JqZWN0Ij09dHlwZW9mIGUpZm9yKGxldCBpIGluIGUpIisiPT1pLmNoYXJBdCgwKT8oaT1pLnNsaWNlKDEpLHQuc2V0QXR0cmlidXRlKGksdC5nZXRBdHRyaWJ1dGUoaSkrZVsiKyIraV0pKTp0LnNldEF0dHJpYnV0ZShpLGVbaV0pO3JldHVybiB0aGlzLnBhcmFtcy5tYXNrJiZZKHQsdGhpcy5wYXJhbXMpLHRoaXMuX2JpbmRJbnB1dEV2ZW50cyh0KSx0fV9pbml0aWFsaXplUGFyYW1zKGUpe3ZhciB0LGk9WyJ2YWx1ZXMiLCJ2YWx1ZXNVUkwiLCJ2YWx1ZXNMb29rdXAiXTtyZXR1cm4oZT1PYmplY3QuYXNzaWduKHt9LGUpKS52ZXJ0aWNhbE5hdmlnYXRpb249ZS52ZXJ0aWNhbE5hdmlnYXRpb258fCJlZGl0b3IiLGUucGxhY2Vob2xkZXJMb2FkaW5nPXZvaWQgMD09PWUucGxhY2Vob2xkZXJMb2FkaW5nPyJTZWFyY2hpbmcgLi4uIjplLnBsYWNlaG9sZGVyTG9hZGluZyxlLnBsYWNlaG9sZGVyRW1wdHk9dm9pZCAwPT09ZS5wbGFjZWhvbGRlckVtcHR5PyJObyBSZXN1bHRzIEZvdW5kIjplLnBsYWNlaG9sZGVyRW1wdHksZS5maWx0ZXJEZWxheT12b2lkIDA9PT1lLmZpbHRlckRlbGF5PzMwMDplLmZpbHRlckRlbGF5LGUuZW1wdHlWYWx1ZT1PYmplY3Qua2V5cyhlKS5pbmNsdWRlcygiZW1wdHlWYWx1ZSIpP2UuZW1wdHlWYWx1ZToiIiwodD1PYmplY3Qua2V5cyhlKS5maWx0ZXIoKGU9PmkuaW5jbHVkZXMoZSkpKS5sZW5ndGgpP3Q+MSYmY29uc29sZS53YXJuKCJsaXN0IGVkaXRvciBjb25maWcgZXJyb3IgLSBvbmx5IG9uZSBvZiB0aGUgdmFsdWVzLCB2YWx1ZXNVUkwsIG9yIHZhbHVlc0xvb2t1cCBvcHRpb25zIGNhbiBiZSBzZXQgb24gdGhlIHNhbWUgZWRpdG9yIik6Y29uc29sZS53YXJuKCJsaXN0IGVkaXRvciBjb25maWcgZXJyb3IgLSBlaXRoZXIgdGhlIHZhbHVlcywgdmFsdWVzVVJMLCBvciB2YWx1ZXNMb29rdXAgb3B0aW9uIG11c3QgYmUgc2V0IiksZS5hdXRvY29tcGxldGU/ZS5tdWx0aXNlbGVjdCYmKGUubXVsdGlzZWxlY3Q9ITEsY29uc29sZS53YXJuKCJsaXN0IGVkaXRvciBjb25maWcgZXJyb3IgLSBtdWx0aXNlbGVjdCBvcHRpb24gaXMgbm90IGF2YWlsYWJsZSB3aGVuIGF1dG9jb21wbGV0ZSBpcyBlbmFibGVkIikpOihlLmZyZWV0ZXh0JiYoZS5mcmVldGV4dD0hMSxjb25zb2xlLndhcm4oImxpc3QgZWRpdG9yIGNvbmZpZyBlcnJvciAtIGZyZWV0ZXh0IG9wdGlvbiBpcyBvbmx5IGF2YWlsYWJsZSB3aGVuIGF1dG9jb21wbGV0ZSBpcyBlbmFibGVkIikpLGUuZmlsdGVyRnVuYyYmKGUuZmlsdGVyRnVuYz0hMSxjb25zb2xlLndhcm4oImxpc3QgZWRpdG9yIGNvbmZpZyBlcnJvciAtIGZpbHRlckZ1bmMgb3B0aW9uIGlzIG9ubHkgYXZhaWxhYmxlIHdoZW4gYXV0b2NvbXBsZXRlIGlzIGVuYWJsZWQiKSksZS5maWx0ZXJSZW1vdGUmJihlLmZpbHRlclJlbW90ZT0hMSxjb25zb2xlLndhcm4oImxpc3QgZWRpdG9yIGNvbmZpZyBlcnJvciAtIGZpbHRlclJlbW90ZSBvcHRpb24gaXMgb25seSBhdmFpbGFibGUgd2hlbiBhdXRvY29tcGxldGUgaXMgZW5hYmxlZCIpKSxlLm1hc2smJihlLm1hc2s9ITEsY29uc29sZS53YXJuKCJsaXN0IGVkaXRvciBjb25maWcgZXJyb3IgLSBtYXNrIG9wdGlvbiBpcyBvbmx5IGF2YWlsYWJsZSB3aGVuIGF1dG9jb21wbGV0ZSBpcyBlbmFibGVkIikpLGUuYWxsb3dFbXB0eSYmKGUuYWxsb3dFbXB0eT0hMSxjb25zb2xlLndhcm4oImxpc3QgZWRpdG9yIGNvbmZpZyBlcnJvciAtIGFsbG93RW1wdHkgb3B0aW9uIGlzIG9ubHkgYXZhaWxhYmxlIHdoZW4gYXV0b2NvbXBsZXRlIGlzIGVuYWJsZWQiKSksZS5saXN0T25FbXB0eSYmKGUubGlzdE9uRW1wdHk9ITEsY29uc29sZS53YXJuKCJsaXN0IGVkaXRvciBjb25maWcgZXJyb3IgLSBsaXN0T25FbXB0eSBvcHRpb24gaXMgb25seSBhdmFpbGFibGUgd2hlbiBhdXRvY29tcGxldGUgaXMgZW5hYmxlZCIpKSksZS5maWx0ZXJSZW1vdGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlLnZhbHVlc0xvb2t1cCYmIWUudmFsdWVzVVJMJiYoZS5maWx0ZXJSZW1vdGU9ITEsY29uc29sZS53YXJuKCJsaXN0IGVkaXRvciBjb25maWcgZXJyb3IgLSBmaWx0ZXJSZW1vdGUgb3B0aW9uIHNob3VsZCBvbmx5IGJlIHVzZWQgd2hlbiB2YWx1ZXMgbGlzdCBpcyBwb3B1bGF0ZWQgZnJvbSBhIHJlbW90ZSBzb3VyY2UiKSksZX1fYmluZElucHV0RXZlbnRzKGUpe2UuYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuX2lucHV0Rm9jdXMuYmluZCh0aGlzKSksZS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5faW5wdXRDbGljay5iaW5kKHRoaXMpKSxlLmFkZEV2ZW50TGlzdGVuZXIoImJsdXIiLHRoaXMuX2lucHV0Qmx1ci5iaW5kKHRoaXMpKSxlLmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLHRoaXMuX2lucHV0S2V5RG93bi5iaW5kKHRoaXMpKSxlLmFkZEV2ZW50TGlzdGVuZXIoInNlYXJjaCIsdGhpcy5faW5wdXRTZWFyY2guYmluZCh0aGlzKSksdGhpcy5wYXJhbXMuYXV0b2NvbXBsZXRlJiZlLmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIix0aGlzLl9pbnB1dEtleVVwLmJpbmQodGhpcykpfV9pbnB1dEZvY3VzKGUpe3RoaXMucmVidWlsZE9wdGlvbnNMaXN0KCl9X2ZpbHRlcigpe3RoaXMucGFyYW1zLmZpbHRlclJlbW90ZT8oY2xlYXJUaW1lb3V0KHRoaXMuZmlsdGVyVGltZW91dCksdGhpcy5maWx0ZXJUaW1lb3V0PXNldFRpbWVvdXQoKCgpPT57dGhpcy5yZWJ1aWxkT3B0aW9uc0xpc3QoKX0pLHRoaXMucGFyYW1zLmZpbHRlckRlbGF5KSk6dGhpcy5fZmlsdGVyTGlzdCgpfV9pbnB1dENsaWNrKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCl9X2lucHV0Qmx1cihlKXt0aGlzLmJsdXJhYmxlJiYodGhpcy5wb3B1cD90aGlzLnBvcHVwLmhpZGUoKTp0aGlzLl9yZXNvbHZlVmFsdWUoITApKX1faW5wdXRTZWFyY2goKXt0aGlzLl9jbGVhckNob2ljZXMoKX1faW5wdXRLZXlEb3duKGUpe3N3aXRjaChlLmtleUNvZGUpe2Nhc2UgMzg6dGhpcy5fa2V5VXAoZSk7YnJlYWs7Y2FzZSA0MDp0aGlzLl9rZXlEb3duKGUpO2JyZWFrO2Nhc2UgMzc6Y2FzZSAzOTp0aGlzLl9rZXlTaWRlKGUpO2JyZWFrO2Nhc2UgMTM6dGhpcy5fa2V5RW50ZXIoKTticmVhaztjYXNlIDI3OnRoaXMuX2tleUVzYygpO2JyZWFrO2Nhc2UgMzY6Y2FzZSAzNTp0aGlzLl9rZXlIb21lRW5kKGUpO2JyZWFrO2Nhc2UgOTp0aGlzLl9rZXlUYWIoZSk7YnJlYWs7ZGVmYXVsdDp0aGlzLl9rZXlTZWxlY3RMZXR0ZXIoZSl9fV9pbnB1dEtleVVwKGUpe3N3aXRjaChlLmtleUNvZGUpe2Nhc2UgMzg6Y2FzZSAzNzpjYXNlIDM5OmNhc2UgNDA6Y2FzZSAxMzpjYXNlIDI3OmJyZWFrO2RlZmF1bHQ6dGhpcy5fa2V5QXV0b0NvbXBMZXR0ZXIoZSl9fV9wcmV2ZW50UG9wdXBCbHVyKCl7dGhpcy5wb3B1cCYmdGhpcy5wb3B1cC5ibG9ja0hpZGUoKSxzZXRUaW1lb3V0KCgoKT0+e3RoaXMucG9wdXAmJnRoaXMucG9wdXAucmVzdG9yZUhpZGUoKX0pLDEwKX1fcHJldmVudEJsdXIoKXt0aGlzLmJsdXJhYmxlPSExLHNldFRpbWVvdXQoKCgpPT57dGhpcy5ibHVyYWJsZT0hMH0pLDEwKX1fa2V5VGFiKGUpe3RoaXMucGFyYW1zLmF1dG9jb21wbGV0ZSYmInR5cGluZyI9PT10aGlzLmxhc3RBY3Rpb24/dGhpcy5fcmVzb2x2ZVZhbHVlKCEwKTp0aGlzLmZvY3VzZWRJdGVtJiZ0aGlzLl9jaG9vc2VJdGVtKHRoaXMuZm9jdXNlZEl0ZW0sITApfV9rZXlVcChlKXt2YXIgdD10aGlzLmRpc3BsYXlJdGVtcy5pbmRleE9mKHRoaXMuZm9jdXNlZEl0ZW0pOygiZWRpdG9yIj09dGhpcy5wYXJhbXMudmVydGljYWxOYXZpZ2F0aW9ufHwiaHlicmlkIj09dGhpcy5wYXJhbXMudmVydGljYWxOYXZpZ2F0aW9uJiZ0KSYmKGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5zdG9wUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCksdD4wJiZ0aGlzLl9mb2N1c0l0ZW0odGhpcy5kaXNwbGF5SXRlbXNbdC0xXSkpfV9rZXlEb3duKGUpe3ZhciB0PXRoaXMuZGlzcGxheUl0ZW1zLmluZGV4T2YodGhpcy5mb2N1c2VkSXRlbSk7KCJlZGl0b3IiPT10aGlzLnBhcmFtcy52ZXJ0aWNhbE5hdmlnYXRpb258fCJoeWJyaWQiPT10aGlzLnBhcmFtcy52ZXJ0aWNhbE5hdmlnYXRpb24mJnQ8dGhpcy5kaXNwbGF5SXRlbXMubGVuZ3RoLTEpJiYoZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxlLnN0b3BQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKSx0PHRoaXMuZGlzcGxheUl0ZW1zLmxlbmd0aC0xJiYoLTE9PXQ/dGhpcy5fZm9jdXNJdGVtKHRoaXMuZGlzcGxheUl0ZW1zWzBdKTp0aGlzLl9mb2N1c0l0ZW0odGhpcy5kaXNwbGF5SXRlbXNbdCsxXSkpKX1fa2V5U2lkZShlKXt0aGlzLnBhcmFtcy5hdXRvY29tcGxldGV8fChlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUuc3RvcFByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpKX1fa2V5RW50ZXIoZSl7dGhpcy5wYXJhbXMuYXV0b2NvbXBsZXRlJiYidHlwaW5nIj09PXRoaXMubGFzdEFjdGlvbj90aGlzLl9yZXNvbHZlVmFsdWUoITApOnRoaXMuZm9jdXNlZEl0ZW0mJnRoaXMuX2Nob29zZUl0ZW0odGhpcy5mb2N1c2VkSXRlbSl9X2tleUVzYyhlKXt0aGlzLl9jYW5jZWwoKX1fa2V5SG9tZUVuZChlKXt0aGlzLnBhcmFtcy5hdXRvY29tcGxldGUmJmUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9X2tleVNlbGVjdExldHRlcihlKXt0aGlzLnBhcmFtcy5hdXRvY29tcGxldGV8fChlLnByZXZlbnREZWZhdWx0KCksZS5rZXlDb2RlPj0zOCYmZS5rZXlDb2RlPD05MCYmdGhpcy5fc2Nyb2xsVG9WYWx1ZShlLmtleUNvZGUpKX1fa2V5QXV0b0NvbXBMZXR0ZXIoZSl7dGhpcy5fZmlsdGVyKCksdGhpcy5sYXN0QWN0aW9uPSJ0eXBpbmciLHRoaXMudHlwaW5nPSEwfV9zY3JvbGxUb1ZhbHVlKGUpe2NsZWFyVGltZW91dCh0aGlzLmZpbHRlclRpbWVvdXQpO3ZhciB0PVN0cmluZy5mcm9tQ2hhckNvZGUoZSkudG9Mb3dlckNhc2UoKTt0aGlzLmZpbHRlclRlcm0rPXQudG9Mb3dlckNhc2UoKTt2YXIgaT10aGlzLmRpc3BsYXlJdGVtcy5maW5kKChlPT52b2lkIDAhPT1lLmxhYmVsJiZlLmxhYmVsLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCh0aGlzLmZpbHRlclRlcm0pKSk7aSYmdGhpcy5fZm9jdXNJdGVtKGkpLHRoaXMuZmlsdGVyVGltZW91dD1zZXRUaW1lb3V0KCgoKT0+e3RoaXMuZmlsdGVyVGVybT0iIn0pLDgwMCl9X2ZvY3VzSXRlbShlKXt0aGlzLmxhc3RBY3Rpb249ImZvY3VzIix0aGlzLmZvY3VzZWRJdGVtJiZ0aGlzLmZvY3VzZWRJdGVtLmVsZW1lbnQmJnRoaXMuZm9jdXNlZEl0ZW0uZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJmb2N1c2VkIiksdGhpcy5mb2N1c2VkSXRlbT1lLGUmJmUuZWxlbWVudCYmKGUuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJmb2N1c2VkIiksZS5lbGVtZW50LnNjcm9sbEludG9WaWV3KHtiZWhhdmlvcjoic21vb3RoIixibG9jazoibmVhcmVzdCIsaW5saW5lOiJzdGFydCJ9KSl9aGVhZGVyRmlsdGVySW5pdGlhbExpc3RHZW4oKXt0aGlzLl9nZW5lcmF0ZU9wdGlvbnMoITApfXJlYnVpbGRPcHRpb25zTGlzdCgpe3RoaXMuX2dlbmVyYXRlT3B0aW9ucygpLnRoZW4odGhpcy5fc29ydE9wdGlvbnMuYmluZCh0aGlzKSkudGhlbih0aGlzLl9idWlsZExpc3QuYmluZCh0aGlzKSkudGhlbih0aGlzLl9zaG93TGlzdC5iaW5kKHRoaXMpKS5jYXRjaCgoZT0+e051bWJlci5pc0ludGVnZXIoZSl8fGNvbnNvbGUuZXJyb3IoIkxpc3QgZ2VuZXJhdGlvbiBlcnJvciIsZSl9KSl9X2ZpbHRlckxpc3QoKXt0aGlzLl9idWlsZExpc3QodGhpcy5fZmlsdGVyT3B0aW9ucygpKSx0aGlzLl9zaG93TGlzdCgpfV9nZW5lcmF0ZU9wdGlvbnMoZSl7dmFyIHQ9W10saT0rK3RoaXMubGlzdEl0ZXJhdGlvbjtyZXR1cm4gdGhpcy5maWx0ZXJlZD0hMSx0aGlzLnBhcmFtcy52YWx1ZXM/dD10aGlzLnBhcmFtcy52YWx1ZXM6dGhpcy5wYXJhbXMudmFsdWVzVVJMP3Q9dGhpcy5fYWpheFJlcXVlc3QodGhpcy5wYXJhbXMudmFsdWVzVVJMLHRoaXMuaW5wdXQudmFsdWUpOiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnBhcmFtcy52YWx1ZXNMb29rdXA/dD10aGlzLnBhcmFtcy52YWx1ZXNMb29rdXAodGhpcy5jZWxsLHRoaXMuaW5wdXQudmFsdWUpOnRoaXMucGFyYW1zLnZhbHVlc0xvb2t1cCYmKHQ9dGhpcy5fdW5pcXVlQ29sdW1uVmFsdWVzKHRoaXMucGFyYW1zLnZhbHVlc0xvb2t1cEZpZWxkKSksdCBpbnN0YW5jZW9mIFByb21pc2U/KGV8fHRoaXMuX2FkZFBsYWNlaG9sZGVyKHRoaXMucGFyYW1zLnBsYWNlaG9sZGVyTG9hZGluZyksdC50aGVuKCkudGhlbigoZT0+dGhpcy5saXN0SXRlcmF0aW9uPT09aT90aGlzLl9wYXJzZUxpc3QoZSk6UHJvbWlzZS5yZWplY3QoaSkpKSk6UHJvbWlzZS5yZXNvbHZlKHRoaXMuX3BhcnNlTGlzdCh0KSl9X2FkZFBsYWNlaG9sZGVyKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOyJmdW5jdGlvbiI9PXR5cGVvZiBlJiYoZT1lKHRoaXMuY2VsbC5nZXRDb21wb25lbnQoKSx0aGlzLmxpc3RFbCkpLGUmJih0aGlzLl9jbGVhckxpc3QoKSxlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ/dD1lOih0LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1lZGl0LWxpc3QtcGxhY2Vob2xkZXIiKSx0LmlubmVySFRNTD1lKSx0aGlzLmxpc3RFbC5hcHBlbmRDaGlsZCh0KSx0aGlzLl9zaG93TGlzdCgpKX1fYWpheFJlcXVlc3QoZSx0KXtyZXR1cm4gZT1JKGUse30sdGhpcy5wYXJhbXMuZmlsdGVyUmVtb3RlP3t0ZXJtOnR9Ont9KSxmZXRjaChlKS50aGVuKChlPT5lLm9rP2UuanNvbigpLmNhdGNoKChlPT4oY29uc29sZS53YXJuKCJMaXN0IEFqYXggTG9hZCBFcnJvciAtIEludmFsaWQgSlNPTiByZXR1cm5lZCIsZSksUHJvbWlzZS5yZWplY3QoZSkpKSk6KGNvbnNvbGUuZXJyb3IoIkxpc3QgQWpheCBMb2FkIEVycm9yIC0gQ29ubmVjdGlvbiBFcnJvcjogIitlLnN0YXR1cyxlLnN0YXR1c1RleHQpLFByb21pc2UucmVqZWN0KGUpKSkpLmNhdGNoKChlPT4oY29uc29sZS5lcnJvcigiTGlzdCBBamF4IExvYWQgRXJyb3IgLSBDb25uZWN0aW9uIEVycm9yOiAiLGUpLFByb21pc2UucmVqZWN0KGUpKSkpfV91bmlxdWVDb2x1bW5WYWx1ZXMoZSl7dmFyIHQsaT17fSxzPXRoaXMudGFibGUuZ2V0RGF0YSh0aGlzLnBhcmFtcy52YWx1ZXNMb29rdXApO3JldHVybih0PWU/dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmdldENvbHVtbkJ5RmllbGQoZSk6dGhpcy5jZWxsLmdldENvbHVtbigpLl9nZXRTZWxmKCkpP3MuZm9yRWFjaCgoZT0+e3ZhciBzPXQuZ2V0RmllbGRWYWx1ZShlKTtudWxsIT1zJiYiIiE9PXMmJihpW3NdPSEwKX0pKTooY29uc29sZS53YXJuKCJ1bmFibGUgdG8gZmluZCBtYXRjaGluZyBjb2x1bW4gdG8gY3JlYXRlIHNlbGVjdCBsb29rdXAgbGlzdDoiLGUpLGk9W10pLE9iamVjdC5rZXlzKGkpfV9wYXJzZUxpc3QoZSl7dmFyIHQ9W107cmV0dXJuIEFycmF5LmlzQXJyYXkoZSl8fChlPU9iamVjdC5lbnRyaWVzKGUpLm1hcCgoKFtlLHRdKT0+KHtsYWJlbDp0LHZhbHVlOmV9KSkpKSxlLmZvckVhY2goKGU9Pnsib2JqZWN0IiE9dHlwZW9mIGUmJihlPXtsYWJlbDplLHZhbHVlOmV9KSx0aGlzLl9wYXJzZUxpc3RJdGVtKGUsdCwwKX0pKSwhdGhpcy5jdXJyZW50SXRlbXMubGVuZ3RoJiZ0aGlzLnBhcmFtcy5mcmVldGV4dCYmKHRoaXMuaW5wdXQudmFsdWU9dGhpcy5pbml0aWFsVmFsdWVzLHRoaXMudHlwaW5nPSEwLHRoaXMubGFzdEFjdGlvbj0idHlwaW5nIiksdGhpcy5kYXRhPXQsdH1fcGFyc2VMaXN0SXRlbShlLHQsaSl7dmFyIHM9e307ZS5vcHRpb25zP3M9dGhpcy5fcGFyc2VMaXN0R3JvdXAoZSxpKzEpOihzPXtsYWJlbDplLmxhYmVsLHZhbHVlOmUudmFsdWUsaXRlbVBhcmFtczplLml0ZW1QYXJhbXMsZWxlbWVudEF0dHJpYnV0ZXM6ZS5lbGVtZW50QXR0cmlidXRlcyxlbGVtZW50OiExLHNlbGVjdGVkOiExLHZpc2libGU6ITAsbGV2ZWw6aSxvcmlnaW5hbDplfSx0aGlzLmluaXRpYWxWYWx1ZXMmJnRoaXMuaW5pdGlhbFZhbHVlcy5pbmRleE9mKGUudmFsdWUpPi0xJiZ0aGlzLl9jaG9vc2VJdGVtKHMsITApKSx0LnB1c2gocyl9X3BhcnNlTGlzdEdyb3VwKGUsdCl7dmFyIGk9e2xhYmVsOmUubGFiZWwsZ3JvdXA6ITAsaXRlbVBhcmFtczplLml0ZW1QYXJhbXMsZWxlbWVudEF0dHJpYnV0ZXM6ZS5lbGVtZW50QXR0cmlidXRlcyxlbGVtZW50OiExLHZpc2libGU6ITAsbGV2ZWw6dCxvcHRpb25zOltdLG9yaWdpbmFsOmV9O3JldHVybiBlLm9wdGlvbnMuZm9yRWFjaCgoZT0+e3RoaXMuX3BhcnNlTGlzdEl0ZW0oZSxpLm9wdGlvbnMsdCl9KSksaX1fc29ydE9wdGlvbnMoZSl7dmFyIHQ7cmV0dXJuIHRoaXMucGFyYW1zLnNvcnQmJih0PSJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnBhcmFtcy5zb3J0P3RoaXMucGFyYW1zLnNvcnQ6dGhpcy5fZGVmYXVsdFNvcnRGdW5jdGlvbi5iaW5kKHRoaXMpLHRoaXMuX3NvcnRHcm91cCh0LGUpKSxlfV9zb3J0R3JvdXAoZSx0KXt0LnNvcnQoKCh0LGkpPT5lKHQubGFiZWwsaS5sYWJlbCx0LnZhbHVlLGkudmFsdWUsdC5vcmlnaW5hbCxpLm9yaWdpbmFsKSkpLHQuZm9yRWFjaCgodD0+e3QuZ3JvdXAmJnRoaXMuX3NvcnRHcm91cChlLHQub3B0aW9ucyl9KSl9X2RlZmF1bHRTb3J0RnVuY3Rpb24oZSx0KXt2YXIgaSxzLG8sbixyLGE9MCxsPS8oXGQrKXwoXEQrKS9nLGg9L1xkLyxkPTA7aWYoImRlc2MiPT09dGhpcy5wYXJhbXMuc29ydCYmKFtlLHRdPVt0LGVdKSxlfHwwPT09ZSl7aWYodHx8MD09PXQpe2lmKGlzRmluaXRlKGUpJiZpc0Zpbml0ZSh0KSlyZXR1cm4gZS10O2lmKChpPVN0cmluZyhlKS50b0xvd2VyQ2FzZSgpKT09PShzPVN0cmluZyh0KS50b0xvd2VyQ2FzZSgpKSlyZXR1cm4gMDtpZighaC50ZXN0KGkpfHwhaC50ZXN0KHMpKXJldHVybiBpPnM/MTotMTtmb3IoaT1pLm1hdGNoKGwpLHM9cy5tYXRjaChsKSxyPWkubGVuZ3RoPnMubGVuZ3RoP3MubGVuZ3RoOmkubGVuZ3RoO2E8cjspaWYoKG89aVthXSkhPT0obj1zW2ErK10pKXJldHVybiBpc0Zpbml0ZShvKSYmaXNGaW5pdGUobik/KCIwIj09PW8uY2hhckF0KDApJiYobz0iLiIrbyksIjAiPT09bi5jaGFyQXQoMCkmJihuPSIuIituKSxvLW4pOm8+bj8xOi0xO3JldHVybiBpLmxlbmd0aD5zLmxlbmd0aH1kPTF9ZWxzZSBkPXR8fDA9PT10Py0xOjA7cmV0dXJuIGR9X2ZpbHRlck9wdGlvbnMoKXt2YXIgZT10aGlzLnBhcmFtcy5maWx0ZXJGdW5jfHx0aGlzLl9kZWZhdWx0RmlsdGVyRnVuYyx0PXRoaXMuaW5wdXQudmFsdWU7cmV0dXJuIHQ/KHRoaXMuZmlsdGVyZWQ9ITAsdGhpcy5kYXRhLmZvckVhY2goKGk9Pnt0aGlzLl9maWx0ZXJJdGVtKGUsdCxpKX0pKSk6dGhpcy5maWx0ZXJlZD0hMSx0aGlzLmRhdGF9X2ZpbHRlckl0ZW0oZSx0LGkpe3ZhciBzPSExO3JldHVybiBpLmdyb3VwPyhpLm9wdGlvbnMuZm9yRWFjaCgoaT0+e3RoaXMuX2ZpbHRlckl0ZW0oZSx0LGkpJiYocz0hMCl9KSksaS52aXNpYmxlPXMpOmkudmlzaWJsZT1lKHQsaS5sYWJlbCxpLnZhbHVlLGkub3JpZ2luYWwpLGkudmlzaWJsZX1fZGVmYXVsdEZpbHRlckZ1bmMoZSx0LGkscyl7cmV0dXJuIGU9U3RyaW5nKGUpLnRvTG93ZXJDYXNlKCksbnVsbCE9dCYmKFN0cmluZyh0KS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZSk+LTF8fFN0cmluZyhpKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZSk+LTEpfV9jbGVhckxpc3QoKXtmb3IoO3RoaXMubGlzdEVsLmZpcnN0Q2hpbGQ7KXRoaXMubGlzdEVsLnJlbW92ZUNoaWxkKHRoaXMubGlzdEVsLmZpcnN0Q2hpbGQpO3RoaXMuZGlzcGxheUl0ZW1zPVtdfV9idWlsZExpc3QoZSl7dGhpcy5fY2xlYXJMaXN0KCksZS5mb3JFYWNoKChlPT57dGhpcy5fYnVpbGRJdGVtKGUpfSkpLHRoaXMuZGlzcGxheUl0ZW1zLmxlbmd0aHx8dGhpcy5fYWRkUGxhY2Vob2xkZXIodGhpcy5wYXJhbXMucGxhY2Vob2xkZXJFbXB0eSl9X2J1aWxkSXRlbShlKXt2YXIgdCxpPWUuZWxlbWVudDtpZighdGhpcy5maWx0ZXJlZHx8ZS52aXNpYmxlKXtpZighaSl7aWYoKGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLnRhYkluZGV4PTAsKHQ9dGhpcy5wYXJhbXMuaXRlbUZvcm1hdHRlcj90aGlzLnBhcmFtcy5pdGVtRm9ybWF0dGVyKGUubGFiZWwsZS52YWx1ZSxlLm9yaWdpbmFsLGkpOmUubGFiZWwpaW5zdGFuY2VvZiBIVE1MRWxlbWVudD9pLmFwcGVuZENoaWxkKHQpOmkuaW5uZXJIVE1MPXQsZS5ncm91cD9pLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1lZGl0LWxpc3QtZ3JvdXAiKTppLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1lZGl0LWxpc3QtaXRlbSIpLGkuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWVkaXQtbGlzdC1ncm91cC1sZXZlbC0iK2UubGV2ZWwpLGUuZWxlbWVudEF0dHJpYnV0ZXMmJiJvYmplY3QiPT10eXBlb2YgZS5lbGVtZW50QXR0cmlidXRlcylmb3IobGV0IHQgaW4gZS5lbGVtZW50QXR0cmlidXRlcykiKyI9PXQuY2hhckF0KDApPyh0PXQuc2xpY2UoMSksaS5zZXRBdHRyaWJ1dGUodCx0aGlzLmlucHV0LmdldEF0dHJpYnV0ZSh0KStlLmVsZW1lbnRBdHRyaWJ1dGVzWyIrIit0XSkpOmkuc2V0QXR0cmlidXRlKHQsZS5lbGVtZW50QXR0cmlidXRlc1t0XSk7ZS5ncm91cD9pLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIix0aGlzLl9ncm91cENsaWNrLmJpbmQodGhpcyxlKSk6aS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5faXRlbUNsaWNrLmJpbmQodGhpcyxlKSksaS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLHRoaXMuX3ByZXZlbnRCbHVyLmJpbmQodGhpcykpLGUuZWxlbWVudD1pfXRoaXMuX3N0eWxlSXRlbShlKSx0aGlzLmxpc3RFbC5hcHBlbmRDaGlsZChpKSxlLmdyb3VwP2Uub3B0aW9ucy5mb3JFYWNoKChlPT57dGhpcy5fYnVpbGRJdGVtKGUpfSkpOnRoaXMuZGlzcGxheUl0ZW1zLnB1c2goZSl9fV9zaG93TGlzdCgpe3ZhciBlPXRoaXMucG9wdXAmJnRoaXMucG9wdXAuaXNWaXNpYmxlKCk7aWYodGhpcy5pbnB1dC5wYXJlbnROb2RlKXtpZih0aGlzLnBhcmFtcy5hdXRvY29tcGxldGUmJiIiPT09dGhpcy5pbnB1dC52YWx1ZSYmIXRoaXMucGFyYW1zLmxpc3RPbkVtcHR5KXJldHVybiB2b2lkKHRoaXMucG9wdXAmJnRoaXMucG9wdXAuaGlkZSghMCkpO3RoaXMuX3NldExpc3RXaWR0aCgpLHRoaXMucG9wdXB8fCh0aGlzLnBvcHVwPXRoaXMuZWRpdC5wb3B1cCh0aGlzLmxpc3RFbCkpLHRoaXMucG9wdXAuc2hvdyh0aGlzLmNlbGwuZ2V0RWxlbWVudCgpLCJib3R0b20iKSxlfHxzZXRUaW1lb3V0KCgoKT0+e3RoaXMucG9wdXAuaGlkZU9uQmx1cih0aGlzLl9yZXNvbHZlVmFsdWUuYmluZCh0aGlzLCEwKSl9KSwxMCl9fV9zdHlsZUl0ZW0oZSl7ZSYmZS5lbGVtZW50JiYoZS5zZWxlY3RlZD9lLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgiYWN0aXZlIik6ZS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImFjdGl2ZSIpKX1faXRlbUNsaWNrKGUsdCl7dC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLl9jaG9vc2VJdGVtKGUpfV9ncm91cENsaWNrKGUsdCl7dC5zdG9wUHJvcGFnYXRpb24oKX1fY2FuY2VsKCl7dGhpcy5wb3B1cC5oaWRlKCEwKSx0aGlzLmFjdGlvbnMuY2FuY2VsKCl9X2NsZWFyQ2hvaWNlcygpe3RoaXMudHlwaW5nPSEwLHRoaXMuY3VycmVudEl0ZW1zLmZvckVhY2goKGU9PntlLnNlbGVjdGVkPSExLHRoaXMuX3N0eWxlSXRlbShlKX0pKSx0aGlzLmN1cnJlbnRJdGVtcz1bXSx0aGlzLmZvY3VzZWRJdGVtPW51bGx9X2Nob29zZUl0ZW0oZSx0KXt2YXIgaTt0aGlzLnR5cGluZz0hMSx0aGlzLnBhcmFtcy5tdWx0aXNlbGVjdD8oKGk9dGhpcy5jdXJyZW50SXRlbXMuaW5kZXhPZihlKSk+LTE/KHRoaXMuY3VycmVudEl0ZW1zLnNwbGljZShpLDEpLGUuc2VsZWN0ZWQ9ITEpOih0aGlzLmN1cnJlbnRJdGVtcy5wdXNoKGUpLGUuc2VsZWN0ZWQ9ITApLHRoaXMuaW5wdXQudmFsdWU9dGhpcy5jdXJyZW50SXRlbXMubWFwKChlPT5lLmxhYmVsKSkuam9pbigiLCIpLHRoaXMuX3N0eWxlSXRlbShlKSk6KHRoaXMuY3VycmVudEl0ZW1zPVtlXSxlLnNlbGVjdGVkPSEwLHRoaXMuaW5wdXQudmFsdWU9ZS5sYWJlbCx0aGlzLl9zdHlsZUl0ZW0oZSksdHx8dGhpcy5fcmVzb2x2ZVZhbHVlKCkpLHRoaXMuX2ZvY3VzSXRlbShlKX1fcmVzb2x2ZVZhbHVlKGUpe3ZhciB0LGk7aWYodGhpcy5wb3B1cCYmdGhpcy5wb3B1cC5oaWRlKCEwKSx0aGlzLnBhcmFtcy5tdWx0aXNlbGVjdCl0PXRoaXMuY3VycmVudEl0ZW1zLm1hcCgoZT0+ZS52YWx1ZSkpO2Vsc2UgaWYoZSYmdGhpcy5wYXJhbXMuYXV0b2NvbXBsZXRlJiZ0aGlzLnR5cGluZyl7aWYoISh0aGlzLnBhcmFtcy5mcmVldGV4dHx8dGhpcy5wYXJhbXMuYWxsb3dFbXB0eSYmIiI9PT10aGlzLmlucHV0LnZhbHVlKSlyZXR1cm4gdm9pZCB0aGlzLmFjdGlvbnMuY2FuY2VsKCk7dD10aGlzLmlucHV0LnZhbHVlfWVsc2UgdD10aGlzLmN1cnJlbnRJdGVtc1swXT90aGlzLmN1cnJlbnRJdGVtc1swXS52YWx1ZTpudWxsPT0oaT1BcnJheS5pc0FycmF5KHRoaXMuaW5pdGlhbFZhbHVlcyk/dGhpcy5pbml0aWFsVmFsdWVzWzBdOnRoaXMuaW5pdGlhbFZhbHVlcyl8fCIiPT09aT9pOnRoaXMucGFyYW1zLmVtcHR5VmFsdWU7IiI9PT10JiYodD10aGlzLnBhcmFtcy5lbXB0eVZhbHVlKSx0aGlzLmFjdGlvbnMuc3VjY2Vzcyh0KSx0aGlzLmlzRmlsdGVyJiYodGhpcy5pbml0aWFsVmFsdWVzPXQmJiFBcnJheS5pc0FycmF5KHQpP1t0XTp0LHRoaXMuY3VycmVudEl0ZW1zPVtdKX19dmFyIFo9e2lucHV0OmZ1bmN0aW9uKGUsdCxpLHMsbyl7dmFyIG49ZS5nZXRWYWx1ZSgpLHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtpZihyLnNldEF0dHJpYnV0ZSgidHlwZSIsby5zZWFyY2g/InNlYXJjaCI6InRleHQiKSxyLnN0eWxlLnBhZGRpbmc9IjRweCIsci5zdHlsZS53aWR0aD0iMTAwJSIsci5zdHlsZS5ib3hTaXppbmc9ImJvcmRlci1ib3giLG8uZWxlbWVudEF0dHJpYnV0ZXMmJiJvYmplY3QiPT10eXBlb2Ygby5lbGVtZW50QXR0cmlidXRlcylmb3IobGV0IGUgaW4gby5lbGVtZW50QXR0cmlidXRlcykiKyI9PWUuY2hhckF0KDApPyhlPWUuc2xpY2UoMSksci5zZXRBdHRyaWJ1dGUoZSxyLmdldEF0dHJpYnV0ZShlKStvLmVsZW1lbnRBdHRyaWJ1dGVzWyIrIitlXSkpOnIuc2V0QXR0cmlidXRlKGUsby5lbGVtZW50QXR0cmlidXRlc1tlXSk7ZnVuY3Rpb24gYShlKXtudWxsPT1uJiYiIiE9PXIudmFsdWV8fHIudmFsdWUhPT1uP2koci52YWx1ZSkmJihuPXIudmFsdWUpOnMoKX1yZXR1cm4gci52YWx1ZT12b2lkIDAhPT1uP246IiIsdCgoZnVuY3Rpb24oKXsiY2VsbCI9PT1lLmdldFR5cGUoKSYmKHIuZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KSxyLnN0eWxlLmhlaWdodD0iMTAwJSIsby5zZWxlY3RDb250ZW50cyYmci5zZWxlY3QoKSl9KSksci5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLGEpLHIuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsYSksci5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwoZnVuY3Rpb24oZSl7c3dpdGNoKGUua2V5Q29kZSl7Y2FzZSAxMzphKCk7YnJlYWs7Y2FzZSAyNzpzKCk7YnJlYWs7Y2FzZSAzNTpjYXNlIDM2OmUuc3RvcFByb3BhZ2F0aW9uKCl9fSkpLG8ubWFzayYmWShyLG8pLHJ9LHRleHRhcmVhOmZ1bmN0aW9uKGUsdCxpLHMsbyl7dmFyIG49ZS5nZXRWYWx1ZSgpLHI9by52ZXJ0aWNhbE5hdmlnYXRpb258fCJoeWJyaWQiLGE9U3RyaW5nKG51bGwhPW4/bjoiIiksbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpLGg9MDtpZihsLnN0eWxlLmRpc3BsYXk9ImJsb2NrIixsLnN0eWxlLnBhZGRpbmc9IjJweCIsbC5zdHlsZS5oZWlnaHQ9IjEwMCUiLGwuc3R5bGUud2lkdGg9IjEwMCUiLGwuc3R5bGUuYm94U2l6aW5nPSJib3JkZXItYm94IixsLnN0eWxlLndoaXRlU3BhY2U9InByZS13cmFwIixsLnN0eWxlLnJlc2l6ZT0ibm9uZSIsby5lbGVtZW50QXR0cmlidXRlcyYmIm9iamVjdCI9PXR5cGVvZiBvLmVsZW1lbnRBdHRyaWJ1dGVzKWZvcihsZXQgZSBpbiBvLmVsZW1lbnRBdHRyaWJ1dGVzKSIrIj09ZS5jaGFyQXQoMCk/KGU9ZS5zbGljZSgxKSxsLnNldEF0dHJpYnV0ZShlLGwuZ2V0QXR0cmlidXRlKGUpK28uZWxlbWVudEF0dHJpYnV0ZXNbIisiK2VdKSk6bC5zZXRBdHRyaWJ1dGUoZSxvLmVsZW1lbnRBdHRyaWJ1dGVzW2VdKTtmdW5jdGlvbiBkKHQpe251bGw9PW4mJiIiIT09bC52YWx1ZXx8bC52YWx1ZSE9PW4/KGkobC52YWx1ZSkmJihuPWwudmFsdWUpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZS5nZXRSb3coKS5ub3JtYWxpemVIZWlnaHQoKX0pLDMwMCkpOnMoKX1yZXR1cm4gbC52YWx1ZT1hLHQoKGZ1bmN0aW9uKCl7ImNlbGwiPT09ZS5nZXRUeXBlKCkmJihsLmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiEwfSksbC5zdHlsZS5oZWlnaHQ9IjEwMCUiLGwuc2Nyb2xsSGVpZ2h0LGwuc3R5bGUuaGVpZ2h0PWwuc2Nyb2xsSGVpZ2h0KyJweCIsZS5nZXRSb3coKS5ub3JtYWxpemVIZWlnaHQoKSxvLnNlbGVjdENvbnRlbnRzJiZsLnNlbGVjdCgpKX0pKSxsLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZCksbC5hZGRFdmVudExpc3RlbmVyKCJibHVyIixkKSxsLmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwoZnVuY3Rpb24oKXtsLnN0eWxlLmhlaWdodD0iIjt2YXIgdD1sLnNjcm9sbEhlaWdodDtsLnN0eWxlLmhlaWdodD10KyJweCIsdCE9aCYmKGg9dCxlLmdldFJvdygpLm5vcm1hbGl6ZUhlaWdodCgpKX0pKSxsLmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLChmdW5jdGlvbihlKXtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIDEzOmUuc2hpZnRLZXkmJm8uc2hpZnRFbnRlclN1Ym1pdCYmZCgpO2JyZWFrO2Nhc2UgMjc6cygpO2JyZWFrO2Nhc2UgMzg6KCJlZGl0b3IiPT1yfHwiaHlicmlkIj09ciYmbC5zZWxlY3Rpb25TdGFydCkmJihlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUuc3RvcFByb3BhZ2F0aW9uKCkpO2JyZWFrO2Nhc2UgNDA6KCJlZGl0b3IiPT1yfHwiaHlicmlkIj09ciYmbC5zZWxlY3Rpb25TdGFydCE9PWwudmFsdWUubGVuZ3RoKSYmKGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5zdG9wUHJvcGFnYXRpb24oKSk7YnJlYWs7Y2FzZSAzNTpjYXNlIDM2OmUuc3RvcFByb3BhZ2F0aW9uKCl9fSkpLG8ubWFzayYmWShsLG8pLGx9LG51bWJlcjpmdW5jdGlvbihlLHQsaSxzLG8pe3ZhciBuPWUuZ2V0VmFsdWUoKSxyPW8udmVydGljYWxOYXZpZ2F0aW9ufHwiZWRpdG9yIixhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7aWYoYS5zZXRBdHRyaWJ1dGUoInR5cGUiLCJudW1iZXIiKSx2b2lkIDAhPT1vLm1heCYmYS5zZXRBdHRyaWJ1dGUoIm1heCIsby5tYXgpLHZvaWQgMCE9PW8ubWluJiZhLnNldEF0dHJpYnV0ZSgibWluIixvLm1pbiksdm9pZCAwIT09by5zdGVwJiZhLnNldEF0dHJpYnV0ZSgic3RlcCIsby5zdGVwKSxhLnN0eWxlLnBhZGRpbmc9IjRweCIsYS5zdHlsZS53aWR0aD0iMTAwJSIsYS5zdHlsZS5ib3hTaXppbmc9ImJvcmRlci1ib3giLG8uZWxlbWVudEF0dHJpYnV0ZXMmJiJvYmplY3QiPT10eXBlb2Ygby5lbGVtZW50QXR0cmlidXRlcylmb3IobGV0IGUgaW4gby5lbGVtZW50QXR0cmlidXRlcykiKyI9PWUuY2hhckF0KDApPyhlPWUuc2xpY2UoMSksYS5zZXRBdHRyaWJ1dGUoZSxhLmdldEF0dHJpYnV0ZShlKStvLmVsZW1lbnRBdHRyaWJ1dGVzWyIrIitlXSkpOmEuc2V0QXR0cmlidXRlKGUsby5lbGVtZW50QXR0cmlidXRlc1tlXSk7YS52YWx1ZT1uO3ZhciBsPWZ1bmN0aW9uKGUpe2goKX07ZnVuY3Rpb24gaCgpe3ZhciBlPWEudmFsdWU7aXNOYU4oZSl8fCIiPT09ZXx8KGU9TnVtYmVyKGUpKSxlIT09bj9pKGUpJiYobj1lKTpzKCl9cmV0dXJuIHQoKGZ1bmN0aW9uKCl7ImNlbGwiPT09ZS5nZXRUeXBlKCkmJihhLnJlbW92ZUV2ZW50TGlzdGVuZXIoImJsdXIiLGwpLGEuZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KSxhLnN0eWxlLmhlaWdodD0iMTAwJSIsYS5hZGRFdmVudExpc3RlbmVyKCJibHVyIixsKSxvLnNlbGVjdENvbnRlbnRzJiZhLnNlbGVjdCgpKX0pKSxhLmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLChmdW5jdGlvbihlKXtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIDEzOmgoKTticmVhaztjYXNlIDI3OnMoKTticmVhaztjYXNlIDM4OmNhc2UgNDA6ImVkaXRvciI9PXImJihlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUuc3RvcFByb3BhZ2F0aW9uKCkpO2JyZWFrO2Nhc2UgMzU6Y2FzZSAzNjplLnN0b3BQcm9wYWdhdGlvbigpfX0pKSxvLm1hc2smJlkoYSxvKSxhfSxyYW5nZTpmdW5jdGlvbihlLHQsaSxzLG8pe3ZhciBuPWUuZ2V0VmFsdWUoKSxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7aWYoci5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYW5nZSIpLHZvaWQgMCE9PW8ubWF4JiZyLnNldEF0dHJpYnV0ZSgibWF4IixvLm1heCksdm9pZCAwIT09by5taW4mJnIuc2V0QXR0cmlidXRlKCJtaW4iLG8ubWluKSx2b2lkIDAhPT1vLnN0ZXAmJnIuc2V0QXR0cmlidXRlKCJzdGVwIixvLnN0ZXApLHIuc3R5bGUucGFkZGluZz0iNHB4IixyLnN0eWxlLndpZHRoPSIxMDAlIixyLnN0eWxlLmJveFNpemluZz0iYm9yZGVyLWJveCIsby5lbGVtZW50QXR0cmlidXRlcyYmIm9iamVjdCI9PXR5cGVvZiBvLmVsZW1lbnRBdHRyaWJ1dGVzKWZvcihsZXQgZSBpbiBvLmVsZW1lbnRBdHRyaWJ1dGVzKSIrIj09ZS5jaGFyQXQoMCk/KGU9ZS5zbGljZSgxKSxyLnNldEF0dHJpYnV0ZShlLHIuZ2V0QXR0cmlidXRlKGUpK28uZWxlbWVudEF0dHJpYnV0ZXNbIisiK2VdKSk6ci5zZXRBdHRyaWJ1dGUoZSxvLmVsZW1lbnRBdHRyaWJ1dGVzW2VdKTtmdW5jdGlvbiBhKCl7dmFyIGU9ci52YWx1ZTtpc05hTihlKXx8IiI9PT1lfHwoZT1OdW1iZXIoZSkpLGUhPW4/aShlKSYmKG49ZSk6cygpfXJldHVybiByLnZhbHVlPW4sdCgoZnVuY3Rpb24oKXsiY2VsbCI9PT1lLmdldFR5cGUoKSYmKHIuZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KSxyLnN0eWxlLmhlaWdodD0iMTAwJSIpfSkpLHIuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsKGZ1bmN0aW9uKGUpe2EoKX0pKSxyLmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLChmdW5jdGlvbihlKXtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIDEzOmEoKTticmVhaztjYXNlIDI3OnMoKX19KSkscn0sZGF0ZTpmdW5jdGlvbihlLHQsaSxzLG8pe3ZhciBuPW8uZm9ybWF0LHI9by52ZXJ0aWNhbE5hdmlnYXRpb258fCJlZGl0b3IiLGE9bj93aW5kb3cuRGF0ZVRpbWV8fGx1eG9uLkRhdGVUaW1lOm51bGwsbD1lLmdldFZhbHVlKCksaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Z1bmN0aW9uIGQoZSl7cmV0dXJuKGEuaXNEYXRlVGltZShlKT9lOiJpc28iPT09bj9hLmZyb21JU08oU3RyaW5nKGUpKTphLmZyb21Gb3JtYXQoU3RyaW5nKGUpLG4pKS50b0Zvcm1hdCgieXl5eS1NTS1kZCIpfWlmKGgudHlwZT0iZGF0ZSIsaC5zdHlsZS5wYWRkaW5nPSI0cHgiLGguc3R5bGUud2lkdGg9IjEwMCUiLGguc3R5bGUuYm94U2l6aW5nPSJib3JkZXItYm94IixvLm1heCYmaC5zZXRBdHRyaWJ1dGUoIm1heCIsbj9kKG8ubWF4KTpvLm1heCksby5taW4mJmguc2V0QXR0cmlidXRlKCJtaW4iLG4/ZChvLm1pbik6by5taW4pLG8uZWxlbWVudEF0dHJpYnV0ZXMmJiJvYmplY3QiPT10eXBlb2Ygby5lbGVtZW50QXR0cmlidXRlcylmb3IobGV0IGUgaW4gby5lbGVtZW50QXR0cmlidXRlcykiKyI9PWUuY2hhckF0KDApPyhlPWUuc2xpY2UoMSksaC5zZXRBdHRyaWJ1dGUoZSxoLmdldEF0dHJpYnV0ZShlKStvLmVsZW1lbnRBdHRyaWJ1dGVzWyIrIitlXSkpOmguc2V0QXR0cmlidXRlKGUsby5lbGVtZW50QXR0cmlidXRlc1tlXSk7ZnVuY3Rpb24gYygpe3ZhciBlLHQ9aC52YWx1ZTtpZihudWxsPT1sJiYiIiE9PXR8fHQhPT1sKXtpZih0JiZuKXN3aXRjaChlPWEuZnJvbUZvcm1hdChTdHJpbmcodCksInl5eXktTU0tZGQiKSxuKXtjYXNlITA6dD1lO2JyZWFrO2Nhc2UiaXNvIjp0PWUudG9JU08oKTticmVhaztkZWZhdWx0OnQ9ZS50b0Zvcm1hdChuKX1pKHQpJiYobD1oLnZhbHVlKX1lbHNlIHMoKX1yZXR1cm4gbD12b2lkIDAhPT1sP2w6IiIsbiYmKGE/bD1kKGwpOmNvbnNvbGUuZXJyb3IoIkVkaXRvciBFcnJvciAtICdkYXRlJyBlZGl0b3IgJ2Zvcm1hdCcgcGFyYW0gaXMgZGVwZW5kYW50IG9uIGx1eG9uLmpzIikpLGgudmFsdWU9bCx0KChmdW5jdGlvbigpeyJjZWxsIj09PWUuZ2V0VHlwZSgpJiYoaC5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pLGguc3R5bGUuaGVpZ2h0PSIxMDAlIixvLnNlbGVjdENvbnRlbnRzJiZoLnNlbGVjdCgpKX0pKSxoLmFkZEV2ZW50TGlzdGVuZXIoImJsdXIiLChmdW5jdGlvbihlKXsoZS5yZWxhdGVkVGFyZ2V0fHxlLnJhbmdlUGFyZW50fHxlLmV4cGxpY2l0T3JpZ2luYWxUYXJnZXQhPT1oKSYmYygpfSkpLGguYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmtleUNvZGUpe2Nhc2UgMTM6YygpO2JyZWFrO2Nhc2UgMjc6cygpO2JyZWFrO2Nhc2UgMzU6Y2FzZSAzNjplLnN0b3BQcm9wYWdhdGlvbigpO2JyZWFrO2Nhc2UgMzg6Y2FzZSA0MDoiZWRpdG9yIj09ciYmKGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5zdG9wUHJvcGFnYXRpb24oKSl9fSkpLGh9LHRpbWU6ZnVuY3Rpb24oZSx0LGkscyxvKXt2YXIgbixyPW8uZm9ybWF0LGE9by52ZXJ0aWNhbE5hdmlnYXRpb258fCJlZGl0b3IiLGw9cj93aW5kb3cuRGF0ZVRpbWV8fGx1eG9uLkRhdGVUaW1lOm51bGwsaD1lLmdldFZhbHVlKCksZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2lmKGQudHlwZT0idGltZSIsZC5zdHlsZS5wYWRkaW5nPSI0cHgiLGQuc3R5bGUud2lkdGg9IjEwMCUiLGQuc3R5bGUuYm94U2l6aW5nPSJib3JkZXItYm94IixvLmVsZW1lbnRBdHRyaWJ1dGVzJiYib2JqZWN0Ij09dHlwZW9mIG8uZWxlbWVudEF0dHJpYnV0ZXMpZm9yKGxldCBlIGluIG8uZWxlbWVudEF0dHJpYnV0ZXMpIisiPT1lLmNoYXJBdCgwKT8oZT1lLnNsaWNlKDEpLGQuc2V0QXR0cmlidXRlKGUsZC5nZXRBdHRyaWJ1dGUoZSkrby5lbGVtZW50QXR0cmlidXRlc1siKyIrZV0pKTpkLnNldEF0dHJpYnV0ZShlLG8uZWxlbWVudEF0dHJpYnV0ZXNbZV0pO2Z1bmN0aW9uIGMoKXt2YXIgZSx0PWQudmFsdWU7aWYobnVsbD09aCYmIiIhPT10fHx0IT09aCl7aWYodCYmcilzd2l0Y2goZT1sLmZyb21Gb3JtYXQoU3RyaW5nKHQpLCJoaDptbSIpLHIpe2Nhc2UhMDp0PWU7YnJlYWs7Y2FzZSJpc28iOnQ9ZS50b0lTTygpO2JyZWFrO2RlZmF1bHQ6dD1lLnRvRm9ybWF0KHIpfWkodCkmJihoPWQudmFsdWUpfWVsc2UgcygpfXJldHVybiBoPXZvaWQgMCE9PWg/aDoiIixyJiYobD8obj1sLmlzRGF0ZVRpbWUoaCk/aDoiaXNvIj09PXI/bC5mcm9tSVNPKFN0cmluZyhoKSk6bC5mcm9tRm9ybWF0KFN0cmluZyhoKSxyKSxoPW4udG9Gb3JtYXQoImhoOm1tIikpOmNvbnNvbGUuZXJyb3IoIkVkaXRvciBFcnJvciAtICdkYXRlJyBlZGl0b3IgJ2Zvcm1hdCcgcGFyYW0gaXMgZGVwZW5kYW50IG9uIGx1eG9uLmpzIikpLGQudmFsdWU9aCx0KChmdW5jdGlvbigpeyJjZWxsIj09ZS5nZXRUeXBlKCkmJihkLmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiEwfSksZC5zdHlsZS5oZWlnaHQ9IjEwMCUiLG8uc2VsZWN0Q29udGVudHMmJmQuc2VsZWN0KCkpfSkpLGQuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsKGZ1bmN0aW9uKGUpeyhlLnJlbGF0ZWRUYXJnZXR8fGUucmFuZ2VQYXJlbnR8fGUuZXhwbGljaXRPcmlnaW5hbFRhcmdldCE9PWQpJiZjKCl9KSksZC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwoZnVuY3Rpb24oZSl7c3dpdGNoKGUua2V5Q29kZSl7Y2FzZSAxMzpjKCk7YnJlYWs7Y2FzZSAyNzpzKCk7YnJlYWs7Y2FzZSAzNTpjYXNlIDM2OmUuc3RvcFByb3BhZ2F0aW9uKCk7YnJlYWs7Y2FzZSAzODpjYXNlIDQwOiJlZGl0b3IiPT1hJiYoZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxlLnN0b3BQcm9wYWdhdGlvbigpKX19KSksZH0sZGF0ZXRpbWU6ZnVuY3Rpb24oZSx0LGkscyxvKXt2YXIgbixyPW8uZm9ybWF0LGE9by52ZXJ0aWNhbE5hdmlnYXRpb258fCJlZGl0b3IiLGw9cj93aW5kb3cuRGF0ZVRpbWV8fGx1eG9uLkRhdGVUaW1lOm51bGwsaD1lLmdldFZhbHVlKCksZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2lmKGQudHlwZT0iZGF0ZXRpbWUtbG9jYWwiLGQuc3R5bGUucGFkZGluZz0iNHB4IixkLnN0eWxlLndpZHRoPSIxMDAlIixkLnN0eWxlLmJveFNpemluZz0iYm9yZGVyLWJveCIsby5lbGVtZW50QXR0cmlidXRlcyYmIm9iamVjdCI9PXR5cGVvZiBvLmVsZW1lbnRBdHRyaWJ1dGVzKWZvcihsZXQgZSBpbiBvLmVsZW1lbnRBdHRyaWJ1dGVzKSIrIj09ZS5jaGFyQXQoMCk/KGU9ZS5zbGljZSgxKSxkLnNldEF0dHJpYnV0ZShlLGQuZ2V0QXR0cmlidXRlKGUpK28uZWxlbWVudEF0dHJpYnV0ZXNbIisiK2VdKSk6ZC5zZXRBdHRyaWJ1dGUoZSxvLmVsZW1lbnRBdHRyaWJ1dGVzW2VdKTtmdW5jdGlvbiBjKCl7dmFyIGUsdD1kLnZhbHVlO2lmKG51bGw9PWgmJiIiIT09dHx8dCE9PWgpe2lmKHQmJnIpc3dpdGNoKGU9bC5mcm9tSVNPKFN0cmluZyh0KSkscil7Y2FzZSEwOnQ9ZTticmVhaztjYXNlImlzbyI6dD1lLnRvSVNPKCk7YnJlYWs7ZGVmYXVsdDp0PWUudG9Gb3JtYXQocil9aSh0KSYmKGg9ZC52YWx1ZSl9ZWxzZSBzKCl9cmV0dXJuIGg9dm9pZCAwIT09aD9oOiIiLHImJihsPyhuPWwuaXNEYXRlVGltZShoKT9oOiJpc28iPT09cj9sLmZyb21JU08oU3RyaW5nKGgpKTpsLmZyb21Gb3JtYXQoU3RyaW5nKGgpLHIpLGg9bi50b0Zvcm1hdCgieXl5eS1NTS1kZCIpKyJUIituLnRvRm9ybWF0KCJoaDptbSIpKTpjb25zb2xlLmVycm9yKCJFZGl0b3IgRXJyb3IgLSAnZGF0ZScgZWRpdG9yICdmb3JtYXQnIHBhcmFtIGlzIGRlcGVuZGFudCBvbiBsdXhvbi5qcyIpKSxkLnZhbHVlPWgsdCgoZnVuY3Rpb24oKXsiY2VsbCI9PT1lLmdldFR5cGUoKSYmKGQuZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KSxkLnN0eWxlLmhlaWdodD0iMTAwJSIsby5zZWxlY3RDb250ZW50cyYmZC5zZWxlY3QoKSl9KSksZC5hZGRFdmVudExpc3RlbmVyKCJibHVyIiwoZnVuY3Rpb24oZSl7KGUucmVsYXRlZFRhcmdldHx8ZS5yYW5nZVBhcmVudHx8ZS5leHBsaWNpdE9yaWdpbmFsVGFyZ2V0IT09ZCkmJmMoKX0pKSxkLmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLChmdW5jdGlvbihlKXtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIDEzOmMoKTticmVhaztjYXNlIDI3OnMoKTticmVhaztjYXNlIDM1OmNhc2UgMzY6ZS5zdG9wUHJvcGFnYXRpb24oKTticmVhaztjYXNlIDM4OmNhc2UgNDA6ImVkaXRvciI9PWEmJihlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUuc3RvcFByb3BhZ2F0aW9uKCkpfX0pKSxkfSxzZWxlY3Q6ZnVuY3Rpb24oZSx0LGkscyxvKXtyZXR1cm4gdGhpcy5kZXByZWNhdGlvbk1zZygiVGhlIHNlbGVjdCBlZGl0b3IgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSB0aGUgbmV3IGxpc3QgZWRpdG9yIiksbmV3ICQodGhpcyxlLHQsaSxzLG8pLmlucHV0fSxsaXN0OmZ1bmN0aW9uKGUsdCxpLHMsbyl7cmV0dXJuIG5ldyAkKHRoaXMsZSx0LGkscyxvKS5pbnB1dH0sYXV0b2NvbXBsZXRlOmZ1bmN0aW9uKGUsdCxpLHMsbyl7cmV0dXJuIHRoaXMuZGVwcmVjYXRpb25Nc2coIlRoZSBhdXRvY29tcGxldGUgZWRpdG9yIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgdGhlIG5ldyBsaXN0IGVkaXRvciB3aXRoIHRoZSAnYXV0b2NvbXBsZXRlJyBlZGl0b3JQYXJhbSIpLG8uYXV0b2NvbXBsZXRlPSEwLG5ldyAkKHRoaXMsZSx0LGkscyxvKS5pbnB1dH0sc3RhcjpmdW5jdGlvbihlLHQsaSxzLG8pe3ZhciBuPXRoaXMscj1lLmdldEVsZW1lbnQoKSxhPWUuZ2V0VmFsdWUoKSxsPXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInN2ZyIpLmxlbmd0aHx8NSxoPXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInN2ZyIpWzBdP3IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInN2ZyIpWzBdLmdldEF0dHJpYnV0ZSgid2lkdGgiKToxNCxkPVtdLGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwic3ZnIik7ZnVuY3Rpb24gcChlKXtkLmZvckVhY2goKGZ1bmN0aW9uKHQsaSl7aTxlPygiaWUiPT1uLnRhYmxlLmJyb3dzZXI/dC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwidGFidWxhdG9yLXN0YXItYWN0aXZlIik6dC5jbGFzc0xpc3QucmVwbGFjZSgidGFidWxhdG9yLXN0YXItaW5hY3RpdmUiLCJ0YWJ1bGF0b3Itc3Rhci1hY3RpdmUiKSx0LmlubmVySFRNTD0nPHBvbHlnb24gZmlsbD0iIzQ4OENFOSIgc3Ryb2tlPSIjMDE0QUFFIiBzdHJva2Utd2lkdGg9IjM3LjYxNTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjI1OS4yMTYsMjkuOTQyIDMzMC4yNywxNzMuOTE5IDQ4OS4xNiwxOTcuMDA3IDM3NC4xODUsMzA5LjA4IDQwMS4zMyw0NjcuMzEgMjU5LjIxNiwzOTIuNjEyIDExNy4xMDQsNDY3LjMxIDE0NC4yNSwzMDkuMDggMjkuMjc0LDE5Ny4wMDcgMTg4LjE2NSwxNzMuOTE5ICIvPicpOigiaWUiPT1uLnRhYmxlLmJyb3dzZXI/dC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwidGFidWxhdG9yLXN0YXItaW5hY3RpdmUiKTp0LmNsYXNzTGlzdC5yZXBsYWNlKCJ0YWJ1bGF0b3Itc3Rhci1hY3RpdmUiLCJ0YWJ1bGF0b3Itc3Rhci1pbmFjdGl2ZSIpLHQuaW5uZXJIVE1MPSc8cG9seWdvbiBmaWxsPSIjMDEwMTU1IiBzdHJva2U9IiM2ODY4NjgiIHN0cm9rZS13aWR0aD0iMzcuNjE1MiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iMjU5LjIxNiwyOS45NDIgMzMwLjI3LDE3My45MTkgNDg5LjE2LDE5Ny4wMDcgMzc0LjE4NSwzMDkuMDggNDAxLjMzLDQ2Ny4zMSAyNTkuMjE2LDM5Mi42MTIgMTE3LjEwNCw0NjcuMzEgMTQ0LjI1LDMwOS4wOCAyOS4yNzQsMTk3LjAwNyAxODguMTY1LDE3My45MTkgIi8+Jyl9KSl9ZnVuY3Rpb24gbShlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIikscz11LmNsb25lTm9kZSghMCk7ZC5wdXNoKHMpLHQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsKGZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCksdC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxwKGUpfSkpLHQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwoZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfSkpLHQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLChmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpLHQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksaShlKSxyLmJsdXIoKX0pKSx0LmFwcGVuZENoaWxkKHMpLGMuYXBwZW5kQ2hpbGQodCl9ZnVuY3Rpb24gZyhlKXthPWUscChlKX1pZihyLnN0eWxlLndoaXRlU3BhY2U9Im5vd3JhcCIsci5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIixyLnN0eWxlLnRleHRPdmVyZmxvdz0iZWxsaXBzaXMiLGMuc3R5bGUudmVydGljYWxBbGlnbj0ibWlkZGxlIixjLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIsYy5zdHlsZS5wYWRkaW5nPSI0cHgiLHUuc2V0QXR0cmlidXRlKCJ3aWR0aCIsaCksdS5zZXRBdHRyaWJ1dGUoImhlaWdodCIsaCksdS5zZXRBdHRyaWJ1dGUoInZpZXdCb3giLCIwIDAgNTEyIDUxMiIpLHUuc2V0QXR0cmlidXRlKCJ4bWw6c3BhY2UiLCJwcmVzZXJ2ZSIpLHUuc3R5bGUucGFkZGluZz0iMCAxcHgiLG8uZWxlbWVudEF0dHJpYnV0ZXMmJiJvYmplY3QiPT10eXBlb2Ygby5lbGVtZW50QXR0cmlidXRlcylmb3IobGV0IGUgaW4gby5lbGVtZW50QXR0cmlidXRlcykiKyI9PWUuY2hhckF0KDApPyhlPWUuc2xpY2UoMSksYy5zZXRBdHRyaWJ1dGUoZSxjLmdldEF0dHJpYnV0ZShlKStvLmVsZW1lbnRBdHRyaWJ1dGVzWyIrIitlXSkpOmMuc2V0QXR0cmlidXRlKGUsby5lbGVtZW50QXR0cmlidXRlc1tlXSk7Zm9yKHZhciBiPTE7Yjw9bDtiKyspbShiKTtyZXR1cm4gcChhPU1hdGgubWluKHBhcnNlSW50KGEpLGwpKSxjLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsKGZ1bmN0aW9uKGUpe3AoMCl9KSksYy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsKGZ1bmN0aW9uKGUpe2koMCl9KSksci5hZGRFdmVudExpc3RlbmVyKCJibHVyIiwoZnVuY3Rpb24oZSl7cygpfSkpLHIuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmtleUNvZGUpe2Nhc2UgMzk6ZyhhKzEpO2JyZWFrO2Nhc2UgMzc6ZyhhLTEpO2JyZWFrO2Nhc2UgMTM6aShhKTticmVhaztjYXNlIDI3OnMoKX19KSksY30scHJvZ3Jlc3M6ZnVuY3Rpb24oZSx0LGkscyxvKXt2YXIgbixyLGE9ZS5nZXRFbGVtZW50KCksbD12b2lkIDA9PT1vLm1heD9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKVswXSYmYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZGl2IilbMF0uZ2V0QXR0cmlidXRlKCJtYXgiKXx8MTAwOm8ubWF4LGg9dm9pZCAwPT09by5taW4/YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZGl2IilbMF0mJmEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpWzBdLmdldEF0dHJpYnV0ZSgibWluIil8fDA6by5taW4sZD0obC1oKS8xMDAsYz1lLmdldFZhbHVlKCl8fDAsdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxwPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2Z1bmN0aW9uIG0oKXt2YXIgZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpLHQ9ZCpNYXRoLnJvdW5kKHAub2Zmc2V0V2lkdGgvKChhLmNsaWVudFdpZHRoLXBhcnNlSW50KGUuZ2V0UHJvcGVydHlWYWx1ZSgicGFkZGluZy1sZWZ0IikpLXBhcnNlSW50KGUuZ2V0UHJvcGVydHlWYWx1ZSgicGFkZGluZy1yaWdodCIpKSkvMTAwKSkraDtpKHQpLGEuc2V0QXR0cmlidXRlKCJhcmlhLXZhbHVlbm93Iix0KSxhLnNldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIsYyl9aWYodS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiLHUuc3R5bGUucmlnaHQ9IjAiLHUuc3R5bGUudG9wPSIwIix1LnN0eWxlLmJvdHRvbT0iMCIsdS5zdHlsZS53aWR0aD0iNXB4Iix1LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1wcm9ncmVzcy1oYW5kbGUiKSxwLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIscC5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiLHAuc3R5bGUuaGVpZ2h0PSIxMDAlIixwLnN0eWxlLmJhY2tncm91bmRDb2xvcj0iIzQ4OENFOSIscC5zdHlsZS5tYXhXaWR0aD0iMTAwJSIscC5zdHlsZS5taW5XaWR0aD0iMCUiLG8uZWxlbWVudEF0dHJpYnV0ZXMmJiJvYmplY3QiPT10eXBlb2Ygby5lbGVtZW50QXR0cmlidXRlcylmb3IobGV0IGUgaW4gby5lbGVtZW50QXR0cmlidXRlcykiKyI9PWUuY2hhckF0KDApPyhlPWUuc2xpY2UoMSkscC5zZXRBdHRyaWJ1dGUoZSxwLmdldEF0dHJpYnV0ZShlKStvLmVsZW1lbnRBdHRyaWJ1dGVzWyIrIitlXSkpOnAuc2V0QXR0cmlidXRlKGUsby5lbGVtZW50QXR0cmlidXRlc1tlXSk7cmV0dXJuIGEuc3R5bGUucGFkZGluZz0iNHB4IDRweCIsYz1NYXRoLm1pbihwYXJzZUZsb2F0KGMpLGwpLGM9TWF0aC5tYXgocGFyc2VGbG9hdChjKSxoKSxjPU1hdGgucm91bmQoKGMtaCkvZCkscC5zdHlsZS53aWR0aD1jKyIlIixhLnNldEF0dHJpYnV0ZSgiYXJpYS12YWx1ZW1pbiIsaCksYS5zZXRBdHRyaWJ1dGUoImFyaWEtdmFsdWVtYXgiLGwpLHAuYXBwZW5kQ2hpbGQodSksdS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLChmdW5jdGlvbihlKXtuPWUuc2NyZWVuWCxyPXAub2Zmc2V0V2lkdGh9KSksdS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLChmdW5jdGlvbigpe3Uuc3R5bGUuY3Vyc29yPSJldy1yZXNpemUifSkpLGEuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwoZnVuY3Rpb24oZSl7biYmKHAuc3R5bGUud2lkdGg9citlLnNjcmVlblgtbisicHgiKX0pKSxhLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLChmdW5jdGlvbihlKXtuJiYoZS5zdG9wUHJvcGFnYXRpb24oKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLG49ITEscj0hMSxtKCkpfSkpLGEuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmtleUNvZGUpe2Nhc2UgMzk6ZS5wcmV2ZW50RGVmYXVsdCgpLHAuc3R5bGUud2lkdGg9cC5jbGllbnRXaWR0aCthLmNsaWVudFdpZHRoLzEwMCsicHgiO2JyZWFrO2Nhc2UgMzc6ZS5wcmV2ZW50RGVmYXVsdCgpLHAuc3R5bGUud2lkdGg9cC5jbGllbnRXaWR0aC1hLmNsaWVudFdpZHRoLzEwMCsicHgiO2JyZWFrO2Nhc2UgOTpjYXNlIDEzOm0oKTticmVhaztjYXNlIDI3OnMoKX19KSksYS5hZGRFdmVudExpc3RlbmVyKCJibHVyIiwoZnVuY3Rpb24oKXtzKCl9KSkscH0sdGlja0Nyb3NzOmZ1bmN0aW9uKGUsdCxpLHMsbyl7dmFyIG49ZS5nZXRWYWx1ZSgpLHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxhPW8udHJpc3RhdGUsbD12b2lkIDA9PT1vLmluZGV0ZXJtaW5hdGVWYWx1ZT9udWxsOm8uaW5kZXRlcm1pbmF0ZVZhbHVlLGg9ITEsZD1PYmplY3Qua2V5cyhvKS5pbmNsdWRlcygidHJ1ZVZhbHVlIiksYz1PYmplY3Qua2V5cyhvKS5pbmNsdWRlcygiZmFsc2VWYWx1ZSIpO2lmKHIuc2V0QXR0cmlidXRlKCJ0eXBlIiwiY2hlY2tib3giKSxyLnN0eWxlLm1hcmdpblRvcD0iNXB4IixyLnN0eWxlLmJveFNpemluZz0iYm9yZGVyLWJveCIsby5lbGVtZW50QXR0cmlidXRlcyYmIm9iamVjdCI9PXR5cGVvZiBvLmVsZW1lbnRBdHRyaWJ1dGVzKWZvcihsZXQgZSBpbiBvLmVsZW1lbnRBdHRyaWJ1dGVzKSIrIj09ZS5jaGFyQXQoMCk/KGU9ZS5zbGljZSgxKSxyLnNldEF0dHJpYnV0ZShlLHIuZ2V0QXR0cmlidXRlKGUpK28uZWxlbWVudEF0dHJpYnV0ZXNbIisiK2VdKSk6ci5zZXRBdHRyaWJ1dGUoZSxvLmVsZW1lbnRBdHRyaWJ1dGVzW2VdKTtmdW5jdGlvbiB1KGUpe3ZhciB0PXIuY2hlY2tlZDtyZXR1cm4gZCYmdD90PW8udHJ1ZVZhbHVlOmMmJiF0JiYodD1vLmZhbHNlVmFsdWUpLGE/ZT9oP2w6dDpyLmNoZWNrZWQmJiFoPyhyLmNoZWNrZWQ9ITEsci5pbmRldGVybWluYXRlPSEwLGg9ITAsbCk6KGg9ITEsdCk6dH1yZXR1cm4gci52YWx1ZT1uLCFhfHx2b2lkIDAhPT1uJiZuIT09bCYmIiIhPT1ufHwoaD0hMCxyLmluZGV0ZXJtaW5hdGU9ITApLCJmaXJlZm94IiE9dGhpcy50YWJsZS5icm93c2VyJiYic2FmYXJpIiE9dGhpcy50YWJsZS5icm93c2VyJiZ0KChmdW5jdGlvbigpeyJjZWxsIj09PWUuZ2V0VHlwZSgpJiZyLmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiEwfSl9KSksci5jaGVja2VkPWQ/bj09PW8udHJ1ZVZhbHVlOiEwPT09bnx8InRydWUiPT09bnx8IlRydWUiPT09bnx8MT09PW4sci5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLChmdW5jdGlvbihlKXtpKHUoKSl9KSksci5hZGRFdmVudExpc3RlbmVyKCJibHVyIiwoZnVuY3Rpb24oZSl7aSh1KCEwKSl9KSksci5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwoZnVuY3Rpb24oZSl7MTM9PWUua2V5Q29kZSYmaSh1KCkpLDI3PT1lLmtleUNvZGUmJnMoKX0pKSxyfX07Y2xhc3MgUSBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5jdXJyZW50Q2VsbD0hMSx0aGlzLm1vdXNlQ2xpY2s9ITEsdGhpcy5yZWN1cnNpb25CbG9jaz0hMSx0aGlzLmludmFsaWRFZGl0PSExLHRoaXMuZWRpdGVkQ2VsbHM9W10sdGhpcy5lZGl0b3JzPVEuZWRpdG9ycyx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJlZGl0YWJsZSIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImVkaXRvciIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImVkaXRvclBhcmFtcyIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImNlbGxFZGl0aW5nIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiY2VsbEVkaXRlZCIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImNlbGxFZGl0Q2FuY2VsbGVkIiksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImdldEVkaXRlZENlbGxzIix0aGlzLmdldEVkaXRlZENlbGxzLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJjbGVhckNlbGxFZGl0ZWQiLHRoaXMuY2xlYXJDZWxsRWRpdGVkLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJuYXZpZ2F0ZVByZXYiLHRoaXMubmF2aWdhdGVQcmV2LmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJuYXZpZ2F0ZU5leHQiLHRoaXMubmF2aWdhdGVOZXh0LmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJuYXZpZ2F0ZUxlZnQiLHRoaXMubmF2aWdhdGVMZWZ0LmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJuYXZpZ2F0ZVJpZ2h0Iix0aGlzLm5hdmlnYXRlUmlnaHQuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oIm5hdmlnYXRlVXAiLHRoaXMubmF2aWdhdGVVcC5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigibmF2aWdhdGVEb3duIix0aGlzLm5hdmlnYXRlRG93bi5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyQ29tcG9uZW50RnVuY3Rpb24oImNlbGwiLCJpc0VkaXRlZCIsdGhpcy5jZWxsSXNFZGl0ZWQuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJjZWxsIiwiY2xlYXJFZGl0ZWQiLHRoaXMuY2xlYXJFZGl0ZWQuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJjZWxsIiwiZWRpdCIsdGhpcy5lZGl0Q2VsbC5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyQ29tcG9uZW50RnVuY3Rpb24oImNlbGwiLCJjYW5jZWxFZGl0Iix0aGlzLmNlbGxDYW5jZWxFZGl0LmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbigiY2VsbCIsIm5hdmlnYXRlUHJldiIsdGhpcy5uYXZpZ2F0ZVByZXYuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJjZWxsIiwibmF2aWdhdGVOZXh0Iix0aGlzLm5hdmlnYXRlTmV4dC5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyQ29tcG9uZW50RnVuY3Rpb24oImNlbGwiLCJuYXZpZ2F0ZUxlZnQiLHRoaXMubmF2aWdhdGVMZWZ0LmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbigiY2VsbCIsIm5hdmlnYXRlUmlnaHQiLHRoaXMubmF2aWdhdGVSaWdodC5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyQ29tcG9uZW50RnVuY3Rpb24oImNlbGwiLCJuYXZpZ2F0ZVVwIix0aGlzLm5hdmlnYXRlVXAuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJjZWxsIiwibmF2aWdhdGVEb3duIix0aGlzLm5hdmlnYXRlRG93bi5iaW5kKHRoaXMpKX1pbml0aWFsaXplKCl7dGhpcy5zdWJzY3JpYmUoImNlbGwtaW5pdCIsdGhpcy5iaW5kRWRpdG9yLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjZWxsLWRlbGV0ZSIsdGhpcy5jbGVhckVkaXRlZC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY2VsbC12YWx1ZS1jaGFuZ2VkIix0aGlzLnVwZGF0ZUNlbGxDbGFzcy5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLWxheW91dCIsdGhpcy5pbml0aWFsaXplQ29sdW1uQ2hlY2suYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1kZWxldGUiLHRoaXMuY29sdW1uRGVsZXRlQ2hlY2suYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvdy1kZWxldGluZyIsdGhpcy5yb3dEZWxldGVDaGVjay5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgicm93LWxheW91dCIsdGhpcy5yb3dFZGl0YWJsZUNoZWNrLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJkYXRhLXJlZnJlc2hpbmciLHRoaXMuY2FuY2VsRWRpdC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgia2V5YmluZGluZy1uYXYtcHJldiIsdGhpcy5uYXZpZ2F0ZVByZXYuYmluZCh0aGlzLHZvaWQgMCkpLHRoaXMuc3Vic2NyaWJlKCJrZXliaW5kaW5nLW5hdi1uZXh0Iix0aGlzLmtleWJpbmRpbmdOYXZpZ2F0ZU5leHQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImtleWJpbmRpbmctbmF2LWxlZnQiLHRoaXMubmF2aWdhdGVMZWZ0LmJpbmQodGhpcyx2b2lkIDApKSx0aGlzLnN1YnNjcmliZSgia2V5YmluZGluZy1uYXYtcmlnaHQiLHRoaXMubmF2aWdhdGVSaWdodC5iaW5kKHRoaXMsdm9pZCAwKSksdGhpcy5zdWJzY3JpYmUoImtleWJpbmRpbmctbmF2LXVwIix0aGlzLm5hdmlnYXRlVXAuYmluZCh0aGlzLHZvaWQgMCkpLHRoaXMuc3Vic2NyaWJlKCJrZXliaW5kaW5nLW5hdi1kb3duIix0aGlzLm5hdmlnYXRlRG93bi5iaW5kKHRoaXMsdm9pZCAwKSl9a2V5YmluZGluZ05hdmlnYXRlTmV4dChlKXt2YXIgdD10aGlzLmN1cnJlbnRDZWxsLGk9dGhpcy5vcHRpb25zKCJ0YWJFbmROZXdSb3ciKTt0JiYodGhpcy5uYXZpZ2F0ZU5leHQodCxlKXx8aSYmKHQuZ2V0RWxlbWVudCgpLmZpcnN0Q2hpbGQuYmx1cigpLChpPSEwPT09aT90aGlzLnRhYmxlLmFkZFJvdyh7fSk6ImZ1bmN0aW9uIj09dHlwZW9mIGk/dGhpcy50YWJsZS5hZGRSb3coaSh0LnJvdy5nZXRDb21wb25lbnQoKSkpOnRoaXMudGFibGUuYWRkUm93KE9iamVjdC5hc3NpZ24oe30saSkpKS50aGVuKCgoKT0+e3NldFRpbWVvdXQoKCgpPT57dC5nZXRDb21wb25lbnQoKS5uYXZpZ2F0ZU5leHQoKX0pKX0pKSkpfWNlbGxJc0VkaXRlZChlKXtyZXR1cm4hIWUubW9kdWxlcy5lZGl0JiZlLm1vZHVsZXMuZWRpdC5lZGl0ZWR9Y2VsbENhbmNlbEVkaXQoZSl7ZT09PXRoaXMuY3VycmVudENlbGw/dGhpcy50YWJsZS5tb2R1bGVzLmVkaXQuY2FuY2VsRWRpdCgpOmNvbnNvbGUud2FybigiQ2FuY2VsIEVkaXRvciBFcnJvciAtIFRoaXMgY2VsbCBpcyBub3QgY3VycmVudGx5IGJlaW5nIGVkaXRlZCAiKX11cGRhdGVDZWxsQ2xhc3MoZSl7dGhpcy5hbGxvd0VkaXQoZSk/ZS5nZXRFbGVtZW50KCkuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWVkaXRhYmxlIik6ZS5nZXRFbGVtZW50KCkuY2xhc3NMaXN0LnJlbW92ZSgidGFidWxhdG9yLWVkaXRhYmxlIil9Y2xlYXJDZWxsRWRpdGVkKGUpe2V8fChlPXRoaXMudGFibGUubW9kdWxlcy5lZGl0LmdldEVkaXRlZENlbGxzKCkpLEFycmF5LmlzQXJyYXkoZSl8fChlPVtlXSksZS5mb3JFYWNoKChlPT57dGhpcy50YWJsZS5tb2R1bGVzLmVkaXQuY2xlYXJFZGl0ZWQoZS5fZ2V0U2VsZigpKX0pKX1uYXZpZ2F0ZVByZXYoZT10aGlzLmN1cnJlbnRDZWxsLHQpe3ZhciBpLHM7aWYoZSl7aWYodCYmdC5wcmV2ZW50RGVmYXVsdCgpLGk9dGhpcy5uYXZpZ2F0ZUxlZnQoKSlyZXR1cm4hMDtpZigocz10aGlzLnRhYmxlLnJvd01hbmFnZXIucHJldkRpc3BsYXlSb3coZS5yb3csITApKSYmKGk9dGhpcy5maW5kUHJldkVkaXRhYmxlQ2VsbChzLHMuY2VsbHMubGVuZ3RoKSkpcmV0dXJuIGkuZ2V0Q29tcG9uZW50KCkuZWRpdCgpLCEwfXJldHVybiExfW5hdmlnYXRlTmV4dChlPXRoaXMuY3VycmVudENlbGwsdCl7dmFyIGkscztpZihlKXtpZih0JiZ0LnByZXZlbnREZWZhdWx0KCksaT10aGlzLm5hdmlnYXRlUmlnaHQoKSlyZXR1cm4hMDtpZigocz10aGlzLnRhYmxlLnJvd01hbmFnZXIubmV4dERpc3BsYXlSb3coZS5yb3csITApKSYmKGk9dGhpcy5maW5kTmV4dEVkaXRhYmxlQ2VsbChzLC0xKSkpcmV0dXJuIGkuZ2V0Q29tcG9uZW50KCkuZWRpdCgpLCEwfXJldHVybiExfW5hdmlnYXRlTGVmdChlPXRoaXMuY3VycmVudENlbGwsdCl7dmFyIGkscztyZXR1cm4hIShlJiYodCYmdC5wcmV2ZW50RGVmYXVsdCgpLGk9ZS5nZXRJbmRleCgpLHM9dGhpcy5maW5kUHJldkVkaXRhYmxlQ2VsbChlLnJvdyxpKSkpJiYocy5nZXRDb21wb25lbnQoKS5lZGl0KCksITApfW5hdmlnYXRlUmlnaHQoZT10aGlzLmN1cnJlbnRDZWxsLHQpe3ZhciBpLHM7cmV0dXJuISEoZSYmKHQmJnQucHJldmVudERlZmF1bHQoKSxpPWUuZ2V0SW5kZXgoKSxzPXRoaXMuZmluZE5leHRFZGl0YWJsZUNlbGwoZS5yb3csaSkpKSYmKHMuZ2V0Q29tcG9uZW50KCkuZWRpdCgpLCEwKX1uYXZpZ2F0ZVVwKGU9dGhpcy5jdXJyZW50Q2VsbCx0KXt2YXIgaSxzO3JldHVybiEhKGUmJih0JiZ0LnByZXZlbnREZWZhdWx0KCksaT1lLmdldEluZGV4KCkscz10aGlzLnRhYmxlLnJvd01hbmFnZXIucHJldkRpc3BsYXlSb3coZS5yb3csITApKSkmJihzLmNlbGxzW2ldLmdldENvbXBvbmVudCgpLmVkaXQoKSwhMCl9bmF2aWdhdGVEb3duKGU9dGhpcy5jdXJyZW50Q2VsbCx0KXt2YXIgaSxzO3JldHVybiEhKGUmJih0JiZ0LnByZXZlbnREZWZhdWx0KCksaT1lLmdldEluZGV4KCkscz10aGlzLnRhYmxlLnJvd01hbmFnZXIubmV4dERpc3BsYXlSb3coZS5yb3csITApKSkmJihzLmNlbGxzW2ldLmdldENvbXBvbmVudCgpLmVkaXQoKSwhMCl9ZmluZE5leHRFZGl0YWJsZUNlbGwoZSx0KXt2YXIgaT0hMTtpZih0PGUuY2VsbHMubGVuZ3RoLTEpZm9yKHZhciBzPXQrMTtzPGUuY2VsbHMubGVuZ3RoO3MrKyl7bGV0IHQ9ZS5jZWxsc1tzXTtpZih0LmNvbHVtbi5tb2R1bGVzLmVkaXQmJnIuZWxWaXNpYmxlKHQuZ2V0RWxlbWVudCgpKSl7aWYodGhpcy5hbGxvd0VkaXQodCkpe2k9dDticmVha319fXJldHVybiBpfWZpbmRQcmV2RWRpdGFibGVDZWxsKGUsdCl7dmFyIGk9ITE7aWYodD4wKWZvcih2YXIgcz10LTE7cz49MDtzLS0pe2xldCB0PWUuY2VsbHNbc107aWYodC5jb2x1bW4ubW9kdWxlcy5lZGl0JiZyLmVsVmlzaWJsZSh0LmdldEVsZW1lbnQoKSkpe2lmKHRoaXMuYWxsb3dFZGl0KHQpKXtpPXQ7YnJlYWt9fX1yZXR1cm4gaX1pbml0aWFsaXplQ29sdW1uQ2hlY2soZSl7dm9pZCAwIT09ZS5kZWZpbml0aW9uLmVkaXRvciYmdGhpcy5pbml0aWFsaXplQ29sdW1uKGUpfWNvbHVtbkRlbGV0ZUNoZWNrKGUpe3RoaXMuY3VycmVudENlbGwmJnRoaXMuY3VycmVudENlbGwuY29sdW1uPT09ZSYmdGhpcy5jYW5jZWxFZGl0KCl9cm93RGVsZXRlQ2hlY2soZSl7dGhpcy5jdXJyZW50Q2VsbCYmdGhpcy5jdXJyZW50Q2VsbC5yb3c9PT1lJiZ0aGlzLmNhbmNlbEVkaXQoKX1yb3dFZGl0YWJsZUNoZWNrKGUpe2UuZ2V0Q2VsbHMoKS5mb3JFYWNoKChlPT57ZS5jb2x1bW4ubW9kdWxlcy5lZGl0JiYiZnVuY3Rpb24iPT10eXBlb2YgZS5jb2x1bW4ubW9kdWxlcy5lZGl0LmNoZWNrJiZ0aGlzLnVwZGF0ZUNlbGxDbGFzcyhlKX0pKX1pbml0aWFsaXplQ29sdW1uKGUpe3ZhciB0PXtlZGl0b3I6ITEsYmxvY2tlZDohMSxjaGVjazplLmRlZmluaXRpb24uZWRpdGFibGUscGFyYW1zOmUuZGVmaW5pdGlvbi5lZGl0b3JQYXJhbXN8fHt9fTtzd2l0Y2godHlwZW9mIGUuZGVmaW5pdGlvbi5lZGl0b3Ipe2Nhc2Uic3RyaW5nIjp0aGlzLmVkaXRvcnNbZS5kZWZpbml0aW9uLmVkaXRvcl0/dC5lZGl0b3I9dGhpcy5lZGl0b3JzW2UuZGVmaW5pdGlvbi5lZGl0b3JdOmNvbnNvbGUud2FybigiRWRpdG9yIEVycm9yIC0gTm8gc3VjaCBlZGl0b3IgZm91bmQ6ICIsZS5kZWZpbml0aW9uLmVkaXRvcik7YnJlYWs7Y2FzZSJmdW5jdGlvbiI6dC5lZGl0b3I9ZS5kZWZpbml0aW9uLmVkaXRvcjticmVhaztjYXNlImJvb2xlYW4iOiEwPT09ZS5kZWZpbml0aW9uLmVkaXRvciYmKCJmdW5jdGlvbiIhPXR5cGVvZiBlLmRlZmluaXRpb24uZm9ybWF0dGVyP3RoaXMuZWRpdG9yc1tlLmRlZmluaXRpb24uZm9ybWF0dGVyXT90LmVkaXRvcj10aGlzLmVkaXRvcnNbZS5kZWZpbml0aW9uLmZvcm1hdHRlcl06dC5lZGl0b3I9dGhpcy5lZGl0b3JzLmlucHV0OmNvbnNvbGUud2FybigiRWRpdG9yIEVycm9yIC0gQ2Fubm90IGF1dG8gbG9va3VwIGVkaXRvciBmb3IgYSBjdXN0b20gZm9ybWF0dGVyOiAiLGUuZGVmaW5pdGlvbi5mb3JtYXR0ZXIpKX10LmVkaXRvciYmKGUubW9kdWxlcy5lZGl0PXQpfWdldEN1cnJlbnRDZWxsKCl7cmV0dXJuISF0aGlzLmN1cnJlbnRDZWxsJiZ0aGlzLmN1cnJlbnRDZWxsLmdldENvbXBvbmVudCgpfWNsZWFyRWRpdG9yKGUpe3ZhciB0LGk9dGhpcy5jdXJyZW50Q2VsbDtpZih0aGlzLmludmFsaWRFZGl0PSExLGkpe2Zvcih0aGlzLmN1cnJlbnRDZWxsPSExLHQ9aS5nZXRFbGVtZW50KCksdGhpcy5kaXNwYXRjaCgiZWRpdC1lZGl0b3ItY2xlYXIiLGksZSksdC5jbGFzc0xpc3QucmVtb3ZlKCJ0YWJ1bGF0b3ItZWRpdGluZyIpO3QuZmlyc3RDaGlsZDspdC5yZW1vdmVDaGlsZCh0LmZpcnN0Q2hpbGQpO2kucm93LmdldEVsZW1lbnQoKS5jbGFzc0xpc3QucmVtb3ZlKCJ0YWJ1bGF0b3ItZWRpdGluZyIpLGkudGFibGUuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJ0YWJ1bGF0b3ItZWRpdGluZyIpfX1jYW5jZWxFZGl0KCl7aWYodGhpcy5jdXJyZW50Q2VsbCl7dmFyIGU9dGhpcy5jdXJyZW50Q2VsbCx0PXRoaXMuY3VycmVudENlbGwuZ2V0Q29tcG9uZW50KCk7dGhpcy5jbGVhckVkaXRvcighMCksZS5zZXRWYWx1ZUFjdHVhbChlLmdldFZhbHVlKCkpLGUuY2VsbFJlbmRlcmVkKCksKCJ0ZXh0YXJlYSI9PWUuY29sdW1uLmRlZmluaXRpb24uZWRpdG9yfHxlLmNvbHVtbi5kZWZpbml0aW9uLnZhcmlhYmxlSGVpZ2h0KSYmZS5yb3cubm9ybWFsaXplSGVpZ2h0KCEwKSxlLmNvbHVtbi5kZWZpbml0aW9uLmNlbGxFZGl0Q2FuY2VsbGVkJiZlLmNvbHVtbi5kZWZpbml0aW9uLmNlbGxFZGl0Q2FuY2VsbGVkLmNhbGwodGhpcy50YWJsZSx0KSx0aGlzLmRpc3BhdGNoKCJlZGl0LWNhbmNlbGxlZCIsZSksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJjZWxsRWRpdENhbmNlbGxlZCIsdCl9fWJpbmRFZGl0b3IoZSl7aWYoZS5jb2x1bW4ubW9kdWxlcy5lZGl0KXt2YXIgdD10aGlzLGk9ZS5nZXRFbGVtZW50KCEwKTt0aGlzLnVwZGF0ZUNlbGxDbGFzcyhlKSxpLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLDApLGkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLChmdW5jdGlvbihlKXtpLmNsYXNzTGlzdC5jb250YWlucygidGFidWxhdG9yLWVkaXRpbmciKXx8aS5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pfSkpLGkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwoZnVuY3Rpb24oZSl7Mj09PWUuYnV0dG9uP2UucHJldmVudERlZmF1bHQoKTp0Lm1vdXNlQ2xpY2s9ITB9KSksaS5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsKGZ1bmN0aW9uKGkpe3QucmVjdXJzaW9uQmxvY2t8fHQuZWRpdChlLGksITEpfSkpfX1mb2N1c0NlbGxOb0V2ZW50KGUsdCl7dGhpcy5yZWN1cnNpb25CbG9jaz0hMCx0JiYiaWUiPT09dGhpcy50YWJsZS5icm93c2VyfHxlLmdldEVsZW1lbnQoKS5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pLHRoaXMucmVjdXJzaW9uQmxvY2s9ITF9ZWRpdENlbGwoZSx0KXt0aGlzLmZvY3VzQ2VsbE5vRXZlbnQoZSksdGhpcy5lZGl0KGUsITEsdCl9Zm9jdXNTY3JvbGxBZGp1c3QoZSl7aWYoInZpcnR1YWwiPT10aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0UmVuZGVyTW9kZSgpKXt2YXIgdD10aGlzLnRhYmxlLnJvd01hbmFnZXIuZWxlbWVudC5zY3JvbGxUb3AsaT10aGlzLnRhYmxlLnJvd01hbmFnZXIuZWxlbWVudC5jbGllbnRIZWlnaHQrdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmVsZW1lbnQuc2Nyb2xsVG9wLHM9ZS5yb3cuZ2V0RWxlbWVudCgpO3Mub2Zmc2V0VG9wPHQ/dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmVsZW1lbnQuc2Nyb2xsVG9wLT10LXMub2Zmc2V0VG9wOnMub2Zmc2V0VG9wK3Mub2Zmc2V0SGVpZ2h0PmkmJih0aGlzLnRhYmxlLnJvd01hbmFnZXIuZWxlbWVudC5zY3JvbGxUb3ArPXMub2Zmc2V0VG9wK3Mub2Zmc2V0SGVpZ2h0LWkpO3ZhciBvPXRoaXMudGFibGUucm93TWFuYWdlci5lbGVtZW50LnNjcm9sbExlZnQsbj10aGlzLnRhYmxlLnJvd01hbmFnZXIuZWxlbWVudC5jbGllbnRXaWR0aCt0aGlzLnRhYmxlLnJvd01hbmFnZXIuZWxlbWVudC5zY3JvbGxMZWZ0LHI9ZS5nZXRFbGVtZW50KCk7dGhpcy50YWJsZS5tb2RFeGlzdHMoImZyb3plbkNvbHVtbnMiKSYmKG8rPXBhcnNlSW50KHRoaXMudGFibGUubW9kdWxlcy5mcm96ZW5Db2x1bW5zLmxlZnRNYXJnaW58fDApLG4tPXBhcnNlSW50KHRoaXMudGFibGUubW9kdWxlcy5mcm96ZW5Db2x1bW5zLnJpZ2h0TWFyZ2lufHwwKSksInZpcnR1YWwiPT09dGhpcy50YWJsZS5vcHRpb25zLnJlbmRlckhvcml6b250YWwmJihvLT1wYXJzZUludCh0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIucmVuZGVyZXIudkRvbVBhZExlZnQpLG4tPXBhcnNlSW50KHRoaXMudGFibGUuY29sdW1uTWFuYWdlci5yZW5kZXJlci52RG9tUGFkTGVmdCkpLHIub2Zmc2V0TGVmdDxvP3RoaXMudGFibGUucm93TWFuYWdlci5lbGVtZW50LnNjcm9sbExlZnQtPW8tci5vZmZzZXRMZWZ0OnIub2Zmc2V0TGVmdCtyLm9mZnNldFdpZHRoPm4mJih0aGlzLnRhYmxlLnJvd01hbmFnZXIuZWxlbWVudC5zY3JvbGxMZWZ0Kz1yLm9mZnNldExlZnQrci5vZmZzZXRXaWR0aC1uKX19YWxsb3dFZGl0KGUpe3ZhciB0PSEhZS5jb2x1bW4ubW9kdWxlcy5lZGl0O2lmKGUuY29sdW1uLm1vZHVsZXMuZWRpdClzd2l0Y2godHlwZW9mIGUuY29sdW1uLm1vZHVsZXMuZWRpdC5jaGVjayl7Y2FzZSJmdW5jdGlvbiI6ZS5yb3cuaW5pdGlhbGl6ZWQmJih0PWUuY29sdW1uLm1vZHVsZXMuZWRpdC5jaGVjayhlLmdldENvbXBvbmVudCgpKSk7YnJlYWs7Y2FzZSJzdHJpbmciOnQ9ISFlLnJvdy5kYXRhW2UuY29sdW1uLm1vZHVsZXMuZWRpdC5jaGVja107YnJlYWs7Y2FzZSJib29sZWFuIjp0PWUuY29sdW1uLm1vZHVsZXMuZWRpdC5jaGVja31yZXR1cm4gdH1lZGl0KGUsdCxpKXt2YXIgcyxvLG4scj10aGlzLGE9ZnVuY3Rpb24oKXt9LGw9ZS5nZXRFbGVtZW50KCk7aWYoIXRoaXMuY3VycmVudENlbGwpe2lmKGUuY29sdW1uLm1vZHVsZXMuZWRpdC5ibG9ja2VkKXJldHVybiB0aGlzLm1vdXNlQ2xpY2s9ITEsbC5ibHVyKCksITE7aWYodCYmdC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLmFsbG93RWRpdChlKXx8aSl7aWYoci5jYW5jZWxFZGl0KCksci5jdXJyZW50Q2VsbD1lLHRoaXMuZm9jdXNTY3JvbGxBZGp1c3QoZSksbz1lLmdldENvbXBvbmVudCgpLHRoaXMubW91c2VDbGljayYmKHRoaXMubW91c2VDbGljaz0hMSxlLmNvbHVtbi5kZWZpbml0aW9uLmNlbGxDbGljayYmZS5jb2x1bW4uZGVmaW5pdGlvbi5jZWxsQ2xpY2suY2FsbCh0aGlzLnRhYmxlLHQsbykpLGUuY29sdW1uLmRlZmluaXRpb24uY2VsbEVkaXRpbmcmJmUuY29sdW1uLmRlZmluaXRpb24uY2VsbEVkaXRpbmcuY2FsbCh0aGlzLnRhYmxlLG8pLHRoaXMuZGlzcGF0Y2goImNlbGwtZWRpdGluZyIsZSksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJjZWxsRWRpdGluZyIsbyksbj0iZnVuY3Rpb24iPT10eXBlb2YgZS5jb2x1bW4ubW9kdWxlcy5lZGl0LnBhcmFtcz9lLmNvbHVtbi5tb2R1bGVzLmVkaXQucGFyYW1zKG8pOmUuY29sdW1uLm1vZHVsZXMuZWRpdC5wYXJhbXMscz1lLmNvbHVtbi5tb2R1bGVzLmVkaXQuZWRpdG9yLmNhbGwocixvLChmdW5jdGlvbihlKXthPWV9KSwoZnVuY3Rpb24odCl7aWYoci5jdXJyZW50Q2VsbD09PWUpe3ZhciBpPXIuY2hhaW4oImVkaXQtc3VjY2VzcyIsW2UsdF0sITAsITApO3JldHVybiEwPT09aXx8ImhpZ2hsaWdodCI9PT1yLnRhYmxlLm9wdGlvbnMudmFsaWRhdGlvbk1vZGU/KHIuY2xlYXJFZGl0b3IoKSxlLm1vZHVsZXMuZWRpdHx8KGUubW9kdWxlcy5lZGl0PXt9KSxlLm1vZHVsZXMuZWRpdC5lZGl0ZWQ9ITAsLTE9PXIuZWRpdGVkQ2VsbHMuaW5kZXhPZihlKSYmci5lZGl0ZWRDZWxscy5wdXNoKGUpLGUuc2V0VmFsdWUodCwhMCksITA9PT1pKTooci5pbnZhbGlkRWRpdD0hMCxyLmZvY3VzQ2VsbE5vRXZlbnQoZSwhMCksYSgpLCExKX19KSwoZnVuY3Rpb24oKXtyLmN1cnJlbnRDZWxsPT09ZSYmci5jYW5jZWxFZGl0KCl9KSxuKSwhdGhpcy5jdXJyZW50Q2VsbHx8ITE9PT1zKXJldHVybiBsLmJsdXIoKSwhMTtpZighKHMgaW5zdGFuY2VvZiBOb2RlKSlyZXR1cm4gY29uc29sZS53YXJuKCJFZGl0IEVycm9yIC0gRWRpdG9yIHNob3VsZCByZXR1cm4gYW4gaW5zdGFuY2Ugb2YgTm9kZSwgdGhlIGVkaXRvciByZXR1cm5lZDoiLHMpLGwuYmx1cigpLCExO2ZvcihsLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1lZGl0aW5nIiksZS5yb3cuZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1lZGl0aW5nIiksZS50YWJsZS5lbGVtZW50LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1lZGl0aW5nIik7bC5maXJzdENoaWxkOylsLnJlbW92ZUNoaWxkKGwuZmlyc3RDaGlsZCk7bC5hcHBlbmRDaGlsZChzKSxhKCk7Zm9yKHZhciBoPWwuY2hpbGRyZW4sZD0wO2Q8aC5sZW5ndGg7ZCsrKWhbZF0uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLChmdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpfSkpO3JldHVybiEwfXJldHVybiB0aGlzLm1vdXNlQ2xpY2s9ITEsbC5ibHVyKCksITF9dGhpcy5pbnZhbGlkRWRpdHx8dGhpcy5jdXJyZW50Q2VsbD09PWV8fHRoaXMuY2FuY2VsRWRpdCgpfWdldEVkaXRlZENlbGxzKCl7dmFyIGU9W107cmV0dXJuIHRoaXMuZWRpdGVkQ2VsbHMuZm9yRWFjaCgodD0+e2UucHVzaCh0LmdldENvbXBvbmVudCgpKX0pKSxlfWNsZWFyRWRpdGVkKGUpe3ZhciB0O2UubW9kdWxlcy5lZGl0JiZlLm1vZHVsZXMuZWRpdC5lZGl0ZWQmJihlLm1vZHVsZXMuZWRpdC5lZGl0ZWQ9ITEsdGhpcy5kaXNwYXRjaCgiZWRpdC1lZGl0ZWQtY2xlYXIiLGUpKSwodD10aGlzLmVkaXRlZENlbGxzLmluZGV4T2YoZSkpPi0xJiZ0aGlzLmVkaXRlZENlbGxzLnNwbGljZSh0LDEpfX1RLm1vZHVsZU5hbWU9ImVkaXQiLFEuZWRpdG9ycz1aO2NsYXNzIGVle2NvbnN0cnVjdG9yKGUsdCxpLHMpe3RoaXMudHlwZT1lLHRoaXMuY29sdW1ucz10LHRoaXMuY29tcG9uZW50PWl8fCExLHRoaXMuaW5kZW50PXN8fDB9fWNsYXNzIHRle2NvbnN0cnVjdG9yKGUsdCxpLHMsbyl7dGhpcy52YWx1ZT1lLHRoaXMuY29tcG9uZW50PXR8fCExLHRoaXMud2lkdGg9aSx0aGlzLmhlaWdodD1zLHRoaXMuZGVwdGg9b319Y2xhc3MgaWUgZXh0ZW5kcyBre2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuY29uZmlnPXt9LHRoaXMuY2xvbmVUYWJsZVN0eWxlPSEwLHRoaXMuY29sVmlzUHJvcD0iIix0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImh0bWxPdXRwdXRDb25maWciLCExKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJodG1sT3V0cHV0IiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigidGl0bGVIdG1sT3V0cHV0Iil9aW5pdGlhbGl6ZSgpe3RoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJnZXRIdG1sIix0aGlzLmdldEh0bWwuYmluZCh0aGlzKSl9Z2VuZXJhdGVFeHBvcnRMaXN0KGUsdCxpLHMpe3RoaXMuY2xvbmVUYWJsZVN0eWxlPXQsdGhpcy5jb25maWc9ZXx8e30sdGhpcy5jb2xWaXNQcm9wPXM7dmFyIG89ITEhPT10aGlzLmNvbmZpZy5jb2x1bW5IZWFkZXJzP3RoaXMuaGVhZGVyc1RvRXhwb3J0Um93cyh0aGlzLmdlbmVyYXRlQ29sdW1uR3JvdXBIZWFkZXJzKCkpOltdLG49dGhpcy5ib2R5VG9FeHBvcnRSb3dzKHRoaXMucm93TG9va3VwKGkpKTtyZXR1cm4gby5jb25jYXQobil9Z2VuZXJhdGVUYWJsZShlLHQsaSxzKXt2YXIgbz10aGlzLmdlbmVyYXRlRXhwb3J0TGlzdChlLHQsaSxzKTtyZXR1cm4gdGhpcy5nZW5lcmF0ZVRhYmxlRWxlbWVudChvKX1yb3dMb29rdXAoZSl7dmFyIHQ9W107aWYoImZ1bmN0aW9uIj09dHlwZW9mIGUpZS5jYWxsKHRoaXMudGFibGUpLmZvckVhY2goKGU9PnsoZT10aGlzLnRhYmxlLnJvd01hbmFnZXIuZmluZFJvdyhlKSkmJnQucHVzaChlKX0pKTtlbHNlIHN3aXRjaChlKXtjYXNlITA6Y2FzZSJ2aXNpYmxlIjp0PXRoaXMudGFibGUucm93TWFuYWdlci5nZXRWaXNpYmxlUm93cyghMSwhMCk7YnJlYWs7Y2FzZSJhbGwiOnQ9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLnJvd3M7YnJlYWs7Y2FzZSJzZWxlY3RlZCI6dD10aGlzLnRhYmxlLm1vZHVsZXMuc2VsZWN0Um93LnNlbGVjdGVkUm93czticmVhaztkZWZhdWx0OnQ9dGhpcy50YWJsZS5vcHRpb25zLnBhZ2luYXRpb24/dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldERpc3BsYXlSb3dzKHRoaXMudGFibGUucm93TWFuYWdlci5kaXNwbGF5Um93cy5sZW5ndGgtMik6dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldERpc3BsYXlSb3dzKCl9cmV0dXJuIE9iamVjdC5hc3NpZ24oW10sdCl9Z2VuZXJhdGVDb2x1bW5Hcm91cEhlYWRlcnMoKXt2YXIgZT1bXTtyZXR1cm4oITEhPT10aGlzLmNvbmZpZy5jb2x1bW5Hcm91cHM/dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmNvbHVtbnM6dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmNvbHVtbnNCeUluZGV4KS5mb3JFYWNoKCh0PT57dmFyIGk9dGhpcy5wcm9jZXNzQ29sdW1uR3JvdXAodCk7aSYmZS5wdXNoKGkpfSkpLGV9cHJvY2Vzc0NvbHVtbkdyb3VwKGUpe3ZhciB0PWUuY29sdW1ucyxpPTAscz17dGl0bGU6ZS5kZWZpbml0aW9uWyJ0aXRsZSIrKHRoaXMuY29sVmlzUHJvcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0aGlzLmNvbFZpc1Byb3Auc2xpY2UoMSkpXXx8ZS5kZWZpbml0aW9uLnRpdGxlLGNvbHVtbjplLGRlcHRoOjF9O2lmKHQubGVuZ3RoKXtpZihzLnN1Ykdyb3Vwcz1bXSxzLndpZHRoPTAsdC5mb3JFYWNoKChlPT57dmFyIHQ9dGhpcy5wcm9jZXNzQ29sdW1uR3JvdXAoZSk7dCYmKHMud2lkdGgrPXQud2lkdGgscy5zdWJHcm91cHMucHVzaCh0KSx0LmRlcHRoPmkmJihpPXQuZGVwdGgpKX0pKSxzLmRlcHRoKz1pLCFzLndpZHRoKXJldHVybiExfWVsc2V7aWYoIXRoaXMuY29sdW1uVmlzQ2hlY2soZSkpcmV0dXJuITE7cy53aWR0aD0xfXJldHVybiBzfWNvbHVtblZpc0NoZWNrKGUpe3ZhciB0PWUuZGVmaW5pdGlvblt0aGlzLmNvbFZpc1Byb3BdO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0JiYodD10LmNhbGwodGhpcy50YWJsZSxlLmdldENvbXBvbmVudCgpKSksITEhPT10JiYoZS52aXNpYmxlfHwhZS52aXNpYmxlJiZ0KX1oZWFkZXJzVG9FeHBvcnRSb3dzKGUpe3ZhciB0PVtdLGk9MCxzPVtdO2Z1bmN0aW9uIG8oZSxzKXt2YXIgbj1pLXM7aWYodm9pZCAwPT09dFtzXSYmKHRbc109W10pLGUuaGVpZ2h0PWUuc3ViR3JvdXBzPzE6bi1lLmRlcHRoKzEsdFtzXS5wdXNoKGUpLGUuaGVpZ2h0PjEpZm9yKGxldCBpPTE7aTxlLmhlaWdodDtpKyspdm9pZCAwPT09dFtzK2ldJiYodFtzK2ldPVtdKSx0W3MraV0ucHVzaCghMSk7aWYoZS53aWR0aD4xKWZvcihsZXQgaT0xO2k8ZS53aWR0aDtpKyspdFtzXS5wdXNoKCExKTtlLnN1Ykdyb3VwcyYmZS5zdWJHcm91cHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7byhlLHMrMSl9KSl9cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5kZXB0aD5pJiYoaT1lLmRlcHRoKX0pKSxlLmZvckVhY2goKGZ1bmN0aW9uKGUpe28oZSwwKX0pKSx0LmZvckVhY2goKGU9Pnt2YXIgdD1bXTtlLmZvckVhY2goKGU9PntpZihlKXtsZXQgaT12b2lkIDA9PT1lLnRpdGxlPyIiOmUudGl0bGU7dC5wdXNoKG5ldyB0ZShpLGUuY29sdW1uLmdldENvbXBvbmVudCgpLGUud2lkdGgsZS5oZWlnaHQsZS5kZXB0aCkpfWVsc2UgdC5wdXNoKG51bGwpfSkpLHMucHVzaChuZXcgZWUoImhlYWRlciIsdCkpfSkpLHN9Ym9keVRvRXhwb3J0Um93cyhlKXt2YXIgdD1bXSxpPVtdO3JldHVybiB0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuY29sdW1uc0J5SW5kZXguZm9yRWFjaCgoZT0+e3RoaXMuY29sdW1uVmlzQ2hlY2soZSkmJnQucHVzaChlLmdldENvbXBvbmVudCgpKX0pKSwhMSE9PXRoaXMuY29uZmlnLmNvbHVtbkNhbGNzJiZ0aGlzLnRhYmxlLm1vZEV4aXN0cygiY29sdW1uQ2FsY3MiKSYmKHRoaXMudGFibGUubW9kdWxlcy5jb2x1bW5DYWxjcy50b3BJbml0aWFsaXplZCYmZS51bnNoaWZ0KHRoaXMudGFibGUubW9kdWxlcy5jb2x1bW5DYWxjcy50b3BSb3cpLHRoaXMudGFibGUubW9kdWxlcy5jb2x1bW5DYWxjcy5ib3RJbml0aWFsaXplZCYmZS5wdXNoKHRoaXMudGFibGUubW9kdWxlcy5jb2x1bW5DYWxjcy5ib3RSb3cpKSwoZT1lLmZpbHRlcigoZT0+e3N3aXRjaChlLnR5cGUpe2Nhc2UiZ3JvdXAiOnJldHVybiExIT09dGhpcy5jb25maWcucm93R3JvdXBzO2Nhc2UiY2FsYyI6cmV0dXJuITEhPT10aGlzLmNvbmZpZy5jb2x1bW5DYWxjcztjYXNlInJvdyI6cmV0dXJuISh0aGlzLnRhYmxlLm9wdGlvbnMuZGF0YVRyZWUmJiExPT09dGhpcy5jb25maWcuZGF0YVRyZWUmJmUubW9kdWxlcy5kYXRhVHJlZS5wYXJlbnQpfXJldHVybiEwfSkpKS5mb3JFYWNoKCgoZSxzKT0+e3ZhciBvPWUuZ2V0RGF0YSh0aGlzLmNvbFZpc1Byb3ApLG49W10scj0wO3N3aXRjaChlLnR5cGUpe2Nhc2UiZ3JvdXAiOnI9ZS5sZXZlbCxuLnB1c2gobmV3IHRlKGUua2V5LGUuZ2V0Q29tcG9uZW50KCksdC5sZW5ndGgsMSkpO2JyZWFrO2Nhc2UiY2FsYyI6Y2FzZSJyb3ciOnQuZm9yRWFjaCgoZT0+e24ucHVzaChuZXcgdGUoZS5fY29sdW1uLmdldEZpZWxkVmFsdWUobyksZSwxLDEpKX0pKSx0aGlzLnRhYmxlLm9wdGlvbnMuZGF0YVRyZWUmJiExIT09dGhpcy5jb25maWcuZGF0YVRyZWUmJihyPWUubW9kdWxlcy5kYXRhVHJlZS5pbmRleCl9aS5wdXNoKG5ldyBlZShlLnR5cGUsbixlLmdldENvbXBvbmVudCgpLHIpKX0pKSxpfWdlbmVyYXRlVGFibGVFbGVtZW50KGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIiksaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0aGVhZCIpLHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSxvPXRoaXMubG9va3VwVGFibGVTdHlsZXMoKSxuPXRoaXMudGFibGUub3B0aW9uc1sicm93Rm9ybWF0dGVyIisodGhpcy5jb2xWaXNQcm9wLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3RoaXMuY29sVmlzUHJvcC5zbGljZSgxKSldLHI9e307cmV0dXJuIHIucm93Rm9ybWF0dGVyPW51bGwhPT1uP246dGhpcy50YWJsZS5vcHRpb25zLnJvd0Zvcm1hdHRlcix0aGlzLnRhYmxlLm9wdGlvbnMuZGF0YVRyZWUmJiExIT09dGhpcy5jb25maWcuZGF0YVRyZWUmJnRoaXMudGFibGUubW9kRXhpc3RzKCJjb2x1bW5DYWxjcyIpJiYoci50cmVlRWxlbWVudEZpZWxkPXRoaXMudGFibGUubW9kdWxlcy5kYXRhVHJlZS5lbGVtZW50RmllbGQpLHIuZ3JvdXBIZWFkZXI9dGhpcy50YWJsZS5vcHRpb25zWyJncm91cEhlYWRlciIrKHRoaXMuY29sVmlzUHJvcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0aGlzLmNvbFZpc1Byb3Auc2xpY2UoMSkpXSxyLmdyb3VwSGVhZGVyJiYhQXJyYXkuaXNBcnJheShyLmdyb3VwSGVhZGVyKSYmKHIuZ3JvdXBIZWFkZXI9W3IuZ3JvdXBIZWFkZXJdKSx0LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1wcmludC10YWJsZSIpLHRoaXMubWFwRWxlbWVudFN0eWxlcyh0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2V0SGVhZGVyc0VsZW1lbnQoKSxpLFsiYm9yZGVyLXRvcCIsImJvcmRlci1sZWZ0IiwiYm9yZGVyLXJpZ2h0IiwiYm9yZGVyLWJvdHRvbSIsImJhY2tncm91bmQtY29sb3IiLCJjb2xvciIsImZvbnQtd2VpZ2h0IiwiZm9udC1mYW1pbHkiLCJmb250LXNpemUiXSksZS5sZW5ndGg+MWUzJiZjb25zb2xlLndhcm4oIkl0IG1heSB0YWtlIGEgbG9uZyB0aW1lIHRvIHJlbmRlciBhbiBIVE1MIHRhYmxlIHdpdGggbW9yZSB0aGFuIDEwMDAgcm93cyIpLGUuZm9yRWFjaCgoKGUsdCk9PntsZXQgbjtzd2l0Y2goZS50eXBlKXtjYXNlImhlYWRlciI6aS5hcHBlbmRDaGlsZCh0aGlzLmdlbmVyYXRlSGVhZGVyRWxlbWVudChlLHIsbykpO2JyZWFrO2Nhc2UiZ3JvdXAiOnMuYXBwZW5kQ2hpbGQodGhpcy5nZW5lcmF0ZUdyb3VwRWxlbWVudChlLHIsbykpO2JyZWFrO2Nhc2UiY2FsYyI6cy5hcHBlbmRDaGlsZCh0aGlzLmdlbmVyYXRlQ2FsY0VsZW1lbnQoZSxyLG8pKTticmVhaztjYXNlInJvdyI6bj10aGlzLmdlbmVyYXRlUm93RWxlbWVudChlLHIsbyksdGhpcy5tYXBFbGVtZW50U3R5bGVzKHQlMiYmby5ldmVuUm93P28uZXZlblJvdzpvLm9kZFJvdyxuLFsiYm9yZGVyLXRvcCIsImJvcmRlci1sZWZ0IiwiYm9yZGVyLXJpZ2h0IiwiYm9yZGVyLWJvdHRvbSIsImNvbG9yIiwiZm9udC13ZWlnaHQiLCJmb250LWZhbWlseSIsImZvbnQtc2l6ZSIsImJhY2tncm91bmQtY29sb3IiXSkscy5hcHBlbmRDaGlsZChuKX19KSksaS5pbm5lckhUTUwmJnQuYXBwZW5kQ2hpbGQoaSksdC5hcHBlbmRDaGlsZChzKSx0aGlzLm1hcEVsZW1lbnRTdHlsZXModGhpcy50YWJsZS5lbGVtZW50LHQsWyJib3JkZXItdG9wIiwiYm9yZGVyLWxlZnQiLCJib3JkZXItcmlnaHQiLCJib3JkZXItYm90dG9tIl0pLHR9bG9va3VwVGFibGVTdHlsZXMoKXt2YXIgZT17fTtyZXR1cm4gdGhpcy5jbG9uZVRhYmxlU3R5bGUmJndpbmRvdy5nZXRDb21wdXRlZFN0eWxlJiYoZS5vZGRSb3c9dGhpcy50YWJsZS5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoIi50YWJ1bGF0b3Itcm93LW9kZDpub3QoLnRhYnVsYXRvci1ncm91cCk6bm90KC50YWJ1bGF0b3ItY2FsY3MpIiksZS5ldmVuUm93PXRoaXMudGFibGUuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCIudGFidWxhdG9yLXJvdy1ldmVuOm5vdCgudGFidWxhdG9yLWdyb3VwKTpub3QoLnRhYnVsYXRvci1jYWxjcykiKSxlLmNhbGNSb3c9dGhpcy50YWJsZS5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoIi50YWJ1bGF0b3Itcm93LnRhYnVsYXRvci1jYWxjcyIpLGUuZmlyc3RSb3c9dGhpcy50YWJsZS5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoIi50YWJ1bGF0b3Itcm93Om5vdCgudGFidWxhdG9yLWdyb3VwKTpub3QoLnRhYnVsYXRvci1jYWxjcykiKSxlLmZpcnN0R3JvdXA9dGhpcy50YWJsZS5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInRhYnVsYXRvci1ncm91cCIpWzBdLGUuZmlyc3RSb3cmJihlLnN0eWxlQ2VsbHM9ZS5maXJzdFJvdy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ0YWJ1bGF0b3ItY2VsbCIpLGUuZmlyc3RDZWxsPWUuc3R5bGVDZWxsc1swXSxlLmxhc3RDZWxsPWUuc3R5bGVDZWxsc1tlLnN0eWxlQ2VsbHMubGVuZ3RoLTFdKSksZX1nZW5lcmF0ZUhlYWRlckVsZW1lbnQoZSx0LGkpe3ZhciBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7cmV0dXJuIGUuY29sdW1ucy5mb3JFYWNoKChlPT57aWYoZSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGgiKSxpPWUuY29tcG9uZW50Ll9jb2x1bW4uZGVmaW5pdGlvbi5jc3NDbGFzcz9lLmNvbXBvbmVudC5fY29sdW1uLmRlZmluaXRpb24uY3NzQ2xhc3Muc3BsaXQoIiAiKTpbXTt0LmNvbFNwYW49ZS53aWR0aCx0LnJvd1NwYW49ZS5oZWlnaHQsdC5pbm5lckhUTUw9ZS52YWx1ZSx0aGlzLmNsb25lVGFibGVTdHlsZSYmKHQuc3R5bGUuYm94U2l6aW5nPSJib3JkZXItYm94IiksaS5mb3JFYWNoKChmdW5jdGlvbihlKXt0LmNsYXNzTGlzdC5hZGQoZSl9KSksdGhpcy5tYXBFbGVtZW50U3R5bGVzKGUuY29tcG9uZW50LmdldEVsZW1lbnQoKSx0LFsidGV4dC1hbGlnbiIsImJvcmRlci10b3AiLCJib3JkZXItbGVmdCIsImJvcmRlci1yaWdodCIsImJvcmRlci1ib3R0b20iLCJiYWNrZ3JvdW5kLWNvbG9yIiwiY29sb3IiLCJmb250LXdlaWdodCIsImZvbnQtZmFtaWx5IiwiZm9udC1zaXplIl0pLHRoaXMubWFwRWxlbWVudFN0eWxlcyhlLmNvbXBvbmVudC5fY29sdW1uLmNvbnRlbnRFbGVtZW50LHQsWyJwYWRkaW5nLXRvcCIsInBhZGRpbmctbGVmdCIsInBhZGRpbmctcmlnaHQiLCJwYWRkaW5nLWJvdHRvbSJdKSxlLmNvbXBvbmVudC5fY29sdW1uLnZpc2libGU/dGhpcy5tYXBFbGVtZW50U3R5bGVzKGUuY29tcG9uZW50LmdldEVsZW1lbnQoKSx0LFsid2lkdGgiXSk6ZS5jb21wb25lbnQuX2NvbHVtbi5kZWZpbml0aW9uLndpZHRoJiYodC5zdHlsZS53aWR0aD1lLmNvbXBvbmVudC5fY29sdW1uLmRlZmluaXRpb24ud2lkdGgrInB4IiksZS5jb21wb25lbnQuX2NvbHVtbi5wYXJlbnQmJnRoaXMubWFwRWxlbWVudFN0eWxlcyhlLmNvbXBvbmVudC5fY29sdW1uLnBhcmVudC5ncm91cEVsZW1lbnQsdCxbImJvcmRlci10b3AiXSkscy5hcHBlbmRDaGlsZCh0KX19KSksc31nZW5lcmF0ZUdyb3VwRWxlbWVudChlLHQsaSl7dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKSxvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIiksbj1lLmNvbHVtbnNbMF07cmV0dXJuIHMuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXByaW50LXRhYmxlLXJvdyIpLHQuZ3JvdXBIZWFkZXImJnQuZ3JvdXBIZWFkZXJbZS5pbmRlbnRdP24udmFsdWU9dC5ncm91cEhlYWRlcltlLmluZGVudF0obi52YWx1ZSxlLmNvbXBvbmVudC5fZ3JvdXAuZ2V0Um93Q291bnQoKSxlLmNvbXBvbmVudC5fZ3JvdXAuZ2V0RGF0YSgpLGUuY29tcG9uZW50KTohMSE9PXQuZ3JvdXBIZWFkZXImJihuLnZhbHVlPWUuY29tcG9uZW50Ll9ncm91cC5nZW5lcmF0b3Iobi52YWx1ZSxlLmNvbXBvbmVudC5fZ3JvdXAuZ2V0Um93Q291bnQoKSxlLmNvbXBvbmVudC5fZ3JvdXAuZ2V0RGF0YSgpLGUuY29tcG9uZW50KSksby5jb2xTcGFuPW4ud2lkdGgsby5pbm5lckhUTUw9bi52YWx1ZSxzLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1wcmludC10YWJsZS1ncm91cCIpLHMuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWdyb3VwLWxldmVsLSIrZS5pbmRlbnQpLG4uY29tcG9uZW50LmlzVmlzaWJsZSgpJiZzLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1ncm91cC12aXNpYmxlIiksdGhpcy5tYXBFbGVtZW50U3R5bGVzKGkuZmlyc3RHcm91cCxzLFsiYm9yZGVyLXRvcCIsImJvcmRlci1sZWZ0IiwiYm9yZGVyLXJpZ2h0IiwiYm9yZGVyLWJvdHRvbSIsImNvbG9yIiwiZm9udC13ZWlnaHQiLCJmb250LWZhbWlseSIsImZvbnQtc2l6ZSIsImJhY2tncm91bmQtY29sb3IiXSksdGhpcy5tYXBFbGVtZW50U3R5bGVzKGkuZmlyc3RHcm91cCxvLFsicGFkZGluZy10b3AiLCJwYWRkaW5nLWxlZnQiLCJwYWRkaW5nLXJpZ2h0IiwicGFkZGluZy1ib3R0b20iXSkscy5hcHBlbmRDaGlsZChvKSxzfWdlbmVyYXRlQ2FsY0VsZW1lbnQoZSx0LGkpe3ZhciBzPXRoaXMuZ2VuZXJhdGVSb3dFbGVtZW50KGUsdCxpKTtyZXR1cm4gcy5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItcHJpbnQtdGFibGUtY2FsY3MiKSx0aGlzLm1hcEVsZW1lbnRTdHlsZXMoaS5jYWxjUm93LHMsWyJib3JkZXItdG9wIiwiYm9yZGVyLWxlZnQiLCJib3JkZXItcmlnaHQiLCJib3JkZXItYm90dG9tIiwiY29sb3IiLCJmb250LXdlaWdodCIsImZvbnQtZmFtaWx5IiwiZm9udC1zaXplIiwiYmFja2dyb3VuZC1jb2xvciJdKSxzfWdlbmVyYXRlUm93RWxlbWVudChlLHQsaSl7dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTtpZihzLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1wcmludC10YWJsZS1yb3ciKSxlLmNvbHVtbnMuZm9yRWFjaCgoKG8sbik9PntpZihvKXt2YXIgcixhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIiksbD1vLmNvbXBvbmVudC5fY29sdW1uLGg9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmZpbmRDb2x1bW5JbmRleChsKSxkPW8udmFsdWUsYz17bW9kdWxlczp7fSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiBkfSxnZXRGaWVsZDpmdW5jdGlvbigpe3JldHVybiBsLmRlZmluaXRpb24uZmllbGR9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gYX0sZ2V0VHlwZTpmdW5jdGlvbigpe3JldHVybiJjZWxsIn0sZ2V0Q29sdW1uOmZ1bmN0aW9uKCl7cmV0dXJuIGwuZ2V0Q29tcG9uZW50KCl9LGdldERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gZS5jb21wb25lbnQuZ2V0RGF0YSgpfSxnZXRSb3c6ZnVuY3Rpb24oKXtyZXR1cm4gZS5jb21wb25lbnR9LGdldENvbXBvbmVudDpmdW5jdGlvbigpe3JldHVybiBjfSxjb2x1bW46bH07aWYoKGwuZGVmaW5pdGlvbi5jc3NDbGFzcz9sLmRlZmluaXRpb24uY3NzQ2xhc3Muc3BsaXQoIiAiKTpbXSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7YS5jbGFzc0xpc3QuYWRkKGUpfSkpLHRoaXMudGFibGUubW9kRXhpc3RzKCJmb3JtYXQiKSYmITEhPT10aGlzLmNvbmZpZy5mb3JtYXRDZWxscylkPXRoaXMudGFibGUubW9kdWxlcy5mb3JtYXQuZm9ybWF0RXhwb3J0VmFsdWUoYyx0aGlzLmNvbFZpc1Byb3ApO2Vsc2Ugc3dpdGNoKHR5cGVvZiBkKXtjYXNlIm9iamVjdCI6ZD1udWxsIT09ZD9KU09OLnN0cmluZ2lmeShkKToiIjticmVhaztjYXNlInVuZGVmaW5lZCI6ZD0iIn1kIGluc3RhbmNlb2YgTm9kZT9hLmFwcGVuZENoaWxkKGQpOmEuaW5uZXJIVE1MPWQsKHI9aS5zdHlsZUNlbGxzJiZpLnN0eWxlQ2VsbHNbaF0/aS5zdHlsZUNlbGxzW2hdOmkuZmlyc3RDZWxsKSYmKHRoaXMubWFwRWxlbWVudFN0eWxlcyhyLGEsWyJwYWRkaW5nLXRvcCIsInBhZGRpbmctbGVmdCIsInBhZGRpbmctcmlnaHQiLCJwYWRkaW5nLWJvdHRvbSIsImJvcmRlci10b3AiLCJib3JkZXItbGVmdCIsImJvcmRlci1yaWdodCIsImJvcmRlci1ib3R0b20iLCJjb2xvciIsImZvbnQtd2VpZ2h0IiwiZm9udC1mYW1pbHkiLCJmb250LXNpemUiLCJ0ZXh0LWFsaWduIl0pLGwuZGVmaW5pdGlvbi5hbGlnbiYmKGEuc3R5bGUudGV4dEFsaWduPWwuZGVmaW5pdGlvbi5hbGlnbikpLHRoaXMudGFibGUub3B0aW9ucy5kYXRhVHJlZSYmITEhPT10aGlzLmNvbmZpZy5kYXRhVHJlZSYmKHQudHJlZUVsZW1lbnRGaWVsZCYmdC50cmVlRWxlbWVudEZpZWxkPT1sLmZpZWxkfHwhdC50cmVlRWxlbWVudEZpZWxkJiYwPT1uKSYmKGUuY29tcG9uZW50Ll9yb3cubW9kdWxlcy5kYXRhVHJlZS5jb250cm9sRWwmJmEuaW5zZXJ0QmVmb3JlKGUuY29tcG9uZW50Ll9yb3cubW9kdWxlcy5kYXRhVHJlZS5jb250cm9sRWwuY2xvbmVOb2RlKCEwKSxhLmZpcnN0Q2hpbGQpLGUuY29tcG9uZW50Ll9yb3cubW9kdWxlcy5kYXRhVHJlZS5icmFuY2hFbCYmYS5pbnNlcnRCZWZvcmUoZS5jb21wb25lbnQuX3Jvdy5tb2R1bGVzLmRhdGFUcmVlLmJyYW5jaEVsLmNsb25lTm9kZSghMCksYS5maXJzdENoaWxkKSkscy5hcHBlbmRDaGlsZChhKSxjLm1vZHVsZXMuZm9ybWF0JiZjLm1vZHVsZXMuZm9ybWF0LnJlbmRlcmVkQ2FsbGJhY2smJmMubW9kdWxlcy5mb3JtYXQucmVuZGVyZWRDYWxsYmFjaygpfX0pKSx0LnJvd0Zvcm1hdHRlciYmInJvdyI9PT1lLnR5cGUmJiExIT09dGhpcy5jb25maWcuZm9ybWF0Q2VsbHMpe09iamVjdC5hc3NpZ24oZS5jb21wb25lbnQpLmdldEVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gc30sdC5yb3dGb3JtYXR0ZXIoZS5jb21wb25lbnQpfXJldHVybiBzfWdlbmVyYXRlSFRNTFRhYmxlKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiB0LmFwcGVuZENoaWxkKHRoaXMuZ2VuZXJhdGVUYWJsZUVsZW1lbnQoZSkpLHQuaW5uZXJIVE1MfWdldEh0bWwoZSx0LGkscyl7dmFyIG89dGhpcy5nZW5lcmF0ZUV4cG9ydExpc3QoaXx8dGhpcy50YWJsZS5vcHRpb25zLmh0bWxPdXRwdXRDb25maWcsdCxlLHN8fCJodG1sT3V0cHV0Iik7cmV0dXJuIHRoaXMuZ2VuZXJhdGVIVE1MVGFibGUobyl9bWFwRWxlbWVudFN0eWxlcyhlLHQsaSl7aWYodGhpcy5jbG9uZVRhYmxlU3R5bGUmJmUmJnQpe3ZhciBzPXsiYmFja2dyb3VuZC1jb2xvciI6ImJhY2tncm91bmRDb2xvciIsY29sb3I6ImZvbnRDb2xvciIsd2lkdGg6IndpZHRoIiwiZm9udC13ZWlnaHQiOiJmb250V2VpZ2h0IiwiZm9udC1mYW1pbHkiOiJmb250RmFtaWx5IiwiZm9udC1zaXplIjoiZm9udFNpemUiLCJ0ZXh0LWFsaWduIjoidGV4dEFsaWduIiwiYm9yZGVyLXRvcCI6ImJvcmRlclRvcCIsImJvcmRlci1sZWZ0IjoiYm9yZGVyTGVmdCIsImJvcmRlci1yaWdodCI6ImJvcmRlclJpZ2h0IiwiYm9yZGVyLWJvdHRvbSI6ImJvcmRlckJvdHRvbSIsInBhZGRpbmctdG9wIjoicGFkZGluZ1RvcCIsInBhZGRpbmctbGVmdCI6InBhZGRpbmdMZWZ0IiwicGFkZGluZy1yaWdodCI6InBhZGRpbmdSaWdodCIsInBhZGRpbmctYm90dG9tIjoicGFkZGluZ0JvdHRvbSJ9O2lmKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKXt2YXIgbz13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlKTtpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3Quc3R5bGVbc1tlXV18fCh0LnN0eWxlW3NbZV1dPW8uZ2V0UHJvcGVydHlWYWx1ZShlKSl9KSl9fX19aWUubW9kdWxlTmFtZT0iZXhwb3J0Ijt2YXIgc2U9eyI9IjpmdW5jdGlvbihlLHQsaSxzKXtyZXR1cm4gdD09ZX0sIjwiOmZ1bmN0aW9uKGUsdCxpLHMpe3JldHVybiB0PGV9LCI8PSI6ZnVuY3Rpb24oZSx0LGkscyl7cmV0dXJuIHQ8PWV9LCI+IjpmdW5jdGlvbihlLHQsaSxzKXtyZXR1cm4gdD5lfSwiPj0iOmZ1bmN0aW9uKGUsdCxpLHMpe3JldHVybiB0Pj1lfSwiIT0iOmZ1bmN0aW9uKGUsdCxpLHMpe3JldHVybiB0IT1lfSxyZWdleDpmdW5jdGlvbihlLHQsaSxzKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGUmJihlPW5ldyBSZWdFeHAoZSkpLGUudGVzdCh0KX0sbGlrZTpmdW5jdGlvbihlLHQsaSxzKXtyZXR1cm4gbnVsbD09ZT90PT09ZTpudWxsIT10JiZTdHJpbmcodCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGUudG9Mb3dlckNhc2UoKSk+LTF9LGtleXdvcmRzOmZ1bmN0aW9uKGUsdCxpLHMpe3ZhciBvPWUudG9Mb3dlckNhc2UoKS5zcGxpdCh2b2lkIDA9PT1zLnNlcGFyYXRvcj8iICI6cy5zZXBhcmF0b3IpLG49U3RyaW5nKG51bGw9PXQ/IiI6dCkudG9Mb3dlckNhc2UoKSxyPVtdO3JldHVybiBvLmZvckVhY2goKGU9PntuLmluY2x1ZGVzKGUpJiZyLnB1c2goITApfSkpLHMubWF0Y2hBbGw/ci5sZW5ndGg9PT1vLmxlbmd0aDohIXIubGVuZ3RofSxzdGFydHM6ZnVuY3Rpb24oZSx0LGkscyl7cmV0dXJuIG51bGw9PWU/dD09PWU6bnVsbCE9dCYmU3RyaW5nKHQpLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChlLnRvTG93ZXJDYXNlKCkpfSxlbmRzOmZ1bmN0aW9uKGUsdCxpLHMpe3JldHVybiBudWxsPT1lP3Q9PT1lOm51bGwhPXQmJlN0cmluZyh0KS50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKGUudG9Mb3dlckNhc2UoKSl9LGluOmZ1bmN0aW9uKGUsdCxpLHMpe3JldHVybiBBcnJheS5pc0FycmF5KGUpPyFlLmxlbmd0aHx8ZS5pbmRleE9mKHQpPi0xOihjb25zb2xlLndhcm4oIkZpbHRlciBFcnJvciAtIGZpbHRlciB2YWx1ZSBpcyBub3QgYW4gYXJyYXk6IixlKSwhMSl9fTtjbGFzcyBvZSBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5maWx0ZXJMaXN0PVtdLHRoaXMuaGVhZGVyRmlsdGVycz17fSx0aGlzLmhlYWRlckZpbHRlckNvbHVtbnM9W10sdGhpcy5wcmV2SGVhZGVyRmlsdGVyQ2hhbmdlQ2hlY2s9IiIsdGhpcy5wcmV2SGVhZGVyRmlsdGVyQ2hhbmdlQ2hlY2s9Int9Iix0aGlzLmNoYW5nZWQ9ITEsdGhpcy50YWJsZUluaXRpYWxpemVkPSExLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiZmlsdGVyTW9kZSIsImxvY2FsIiksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJpbml0aWFsRmlsdGVyIiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJpbml0aWFsSGVhZGVyRmlsdGVyIiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJoZWFkZXJGaWx0ZXJMaXZlRmlsdGVyRGVsYXkiLDMwMCksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJwbGFjZWhvbGRlckhlYWRlckZpbHRlciIsITEpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlckZpbHRlciIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlckZpbHRlclBsYWNlaG9sZGVyIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyRmlsdGVyUGFyYW1zIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyRmlsdGVyRW1wdHlDaGVjayIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlckZpbHRlckZ1bmMiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJoZWFkZXJGaWx0ZXJGdW5jUGFyYW1zIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyRmlsdGVyTGl2ZUZpbHRlciIpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJzZWFyY2hSb3dzIix0aGlzLnNlYXJjaFJvd3MuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oInNlYXJjaERhdGEiLHRoaXMuc2VhcmNoRGF0YS5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigic2V0RmlsdGVyIix0aGlzLnVzZXJTZXRGaWx0ZXIuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oInJlZnJlc2hGaWx0ZXIiLHRoaXMudXNlclJlZnJlc2hGaWx0ZXIuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImFkZEZpbHRlciIsdGhpcy51c2VyQWRkRmlsdGVyLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJnZXRGaWx0ZXJzIix0aGlzLmdldEZpbHRlcnMuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oInNldEhlYWRlckZpbHRlckZvY3VzIix0aGlzLnVzZXJTZXRIZWFkZXJGaWx0ZXJGb2N1cy5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigiZ2V0SGVhZGVyRmlsdGVyVmFsdWUiLHRoaXMudXNlckdldEhlYWRlckZpbHRlclZhbHVlLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJzZXRIZWFkZXJGaWx0ZXJWYWx1ZSIsdGhpcy51c2VyU2V0SGVhZGVyRmlsdGVyVmFsdWUuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImdldEhlYWRlckZpbHRlcnMiLHRoaXMuZ2V0SGVhZGVyRmlsdGVycy5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigicmVtb3ZlRmlsdGVyIix0aGlzLnVzZXJSZW1vdmVGaWx0ZXIuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImNsZWFyRmlsdGVyIix0aGlzLnVzZXJDbGVhckZpbHRlci5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigiY2xlYXJIZWFkZXJGaWx0ZXIiLHRoaXMudXNlckNsZWFySGVhZGVyRmlsdGVyLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbigiY29sdW1uIiwiaGVhZGVyRmlsdGVyRm9jdXMiLHRoaXMuc2V0SGVhZGVyRmlsdGVyRm9jdXMuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJjb2x1bW4iLCJyZWxvYWRIZWFkZXJGaWx0ZXIiLHRoaXMucmVsb2FkSGVhZGVyRmlsdGVyLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbigiY29sdW1uIiwiZ2V0SGVhZGVyRmlsdGVyVmFsdWUiLHRoaXMuZ2V0SGVhZGVyRmlsdGVyVmFsdWUuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJjb2x1bW4iLCJzZXRIZWFkZXJGaWx0ZXJWYWx1ZSIsdGhpcy5zZXRIZWFkZXJGaWx0ZXJWYWx1ZS5iaW5kKHRoaXMpKX1pbml0aWFsaXplKCl7dGhpcy5zdWJzY3JpYmUoImNvbHVtbi1pbml0Iix0aGlzLmluaXRpYWxpemVDb2x1bW5IZWFkZXJGaWx0ZXIuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi13aWR0aC1maXQtYmVmb3JlIix0aGlzLmhpZGVIZWFkZXJGaWx0ZXJFbGVtZW50cy5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLXdpZHRoLWZpdC1hZnRlciIsdGhpcy5zaG93SGVhZGVyRmlsdGVyRWxlbWVudHMuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInRhYmxlLWJ1aWx0Iix0aGlzLnRhYmxlQnVpbHQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInBsYWNlaG9sZGVyIix0aGlzLmdlbmVyYXRlUGxhY2Vob2xkZXIuYmluZCh0aGlzKSksInJlbW90ZSI9PT10aGlzLnRhYmxlLm9wdGlvbnMuZmlsdGVyTW9kZSYmdGhpcy5zdWJzY3JpYmUoImRhdGEtcGFyYW1zIix0aGlzLnJlbW90ZUZpbHRlclBhcmFtcy5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyRGF0YUhhbmRsZXIodGhpcy5maWx0ZXIuYmluZCh0aGlzKSwxMCl9dGFibGVCdWlsdCgpe3RoaXMudGFibGUub3B0aW9ucy5pbml0aWFsRmlsdGVyJiZ0aGlzLnNldEZpbHRlcih0aGlzLnRhYmxlLm9wdGlvbnMuaW5pdGlhbEZpbHRlciksdGhpcy50YWJsZS5vcHRpb25zLmluaXRpYWxIZWFkZXJGaWx0ZXImJnRoaXMudGFibGUub3B0aW9ucy5pbml0aWFsSGVhZGVyRmlsdGVyLmZvckVhY2goKGU9Pnt2YXIgdD10aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZmluZENvbHVtbihlLmZpZWxkKTtpZighdClyZXR1cm4gY29uc29sZS53YXJuKCJDb2x1bW4gRmlsdGVyIEVycm9yIC0gTm8gbWF0Y2hpbmcgY29sdW1uIGZvdW5kOiIsZS5maWVsZCksITE7dGhpcy5zZXRIZWFkZXJGaWx0ZXJWYWx1ZSh0LGUudmFsdWUpfSkpLHRoaXMudGFibGVJbml0aWFsaXplZD0hMH1yZW1vdGVGaWx0ZXJQYXJhbXMoZSx0LGkscyl7cmV0dXJuIHMuZmlsdGVyPXRoaXMuZ2V0RmlsdGVycyghMCwhMCksc31nZW5lcmF0ZVBsYWNlaG9sZGVyKGUpe2lmKHRoaXMudGFibGUub3B0aW9ucy5wbGFjZWhvbGRlckhlYWRlckZpbHRlciYmT2JqZWN0LmtleXModGhpcy5oZWFkZXJGaWx0ZXJzKS5sZW5ndGgpcmV0dXJuIHRoaXMudGFibGUub3B0aW9ucy5wbGFjZWhvbGRlckhlYWRlckZpbHRlcn11c2VyU2V0RmlsdGVyKGUsdCxpLHMpe3RoaXMuc2V0RmlsdGVyKGUsdCxpLHMpLHRoaXMucmVmcmVzaEZpbHRlcigpfXVzZXJSZWZyZXNoRmlsdGVyKCl7dGhpcy5yZWZyZXNoRmlsdGVyKCl9dXNlckFkZEZpbHRlcihlLHQsaSxzKXt0aGlzLmFkZEZpbHRlcihlLHQsaSxzKSx0aGlzLnJlZnJlc2hGaWx0ZXIoKX11c2VyU2V0SGVhZGVyRmlsdGVyRm9jdXMoZSl7dmFyIHQ9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmZpbmRDb2x1bW4oZSk7aWYoIXQpcmV0dXJuIGNvbnNvbGUud2FybigiQ29sdW1uIEZpbHRlciBGb2N1cyBFcnJvciAtIE5vIG1hdGNoaW5nIGNvbHVtbiBmb3VuZDoiLGUpLCExO3RoaXMuc2V0SGVhZGVyRmlsdGVyRm9jdXModCl9dXNlckdldEhlYWRlckZpbHRlclZhbHVlKGUpe3ZhciB0PXRoaXMudGFibGUuY29sdW1uTWFuYWdlci5maW5kQ29sdW1uKGUpO2lmKHQpcmV0dXJuIHRoaXMuZ2V0SGVhZGVyRmlsdGVyVmFsdWUodCk7Y29uc29sZS53YXJuKCJDb2x1bW4gRmlsdGVyIEVycm9yIC0gTm8gbWF0Y2hpbmcgY29sdW1uIGZvdW5kOiIsZSl9dXNlclNldEhlYWRlckZpbHRlclZhbHVlKGUsdCl7dmFyIGk9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmZpbmRDb2x1bW4oZSk7aWYoIWkpcmV0dXJuIGNvbnNvbGUud2FybigiQ29sdW1uIEZpbHRlciBFcnJvciAtIE5vIG1hdGNoaW5nIGNvbHVtbiBmb3VuZDoiLGUpLCExO3RoaXMuc2V0SGVhZGVyRmlsdGVyVmFsdWUoaSx0KX11c2VyUmVtb3ZlRmlsdGVyKGUsdCxpKXt0aGlzLnJlbW92ZUZpbHRlcihlLHQsaSksdGhpcy5yZWZyZXNoRmlsdGVyKCl9dXNlckNsZWFyRmlsdGVyKGUpe3RoaXMuY2xlYXJGaWx0ZXIoZSksdGhpcy5yZWZyZXNoRmlsdGVyKCl9dXNlckNsZWFySGVhZGVyRmlsdGVyKCl7dGhpcy5jbGVhckhlYWRlckZpbHRlcigpLHRoaXMucmVmcmVzaEZpbHRlcigpfXNlYXJjaFJvd3MoZSx0LGkpe3JldHVybiB0aGlzLnNlYXJjaCgicm93cyIsZSx0LGkpfXNlYXJjaERhdGEoZSx0LGkpe3JldHVybiB0aGlzLnNlYXJjaCgiZGF0YSIsZSx0LGkpfWluaXRpYWxpemVDb2x1bW5IZWFkZXJGaWx0ZXIoZSl7ZS5kZWZpbml0aW9uLmhlYWRlckZpbHRlciYmdGhpcy5pbml0aWFsaXplQ29sdW1uKGUpfWluaXRpYWxpemVDb2x1bW4oZSx0KXt2YXIgaT10aGlzLHM9ZS5nZXRGaWVsZCgpO2UubW9kdWxlcy5maWx0ZXI9e3N1Y2Nlc3M6ZnVuY3Rpb24odCl7dmFyIG8sbj0iaW5wdXQiPT1lLm1vZHVsZXMuZmlsdGVyLnRhZ1R5cGUmJiJ0ZXh0Ij09ZS5tb2R1bGVzLmZpbHRlci5hdHRyVHlwZXx8InRleHRhcmVhIj09ZS5tb2R1bGVzLmZpbHRlci50YWdUeXBlPyJwYXJ0aWFsIjoibWF0Y2giLHI9IiIsYT0iIjtpZih2b2lkIDA9PT1lLm1vZHVsZXMuZmlsdGVyLnByZXZTdWNjZXNzfHxlLm1vZHVsZXMuZmlsdGVyLnByZXZTdWNjZXNzIT09dCl7aWYoZS5tb2R1bGVzLmZpbHRlci5wcmV2U3VjY2Vzcz10LGUubW9kdWxlcy5maWx0ZXIuZW1wdHlGdW5jKHQpKWRlbGV0ZSBpLmhlYWRlckZpbHRlcnNbc107ZWxzZXtzd2l0Y2goZS5tb2R1bGVzLmZpbHRlci52YWx1ZT10LHR5cGVvZiBlLmRlZmluaXRpb24uaGVhZGVyRmlsdGVyRnVuYyl7Y2FzZSJzdHJpbmciOm9lLmZpbHRlcnNbZS5kZWZpbml0aW9uLmhlYWRlckZpbHRlckZ1bmNdPyhyPWUuZGVmaW5pdGlvbi5oZWFkZXJGaWx0ZXJGdW5jLG89ZnVuY3Rpb24oaSl7dmFyIHM9ZS5kZWZpbml0aW9uLmhlYWRlckZpbHRlckZ1bmNQYXJhbXN8fHt9LG89ZS5nZXRGaWVsZFZhbHVlKGkpO3JldHVybiBzPSJmdW5jdGlvbiI9PXR5cGVvZiBzP3ModCxvLGkpOnMsb2UuZmlsdGVyc1tlLmRlZmluaXRpb24uaGVhZGVyRmlsdGVyRnVuY10odCxvLGkscyl9KTpjb25zb2xlLndhcm4oIkhlYWRlciBGaWx0ZXIgRXJyb3IgLSBNYXRjaGluZyBmaWx0ZXIgZnVuY3Rpb24gbm90IGZvdW5kOiAiLGUuZGVmaW5pdGlvbi5oZWFkZXJGaWx0ZXJGdW5jKTticmVhaztjYXNlImZ1bmN0aW9uIjpyPW89ZnVuY3Rpb24oaSl7dmFyIHM9ZS5kZWZpbml0aW9uLmhlYWRlckZpbHRlckZ1bmNQYXJhbXN8fHt9LG89ZS5nZXRGaWVsZFZhbHVlKGkpO3JldHVybiBzPSJmdW5jdGlvbiI9PXR5cGVvZiBzP3ModCxvLGkpOnMsZS5kZWZpbml0aW9uLmhlYWRlckZpbHRlckZ1bmModCxvLGkscyl9fWlmKCFvKWlmKCJwYXJ0aWFsIj09PW4pbz1mdW5jdGlvbihpKXt2YXIgcz1lLmdldEZpZWxkVmFsdWUoaSk7cmV0dXJuIG51bGwhPXMmJlN0cmluZyhzKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoU3RyaW5nKHQpLnRvTG93ZXJDYXNlKCkpPi0xfSxyPSJsaWtlIjtlbHNlIG89ZnVuY3Rpb24oaSl7cmV0dXJuIGUuZ2V0RmllbGRWYWx1ZShpKT09dH0scj0iPSI7aS5oZWFkZXJGaWx0ZXJzW3NdPXt2YWx1ZTp0LGZ1bmM6byx0eXBlOnJ9fWUubW9kdWxlcy5maWx0ZXIudmFsdWU9dCxhPUpTT04uc3RyaW5naWZ5KGkuaGVhZGVyRmlsdGVycyksaS5wcmV2SGVhZGVyRmlsdGVyQ2hhbmdlQ2hlY2shPT1hJiYoaS5wcmV2SGVhZGVyRmlsdGVyQ2hhbmdlQ2hlY2s9YSxpLnRyYWNrQ2hhbmdlcygpLGkucmVmcmVzaEZpbHRlcigpKX1yZXR1cm4hMH0sYXR0clR5cGU6ITEsdGFnVHlwZTohMSxlbXB0eUZ1bmM6ITF9LHRoaXMuZ2VuZXJhdGVIZWFkZXJGaWx0ZXJFbGVtZW50KGUpfWdlbmVyYXRlSGVhZGVyRmlsdGVyRWxlbWVudChlLHQsaSl7dmFyIHMsbyxuLHIsYSxsLGgsZCxjPXRoaXMsdT1lLm1vZHVsZXMuZmlsdGVyLnN1Y2Nlc3MscD1lLmdldEZpZWxkKCk7aWYoZS5tb2R1bGVzLmZpbHRlci52YWx1ZT10LGUubW9kdWxlcy5maWx0ZXIuaGVhZGVyRWxlbWVudCYmZS5tb2R1bGVzLmZpbHRlci5oZWFkZXJFbGVtZW50LnBhcmVudE5vZGUmJmUuY29udGVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZS5tb2R1bGVzLmZpbHRlci5oZWFkZXJFbGVtZW50LnBhcmVudE5vZGUpLHApe3N3aXRjaChlLm1vZHVsZXMuZmlsdGVyLmVtcHR5RnVuYz1lLmRlZmluaXRpb24uaGVhZGVyRmlsdGVyRW1wdHlDaGVja3x8ZnVuY3Rpb24oZSl7cmV0dXJuIWUmJjAhPT1lfSwocz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWhlYWRlci1maWx0ZXIiKSx0eXBlb2YgZS5kZWZpbml0aW9uLmhlYWRlckZpbHRlcil7Y2FzZSJzdHJpbmciOmMudGFibGUubW9kdWxlcy5lZGl0LmVkaXRvcnNbZS5kZWZpbml0aW9uLmhlYWRlckZpbHRlcl0/KG89Yy50YWJsZS5tb2R1bGVzLmVkaXQuZWRpdG9yc1tlLmRlZmluaXRpb24uaGVhZGVyRmlsdGVyXSwidGljayIhPT1lLmRlZmluaXRpb24uaGVhZGVyRmlsdGVyJiYidGlja0Nyb3NzIiE9PWUuZGVmaW5pdGlvbi5oZWFkZXJGaWx0ZXJ8fGUuZGVmaW5pdGlvbi5oZWFkZXJGaWx0ZXJFbXB0eUNoZWNrfHwoZS5tb2R1bGVzLmZpbHRlci5lbXB0eUZ1bmM9ZnVuY3Rpb24oZSl7cmV0dXJuITAhPT1lJiYhMSE9PWV9KSk6Y29uc29sZS53YXJuKCJGaWx0ZXIgRXJyb3IgLSBDYW5ub3QgYnVpbGQgaGVhZGVyIGZpbHRlciwgTm8gc3VjaCBlZGl0b3IgZm91bmQ6ICIsZS5kZWZpbml0aW9uLmVkaXRvcik7YnJlYWs7Y2FzZSJmdW5jdGlvbiI6bz1lLmRlZmluaXRpb24uaGVhZGVyRmlsdGVyO2JyZWFrO2Nhc2UiYm9vbGVhbiI6ZS5tb2R1bGVzLmVkaXQmJmUubW9kdWxlcy5lZGl0LmVkaXRvcj9vPWUubW9kdWxlcy5lZGl0LmVkaXRvcjplLmRlZmluaXRpb24uZm9ybWF0dGVyJiZjLnRhYmxlLm1vZHVsZXMuZWRpdC5lZGl0b3JzW2UuZGVmaW5pdGlvbi5mb3JtYXR0ZXJdPyhvPWMudGFibGUubW9kdWxlcy5lZGl0LmVkaXRvcnNbZS5kZWZpbml0aW9uLmZvcm1hdHRlcl0sInRpY2siIT09ZS5kZWZpbml0aW9uLmZvcm1hdHRlciYmInRpY2tDcm9zcyIhPT1lLmRlZmluaXRpb24uZm9ybWF0dGVyfHxlLmRlZmluaXRpb24uaGVhZGVyRmlsdGVyRW1wdHlDaGVja3x8KGUubW9kdWxlcy5maWx0ZXIuZW1wdHlGdW5jPWZ1bmN0aW9uKGUpe3JldHVybiEwIT09ZSYmITEhPT1lfSkpOm89Yy50YWJsZS5tb2R1bGVzLmVkaXQuZWRpdG9ycy5pbnB1dH1pZihvKXtpZihyPXtnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT10P3Q6IiJ9LGdldEZpZWxkOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZGVmaW5pdGlvbi5maWVsZH0sZ2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiBzfSxnZXRDb2x1bW46ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRDb21wb25lbnQoKX0sZ2V0VGFibGU6KCk9PnRoaXMudGFibGUsZ2V0VHlwZTooKT0+ImhlYWRlciIsZ2V0Um93OmZ1bmN0aW9uKCl7cmV0dXJue25vcm1hbGl6ZUhlaWdodDpmdW5jdGlvbigpe319fX0saD0iZnVuY3Rpb24iPT10eXBlb2YoaD1lLmRlZmluaXRpb24uaGVhZGVyRmlsdGVyUGFyYW1zfHx7fSk/aC5jYWxsKGMudGFibGUscik6aCwhKG49by5jYWxsKHRoaXMudGFibGUubW9kdWxlcy5lZGl0LHIsKGZ1bmN0aW9uKGUpe2Q9ZX0pLHUsKGZ1bmN0aW9uKCl7fSksaCkpKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiRmlsdGVyIEVycm9yIC0gQ2Fubm90IGFkZCBmaWx0ZXIgdG8gIitwKyIgY29sdW1uLCBlZGl0b3IgcmV0dXJuZWQgYSB2YWx1ZSBvZiBmYWxzZSIpO2lmKCEobiBpbnN0YW5jZW9mIE5vZGUpKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiRmlsdGVyIEVycm9yIC0gQ2Fubm90IGFkZCBmaWx0ZXIgdG8gIitwKyIgY29sdW1uLCBlZGl0b3Igc2hvdWxkIHJldHVybiBhbiBpbnN0YW5jZSBvZiBOb2RlLCB0aGUgZWRpdG9yIHJldHVybmVkOiIsbik7Yy5sYW5nQmluZCgiaGVhZGVyRmlsdGVyc3xjb2x1bW5zfCIrZS5kZWZpbml0aW9uLmZpZWxkLChmdW5jdGlvbih0KXtuLnNldEF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiLHZvaWQgMCE9PXQmJnQ/dDplLmRlZmluaXRpb24uaGVhZGVyRmlsdGVyUGxhY2Vob2xkZXJ8fGMubGFuZ1RleHQoImhlYWRlckZpbHRlcnN8ZGVmYXVsdCIpKX0pKSxuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwoZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKSxuLmZvY3VzKCl9KSksbi5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsKGU9Pnt2YXIgdD10aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuY29udGVudHNFbGVtZW50LnNjcm9sbExlZnQ7dCE9PXRoaXMudGFibGUucm93TWFuYWdlci5lbGVtZW50LnNjcm9sbExlZnQmJih0aGlzLnRhYmxlLnJvd01hbmFnZXIuc2Nyb2xsSG9yaXpvbnRhbCh0KSx0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuc2Nyb2xsSG9yaXpvbnRhbCh0KSl9KSksYT0hMSxsPWZ1bmN0aW9uKGUpe2EmJmNsZWFyVGltZW91dChhKSxhPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dShuLnZhbHVlKX0pLGMudGFibGUub3B0aW9ucy5oZWFkZXJGaWx0ZXJMaXZlRmlsdGVyRGVsYXkpfSxlLm1vZHVsZXMuZmlsdGVyLmhlYWRlckVsZW1lbnQ9bixlLm1vZHVsZXMuZmlsdGVyLmF0dHJUeXBlPW4uaGFzQXR0cmlidXRlKCJ0eXBlIik/bi5nZXRBdHRyaWJ1dGUoInR5cGUiKS50b0xvd2VyQ2FzZSgpOiIiLGUubW9kdWxlcy5maWx0ZXIudGFnVHlwZT1uLnRhZ05hbWUudG9Mb3dlckNhc2UoKSwhMSE9PWUuZGVmaW5pdGlvbi5oZWFkZXJGaWx0ZXJMaXZlRmlsdGVyJiYoImF1dG9jb21wbGV0ZSIhPT1lLmRlZmluaXRpb24uaGVhZGVyRmlsdGVyJiYidGlja0Nyb3NzIiE9PWUuZGVmaW5pdGlvbi5oZWFkZXJGaWx0ZXImJigiYXV0b2NvbXBsZXRlIiE9PWUuZGVmaW5pdGlvbi5lZGl0b3ImJiJ0aWNrQ3Jvc3MiIT09ZS5kZWZpbml0aW9uLmVkaXRvcnx8ITAhPT1lLmRlZmluaXRpb24uaGVhZGVyRmlsdGVyKSYmKG4uYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLGwpLG4uYWRkRXZlbnRMaXN0ZW5lcigic2VhcmNoIixsKSwibnVtYmVyIj09ZS5tb2R1bGVzLmZpbHRlci5hdHRyVHlwZSYmbi5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLChmdW5jdGlvbihlKXt1KG4udmFsdWUpfSkpLCJ0ZXh0Ij09ZS5tb2R1bGVzLmZpbHRlci5hdHRyVHlwZSYmImllIiE9PXRoaXMudGFibGUuYnJvd3NlciYmbi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJzZWFyY2giKSksImlucHV0IiE9ZS5tb2R1bGVzLmZpbHRlci50YWdUeXBlJiYic2VsZWN0IiE9ZS5tb2R1bGVzLmZpbHRlci50YWdUeXBlJiYidGV4dGFyZWEiIT1lLm1vZHVsZXMuZmlsdGVyLnRhZ1R5cGV8fG4uYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwoZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKX0pKSkscy5hcHBlbmRDaGlsZChuKSxlLmNvbnRlbnRFbGVtZW50LmFwcGVuZENoaWxkKHMpLGl8fGMuaGVhZGVyRmlsdGVyQ29sdW1ucy5wdXNoKGUpLGQmJmQoKX19ZWxzZSBjb25zb2xlLndhcm4oIkZpbHRlciBFcnJvciAtIENhbm5vdCBhZGQgaGVhZGVyIGZpbHRlciwgY29sdW1uIGhhcyBubyBmaWVsZCBzZXQ6IixlLmRlZmluaXRpb24udGl0bGUpfWhpZGVIZWFkZXJGaWx0ZXJFbGVtZW50cygpe3RoaXMuaGVhZGVyRmlsdGVyQ29sdW1ucy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLm1vZHVsZXMuZmlsdGVyJiZlLm1vZHVsZXMuZmlsdGVyLmhlYWRlckVsZW1lbnQmJihlLm1vZHVsZXMuZmlsdGVyLmhlYWRlckVsZW1lbnQuc3R5bGUuZGlzcGxheT0ibm9uZSIpfSkpfXNob3dIZWFkZXJGaWx0ZXJFbGVtZW50cygpe3RoaXMuaGVhZGVyRmlsdGVyQ29sdW1ucy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLm1vZHVsZXMuZmlsdGVyJiZlLm1vZHVsZXMuZmlsdGVyLmhlYWRlckVsZW1lbnQmJihlLm1vZHVsZXMuZmlsdGVyLmhlYWRlckVsZW1lbnQuc3R5bGUuZGlzcGxheT0iIil9KSl9c2V0SGVhZGVyRmlsdGVyRm9jdXMoZSl7ZS5tb2R1bGVzLmZpbHRlciYmZS5tb2R1bGVzLmZpbHRlci5oZWFkZXJFbGVtZW50P2UubW9kdWxlcy5maWx0ZXIuaGVhZGVyRWxlbWVudC5mb2N1cygpOmNvbnNvbGUud2FybigiQ29sdW1uIEZpbHRlciBGb2N1cyBFcnJvciAtIE5vIGhlYWRlciBmaWx0ZXIgc2V0IG9uIGNvbHVtbjoiLGUuZ2V0RmllbGQoKSl9Z2V0SGVhZGVyRmlsdGVyVmFsdWUoZSl7aWYoZS5tb2R1bGVzLmZpbHRlciYmZS5tb2R1bGVzLmZpbHRlci5oZWFkZXJFbGVtZW50KXJldHVybiBlLm1vZHVsZXMuZmlsdGVyLnZhbHVlO2NvbnNvbGUud2FybigiQ29sdW1uIEZpbHRlciBFcnJvciAtIE5vIGhlYWRlciBmaWx0ZXIgc2V0IG9uIGNvbHVtbjoiLGUuZ2V0RmllbGQoKSl9c2V0SGVhZGVyRmlsdGVyVmFsdWUoZSx0KXtlJiYoZS5tb2R1bGVzLmZpbHRlciYmZS5tb2R1bGVzLmZpbHRlci5oZWFkZXJFbGVtZW50Pyh0aGlzLmdlbmVyYXRlSGVhZGVyRmlsdGVyRWxlbWVudChlLHQsITApLGUubW9kdWxlcy5maWx0ZXIuc3VjY2Vzcyh0KSk6Y29uc29sZS53YXJuKCJDb2x1bW4gRmlsdGVyIEVycm9yIC0gTm8gaGVhZGVyIGZpbHRlciBzZXQgb24gY29sdW1uOiIsZS5nZXRGaWVsZCgpKSl9cmVsb2FkSGVhZGVyRmlsdGVyKGUpe2UmJihlLm1vZHVsZXMuZmlsdGVyJiZlLm1vZHVsZXMuZmlsdGVyLmhlYWRlckVsZW1lbnQ/dGhpcy5nZW5lcmF0ZUhlYWRlckZpbHRlckVsZW1lbnQoZSxlLm1vZHVsZXMuZmlsdGVyLnZhbHVlLCEwKTpjb25zb2xlLndhcm4oIkNvbHVtbiBGaWx0ZXIgRXJyb3IgLSBObyBoZWFkZXIgZmlsdGVyIHNldCBvbiBjb2x1bW46IixlLmdldEZpZWxkKCkpKX1yZWZyZXNoRmlsdGVyKCl7dGhpcy50YWJsZUluaXRpYWxpemVkJiYoInJlbW90ZSI9PT10aGlzLnRhYmxlLm9wdGlvbnMuZmlsdGVyTW9kZT90aGlzLnJlbG9hZERhdGEobnVsbCwhMSwhMSk6dGhpcy5yZWZyZXNoRGF0YSghMCkpfXRyYWNrQ2hhbmdlcygpe3RoaXMuY2hhbmdlZD0hMCx0aGlzLmRpc3BhdGNoKCJmaWx0ZXItY2hhbmdlZCIpfWhhc0NoYW5nZWQoKXt2YXIgZT10aGlzLmNoYW5nZWQ7cmV0dXJuIHRoaXMuY2hhbmdlZD0hMSxlfXNldEZpbHRlcihlLHQsaSxzKXt0aGlzLmZpbHRlckxpc3Q9W10sQXJyYXkuaXNBcnJheShlKXx8KGU9W3tmaWVsZDplLHR5cGU6dCx2YWx1ZTppLHBhcmFtczpzfV0pLHRoaXMuYWRkRmlsdGVyKGUpfWFkZEZpbHRlcihlLHQsaSxzKXt2YXIgbz0hMTtBcnJheS5pc0FycmF5KGUpfHwoZT1be2ZpZWxkOmUsdHlwZTp0LHZhbHVlOmkscGFyYW1zOnN9XSksZS5mb3JFYWNoKChlPT57KGU9dGhpcy5maW5kRmlsdGVyKGUpKSYmKHRoaXMuZmlsdGVyTGlzdC5wdXNoKGUpLG89ITApfSkpLG8mJnRoaXMudHJhY2tDaGFuZ2VzKCl9ZmluZEZpbHRlcihlKXt2YXIgdDtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiB0aGlzLmZpbmRTdWJGaWx0ZXJzKGUpO3ZhciBpPSExO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlLmZpZWxkP2k9ZnVuY3Rpb24odCl7cmV0dXJuIGUuZmllbGQodCxlLnR5cGV8fHt9KX06b2UuZmlsdGVyc1tlLnR5cGVdP2k9KHQ9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmdldENvbHVtbkJ5RmllbGQoZS5maWVsZCkpP2Z1bmN0aW9uKGkpe3JldHVybiBvZS5maWx0ZXJzW2UudHlwZV0oZS52YWx1ZSx0LmdldEZpZWxkVmFsdWUoaSksaSxlLnBhcmFtc3x8e30pfTpmdW5jdGlvbih0KXtyZXR1cm4gb2UuZmlsdGVyc1tlLnR5cGVdKGUudmFsdWUsdFtlLmZpZWxkXSx0LGUucGFyYW1zfHx7fSl9OmNvbnNvbGUud2FybigiRmlsdGVyIEVycm9yIC0gTm8gc3VjaCBmaWx0ZXIgdHlwZSBmb3VuZCwgaWdub3Jpbmc6ICIsZS50eXBlKSxlLmZ1bmM9aSwhIWUuZnVuYyYmZX1maW5kU3ViRmlsdGVycyhlKXt2YXIgdD1bXTtyZXR1cm4gZS5mb3JFYWNoKChlPT57KGU9dGhpcy5maW5kRmlsdGVyKGUpKSYmdC5wdXNoKGUpfSkpLCEhdC5sZW5ndGgmJnR9Z2V0RmlsdGVycyhlLHQpe3ZhciBpPVtdO3JldHVybiBlJiYoaT10aGlzLmdldEhlYWRlckZpbHRlcnMoKSksdCYmaS5mb3JFYWNoKChmdW5jdGlvbihlKXsiZnVuY3Rpb24iPT10eXBlb2YgZS50eXBlJiYoZS50eXBlPSJmdW5jdGlvbiIpfSkpLGk9aS5jb25jYXQodGhpcy5maWx0ZXJzVG9BcnJheSh0aGlzLmZpbHRlckxpc3QsdCkpfWZpbHRlcnNUb0FycmF5KGUsdCl7dmFyIGk9W107cmV0dXJuIGUuZm9yRWFjaCgoZT0+e3ZhciBzO0FycmF5LmlzQXJyYXkoZSk/aS5wdXNoKHRoaXMuZmlsdGVyc1RvQXJyYXkoZSx0KSk6KHM9e2ZpZWxkOmUuZmllbGQsdHlwZTplLnR5cGUsdmFsdWU6ZS52YWx1ZX0sdCYmImZ1bmN0aW9uIj09dHlwZW9mIHMudHlwZSYmKHMudHlwZT0iZnVuY3Rpb24iKSxpLnB1c2gocykpfSkpLGl9Z2V0SGVhZGVyRmlsdGVycygpe3ZhciBlPVtdO2Zvcih2YXIgdCBpbiB0aGlzLmhlYWRlckZpbHRlcnMpZS5wdXNoKHtmaWVsZDp0LHR5cGU6dGhpcy5oZWFkZXJGaWx0ZXJzW3RdLnR5cGUsdmFsdWU6dGhpcy5oZWFkZXJGaWx0ZXJzW3RdLnZhbHVlfSk7cmV0dXJuIGV9cmVtb3ZlRmlsdGVyKGUsdCxpKXtBcnJheS5pc0FycmF5KGUpfHwoZT1be2ZpZWxkOmUsdHlwZTp0LHZhbHVlOml9XSksZS5mb3JFYWNoKChlPT57dmFyIHQ9LTE7KHQ9Im9iamVjdCI9PXR5cGVvZiBlLmZpZWxkP3RoaXMuZmlsdGVyTGlzdC5maW5kSW5kZXgoKHQ9PmU9PT10KSk6dGhpcy5maWx0ZXJMaXN0LmZpbmRJbmRleCgodD0+ZS5maWVsZD09PXQuZmllbGQmJmUudHlwZT09PXQudHlwZSYmZS52YWx1ZT09PXQudmFsdWUpKSk+LTE/dGhpcy5maWx0ZXJMaXN0LnNwbGljZSh0LDEpOmNvbnNvbGUud2FybigiRmlsdGVyIEVycm9yIC0gTm8gbWF0Y2hpbmcgZmlsdGVyIHR5cGUgZm91bmQsIGlnbm9yaW5nOiAiLGUudHlwZSl9KSksdGhpcy50cmFja0NoYW5nZXMoKX1jbGVhckZpbHRlcihlKXt0aGlzLmZpbHRlckxpc3Q9W10sZSYmdGhpcy5jbGVhckhlYWRlckZpbHRlcigpLHRoaXMudHJhY2tDaGFuZ2VzKCl9Y2xlYXJIZWFkZXJGaWx0ZXIoKXt0aGlzLmhlYWRlckZpbHRlcnM9e30sdGhpcy5wcmV2SGVhZGVyRmlsdGVyQ2hhbmdlQ2hlY2s9Int9Iix0aGlzLmhlYWRlckZpbHRlckNvbHVtbnMuZm9yRWFjaCgoZT0+e3ZvaWQgMCE9PWUubW9kdWxlcy5maWx0ZXIudmFsdWUmJmRlbGV0ZSBlLm1vZHVsZXMuZmlsdGVyLnZhbHVlLGUubW9kdWxlcy5maWx0ZXIucHJldlN1Y2Nlc3M9dm9pZCAwLHRoaXMucmVsb2FkSGVhZGVyRmlsdGVyKGUpfSkpLHRoaXMudHJhY2tDaGFuZ2VzKCl9c2VhcmNoKGUsdCxpLHMpe3ZhciBvPVtdLG49W107cmV0dXJuIEFycmF5LmlzQXJyYXkodCl8fCh0PVt7ZmllbGQ6dCx0eXBlOmksdmFsdWU6c31dKSx0LmZvckVhY2goKGU9PnsoZT10aGlzLmZpbmRGaWx0ZXIoZSkpJiZuLnB1c2goZSl9KSksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLnJvd3MuZm9yRWFjaCgodD0+e3ZhciBpPSEwO24uZm9yRWFjaCgoZT0+e3RoaXMuZmlsdGVyUmVjdXJzZShlLHQuZ2V0RGF0YSgpKXx8KGk9ITEpfSkpLGkmJm8ucHVzaCgiZGF0YSI9PT1lP3QuZ2V0RGF0YSgiZGF0YSIpOnQuZ2V0Q29tcG9uZW50KCkpfSkpLG99ZmlsdGVyKGUsdCl7dmFyIGk9W10scz1bXTtyZXR1cm4gdGhpcy5zdWJzY3JpYmVkRXh0ZXJuYWwoImRhdGFGaWx0ZXJpbmciKSYmdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJkYXRhRmlsdGVyaW5nIix0aGlzLmdldEZpbHRlcnMoITApKSwicmVtb3RlIiE9PXRoaXMudGFibGUub3B0aW9ucy5maWx0ZXJNb2RlJiYodGhpcy5maWx0ZXJMaXN0Lmxlbmd0aHx8T2JqZWN0LmtleXModGhpcy5oZWFkZXJGaWx0ZXJzKS5sZW5ndGgpP2UuZm9yRWFjaCgoZT0+e3RoaXMuZmlsdGVyUm93KGUpJiZpLnB1c2goZSl9KSk6aT1lLnNsaWNlKDApLHRoaXMuc3Vic2NyaWJlZEV4dGVybmFsKCJkYXRhRmlsdGVyZWQiKSYmKGkuZm9yRWFjaCgoZT0+e3MucHVzaChlLmdldENvbXBvbmVudCgpKX0pKSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoImRhdGFGaWx0ZXJlZCIsdGhpcy5nZXRGaWx0ZXJzKCEwKSxzKSksaX1maWx0ZXJSb3coZSx0KXt2YXIgaT0hMCxzPWUuZ2V0RGF0YSgpO2Zvcih2YXIgbyBpbiB0aGlzLmZpbHRlckxpc3QuZm9yRWFjaCgoZT0+e3RoaXMuZmlsdGVyUmVjdXJzZShlLHMpfHwoaT0hMSl9KSksdGhpcy5oZWFkZXJGaWx0ZXJzKXRoaXMuaGVhZGVyRmlsdGVyc1tvXS5mdW5jKHMpfHwoaT0hMSk7cmV0dXJuIGl9ZmlsdGVyUmVjdXJzZShlLHQpe3ZhciBpPSExO3JldHVybiBBcnJheS5pc0FycmF5KGUpP2UuZm9yRWFjaCgoZT0+e3RoaXMuZmlsdGVyUmVjdXJzZShlLHQpJiYoaT0hMCl9KSk6aT1lLmZ1bmModCksaX19b2UubW9kdWxlTmFtZT0iZmlsdGVyIixvZS5maWx0ZXJzPXNlO3ZhciBuZT17cGxhaW50ZXh0OmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gdGhpcy5lbXB0eVRvU3BhY2UodGhpcy5zYW5pdGl6ZUhUTUwoZS5nZXRWYWx1ZSgpKSl9LGh0bWw6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBlLmdldFZhbHVlKCl9LHRleHRhcmVhOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gZS5nZXRFbGVtZW50KCkuc3R5bGUud2hpdGVTcGFjZT0icHJlLXdyYXAiLHRoaXMuZW1wdHlUb1NwYWNlKHRoaXMuc2FuaXRpemVIVE1MKGUuZ2V0VmFsdWUoKSkpfSxtb25leTpmdW5jdGlvbihlLHQsaSl7dmFyIHMsbyxuLHIsYSxsPXBhcnNlRmxvYXQoZS5nZXRWYWx1ZSgpKSxoPSIiLGQ9dC5kZWNpbWFsfHwiLiIsYz10LnRob3VzYW5kfHwiLCIsdT10Lm5lZ2F0aXZlU2lnbnx8Ii0iLHA9dC5zeW1ib2x8fCIiLG09ISF0LnN5bWJvbEFmdGVyLGc9dm9pZCAwIT09dC5wcmVjaXNpb24/dC5wcmVjaXNpb246MjtpZihpc05hTihsKSlyZXR1cm4gdGhpcy5lbXB0eVRvU3BhY2UodGhpcy5zYW5pdGl6ZUhUTUwoZS5nZXRWYWx1ZSgpKSk7aWYobDwwJiYobD1NYXRoLmFicyhsKSxoPXUpLHM9ITEhPT1nP2wudG9GaXhlZChnKTpsLG89KHM9U3RyaW5nKHMpLnNwbGl0KCIuIikpWzBdLG49cy5sZW5ndGg+MT9kK3NbMV06IiIsITEhPT10LnRob3VzYW5kKWZvcihyPS8oXGQrKShcZHszfSkvO3IudGVzdChvKTspbz1vLnJlcGxhY2UociwiJDEiK2MrIiQyIik7cmV0dXJuIGE9bytuLCEwPT09aD8oYT0iKCIrYSsiKSIsbT9hK3A6cCthKTptP2grYStwOmgrcCthfSxsaW5rOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcyxvPWUuZ2V0VmFsdWUoKSxuPXQudXJsUHJlZml4fHwiIixyPXQuZG93bmxvYWQsYT1vLGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO2lmKHQubGFiZWxGaWVsZCYmKHM9ZS5nZXREYXRhKCksYT1mdW5jdGlvbiBlKHQsaSl7dmFyIHM9aVt0LnNoaWZ0KCldO3JldHVybiB0Lmxlbmd0aCYmIm9iamVjdCI9PXR5cGVvZiBzP2UodCxzKTpzfSh0LmxhYmVsRmllbGQuc3BsaXQodGhpcy50YWJsZS5vcHRpb25zLm5lc3RlZEZpZWxkU2VwYXJhdG9yKSxzKSksdC5sYWJlbClzd2l0Y2godHlwZW9mIHQubGFiZWwpe2Nhc2Uic3RyaW5nIjphPXQubGFiZWw7YnJlYWs7Y2FzZSJmdW5jdGlvbiI6YT10LmxhYmVsKGUpfWlmKGEpe2lmKHQudXJsRmllbGQmJihvPShzPWUuZ2V0RGF0YSgpKVt0LnVybEZpZWxkXSksdC51cmwpc3dpdGNoKHR5cGVvZiB0LnVybCl7Y2FzZSJzdHJpbmciOm89dC51cmw7YnJlYWs7Y2FzZSJmdW5jdGlvbiI6bz10LnVybChlKX1yZXR1cm4gbC5zZXRBdHRyaWJ1dGUoImhyZWYiLG4rbyksdC50YXJnZXQmJmwuc2V0QXR0cmlidXRlKCJ0YXJnZXQiLHQudGFyZ2V0KSx0LmRvd25sb2FkJiYocj0iZnVuY3Rpb24iPT10eXBlb2Ygcj9yKGUpOiEwPT09cj8iIjpyLGwuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIscikpLGwuaW5uZXJIVE1MPXRoaXMuZW1wdHlUb1NwYWNlKHRoaXMuc2FuaXRpemVIVE1MKGEpKSxsfXJldHVybiImbmJzcDsifSxpbWFnZTpmdW5jdGlvbihlLHQsaSl7dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIiksbz1lLmdldFZhbHVlKCk7c3dpdGNoKHQudXJsUHJlZml4JiYobz10LnVybFByZWZpeCtlLmdldFZhbHVlKCkpLHQudXJsU3VmZml4JiYobys9dC51cmxTdWZmaXgpLHMuc2V0QXR0cmlidXRlKCJzcmMiLG8pLHR5cGVvZiB0LmhlaWdodCl7Y2FzZSJudW1iZXIiOnMuc3R5bGUuaGVpZ2h0PXQuaGVpZ2h0KyJweCI7YnJlYWs7Y2FzZSJzdHJpbmciOnMuc3R5bGUuaGVpZ2h0PXQuaGVpZ2h0fXN3aXRjaCh0eXBlb2YgdC53aWR0aCl7Y2FzZSJudW1iZXIiOnMuc3R5bGUud2lkdGg9dC53aWR0aCsicHgiO2JyZWFrO2Nhc2Uic3RyaW5nIjpzLnN0eWxlLndpZHRoPXQud2lkdGh9cmV0dXJuIHMuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsKGZ1bmN0aW9uKCl7ZS5nZXRSb3coKS5ub3JtYWxpemVIZWlnaHQoKX0pKSxzfSx0aWNrQ3Jvc3M6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPWUuZ2V0VmFsdWUoKSxvPWUuZ2V0RWxlbWVudCgpLG49dC5hbGxvd0VtcHR5LHI9dC5hbGxvd1RydXRoeSxhPU9iamVjdC5rZXlzKHQpLmluY2x1ZGVzKCJ0cnVlVmFsdWUiKSxsPXZvaWQgMCE9PXQudGlja0VsZW1lbnQ/dC50aWNrRWxlbWVudDonPHN2ZyBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgaGVpZ2h0PSIxNCIgd2lkdGg9IjE0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbDpzcGFjZT0icHJlc2VydmUiID48cGF0aCBmaWxsPSIjMkRDMjE0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMS42NTIsMy4yMTFjLTAuMjkzLTAuMjk1LTAuNzctMC4yOTUtMS4wNjEsMEw5LjQxLDE0LjM0ICBjLTAuMjkzLDAuMjk3LTAuNzcxLDAuMjk3LTEuMDYyLDBMMy40NDksOS4zNTFDMy4zMDQsOS4yMDMsMy4xMTQsOS4xMywyLjkyMyw5LjEyOUMyLjczLDkuMTI4LDIuNTM0LDkuMjAxLDIuMzg3LDkuMzUxICBsLTIuMTY1LDEuOTQ2QzAuMDc4LDExLjQ0NSwwLDExLjYzLDAsMTEuODIzYzAsMC4xOTQsMC4wNzgsMC4zOTcsMC4yMjMsMC41NDRsNC45NCw1LjE4NGMwLjI5MiwwLjI5NiwwLjc3MSwwLjc3NiwxLjA2MiwxLjA3ICBsMi4xMjQsMi4xNDFjMC4yOTIsMC4yOTMsMC43NjksMC4yOTMsMS4wNjIsMGwxNC4zNjYtMTQuMzRjMC4yOTMtMC4yOTQsMC4yOTMtMC43NzcsMC0xLjA3MUwyMS42NTIsMy4yMTF6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4nLGg9dm9pZCAwIT09dC5jcm9zc0VsZW1lbnQ/dC5jcm9zc0VsZW1lbnQ6JzxzdmcgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIGhlaWdodD0iMTQiIHdpZHRoPSIxNCIgIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgPjxwYXRoIGZpbGw9IiNDRTE1MTUiIGQ9Ik0yMi4yNDUsNC4wMTVjMC4zMTMsMC4zMTMsMC4zMTMsMC44MjYsMCwxLjEzOWwtNi4yNzYsNi4yN2MtMC4zMTMsMC4zMTItMC4zMTMsMC44MjYsMCwxLjE0bDYuMjczLDYuMjcyICBjMC4zMTMsMC4zMTMsMC4zMTMsMC44MjYsMCwxLjE0bC0yLjI4NSwyLjI3N2MtMC4zMTQsMC4zMTItMC44MjgsMC4zMTItMS4xNDIsMGwtNi4yNzEtNi4yNzFjLTAuMzEzLTAuMzEzLTAuODI4LTAuMzEzLTEuMTQxLDAgIGwtNi4yNzYsNi4yNjdjLTAuMzEzLDAuMzEzLTAuODI4LDAuMzEzLTEuMTQxLDBsLTIuMjgyLTIuMjhjLTAuMzEzLTAuMzEzLTAuMzEzLTAuODI2LDAtMS4xNGw2LjI3OC02LjI2OSAgYzAuMzEzLTAuMzEyLDAuMzEzLTAuODI2LDAtMS4xNEwxLjcwOSw1LjE0N2MtMC4zMTQtMC4zMTMtMC4zMTQtMC44MjcsMC0xLjE0bDIuMjg0LTIuMjc4QzQuMzA4LDEuNDE3LDQuODIxLDEuNDE3LDUuMTM1LDEuNzMgIEwxMS40MDUsOGMwLjMxNCwwLjMxNCwwLjgyOCwwLjMxNCwxLjE0MSwwLjAwMWw2LjI3Ni02LjI2N2MwLjMxMi0wLjMxMiwwLjgyNi0wLjMxMiwxLjE0MSwwTDIyLjI0NSw0LjAxNXoiLz48L3N2Zz4nO3JldHVybiBhJiZzPT09dC50cnVlVmFsdWV8fCFhJiYociYmc3x8ITA9PT1zfHwidHJ1ZSI9PT1zfHwiVHJ1ZSI9PT1zfHwxPT09c3x8IjEiPT09cyk/KG8uc2V0QXR0cmlidXRlKCJhcmlhLWNoZWNrZWQiLCEwKSxsfHwiIik6IW58fCJudWxsIiE9PXMmJiIiIT09cyYmbnVsbCE9cz8oby5zZXRBdHRyaWJ1dGUoImFyaWEtY2hlY2tlZCIsITEpLGh8fCIiKTooby5zZXRBdHRyaWJ1dGUoImFyaWEtY2hlY2tlZCIsIm1peGVkIiksIiIpfSxkYXRldGltZTpmdW5jdGlvbihlLHQsaSl7dmFyIHMsbz13aW5kb3cuRGF0ZVRpbWV8fGx1eG9uLkRhdGVUaW1lLG49dC5pbnB1dEZvcm1hdHx8Inl5eXktTU0tZGQgSEg6bW06c3MiLHI9dC5vdXRwdXRGb3JtYXR8fCJkZC9NTS95eXl5IEhIOm1tOnNzIixhPXZvaWQgMCE9PXQuaW52YWxpZFBsYWNlaG9sZGVyP3QuaW52YWxpZFBsYWNlaG9sZGVyOiIiLGw9ZS5nZXRWYWx1ZSgpO2lmKHZvaWQgMCE9PW8pcmV0dXJuKHM9by5pc0RhdGVUaW1lKGwpP2w6ImlzbyI9PT1uP28uZnJvbUlTTyhTdHJpbmcobCkpOm8uZnJvbUZvcm1hdChTdHJpbmcobCksbikpLmlzVmFsaWQ/KHQudGltZXpvbmUmJihzPXMuc2V0Wm9uZSh0LnRpbWV6b25lKSkscy50b0Zvcm1hdChyKSk6ITAhPT1hJiZsPyJmdW5jdGlvbiI9PXR5cGVvZiBhP2EobCk6YTpsO2NvbnNvbGUuZXJyb3IoIkZvcm1hdCBFcnJvciAtICdkYXRldGltZScgZm9ybWF0dGVyIGlzIGRlcGVuZGFudCBvbiBsdXhvbi5qcyIpfSxkYXRldGltZWRpZmY6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzLG89d2luZG93LkRhdGVUaW1lfHxsdXhvbi5EYXRlVGltZSxuPXQuaW5wdXRGb3JtYXR8fCJ5eXl5LU1NLWRkIEhIOm1tOnNzIixyPXZvaWQgMCE9PXQuaW52YWxpZFBsYWNlaG9sZGVyP3QuaW52YWxpZFBsYWNlaG9sZGVyOiIiLGE9dm9pZCAwIT09dC5zdWZmaXgmJnQuc3VmZml4LGw9dm9pZCAwIT09dC51bml0P3QudW5pdDoiZGF5cyIsaD12b2lkIDAhPT10Lmh1bWFuaXplJiZ0Lmh1bWFuaXplLGQ9dm9pZCAwIT09dC5kYXRlP3QuZGF0ZTpvLm5vdygpLGM9ZS5nZXRWYWx1ZSgpO2lmKHZvaWQgMCE9PW8pcmV0dXJuKHM9by5pc0RhdGVUaW1lKGMpP2M6ImlzbyI9PT1uP28uZnJvbUlTTyhTdHJpbmcoYykpOm8uZnJvbUZvcm1hdChTdHJpbmcoYyksbikpLmlzVmFsaWQ/aD9zLmRpZmYoZCxsKS50b0h1bWFuKCkrKGE/IiAiK2E6IiIpOnBhcnNlSW50KHMuZGlmZihkLGwpW2xdKSsoYT8iICIrYToiIik6ITA9PT1yP2M6ImZ1bmN0aW9uIj09dHlwZW9mIHI/cihjKTpyO2NvbnNvbGUuZXJyb3IoIkZvcm1hdCBFcnJvciAtICdkYXRldGltZWRpZmYnIGZvcm1hdHRlciBpcyBkZXBlbmRhbnQgb24gbHV4b24uanMiKX0sbG9va3VwOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz1lLmdldFZhbHVlKCk7cmV0dXJuIHZvaWQgMD09PXRbc10/KGNvbnNvbGUud2FybigiTWlzc2luZyBkaXNwbGF5IHZhbHVlIGZvciAiK3MpLHMpOnRbc119LHN0YXI6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPWUuZ2V0VmFsdWUoKSxvPWUuZ2V0RWxlbWVudCgpLG49dCYmdC5zdGFycz90LnN0YXJzOjUscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwic3ZnIik7ci5zdHlsZS52ZXJ0aWNhbEFsaWduPSJtaWRkbGUiLGEuc2V0QXR0cmlidXRlKCJ3aWR0aCIsIjE0IiksYS5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIjE0IiksYS5zZXRBdHRyaWJ1dGUoInZpZXdCb3giLCIwIDAgNTEyIDUxMiIpLGEuc2V0QXR0cmlidXRlKCJ4bWw6c3BhY2UiLCJwcmVzZXJ2ZSIpLGEuc3R5bGUucGFkZGluZz0iMCAxcHgiLHM9cyYmIWlzTmFOKHMpP3BhcnNlSW50KHMpOjAscz1NYXRoLm1heCgwLE1hdGgubWluKHMsbikpO2Zvcih2YXIgbD0xO2w8PW47bCsrKXt2YXIgaD1hLmNsb25lTm9kZSghMCk7aC5pbm5lckhUTUw9bDw9cz8nPHBvbHlnb24gZmlsbD0iI0ZGRUEwMCIgc3Ryb2tlPSIjQzFBQjYwIiBzdHJva2Utd2lkdGg9IjM3LjYxNTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjI1OS4yMTYsMjkuOTQyIDMzMC4yNywxNzMuOTE5IDQ4OS4xNiwxOTcuMDA3IDM3NC4xODUsMzA5LjA4IDQwMS4zMyw0NjcuMzEgMjU5LjIxNiwzOTIuNjEyIDExNy4xMDQsNDY3LjMxIDE0NC4yNSwzMDkuMDggMjkuMjc0LDE5Ny4wMDcgMTg4LjE2NSwxNzMuOTE5ICIvPic6Jzxwb2x5Z29uIGZpbGw9IiNEMkQyRDIiIHN0cm9rZT0iIzY4Njg2OCIgc3Ryb2tlLXdpZHRoPSIzNy42MTUyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIyNTkuMjE2LDI5Ljk0MiAzMzAuMjcsMTczLjkxOSA0ODkuMTYsMTk3LjAwNyAzNzQuMTg1LDMwOS4wOCA0MDEuMzMsNDY3LjMxIDI1OS4yMTYsMzkyLjYxMiAxMTcuMTA0LDQ2Ny4zMSAxNDQuMjUsMzA5LjA4IDI5LjI3NCwxOTcuMDA3IDE4OC4xNjUsMTczLjkxOSAiLz4nLHIuYXBwZW5kQ2hpbGQoaCl9cmV0dXJuIG8uc3R5bGUud2hpdGVTcGFjZT0ibm93cmFwIixvLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iLG8uc3R5bGUudGV4dE92ZXJmbG93PSJlbGxpcHNpcyIsby5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLHMpLHJ9LHRyYWZmaWM6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzLG8sbj10aGlzLnNhbml0aXplSFRNTChlLmdldFZhbHVlKCkpfHwwLHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpLGE9dCYmdC5tYXg/dC5tYXg6MTAwLGw9dCYmdC5taW4/dC5taW46MCxoPXQmJnZvaWQgMCE9PXQuY29sb3I/dC5jb2xvcjpbInJlZCIsIm9yYW5nZSIsImdyZWVuIl0sZD0iIzY2NjY2NiI7aWYoIWlzTmFOKG4pJiZ2b2lkIDAhPT1lLmdldFZhbHVlKCkpe3N3aXRjaChyLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci10cmFmZmljLWxpZ2h0Iiksbz1wYXJzZUZsb2F0KG4pPD1hP3BhcnNlRmxvYXQobik6YSxvPXBhcnNlRmxvYXQobyk+PWw/cGFyc2VGbG9hdChvKTpsLHM9KGEtbCkvMTAwLG89TWF0aC5yb3VuZCgoby1sKS9zKSx0eXBlb2YgaCl7Y2FzZSJzdHJpbmciOmQ9aDticmVhaztjYXNlImZ1bmN0aW9uIjpkPWgobik7YnJlYWs7Y2FzZSJvYmplY3QiOmlmKEFycmF5LmlzQXJyYXkoaCkpe3ZhciBjPTEwMC9oLmxlbmd0aCx1PU1hdGguZmxvb3Ioby9jKTt1PU1hdGgubWluKHUsaC5sZW5ndGgtMSksZD1oW3U9TWF0aC5tYXgodSwwKV07YnJlYWt9fXJldHVybiByLnN0eWxlLmJhY2tncm91bmRDb2xvcj1kLHJ9fSxwcm9ncmVzczpmdW5jdGlvbihlLHQ9e30saSl7dmFyIG8sbixyLGEsbCxoPXRoaXMuc2FuaXRpemVIVE1MKGUuZ2V0VmFsdWUoKSl8fDAsZD1lLmdldEVsZW1lbnQoKSxjPXQubWF4P3QubWF4OjEwMCx1PXQubWluP3QubWluOjAscD10LmxlZ2VuZEFsaWduP3QubGVnZW5kQWxpZ246ImNlbnRlciI7c3dpdGNoKG49cGFyc2VGbG9hdChoKTw9Yz9wYXJzZUZsb2F0KGgpOmMsbj1wYXJzZUZsb2F0KG4pPj11P3BhcnNlRmxvYXQobik6dSxvPShjLXUpLzEwMCxuPU1hdGgucm91bmQoKG4tdSkvbyksdHlwZW9mIHQuY29sb3Ipe2Nhc2Uic3RyaW5nIjpyPXQuY29sb3I7YnJlYWs7Y2FzZSJmdW5jdGlvbiI6cj10LmNvbG9yKGgpO2JyZWFrO2Nhc2Uib2JqZWN0IjppZihBcnJheS5pc0FycmF5KHQuY29sb3IpKXtsZXQgZT0xMDAvdC5jb2xvci5sZW5ndGgsaT1NYXRoLmZsb29yKG4vZSk7aT1NYXRoLm1pbihpLHQuY29sb3IubGVuZ3RoLTEpLGk9TWF0aC5tYXgoaSwwKSxyPXQuY29sb3JbaV07YnJlYWt9ZGVmYXVsdDpyPSIjMkRDMjE0In1zd2l0Y2godHlwZW9mIHQubGVnZW5kKXtjYXNlInN0cmluZyI6YT10LmxlZ2VuZDticmVhaztjYXNlImZ1bmN0aW9uIjphPXQubGVnZW5kKGgpO2JyZWFrO2Nhc2UiYm9vbGVhbiI6YT1oO2JyZWFrO2RlZmF1bHQ6YT0hMX1zd2l0Y2godHlwZW9mIHQubGVnZW5kQ29sb3Ipe2Nhc2Uic3RyaW5nIjpsPXQubGVnZW5kQ29sb3I7YnJlYWs7Y2FzZSJmdW5jdGlvbiI6bD10LmxlZ2VuZENvbG9yKGgpO2JyZWFrO2Nhc2Uib2JqZWN0IjppZihBcnJheS5pc0FycmF5KHQubGVnZW5kQ29sb3IpKXtsZXQgZT0xMDAvdC5sZWdlbmRDb2xvci5sZW5ndGgsaT1NYXRoLmZsb29yKG4vZSk7aT1NYXRoLm1pbihpLHQubGVnZW5kQ29sb3IubGVuZ3RoLTEpLGk9TWF0aC5tYXgoaSwwKSxsPXQubGVnZW5kQ29sb3JbaV19YnJlYWs7ZGVmYXVsdDpsPSIjMDAwIn1kLnN0eWxlLm1pbldpZHRoPSIzMHB4IixkLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSIsZC5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLG4pO3ZhciBtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO20uc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIixtLnN0eWxlLndpZHRoPW4rIiUiLG0uc3R5bGUuYmFja2dyb3VuZENvbG9yPXIsbS5zdHlsZS5oZWlnaHQ9IjEwMCUiLG0uc2V0QXR0cmlidXRlKCJkYXRhLW1heCIsYyksbS5zZXRBdHRyaWJ1dGUoImRhdGEtbWluIix1KTt2YXIgZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZihnLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSIsZy5zdHlsZS53aWR0aD0iMTAwJSIsZy5zdHlsZS5oZWlnaHQ9IjEwMCUiLGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2Iuc3R5bGUucG9zaXRpb249ImFic29sdXRlIixiLnN0eWxlLnRvcD0wLGIuc3R5bGUubGVmdD0wLGIuc3R5bGUudGV4dEFsaWduPXAsYi5zdHlsZS53aWR0aD0iMTAwJSIsYi5zdHlsZS5jb2xvcj1sLGIuaW5uZXJIVE1MPWF9cmV0dXJuIGkoKGZ1bmN0aW9uKCl7aWYoIShlIGluc3RhbmNlb2Ygcykpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Quc3R5bGUucG9zaXRpb249ImFic29sdXRlIix0LnN0eWxlLnRvcD0iNHB4Iix0LnN0eWxlLmJvdHRvbT0iNHB4Iix0LnN0eWxlLmxlZnQ9IjRweCIsdC5zdHlsZS5yaWdodD0iNHB4IixkLmFwcGVuZENoaWxkKHQpLGQ9dH1kLmFwcGVuZENoaWxkKGcpLGcuYXBwZW5kQ2hpbGQobSksYSYmZy5hcHBlbmRDaGlsZChiKX0pKSwiIn0sY29sb3I6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBlLmdldEVsZW1lbnQoKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9dGhpcy5zYW5pdGl6ZUhUTUwoZS5nZXRWYWx1ZSgpKSwiIn0sYnV0dG9uVGljazpmdW5jdGlvbihlLHQsaSl7cmV0dXJuJzxzdmcgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIGhlaWdodD0iMTQiIHdpZHRoPSIxNCIgdmlld0JveD0iMCAwIDI0IDI0IiB4bWw6c3BhY2U9InByZXNlcnZlIiA+PHBhdGggZmlsbD0iIzJEQzIxNCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjEuNjUyLDMuMjExYy0wLjI5My0wLjI5NS0wLjc3LTAuMjk1LTEuMDYxLDBMOS40MSwxNC4zNCAgYy0wLjI5MywwLjI5Ny0wLjc3MSwwLjI5Ny0xLjA2MiwwTDMuNDQ5LDkuMzUxQzMuMzA0LDkuMjAzLDMuMTE0LDkuMTMsMi45MjMsOS4xMjlDMi43Myw5LjEyOCwyLjUzNCw5LjIwMSwyLjM4Nyw5LjM1MSAgbC0yLjE2NSwxLjk0NkMwLjA3OCwxMS40NDUsMCwxMS42MywwLDExLjgyM2MwLDAuMTk0LDAuMDc4LDAuMzk3LDAuMjIzLDAuNTQ0bDQuOTQsNS4xODRjMC4yOTIsMC4yOTYsMC43NzEsMC43NzYsMS4wNjIsMS4wNyAgbDIuMTI0LDIuMTQxYzAuMjkyLDAuMjkzLDAuNzY5LDAuMjkzLDEuMDYyLDBsMTQuMzY2LTE0LjM0YzAuMjkzLTAuMjk0LDAuMjkzLTAuNzc3LDAtMS4wNzFMMjEuNjUyLDMuMjExeiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+J30sYnV0dG9uQ3Jvc3M6ZnVuY3Rpb24oZSx0LGkpe3JldHVybic8c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjE0IiB3aWR0aD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgPjxwYXRoIGZpbGw9IiNDRTE1MTUiIGQ9Ik0yMi4yNDUsNC4wMTVjMC4zMTMsMC4zMTMsMC4zMTMsMC44MjYsMCwxLjEzOWwtNi4yNzYsNi4yN2MtMC4zMTMsMC4zMTItMC4zMTMsMC44MjYsMCwxLjE0bDYuMjczLDYuMjcyICBjMC4zMTMsMC4zMTMsMC4zMTMsMC44MjYsMCwxLjE0bC0yLjI4NSwyLjI3N2MtMC4zMTQsMC4zMTItMC44MjgsMC4zMTItMS4xNDIsMGwtNi4yNzEtNi4yNzFjLTAuMzEzLTAuMzEzLTAuODI4LTAuMzEzLTEuMTQxLDAgIGwtNi4yNzYsNi4yNjdjLTAuMzEzLDAuMzEzLTAuODI4LDAuMzEzLTEuMTQxLDBsLTIuMjgyLTIuMjhjLTAuMzEzLTAuMzEzLTAuMzEzLTAuODI2LDAtMS4xNGw2LjI3OC02LjI2OSAgYzAuMzEzLTAuMzEyLDAuMzEzLTAuODI2LDAtMS4xNEwxLjcwOSw1LjE0N2MtMC4zMTQtMC4zMTMtMC4zMTQtMC44MjcsMC0xLjE0bDIuMjg0LTIuMjc4QzQuMzA4LDEuNDE3LDQuODIxLDEuNDE3LDUuMTM1LDEuNzMgIEwxMS40MDUsOGMwLjMxNCwwLjMxNCwwLjgyOCwwLjMxNCwxLjE0MSwwLjAwMWw2LjI3Ni02LjI2N2MwLjMxMi0wLjMxMiwwLjgyNi0wLjMxMiwxLjE0MSwwTDIyLjI0NSw0LjAxNXoiLz48L3N2Zz4nfSxyb3dudW06ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtyZXR1cm4gZS5nZXRSb3coKS53YXRjaFBvc2l0aW9uKChlPT57cy5pbm5lclRleHQ9ZX0pKSxzfSxoYW5kbGU6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBlLmdldEVsZW1lbnQoKS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3Itcm93LWhhbmRsZSIpLCI8ZGl2IGNsYXNzPSd0YWJ1bGF0b3Itcm93LWhhbmRsZS1ib3gnPjxkaXYgY2xhc3M9J3RhYnVsYXRvci1yb3ctaGFuZGxlLWJhcic+PC9kaXY+PGRpdiBjbGFzcz0ndGFidWxhdG9yLXJvdy1oYW5kbGUtYmFyJz48L2Rpdj48ZGl2IGNsYXNzPSd0YWJ1bGF0b3Itcm93LWhhbmRsZS1iYXInPjwvZGl2PjwvZGl2PiJ9LHJlc3BvbnNpdmVDb2xsYXBzZTpmdW5jdGlvbihlLHQsaSl7dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iiksbz1lLmdldFJvdygpLl9yb3cubW9kdWxlcy5yZXNwb25zaXZlTGF5b3V0O2Z1bmN0aW9uIG4oZSl7dmFyIHQ9by5lbGVtZW50O28ub3Blbj1lLHQmJihvLm9wZW4/KHMuY2xhc3NMaXN0LmFkZCgib3BlbiIpLHQuc3R5bGUuZGlzcGxheT0iIik6KHMuY2xhc3NMaXN0LnJlbW92ZSgib3BlbiIpLHQuc3R5bGUuZGlzcGxheT0ibm9uZSIpKX1yZXR1cm4gcy5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItcmVzcG9uc2l2ZS1jb2xsYXBzZS10b2dnbGUiKSxzLmlubmVySFRNTD0nPHN2ZyBjbGFzcz1cJ3RhYnVsYXRvci1yZXNwb25zaXZlLWNvbGxhcHNlLXRvZ2dsZS1vcGVuXCcgdmlld2JveD0iMCAwIDI0IDI0Ij5cbiAgPGxpbmUgeDE9IjciIHkxPSIxMiIgeDI9IjE3IiB5Mj0iMTIiIGZpbGw9Im5vbmUiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiAvPlxuICA8bGluZSB5MT0iNyIgeDE9IjEyIiB5Mj0iMTciIHgyPSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIC8+XG48L3N2Zz5cblxuPHN2ZyBjbGFzcz1cJ3RhYnVsYXRvci1yZXNwb25zaXZlLWNvbGxhcHNlLXRvZ2dsZS1jbG9zZVwnIHZpZXdib3g9IjAgMCAyNCAyNCI+XG4gIDxsaW5lIHgxPSI3IiB5MT0iMTIiIHgyPSIxNyIgeTI9IjEyIiAgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIC8+XG48L3N2Zz4nLGUuZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1yb3ctaGFuZGxlIikscy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsKGZ1bmN0aW9uKHQpe3Quc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksbighby5vcGVuKSxlLmdldFRhYmxlKCkucm93TWFuYWdlci5hZGp1c3RUYWJsZVNpemUoKX0pKSxuKG8ub3Blbiksc30scm93U2VsZWN0aW9uOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLG89ITE7aWYocy50eXBlPSJjaGVja2JveCIscy5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLCJTZWxlY3QgUm93IiksdGhpcy50YWJsZS5tb2RFeGlzdHMoInNlbGVjdFJvdyIsITApKWlmKHMuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLChlPT57ZS5zdG9wUHJvcGFnYXRpb24oKX0pKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5nZXRSb3cpe3ZhciBuPWUuZ2V0Um93KCk7biBpbnN0YW5jZW9mIHU/KHMuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwoZT0+eyJjbGljayI9PT10aGlzLnRhYmxlLm9wdGlvbnMuc2VsZWN0YWJsZVJhbmdlTW9kZSYmbz9vPSExOm4udG9nZ2xlU2VsZWN0KCl9KSksImNsaWNrIj09PXRoaXMudGFibGUub3B0aW9ucy5zZWxlY3RhYmxlUmFuZ2VNb2RlJiZzLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwoZT0+e289ITAsdGhpcy50YWJsZS5tb2R1bGVzLnNlbGVjdFJvdy5oYW5kbGVDb21wbGV4Um93Q2xpY2sobi5fcm93LGUpfSkpLHMuY2hlY2tlZD1uLmlzU2VsZWN0ZWQmJm4uaXNTZWxlY3RlZCgpLHRoaXMudGFibGUubW9kdWxlcy5zZWxlY3RSb3cucmVnaXN0ZXJSb3dTZWxlY3RDaGVja2JveChuLHMpKTpzPSIifWVsc2Ugcy5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLChlPT57dGhpcy50YWJsZS5tb2R1bGVzLnNlbGVjdFJvdy5zZWxlY3RlZFJvd3MubGVuZ3RoP3RoaXMudGFibGUuZGVzZWxlY3RSb3coKTp0aGlzLnRhYmxlLnNlbGVjdFJvdyh0LnJvd1JhbmdlKX0pKSx0aGlzLnRhYmxlLm1vZHVsZXMuc2VsZWN0Um93LnJlZ2lzdGVySGVhZGVyU2VsZWN0Q2hlY2tib3gocyk7cmV0dXJuIHN9fTtjbGFzcyByZSBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiZm9ybWF0dGVyIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiZm9ybWF0dGVyUGFyYW1zIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiZm9ybWF0dGVyUHJpbnQiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJmb3JtYXR0ZXJQcmludFBhcmFtcyIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImZvcm1hdHRlckNsaXBib2FyZCIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImZvcm1hdHRlckNsaXBib2FyZFBhcmFtcyIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImZvcm1hdHRlckh0bWxPdXRwdXQiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJmb3JtYXR0ZXJIdG1sT3V0cHV0UGFyYW1zIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigidGl0bGVGb3JtYXR0ZXIiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJ0aXRsZUZvcm1hdHRlclBhcmFtcyIpfWluaXRpYWxpemUoKXt0aGlzLnN1YnNjcmliZSgiY2VsbC1mb3JtYXQiLHRoaXMuZm9ybWF0VmFsdWUuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNlbGwtcmVuZGVyZWQiLHRoaXMuY2VsbFJlbmRlcmVkLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4tbGF5b3V0Iix0aGlzLmluaXRpYWxpemVDb2x1bW4uYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1mb3JtYXQiLHRoaXMuZm9ybWF0SGVhZGVyLmJpbmQodGhpcykpfWluaXRpYWxpemVDb2x1bW4oZSl7ZS5tb2R1bGVzLmZvcm1hdD10aGlzLmxvb2t1cEZvcm1hdHRlcihlLCIiKSx2b2lkIDAhPT1lLmRlZmluaXRpb24uZm9ybWF0dGVyUHJpbnQmJihlLm1vZHVsZXMuZm9ybWF0LnByaW50PXRoaXMubG9va3VwRm9ybWF0dGVyKGUsIlByaW50IikpLHZvaWQgMCE9PWUuZGVmaW5pdGlvbi5mb3JtYXR0ZXJDbGlwYm9hcmQmJihlLm1vZHVsZXMuZm9ybWF0LmNsaXBib2FyZD10aGlzLmxvb2t1cEZvcm1hdHRlcihlLCJDbGlwYm9hcmQiKSksdm9pZCAwIT09ZS5kZWZpbml0aW9uLmZvcm1hdHRlckh0bWxPdXRwdXQmJihlLm1vZHVsZXMuZm9ybWF0Lmh0bWxPdXRwdXQ9dGhpcy5sb29rdXBGb3JtYXR0ZXIoZSwiSHRtbE91dHB1dCIpKX1sb29rdXBGb3JtYXR0ZXIoZSx0KXt2YXIgaT17cGFyYW1zOmUuZGVmaW5pdGlvblsiZm9ybWF0dGVyIit0KyJQYXJhbXMiXXx8e319LHM9ZS5kZWZpbml0aW9uWyJmb3JtYXR0ZXIiK3RdO3N3aXRjaCh0eXBlb2Ygcyl7Y2FzZSJzdHJpbmciOnJlLmZvcm1hdHRlcnNbc10/aS5mb3JtYXR0ZXI9cmUuZm9ybWF0dGVyc1tzXTooY29uc29sZS53YXJuKCJGb3JtYXR0ZXIgRXJyb3IgLSBObyBzdWNoIGZvcm1hdHRlciBmb3VuZDogIixzKSxpLmZvcm1hdHRlcj1yZS5mb3JtYXR0ZXJzLnBsYWludGV4dCk7YnJlYWs7Y2FzZSJmdW5jdGlvbiI6aS5mb3JtYXR0ZXI9czticmVhaztkZWZhdWx0OmkuZm9ybWF0dGVyPXJlLmZvcm1hdHRlcnMucGxhaW50ZXh0fXJldHVybiBpfWNlbGxSZW5kZXJlZChlKXtlLm1vZHVsZXMuZm9ybWF0JiZlLm1vZHVsZXMuZm9ybWF0LnJlbmRlcmVkQ2FsbGJhY2smJiFlLm1vZHVsZXMuZm9ybWF0LnJlbmRlcmVkJiYoZS5tb2R1bGVzLmZvcm1hdC5yZW5kZXJlZENhbGxiYWNrKCksZS5tb2R1bGVzLmZvcm1hdC5yZW5kZXJlZD0hMCl9Zm9ybWF0SGVhZGVyKGUsdCxpKXt2YXIgcyxvLG4scjtyZXR1cm4gZS5kZWZpbml0aW9uLnRpdGxlRm9ybWF0dGVyPyhzPXRoaXMuZ2V0Rm9ybWF0dGVyKGUuZGVmaW5pdGlvbi50aXRsZUZvcm1hdHRlciksbj10PT57ZS50aXRsZUZvcm1hdHRlclJlbmRlcmVkPXR9LHI9e2dldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHR9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gaX0sZ2V0VHlwZTpmdW5jdGlvbigpe3JldHVybiJoZWFkZXIifSxnZXRDb2x1bW46ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRDb21wb25lbnQoKX0sZ2V0VGFibGU6KCk9PnRoaXMudGFibGV9LG89ImZ1bmN0aW9uIj09dHlwZW9mKG89ZS5kZWZpbml0aW9uLnRpdGxlRm9ybWF0dGVyUGFyYW1zfHx7fSk/bygpOm8scy5jYWxsKHRoaXMscixvLG4pKTp0fWZvcm1hdFZhbHVlKGUpe3ZhciB0PWUuZ2V0Q29tcG9uZW50KCksaT0iZnVuY3Rpb24iPT10eXBlb2YgZS5jb2x1bW4ubW9kdWxlcy5mb3JtYXQucGFyYW1zP2UuY29sdW1uLm1vZHVsZXMuZm9ybWF0LnBhcmFtcyh0KTplLmNvbHVtbi5tb2R1bGVzLmZvcm1hdC5wYXJhbXM7cmV0dXJuIGUuY29sdW1uLm1vZHVsZXMuZm9ybWF0LmZvcm1hdHRlci5jYWxsKHRoaXMsdCxpLChmdW5jdGlvbih0KXtlLm1vZHVsZXMuZm9ybWF0fHwoZS5tb2R1bGVzLmZvcm1hdD17fSksZS5tb2R1bGVzLmZvcm1hdC5yZW5kZXJlZENhbGxiYWNrPXQsZS5tb2R1bGVzLmZvcm1hdC5yZW5kZXJlZD0hMX0pKX1mb3JtYXRFeHBvcnRWYWx1ZShlLHQpe3ZhciBpLHM9ZS5jb2x1bW4ubW9kdWxlcy5mb3JtYXRbdF07aWYocyl7ZnVuY3Rpb24gbyh0KXtlLm1vZHVsZXMuZm9ybWF0fHwoZS5tb2R1bGVzLmZvcm1hdD17fSksZS5tb2R1bGVzLmZvcm1hdC5yZW5kZXJlZENhbGxiYWNrPXQsZS5tb2R1bGVzLmZvcm1hdC5yZW5kZXJlZD0hMX1yZXR1cm4gaT0iZnVuY3Rpb24iPT10eXBlb2Ygcy5wYXJhbXM/cy5wYXJhbXMoZS5nZXRDb21wb25lbnQoKSk6cy5wYXJhbXMscy5mb3JtYXR0ZXIuY2FsbCh0aGlzLGUuZ2V0Q29tcG9uZW50KCksaSxvKX1yZXR1cm4gdGhpcy5mb3JtYXRWYWx1ZShlKX1zYW5pdGl6ZUhUTUwoZSl7aWYoZSl7dmFyIHQ9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImIzM5OyIsIi8iOiImI3gyRjsiLCJgIjoiJiN4NjA7IiwiPSI6IiYjeDNEOyJ9O3JldHVybiBTdHJpbmcoZSkucmVwbGFjZSgvWyY8PiInYD0vXS9nLChmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pKX1yZXR1cm4gZX1lbXB0eVRvU3BhY2UoZSl7cmV0dXJuIG51bGw9PWV8fCIiPT09ZT8iJm5ic3A7IjplfWdldEZvcm1hdHRlcihlKXtzd2l0Y2godHlwZW9mIGUpe2Nhc2Uic3RyaW5nIjpyZS5mb3JtYXR0ZXJzW2VdP2U9cmUuZm9ybWF0dGVyc1tlXTooY29uc29sZS53YXJuKCJGb3JtYXR0ZXIgRXJyb3IgLSBObyBzdWNoIGZvcm1hdHRlciBmb3VuZDogIixlKSxlPXJlLmZvcm1hdHRlcnMucGxhaW50ZXh0KTticmVhaztjYXNlImZ1bmN0aW9uIjpicmVhaztkZWZhdWx0OmU9cmUuZm9ybWF0dGVycy5wbGFpbnRleHR9cmV0dXJuIGV9fXJlLm1vZHVsZU5hbWU9ImZvcm1hdCIscmUuZm9ybWF0dGVycz1uZTtjbGFzcyBhZSBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5sZWZ0Q29sdW1ucz1bXSx0aGlzLnJpZ2h0Q29sdW1ucz1bXSx0aGlzLmluaXRpYWxpemF0aW9uTW9kZT0ibGVmdCIsdGhpcy5hY3RpdmU9ITEsdGhpcy5ibG9ja2VkPSEwLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImZyb3plbiIpfXJlc2V0KCl7dGhpcy5pbml0aWFsaXphdGlvbk1vZGU9ImxlZnQiLHRoaXMubGVmdENvbHVtbnM9W10sdGhpcy5yaWdodENvbHVtbnM9W10sdGhpcy5hY3RpdmU9ITF9aW5pdGlhbGl6ZSgpe3RoaXMuc3Vic2NyaWJlKCJjZWxsLWxheW91dCIsdGhpcy5sYXlvdXRDZWxsLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4taW5pdCIsdGhpcy5pbml0aWFsaXplQ29sdW1uLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4td2lkdGgiLHRoaXMubGF5b3V0LmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJyb3ctbGF5b3V0LWFmdGVyIix0aGlzLmxheW91dFJvdy5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgidGFibGUtbGF5b3V0Iix0aGlzLmxheW91dC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1ucy1sb2FkaW5nIix0aGlzLnJlc2V0LmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4tYWRkIix0aGlzLnJlaW5pdGlhbGl6ZUNvbHVtbnMuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1kZWxldGUiLHRoaXMucmVpbml0aWFsaXplQ29sdW1ucy5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgidGFibGUtcmVkcmF3Iix0aGlzLmxheW91dC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgibGF5b3V0LXJlZnJlc2hpbmciLHRoaXMuYmxvY2tMYXlvdXQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImxheW91dC1yZWZyZXNoZWQiLHRoaXMudW5ibG9ja0xheW91dC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgic2Nyb2xsYmFyLXZlcnRpY2FsIix0aGlzLmFkanVzdEZvclNjcm9sbGJhci5iaW5kKHRoaXMpKX1ibG9ja0xheW91dCgpe3RoaXMuYmxvY2tlZD0hMH11bmJsb2NrTGF5b3V0KCl7dGhpcy5ibG9ja2VkPSExfWxheW91dENlbGwoZSl7dGhpcy5sYXlvdXRFbGVtZW50KGUuZWxlbWVudCxlLmNvbHVtbil9cmVpbml0aWFsaXplQ29sdW1ucygpe3RoaXMucmVzZXQoKSx0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuY29sdW1uc0J5SW5kZXguZm9yRWFjaCgoZT0+e3RoaXMuaW5pdGlhbGl6ZUNvbHVtbihlKX0pKX1pbml0aWFsaXplQ29sdW1uKGUpe3ZhciB0PXttYXJnaW46MCxlZGdlOiExfTtlLmlzR3JvdXB8fCh0aGlzLmZyb3plbkNoZWNrKGUpPyh0LnBvc2l0aW9uPXRoaXMuaW5pdGlhbGl6YXRpb25Nb2RlLCJsZWZ0Ij09dGhpcy5pbml0aWFsaXphdGlvbk1vZGU/dGhpcy5sZWZ0Q29sdW1ucy5wdXNoKGUpOnRoaXMucmlnaHRDb2x1bW5zLnVuc2hpZnQoZSksdGhpcy5hY3RpdmU9ITAsZS5tb2R1bGVzLmZyb3plbj10KTp0aGlzLmluaXRpYWxpemF0aW9uTW9kZT0icmlnaHQiKX1mcm96ZW5DaGVjayhlKXtyZXR1cm4gZS5wYXJlbnQuaXNHcm91cCYmZS5kZWZpbml0aW9uLmZyb3plbiYmY29uc29sZS53YXJuKCJGcm96ZW4gQ29sdW1uIEVycm9yIC0gUGFyZW50IGNvbHVtbiBncm91cCBtdXN0IGJlIGZyb3plbiwgbm90IGluZGl2aWR1YWwgY29sdW1ucyBvciBzdWIgY29sdW1uIGdyb3VwcyIpLGUucGFyZW50LmlzR3JvdXA/dGhpcy5mcm96ZW5DaGVjayhlLnBhcmVudCk6ZS5kZWZpbml0aW9uLmZyb3plbn1sYXlvdXRDYWxjUm93cygpe3RoaXMudGFibGUubW9kRXhpc3RzKCJjb2x1bW5DYWxjcyIpJiYodGhpcy50YWJsZS5tb2R1bGVzLmNvbHVtbkNhbGNzLnRvcEluaXRpYWxpemVkJiZ0aGlzLnRhYmxlLm1vZHVsZXMuY29sdW1uQ2FsY3MudG9wUm93JiZ0aGlzLmxheW91dFJvdyh0aGlzLnRhYmxlLm1vZHVsZXMuY29sdW1uQ2FsY3MudG9wUm93KSx0aGlzLnRhYmxlLm1vZHVsZXMuY29sdW1uQ2FsY3MuYm90SW5pdGlhbGl6ZWQmJnRoaXMudGFibGUubW9kdWxlcy5jb2x1bW5DYWxjcy5ib3RSb3cmJnRoaXMubGF5b3V0Um93KHRoaXMudGFibGUubW9kdWxlcy5jb2x1bW5DYWxjcy5ib3RSb3cpLHRoaXMudGFibGUubW9kRXhpc3RzKCJncm91cFJvd3MiKSYmdGhpcy5sYXlvdXRHcm91cENhbGNzKHRoaXMudGFibGUubW9kdWxlcy5ncm91cFJvd3MuZ2V0R3JvdXBzKCkpKX1sYXlvdXRHcm91cENhbGNzKGUpe2UuZm9yRWFjaCgoZT0+e2UuY2FsY3MudG9wJiZ0aGlzLmxheW91dFJvdyhlLmNhbGNzLnRvcCksZS5jYWxjcy5ib3R0b20mJnRoaXMubGF5b3V0Um93KGUuY2FsY3MuYm90dG9tKSxlLmdyb3VwTGlzdCYmZS5ncm91cExpc3QubGVuZ3RoJiZ0aGlzLmxheW91dEdyb3VwQ2FsY3MoZS5ncm91cExpc3QpfSkpfWxheW91dENvbHVtblBvc2l0aW9uKGUpe3ZhciB0PVtdLGk9MCxzPTA7dGhpcy5sZWZ0Q29sdW1ucy5mb3JFYWNoKCgocyxvKT0+e2lmKHMubW9kdWxlcy5mcm96ZW4ubWFyZ2luVmFsdWU9aSxzLm1vZHVsZXMuZnJvemVuLm1hcmdpbj1zLm1vZHVsZXMuZnJvemVuLm1hcmdpblZhbHVlKyJweCIscy52aXNpYmxlJiYoaSs9cy5nZXRXaWR0aCgpKSxvPT10aGlzLmxlZnRDb2x1bW5zLmxlbmd0aC0xP3MubW9kdWxlcy5mcm96ZW4uZWRnZT0hMDpzLm1vZHVsZXMuZnJvemVuLmVkZ2U9ITEscy5wYXJlbnQuaXNHcm91cCl7dmFyIG49dGhpcy5nZXRDb2xHcm91cFBhcmVudEVsZW1lbnQocyk7dC5pbmNsdWRlcyhuKXx8KHRoaXMubGF5b3V0RWxlbWVudChuLHMpLHQucHVzaChuKSkscy5tb2R1bGVzLmZyb3plbi5lZGdlJiZuLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1mcm96ZW4tIitzLm1vZHVsZXMuZnJvemVuLnBvc2l0aW9uKX1lbHNlIHRoaXMubGF5b3V0RWxlbWVudChzLmdldEVsZW1lbnQoKSxzKTtlJiZzLmNlbGxzLmZvckVhY2goKGU9Pnt0aGlzLmxheW91dEVsZW1lbnQoZS5nZXRFbGVtZW50KCEwKSxzKX0pKX0pKSx0aGlzLnJpZ2h0Q29sdW1ucy5mb3JFYWNoKCgodCxpKT0+e3QubW9kdWxlcy5mcm96ZW4ubWFyZ2luVmFsdWU9cyx0Lm1vZHVsZXMuZnJvemVuLm1hcmdpbj10Lm1vZHVsZXMuZnJvemVuLm1hcmdpblZhbHVlKyJweCIsdC52aXNpYmxlJiYocys9dC5nZXRXaWR0aCgpKSxpPT10aGlzLnJpZ2h0Q29sdW1ucy5sZW5ndGgtMT90Lm1vZHVsZXMuZnJvemVuLmVkZ2U9ITA6dC5tb2R1bGVzLmZyb3plbi5lZGdlPSExLHQucGFyZW50LmlzR3JvdXA/dGhpcy5sYXlvdXRFbGVtZW50KHRoaXMuZ2V0Q29sR3JvdXBQYXJlbnRFbGVtZW50KHQpLHQpOnRoaXMubGF5b3V0RWxlbWVudCh0LmdldEVsZW1lbnQoKSx0KSxlJiZ0LmNlbGxzLmZvckVhY2goKGU9Pnt0aGlzLmxheW91dEVsZW1lbnQoZS5nZXRFbGVtZW50KCEwKSx0KX0pKX0pKX1nZXRDb2xHcm91cFBhcmVudEVsZW1lbnQoZSl7cmV0dXJuIGUucGFyZW50LmlzR3JvdXA/dGhpcy5nZXRDb2xHcm91cFBhcmVudEVsZW1lbnQoZS5wYXJlbnQpOmUuZ2V0RWxlbWVudCgpfWxheW91dCgpe3RoaXMuYWN0aXZlJiYhdGhpcy5ibG9ja2VkJiYodGhpcy5sYXlvdXRDb2x1bW5Qb3NpdGlvbigpLHRoaXMucmVpbml0aWFsaXplUm93cygpLHRoaXMubGF5b3V0Q2FsY1Jvd3MoKSl9cmVpbml0aWFsaXplUm93cygpe3ZhciBlPXRoaXMudGFibGUucm93TWFuYWdlci5nZXRWaXNpYmxlUm93cyghMCk7dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldFJvd3MoKS5maWx0ZXIoKHQ9PiFlLmluY2x1ZGVzKHQpKSkuZm9yRWFjaCgoZT0+e2UuZGVpbml0aWFsaXplKCl9KSksZS5mb3JFYWNoKChlPT57InJvdyI9PT1lLnR5cGUmJnRoaXMubGF5b3V0Um93KGUpfSkpfWxheW91dFJvdyhlKXsiZml0RGF0YUZpbGwiPT09dGhpcy50YWJsZS5vcHRpb25zLmxheW91dCYmdGhpcy5yaWdodENvbHVtbnMubGVuZ3RoJiYodGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldFRhYmxlRWxlbWVudCgpLnN0eWxlLm1pbldpZHRoPSJjYWxjKDEwMCUgLSAiK3RoaXMucmlnaHRNYXJnaW4rIikiKSx0aGlzLmxlZnRDb2x1bW5zLmZvckVhY2goKHQ9Pnt2YXIgaT1lLmdldENlbGwodCk7aSYmdGhpcy5sYXlvdXRFbGVtZW50KGkuZ2V0RWxlbWVudCghMCksdCl9KSksdGhpcy5yaWdodENvbHVtbnMuZm9yRWFjaCgodD0+e3ZhciBpPWUuZ2V0Q2VsbCh0KTtpJiZ0aGlzLmxheW91dEVsZW1lbnQoaS5nZXRFbGVtZW50KCEwKSx0KX0pKX1sYXlvdXRFbGVtZW50KGUsdCl7dmFyIGk7dC5tb2R1bGVzLmZyb3plbiYmZSYmKGUuc3R5bGUucG9zaXRpb249InN0aWNreSIsaT10aGlzLnRhYmxlLnJ0bD8ibGVmdCI9PT10Lm1vZHVsZXMuZnJvemVuLnBvc2l0aW9uPyJyaWdodCI6ImxlZnQiOnQubW9kdWxlcy5mcm96ZW4ucG9zaXRpb24sZS5zdHlsZVtpXT10Lm1vZHVsZXMuZnJvemVuLm1hcmdpbixlLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1mcm96ZW4iKSx0Lm1vZHVsZXMuZnJvemVuLmVkZ2UmJmUuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWZyb3plbi0iK3QubW9kdWxlcy5mcm96ZW4ucG9zaXRpb24pKX1hZGp1c3RGb3JTY3JvbGxiYXIoZSl7dGhpcy5yaWdodENvbHVtbnMubGVuZ3RoJiYodGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmdldENvbnRlbnRzRWxlbWVudCgpLnN0eWxlLndpZHRoPSJjYWxjKDEwMCUgLSAiK2UrInB4KSIpfV9jYWxjU3BhY2UoZSx0KXt2YXIgaT0wO2ZvcihsZXQgcz0wO3M8dDtzKyspZVtzXS52aXNpYmxlJiYoaSs9ZVtzXS5nZXRXaWR0aCgpKTtyZXR1cm4gaX19YWUubW9kdWxlTmFtZT0iZnJvemVuQ29sdW1ucyI7Y2xhc3MgbGUgZXh0ZW5kcyBre2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMudG9wRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLnJvd3M9W10sdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJyb3ciLCJmcmVlemUiLHRoaXMuZnJlZXplUm93LmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbigicm93IiwidW5mcmVlemUiLHRoaXMudW5mcmVlemVSb3cuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJyb3ciLCJpc0Zyb3plbiIsdGhpcy5pc1Jvd0Zyb3plbi5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImZyb3plblJvd3NGaWVsZCIsImlkIiksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJmcm96ZW5Sb3dzIiwhMSl9aW5pdGlhbGl6ZSgpe3RoaXMucm93cz1bXSx0aGlzLnRvcEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWZyb3plbi1yb3dzLWhvbGRlciIpLHRoaXMudGFibGUuY29sdW1uTWFuYWdlci5nZXRDb250ZW50c0VsZW1lbnQoKS5pbnNlcnRCZWZvcmUodGhpcy50b3BFbGVtZW50LHRoaXMudGFibGUuY29sdW1uTWFuYWdlci5oZWFkZXJzRWxlbWVudC5uZXh0U2libGluZyksdGhpcy5zdWJzY3JpYmUoInJvdy1kZWxldGluZyIsdGhpcy5kZXRhY2hSb3cuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvd3MtdmlzaWJsZSIsdGhpcy52aXNpYmxlUm93cy5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyRGlzcGxheUhhbmRsZXIodGhpcy5nZXRSb3dzLmJpbmQodGhpcyksMTApLHRoaXMudGFibGUub3B0aW9ucy5mcm96ZW5Sb3dzJiYodGhpcy5zdWJzY3JpYmUoImRhdGEtcHJvY2Vzc2VkIix0aGlzLmluaXRpYWxpemVSb3dzLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJyb3ctYWRkZWQiLHRoaXMuaW5pdGlhbGl6ZVJvdy5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgidGFibGUtcmVkcmF3aW5nIix0aGlzLnJlc2l6ZUhvbGRlcldpZHRoLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4tcmVzaXplZCIsdGhpcy5yZXNpemVIb2xkZXJXaWR0aC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLXNob3ciLHRoaXMucmVzaXplSG9sZGVyV2lkdGguYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1oaWRlIix0aGlzLnJlc2l6ZUhvbGRlcldpZHRoLmJpbmQodGhpcykpKSx0aGlzLnJlc2l6ZUhvbGRlcldpZHRoKCl9cmVzaXplSG9sZGVyV2lkdGgoKXt0aGlzLnRvcEVsZW1lbnQuc3R5bGUubWluV2lkdGg9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmhlYWRlcnNFbGVtZW50Lm9mZnNldFdpZHRoKyJweCJ9aW5pdGlhbGl6ZVJvd3MoKXt0aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0Um93cygpLmZvckVhY2goKGU9Pnt0aGlzLmluaXRpYWxpemVSb3coZSl9KSl9aW5pdGlhbGl6ZVJvdyhlKXt2YXIgdD10aGlzLnRhYmxlLm9wdGlvbnMuZnJvemVuUm93cyxpPXR5cGVvZiB0OyJudW1iZXIiPT09aT9lLmdldFBvc2l0aW9uKCkmJmUuZ2V0UG9zaXRpb24oKSt0aGlzLnJvd3MubGVuZ3RoPD10JiZ0aGlzLmZyZWV6ZVJvdyhlKToiZnVuY3Rpb24iPT09aT90LmNhbGwodGhpcy50YWJsZSxlLmdldENvbXBvbmVudCgpKSYmdGhpcy5mcmVlemVSb3coZSk6QXJyYXkuaXNBcnJheSh0KSYmdC5pbmNsdWRlcyhlLmRhdGFbdGhpcy5vcHRpb25zKCJmcm96ZW5Sb3dzRmllbGQiKV0pJiZ0aGlzLmZyZWV6ZVJvdyhlKX1pc1Jvd0Zyb3plbihlKXtyZXR1cm4gdGhpcy5yb3dzLmluZGV4T2YoZSk+LTF9aXNGcm96ZW4oKXtyZXR1cm4hIXRoaXMucm93cy5sZW5ndGh9dmlzaWJsZVJvd3MoZSx0KXtyZXR1cm4gdGhpcy5yb3dzLmZvckVhY2goKGU9Pnt0LnB1c2goZSl9KSksdH1nZXRSb3dzKGUpe3ZhciB0PWUuc2xpY2UoMCk7cmV0dXJuIHRoaXMucm93cy5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgaT10LmluZGV4T2YoZSk7aT4tMSYmdC5zcGxpY2UoaSwxKX0pKSx0fWZyZWV6ZVJvdyhlKXtlLm1vZHVsZXMuZnJvemVuP2NvbnNvbGUud2FybigiRnJlZXplIEVycm9yIC0gUm93IGlzIGFscmVhZHkgZnJvemVuIik6KGUubW9kdWxlcy5mcm96ZW49ITAsdGhpcy50b3BFbGVtZW50LmFwcGVuZENoaWxkKGUuZ2V0RWxlbWVudCgpKSxlLmluaXRpYWxpemUoKSxlLm5vcm1hbGl6ZUhlaWdodCgpLHRoaXMucm93cy5wdXNoKGUpLHRoaXMucmVmcmVzaERhdGEoITEsImRpc3BsYXkiKSx0aGlzLnRhYmxlLnJvd01hbmFnZXIuYWRqdXN0VGFibGVTaXplKCksdGhpcy5zdHlsZVJvd3MoKSl9dW5mcmVlemVSb3coZSl7ZS5tb2R1bGVzLmZyb3plbj8oZS5tb2R1bGVzLmZyb3plbj0hMSx0aGlzLmRldGFjaFJvdyhlKSx0aGlzLnRhYmxlLnJvd01hbmFnZXIuYWRqdXN0VGFibGVTaXplKCksdGhpcy5yZWZyZXNoRGF0YSghMSwiZGlzcGxheSIpLHRoaXMucm93cy5sZW5ndGgmJnRoaXMuc3R5bGVSb3dzKCkpOmNvbnNvbGUud2FybigiRnJlZXplIEVycm9yIC0gUm93IGlzIGFscmVhZHkgdW5mcm96ZW4iKX1kZXRhY2hSb3coZSl7dmFyIHQ9dGhpcy5yb3dzLmluZGV4T2YoZSk7aWYodD4tMSl7dmFyIGk9ZS5nZXRFbGVtZW50KCk7aS5wYXJlbnROb2RlJiZpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaSksdGhpcy5yb3dzLnNwbGljZSh0LDEpfX1zdHlsZVJvd3MoZSl7dGhpcy5yb3dzLmZvckVhY2goKChlLHQpPT57dGhpcy50YWJsZS5yb3dNYW5hZ2VyLnN0eWxlUm93KGUsdCl9KSl9fWxlLm1vZHVsZU5hbWU9ImZyb3plblJvd3MiO2NsYXNzIGhle2NvbnN0cnVjdG9yKGUpe3JldHVybiB0aGlzLl9ncm91cD1lLHRoaXMudHlwZT0iR3JvdXBDb21wb25lbnQiLG5ldyBQcm94eSh0aGlzLHtnZXQ6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiB2b2lkIDAhPT1lW3RdP2VbdF06ZS5fZ3JvdXAuZ3JvdXBNYW5hZ2VyLnRhYmxlLmNvbXBvbmVudEZ1bmN0aW9uQmluZGVyLmhhbmRsZSgiZ3JvdXAiLGUuX2dyb3VwLHQpfX0pfWdldEtleSgpe3JldHVybiB0aGlzLl9ncm91cC5rZXl9Z2V0RmllbGQoKXtyZXR1cm4gdGhpcy5fZ3JvdXAuZmllbGR9Z2V0RWxlbWVudCgpe3JldHVybiB0aGlzLl9ncm91cC5lbGVtZW50fWdldFJvd3MoKXtyZXR1cm4gdGhpcy5fZ3JvdXAuZ2V0Um93cyghMCl9Z2V0U3ViR3JvdXBzKCl7cmV0dXJuIHRoaXMuX2dyb3VwLmdldFN1Ykdyb3VwcyghMCl9Z2V0UGFyZW50R3JvdXAoKXtyZXR1cm4hIXRoaXMuX2dyb3VwLnBhcmVudCYmdGhpcy5fZ3JvdXAucGFyZW50LmdldENvbXBvbmVudCgpfWlzVmlzaWJsZSgpe3JldHVybiB0aGlzLl9ncm91cC52aXNpYmxlfXNob3coKXt0aGlzLl9ncm91cC5zaG93KCl9aGlkZSgpe3RoaXMuX2dyb3VwLmhpZGUoKX10b2dnbGUoKXt0aGlzLl9ncm91cC50b2dnbGVWaXNpYmlsaXR5KCl9c2Nyb2xsVG8oZSx0KXtyZXR1cm4gdGhpcy5fZ3JvdXAuZ3JvdXBNYW5hZ2VyLnRhYmxlLnJvd01hbmFnZXIuc2Nyb2xsVG9Sb3codGhpcy5fZ3JvdXAsZSx0KX1fZ2V0U2VsZigpe3JldHVybiB0aGlzLl9ncm91cH1nZXRUYWJsZSgpe3JldHVybiB0aGlzLl9ncm91cC5ncm91cE1hbmFnZXIudGFibGV9fWNsYXNzIGRle2NvbnN0cnVjdG9yKGUsdCxpLHMsbyxuLHIpe3RoaXMuZ3JvdXBNYW5hZ2VyPWUsdGhpcy5wYXJlbnQ9dCx0aGlzLmtleT1zLHRoaXMubGV2ZWw9aSx0aGlzLmZpZWxkPW8sdGhpcy5oYXNTdWJHcm91cHM9aTxlLmdyb3VwSURMb29rdXBzLmxlbmd0aC0xLHRoaXMuYWRkUm93PXRoaXMuaGFzU3ViR3JvdXBzP3RoaXMuX2FkZFJvd1RvR3JvdXA6dGhpcy5fYWRkUm93LHRoaXMudHlwZT0iZ3JvdXAiLHRoaXMub2xkPXIsdGhpcy5yb3dzPVtdLHRoaXMuZ3JvdXBzPVtdLHRoaXMuZ3JvdXBMaXN0PVtdLHRoaXMuZ2VuZXJhdG9yPW4sdGhpcy5lbGVtZW50PSExLHRoaXMuZWxlbWVudENvbnRlbnRzPSExLHRoaXMuaGVpZ2h0PTAsdGhpcy5vdXRlckhlaWdodD0wLHRoaXMuaW5pdGlhbGl6ZWQ9ITEsdGhpcy5jYWxjcz17fSx0aGlzLmluaXRpYWxpemVkPSExLHRoaXMubW9kdWxlcz17fSx0aGlzLmFycm93RWxlbWVudD0hMSx0aGlzLnZpc2libGU9cj9yLnZpc2libGU6dm9pZCAwIT09ZS5zdGFydE9wZW5baV0/ZS5zdGFydE9wZW5baV06ZS5zdGFydE9wZW5bMF0sdGhpcy5jb21wb25lbnQ9bnVsbCx0aGlzLmNyZWF0ZUVsZW1lbnRzKCksdGhpcy5hZGRCaW5kaW5ncygpLHRoaXMuY3JlYXRlVmFsdWVHcm91cHMoKX13aXBlKGUpe2V8fCh0aGlzLmdyb3VwTGlzdC5sZW5ndGg/dGhpcy5ncm91cExpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS53aXBlKCl9KSk6dGhpcy5yb3dzLmZvckVhY2goKGU9PntlLm1vZHVsZXMmJmRlbGV0ZSBlLm1vZHVsZXMuZ3JvdXB9KSkpLHRoaXMuZWxlbWVudD0hMSx0aGlzLmFycm93RWxlbWVudD0hMSx0aGlzLmVsZW1lbnRDb250ZW50cz0hMX1jcmVhdGVFbGVtZW50cygpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2UuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWFycm93IiksdGhpcy5lbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3Itcm93IiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1ncm91cCIpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItZ3JvdXAtbGV2ZWwtIit0aGlzLmxldmVsKSx0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCJyb2xlIiwicm93Z3JvdXAiKSx0aGlzLmFycm93RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLmFycm93RWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItZ3JvdXAtdG9nZ2xlIiksdGhpcy5hcnJvd0VsZW1lbnQuYXBwZW5kQ2hpbGQoZSksITEhPT10aGlzLmdyb3VwTWFuYWdlci50YWJsZS5vcHRpb25zLm1vdmFibGVSb3dzJiZ0aGlzLmdyb3VwTWFuYWdlci50YWJsZS5tb2RFeGlzdHMoIm1vdmVSb3ciKSYmdGhpcy5ncm91cE1hbmFnZXIudGFibGUubW9kdWxlcy5tb3ZlUm93LmluaXRpYWxpemVHcm91cEhlYWRlcih0aGlzKX1jcmVhdGVWYWx1ZUdyb3Vwcygpe3ZhciBlPXRoaXMubGV2ZWwrMTt0aGlzLmdyb3VwTWFuYWdlci5hbGxvd2VkVmFsdWVzJiZ0aGlzLmdyb3VwTWFuYWdlci5hbGxvd2VkVmFsdWVzW2VdJiZ0aGlzLmdyb3VwTWFuYWdlci5hbGxvd2VkVmFsdWVzW2VdLmZvckVhY2goKHQ9Pnt0aGlzLl9jcmVhdGVHcm91cCh0LGUpfSkpfWFkZEJpbmRpbmdzKCl7dGhpcy5ncm91cE1hbmFnZXIudGFibGUub3B0aW9ucy5ncm91cFRvZ2dsZUVsZW1lbnQmJigiYXJyb3ciPT10aGlzLmdyb3VwTWFuYWdlci50YWJsZS5vcHRpb25zLmdyb3VwVG9nZ2xlRWxlbWVudD90aGlzLmFycm93RWxlbWVudDp0aGlzLmVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwoZT0+e2Uuc3RvcFByb3BhZ2F0aW9uKCksZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnRvZ2dsZVZpc2liaWxpdHkoKX0pKX1fY3JlYXRlR3JvdXAoZSx0KXt2YXIgaT10KyJfIitlLHM9bmV3IGRlKHRoaXMuZ3JvdXBNYW5hZ2VyLHRoaXMsdCxlLHRoaXMuZ3JvdXBNYW5hZ2VyLmdyb3VwSURMb29rdXBzW3RdLmZpZWxkLHRoaXMuZ3JvdXBNYW5hZ2VyLmhlYWRlckdlbmVyYXRvclt0XXx8dGhpcy5ncm91cE1hbmFnZXIuaGVhZGVyR2VuZXJhdG9yWzBdLCEhdGhpcy5vbGQmJnRoaXMub2xkLmdyb3Vwc1tpXSk7dGhpcy5ncm91cHNbaV09cyx0aGlzLmdyb3VwTGlzdC5wdXNoKHMpfV9hZGRSb3dUb0dyb3VwKGUpe3ZhciB0PXRoaXMubGV2ZWwrMTtpZih0aGlzLmhhc1N1Ykdyb3Vwcyl7dmFyIGk9dGhpcy5ncm91cE1hbmFnZXIuZ3JvdXBJRExvb2t1cHNbdF0uZnVuYyhlLmdldERhdGEoKSkscz10KyJfIitpO3RoaXMuZ3JvdXBNYW5hZ2VyLmFsbG93ZWRWYWx1ZXMmJnRoaXMuZ3JvdXBNYW5hZ2VyLmFsbG93ZWRWYWx1ZXNbdF0/dGhpcy5ncm91cHNbc10mJnRoaXMuZ3JvdXBzW3NdLmFkZFJvdyhlKToodGhpcy5ncm91cHNbc118fHRoaXMuX2NyZWF0ZUdyb3VwKGksdCksdGhpcy5ncm91cHNbc10uYWRkUm93KGUpKX19X2FkZFJvdyhlKXt0aGlzLnJvd3MucHVzaChlKSxlLm1vZHVsZXMuZ3JvdXA9dGhpc31pbnNlcnRSb3coZSx0LGkpe3ZhciBzPXRoaXMuY29uZm9ybVJvd0RhdGEoe30pO2UudXBkYXRlRGF0YShzKTt2YXIgbz10aGlzLnJvd3MuaW5kZXhPZih0KTtvPi0xP2k/dGhpcy5yb3dzLnNwbGljZShvKzEsMCxlKTp0aGlzLnJvd3Muc3BsaWNlKG8sMCxlKTppP3RoaXMucm93cy5wdXNoKGUpOnRoaXMucm93cy51bnNoaWZ0KGUpLGUubW9kdWxlcy5ncm91cD10aGlzLHRoaXMuZ3JvdXBNYW5hZ2VyLnRhYmxlLm1vZEV4aXN0cygiY29sdW1uQ2FsY3MiKSYmInRhYmxlIiE9dGhpcy5ncm91cE1hbmFnZXIudGFibGUub3B0aW9ucy5jb2x1bW5DYWxjcyYmdGhpcy5ncm91cE1hbmFnZXIudGFibGUubW9kdWxlcy5jb2x1bW5DYWxjcy5yZWNhbGNHcm91cCh0aGlzKSx0aGlzLmdyb3VwTWFuYWdlci51cGRhdGVHcm91cFJvd3MoITApfXNjcm9sbEhlYWRlcihlKXt0aGlzLmFycm93RWxlbWVudCYmKHRoaXMuYXJyb3dFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQ9ZSx0aGlzLmdyb3VwTGlzdC5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnNjcm9sbEhlYWRlcihlKX0pKSl9Z2V0Um93SW5kZXgoZSl7fWNvbmZvcm1Sb3dEYXRhKGUpe3JldHVybiB0aGlzLmZpZWxkP2VbdGhpcy5maWVsZF09dGhpcy5rZXk6Y29uc29sZS53YXJuKCJEYXRhIENvbmZvcm1pbmcgRXJyb3IgLSBDYW5ub3QgY29uZm9ybSByb3cgZGF0YSB0byBtYXRjaCBuZXcgZ3JvdXAgYXMgZ3JvdXBCeSBpcyBhIGZ1bmN0aW9uIiksdGhpcy5wYXJlbnQmJihlPXRoaXMucGFyZW50LmNvbmZvcm1Sb3dEYXRhKGUpKSxlfXJlbW92ZVJvdyhlKXt2YXIgdD10aGlzLnJvd3MuaW5kZXhPZihlKSxpPWUuZ2V0RWxlbWVudCgpO3Q+LTEmJnRoaXMucm93cy5zcGxpY2UodCwxKSx0aGlzLmdyb3VwTWFuYWdlci50YWJsZS5vcHRpb25zLmdyb3VwVmFsdWVzfHx0aGlzLnJvd3MubGVuZ3RoPyhpLnBhcmVudE5vZGUmJmkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpKSx0aGlzLmdyb3VwTWFuYWdlci5ibG9ja1JlZHJhd3x8KHRoaXMuZ2VuZXJhdGVHcm91cEhlYWRlckNvbnRlbnRzKCksdGhpcy5ncm91cE1hbmFnZXIudGFibGUubW9kRXhpc3RzKCJjb2x1bW5DYWxjcyIpJiYidGFibGUiIT10aGlzLmdyb3VwTWFuYWdlci50YWJsZS5vcHRpb25zLmNvbHVtbkNhbGNzJiZ0aGlzLmdyb3VwTWFuYWdlci50YWJsZS5tb2R1bGVzLmNvbHVtbkNhbGNzLnJlY2FsY0dyb3VwKHRoaXMpKSk6KHRoaXMucGFyZW50P3RoaXMucGFyZW50LnJlbW92ZUdyb3VwKHRoaXMpOnRoaXMuZ3JvdXBNYW5hZ2VyLnJlbW92ZUdyb3VwKHRoaXMpLHRoaXMuZ3JvdXBNYW5hZ2VyLnVwZGF0ZUdyb3VwUm93cyghMCkpfXJlbW92ZUdyb3VwKGUpe3ZhciB0LGk9ZS5sZXZlbCsiXyIrZS5rZXk7dGhpcy5ncm91cHNbaV0mJihkZWxldGUgdGhpcy5ncm91cHNbaV0sKHQ9dGhpcy5ncm91cExpc3QuaW5kZXhPZihlKSk+LTEmJnRoaXMuZ3JvdXBMaXN0LnNwbGljZSh0LDEpLHRoaXMuZ3JvdXBMaXN0Lmxlbmd0aHx8KHRoaXMucGFyZW50P3RoaXMucGFyZW50LnJlbW92ZUdyb3VwKHRoaXMpOnRoaXMuZ3JvdXBNYW5hZ2VyLnJlbW92ZUdyb3VwKHRoaXMpKSl9Z2V0SGVhZGVyc0FuZFJvd3MoKXt2YXIgZT1bXTtyZXR1cm4gZS5wdXNoKHRoaXMpLHRoaXMuX3Zpc1NldCgpLHRoaXMuY2FsY3MudG9wJiYodGhpcy5jYWxjcy50b3AuZGV0YWNoRWxlbWVudCgpLHRoaXMuY2FsY3MudG9wLmRlbGV0ZUNlbGxzKCkpLHRoaXMuY2FsY3MuYm90dG9tJiYodGhpcy5jYWxjcy5ib3R0b20uZGV0YWNoRWxlbWVudCgpLHRoaXMuY2FsY3MuYm90dG9tLmRlbGV0ZUNlbGxzKCkpLHRoaXMudmlzaWJsZT90aGlzLmdyb3VwTGlzdC5sZW5ndGg/dGhpcy5ncm91cExpc3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZT1lLmNvbmNhdCh0LmdldEhlYWRlcnNBbmRSb3dzKCkpfSkpOigidGFibGUiIT10aGlzLmdyb3VwTWFuYWdlci50YWJsZS5vcHRpb25zLmNvbHVtbkNhbGNzJiZ0aGlzLmdyb3VwTWFuYWdlci50YWJsZS5tb2RFeGlzdHMoImNvbHVtbkNhbGNzIikmJnRoaXMuZ3JvdXBNYW5hZ2VyLnRhYmxlLm1vZHVsZXMuY29sdW1uQ2FsY3MuaGFzVG9wQ2FsY3MoKSYmKHRoaXMuY2FsY3MudG9wPXRoaXMuZ3JvdXBNYW5hZ2VyLnRhYmxlLm1vZHVsZXMuY29sdW1uQ2FsY3MuZ2VuZXJhdGVUb3BSb3codGhpcy5yb3dzKSxlLnB1c2godGhpcy5jYWxjcy50b3ApKSxlPWUuY29uY2F0KHRoaXMucm93cyksInRhYmxlIiE9dGhpcy5ncm91cE1hbmFnZXIudGFibGUub3B0aW9ucy5jb2x1bW5DYWxjcyYmdGhpcy5ncm91cE1hbmFnZXIudGFibGUubW9kRXhpc3RzKCJjb2x1bW5DYWxjcyIpJiZ0aGlzLmdyb3VwTWFuYWdlci50YWJsZS5tb2R1bGVzLmNvbHVtbkNhbGNzLmhhc0JvdHRvbUNhbGNzKCkmJih0aGlzLmNhbGNzLmJvdHRvbT10aGlzLmdyb3VwTWFuYWdlci50YWJsZS5tb2R1bGVzLmNvbHVtbkNhbGNzLmdlbmVyYXRlQm90dG9tUm93KHRoaXMucm93cyksZS5wdXNoKHRoaXMuY2FsY3MuYm90dG9tKSkpOnRoaXMuZ3JvdXBMaXN0Lmxlbmd0aHx8InRhYmxlIj09dGhpcy5ncm91cE1hbmFnZXIudGFibGUub3B0aW9ucy5jb2x1bW5DYWxjc3x8dGhpcy5ncm91cE1hbmFnZXIudGFibGUubW9kRXhpc3RzKCJjb2x1bW5DYWxjcyIpJiYodGhpcy5ncm91cE1hbmFnZXIudGFibGUubW9kdWxlcy5jb2x1bW5DYWxjcy5oYXNUb3BDYWxjcygpJiZ0aGlzLmdyb3VwTWFuYWdlci50YWJsZS5vcHRpb25zLmdyb3VwQ2xvc2VkU2hvd0NhbGNzJiYodGhpcy5jYWxjcy50b3A9dGhpcy5ncm91cE1hbmFnZXIudGFibGUubW9kdWxlcy5jb2x1bW5DYWxjcy5nZW5lcmF0ZVRvcFJvdyh0aGlzLnJvd3MpLGUucHVzaCh0aGlzLmNhbGNzLnRvcCkpLHRoaXMuZ3JvdXBNYW5hZ2VyLnRhYmxlLm1vZHVsZXMuY29sdW1uQ2FsY3MuaGFzQm90dG9tQ2FsY3MoKSYmdGhpcy5ncm91cE1hbmFnZXIudGFibGUub3B0aW9ucy5ncm91cENsb3NlZFNob3dDYWxjcyYmKHRoaXMuY2FsY3MuYm90dG9tPXRoaXMuZ3JvdXBNYW5hZ2VyLnRhYmxlLm1vZHVsZXMuY29sdW1uQ2FsY3MuZ2VuZXJhdGVCb3R0b21Sb3codGhpcy5yb3dzKSxlLnB1c2godGhpcy5jYWxjcy5ib3R0b20pKSksZX1nZXREYXRhKGUsdCl7dmFyIGk9W107cmV0dXJuIHRoaXMuX3Zpc1NldCgpLCghZXx8ZSYmdGhpcy52aXNpYmxlKSYmdGhpcy5yb3dzLmZvckVhY2goKGU9PntpLnB1c2goZS5nZXREYXRhKHR8fCJkYXRhIikpfSkpLGl9Z2V0Um93Q291bnQoKXt2YXIgZT0wO3JldHVybiB0aGlzLmdyb3VwTGlzdC5sZW5ndGg/dGhpcy5ncm91cExpc3QuZm9yRWFjaCgodD0+e2UrPXQuZ2V0Um93Q291bnQoKX0pKTplPXRoaXMucm93cy5sZW5ndGgsZX10b2dnbGVWaXNpYmlsaXR5KCl7dGhpcy52aXNpYmxlP3RoaXMuaGlkZSgpOnRoaXMuc2hvdygpfWhpZGUoKXt0aGlzLnZpc2libGU9ITEsImJhc2ljIiE9dGhpcy5ncm91cE1hbmFnZXIudGFibGUucm93TWFuYWdlci5nZXRSZW5kZXJNb2RlKCl8fHRoaXMuZ3JvdXBNYW5hZ2VyLnRhYmxlLm9wdGlvbnMucGFnaW5hdGlvbnx8KHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJ0YWJ1bGF0b3ItZ3JvdXAtdmlzaWJsZSIpLHRoaXMuZ3JvdXBMaXN0Lmxlbmd0aD90aGlzLmdyb3VwTGlzdC5mb3JFYWNoKChlPT57ZS5nZXRIZWFkZXJzQW5kUm93cygpLmZvckVhY2goKGU9PntlLmRldGFjaEVsZW1lbnQoKX0pKX0pKTp0aGlzLnJvd3MuZm9yRWFjaCgoZT0+e3ZhciB0PWUuZ2V0RWxlbWVudCgpO3QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KX0pKSksdGhpcy5ncm91cE1hbmFnZXIudXBkYXRlR3JvdXBSb3dzKCEwKSx0aGlzLmdyb3VwTWFuYWdlci50YWJsZS5leHRlcm5hbEV2ZW50cy5kaXNwYXRjaCgiZ3JvdXBWaXNpYmlsaXR5Q2hhbmdlZCIsdGhpcy5nZXRDb21wb25lbnQoKSwhMSl9c2hvdygpe2lmKHRoaXMudmlzaWJsZT0hMCwiYmFzaWMiIT10aGlzLmdyb3VwTWFuYWdlci50YWJsZS5yb3dNYW5hZ2VyLmdldFJlbmRlck1vZGUoKXx8dGhpcy5ncm91cE1hbmFnZXIudGFibGUub3B0aW9ucy5wYWdpbmF0aW9uKXRoaXMuZ3JvdXBNYW5hZ2VyLnVwZGF0ZUdyb3VwUm93cyghMCk7ZWxzZXt0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWdyb3VwLXZpc2libGUiKTt2YXIgZT10aGlzLmdlbmVyYXRlRWxlbWVudCgpO3RoaXMuZ3JvdXBMaXN0Lmxlbmd0aD90aGlzLmdyb3VwTGlzdC5mb3JFYWNoKCh0PT57dC5nZXRIZWFkZXJzQW5kUm93cygpLmZvckVhY2goKHQ9Pnt2YXIgaT10LmdldEVsZW1lbnQoKTtlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGksZS5uZXh0U2libGluZyksdC5pbml0aWFsaXplKCksZT1pfSkpfSkpOnRoaXMucm93cy5mb3JFYWNoKCh0PT57dmFyIGk9dC5nZXRFbGVtZW50KCk7ZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpLGUubmV4dFNpYmxpbmcpLHQuaW5pdGlhbGl6ZSgpLGU9aX0pKSx0aGlzLmdyb3VwTWFuYWdlci51cGRhdGVHcm91cFJvd3MoITApfXRoaXMuZ3JvdXBNYW5hZ2VyLnRhYmxlLmV4dGVybmFsRXZlbnRzLmRpc3BhdGNoKCJncm91cFZpc2liaWxpdHlDaGFuZ2VkIix0aGlzLmdldENvbXBvbmVudCgpLCEwKX1fdmlzU2V0KCl7dmFyIGU9W107ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMudmlzaWJsZSYmKHRoaXMucm93cy5mb3JFYWNoKChmdW5jdGlvbih0KXtlLnB1c2godC5nZXREYXRhKCkpfSkpLHRoaXMudmlzaWJsZT10aGlzLnZpc2libGUodGhpcy5rZXksdGhpcy5nZXRSb3dDb3VudCgpLGUsdGhpcy5nZXRDb21wb25lbnQoKSkpfWdldFJvd0dyb3VwKGUpe3ZhciB0PSExO3JldHVybiB0aGlzLmdyb3VwTGlzdC5sZW5ndGg/dGhpcy5ncm91cExpc3QuZm9yRWFjaCgoZnVuY3Rpb24oaSl7dmFyIHM9aS5nZXRSb3dHcm91cChlKTtzJiYodD1zKX0pKTp0aGlzLnJvd3MuZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1lfSkpJiYodD10aGlzKSx0fWdldFN1Ykdyb3VwcyhlKXt2YXIgdD1bXTtyZXR1cm4gdGhpcy5ncm91cExpc3QuZm9yRWFjaCgoZnVuY3Rpb24oaSl7dC5wdXNoKGU/aS5nZXRDb21wb25lbnQoKTppKX0pKSx0fWdldFJvd3MoZSl7dmFyIHQ9W107cmV0dXJuIHRoaXMucm93cy5mb3JFYWNoKChmdW5jdGlvbihpKXt0LnB1c2goZT9pLmdldENvbXBvbmVudCgpOmkpfSkpLHR9Z2VuZXJhdGVHcm91cEhlYWRlckNvbnRlbnRzKCl7dmFyIGU9W107Zm9yKHRoaXMucm93cy5mb3JFYWNoKChmdW5jdGlvbih0KXtlLnB1c2godC5nZXREYXRhKCkpfSkpLHRoaXMuZWxlbWVudENvbnRlbnRzPXRoaXMuZ2VuZXJhdG9yKHRoaXMua2V5LHRoaXMuZ2V0Um93Q291bnQoKSxlLHRoaXMuZ2V0Q29tcG9uZW50KCkpO3RoaXMuZWxlbWVudC5maXJzdENoaWxkOyl0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpOyJzdHJpbmciPT10eXBlb2YgdGhpcy5lbGVtZW50Q29udGVudHM/dGhpcy5lbGVtZW50LmlubmVySFRNTD10aGlzLmVsZW1lbnRDb250ZW50czp0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50Q29udGVudHMpLHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5hcnJvd0VsZW1lbnQsdGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpfWdldFBhdGgoZT1bXSl7cmV0dXJuIGUudW5zaGlmdCh0aGlzLmtleSksdGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LmdldFBhdGgoZSksZX1nZXRFbGVtZW50KCl7cmV0dXJuIHRoaXMuZWxlbWVudENvbnRlbnRzP3RoaXMuZWxlbWVudDp0aGlzLmdlbmVyYXRlRWxlbWVudCgpfWdlbmVyYXRlRWxlbWVudCgpe3RoaXMuYWRkQmluZGluZ3M9ITEsdGhpcy5fdmlzU2V0KCksdGhpcy52aXNpYmxlP3RoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItZ3JvdXAtdmlzaWJsZSIpOnRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJ0YWJ1bGF0b3ItZ3JvdXAtdmlzaWJsZSIpO2Zvcih2YXIgZT0wO2U8dGhpcy5lbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOysrZSl0aGlzLmVsZW1lbnQuY2hpbGROb2Rlc1tlXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudC5jaGlsZE5vZGVzW2VdKTtyZXR1cm4gdGhpcy5nZW5lcmF0ZUdyb3VwSGVhZGVyQ29udGVudHMoKSx0aGlzLmVsZW1lbnR9ZGV0YWNoRWxlbWVudCgpe3RoaXMuZWxlbWVudCYmdGhpcy5lbGVtZW50LnBhcmVudE5vZGUmJnRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCl9bm9ybWFsaXplSGVpZ2h0KCl7dGhpcy5zZXRIZWlnaHQodGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCl9aW5pdGlhbGl6ZShlKXt0aGlzLmluaXRpYWxpemVkJiYhZXx8KHRoaXMubm9ybWFsaXplSGVpZ2h0KCksdGhpcy5pbml0aWFsaXplZD0hMCl9cmVpbml0aWFsaXplKCl7dGhpcy5pbml0aWFsaXplZD0hMSx0aGlzLmhlaWdodD0wLHIuZWxWaXNpYmxlKHRoaXMuZWxlbWVudCkmJnRoaXMuaW5pdGlhbGl6ZSghMCl9c2V0SGVpZ2h0KGUpe3RoaXMuaGVpZ2h0IT1lJiYodGhpcy5oZWlnaHQ9ZSx0aGlzLm91dGVySGVpZ2h0PXRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQpfWdldEhlaWdodCgpe3JldHVybiB0aGlzLm91dGVySGVpZ2h0fWdldEdyb3VwKCl7cmV0dXJuIHRoaXN9cmVpbml0aWFsaXplSGVpZ2h0KCl7fWNhbGNIZWlnaHQoKXt9c2V0Q2VsbEhlaWdodCgpe31jbGVhckNlbGxIZWlnaHQoKXt9ZGVpbml0aWFsaXplSGVpZ2h0KCl7fWdldENvbXBvbmVudCgpe3JldHVybiB0aGlzLmNvbXBvbmVudHx8KHRoaXMuY29tcG9uZW50PW5ldyBoZSh0aGlzKSksdGhpcy5jb21wb25lbnR9fWNsYXNzIGNlIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmdyb3VwSURMb29rdXBzPSExLHRoaXMuc3RhcnRPcGVuPVtmdW5jdGlvbigpe3JldHVybiExfV0sdGhpcy5oZWFkZXJHZW5lcmF0b3I9W2Z1bmN0aW9uKCl7cmV0dXJuIiJ9XSx0aGlzLmdyb3VwTGlzdD1bXSx0aGlzLmFsbG93ZWRWYWx1ZXM9ITEsdGhpcy5ncm91cHM9e30sdGhpcy5kaXNwbGF5SGFuZGxlcj10aGlzLmdldFJvd3MuYmluZCh0aGlzKSx0aGlzLmJsb2NrUmVkcmF3PSExLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiZ3JvdXBCeSIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiZ3JvdXBTdGFydE9wZW4iLCEwKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImdyb3VwVmFsdWVzIiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJncm91cFVwZGF0ZU9uQ2VsbEVkaXQiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImdyb3VwSGVhZGVyIiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJncm91cEhlYWRlclByaW50IixudWxsKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImdyb3VwSGVhZGVyQ2xpcGJvYXJkIixudWxsKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImdyb3VwSGVhZGVySHRtbE91dHB1dCIsbnVsbCksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJncm91cEhlYWRlckRvd25sb2FkIixudWxsKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImdyb3VwVG9nZ2xlRWxlbWVudCIsImFycm93IiksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJncm91cENsb3NlZFNob3dDYWxjcyIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJzZXRHcm91cEJ5Iix0aGlzLnNldEdyb3VwQnkuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oInNldEdyb3VwVmFsdWVzIix0aGlzLnNldEdyb3VwVmFsdWVzLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJzZXRHcm91cFN0YXJ0T3BlbiIsdGhpcy5zZXRHcm91cFN0YXJ0T3Blbi5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigic2V0R3JvdXBIZWFkZXIiLHRoaXMuc2V0R3JvdXBIZWFkZXIuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImdldEdyb3VwcyIsdGhpcy51c2VyR2V0R3JvdXBzLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJnZXRHcm91cGVkRGF0YSIsdGhpcy51c2VyR2V0R3JvdXBlZERhdGEuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJyb3ciLCJnZXRHcm91cCIsdGhpcy5yb3dHZXRHcm91cC5iaW5kKHRoaXMpKX1pbml0aWFsaXplKCl7dGhpcy5zdWJzY3JpYmUoInRhYmxlLWRlc3Ryb3kiLHRoaXMuX2Jsb2NrUmVkcmF3aW5nLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJyb3dzLXdpcGUiLHRoaXMuX2Jsb2NrUmVkcmF3aW5nLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJyb3dzLXdpcGVkIix0aGlzLl9yZXN0b3JlX3JlZHJhd2luZy5iaW5kKHRoaXMpKSx0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBCeSYmKHRoaXMudGFibGUub3B0aW9ucy5ncm91cFVwZGF0ZU9uQ2VsbEVkaXQmJih0aGlzLnN1YnNjcmliZSgiY2VsbC12YWx1ZS11cGRhdGVkIix0aGlzLmNlbGxVcGRhdGVkLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJyb3ctZGF0YS1jaGFuZ2VkIix0aGlzLnJlYXNzaWduUm93VG9Hcm91cC5iaW5kKHRoaXMpLDApKSx0aGlzLnN1YnNjcmliZSgidGFibGUtYnVpbHQiLHRoaXMuY29uZmlndXJlR3JvdXBTZXR1cC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgicm93LWRlbGV0aW5nIix0aGlzLnJvd0RlbGV0aW5nLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJyb3ctZGVsZXRlZCIsdGhpcy5yb3dzVXBkYXRlZC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgic2Nyb2xsLWhvcml6b250YWwiLHRoaXMuc2Nyb2xsSGVhZGVycy5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgicm93cy13aXBlIix0aGlzLndpcGUuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvd3MtYWRkZWQiLHRoaXMucm93c1VwZGF0ZWQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvdy1tb3ZpbmciLHRoaXMucm93TW92aW5nLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJyb3ctYWRkaW5nLWluZGV4Iix0aGlzLnJvd0FkZGluZ0luZGV4LmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJyb3dzLXNhbXBsZSIsdGhpcy5yb3dTYW1wbGUuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJlbmRlci12aXJ0dWFsLWZpbGwiLHRoaXMudmlydHVhbFJlbmRlckZpbGwuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckRpc3BsYXlIYW5kbGVyKHRoaXMuZGlzcGxheUhhbmRsZXIsMjApLHRoaXMuaW5pdGlhbGl6ZWQ9ITApfV9ibG9ja1JlZHJhd2luZygpe3RoaXMuYmxvY2tSZWRyYXc9ITB9X3Jlc3RvcmVfcmVkcmF3aW5nKCl7dGhpcy5ibG9ja1JlZHJhdz0hMX1jb25maWd1cmVHcm91cFNldHVwKCl7aWYodGhpcy50YWJsZS5vcHRpb25zLmdyb3VwQnkpe3ZhciBlPXRoaXMudGFibGUub3B0aW9ucy5ncm91cEJ5LHQ9dGhpcy50YWJsZS5vcHRpb25zLmdyb3VwU3RhcnRPcGVuLGk9dGhpcy50YWJsZS5vcHRpb25zLmdyb3VwSGVhZGVyO2lmKHRoaXMuYWxsb3dlZFZhbHVlcz10aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBWYWx1ZXMsQXJyYXkuaXNBcnJheShlKSYmQXJyYXkuaXNBcnJheShpKSYmZS5sZW5ndGg+aS5sZW5ndGgmJmNvbnNvbGUud2FybigiRXJyb3IgY3JlYXRpbmcgZ3JvdXAgaGVhZGVycywgZ3JvdXBIZWFkZXIgYXJyYXkgaXMgc2hvcnRlciB0aGFuIGdyb3VwQnkgYXJyYXkiKSx0aGlzLmhlYWRlckdlbmVyYXRvcj1bZnVuY3Rpb24oKXtyZXR1cm4iIn1dLHRoaXMuc3RhcnRPcGVuPVtmdW5jdGlvbigpe3JldHVybiExfV0sdGhpcy5sYW5nQmluZCgiZ3JvdXBzfGl0ZW0iLCgoZSx0KT0+e3RoaXMuaGVhZGVyR2VuZXJhdG9yWzBdPShpLHMsbyk9Pih2b2lkIDA9PT1pPyIiOmkpKyI8c3Bhbj4oIitzKyIgIisoMT09PXM/ZTp0Lmdyb3Vwcy5pdGVtcykrIik8L3NwYW4+In0pKSx0aGlzLmdyb3VwSURMb29rdXBzPVtdLGUpdGhpcy50YWJsZS5tb2RFeGlzdHMoImNvbHVtbkNhbGNzIikmJiJ0YWJsZSIhPXRoaXMudGFibGUub3B0aW9ucy5jb2x1bW5DYWxjcyYmImJvdGgiIT10aGlzLnRhYmxlLm9wdGlvbnMuY29sdW1uQ2FsY3MmJnRoaXMudGFibGUubW9kdWxlcy5jb2x1bW5DYWxjcy5yZW1vdmVDYWxjcygpO2Vsc2UgaWYodGhpcy50YWJsZS5tb2RFeGlzdHMoImNvbHVtbkNhbGNzIikmJiJncm91cCIhPXRoaXMudGFibGUub3B0aW9ucy5jb2x1bW5DYWxjcyl0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2V0UmVhbENvbHVtbnMoKS5mb3JFYWNoKChlPT57ZS5kZWZpbml0aW9uLnRvcENhbGMmJnRoaXMudGFibGUubW9kdWxlcy5jb2x1bW5DYWxjcy5pbml0aWFsaXplVG9wUm93KCksZS5kZWZpbml0aW9uLmJvdHRvbUNhbGMmJnRoaXMudGFibGUubW9kdWxlcy5jb2x1bW5DYWxjcy5pbml0aWFsaXplQm90dG9tUm93KCl9KSk7QXJyYXkuaXNBcnJheShlKXx8KGU9W2VdKSxlLmZvckVhY2goKChlLHQpPT57dmFyIGkscztpPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6KHM9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmdldENvbHVtbkJ5RmllbGQoZSkpP2Z1bmN0aW9uKGUpe3JldHVybiBzLmdldEZpZWxkVmFsdWUoZSl9OmZ1bmN0aW9uKHQpe3JldHVybiB0W2VdfSx0aGlzLmdyb3VwSURMb29rdXBzLnB1c2goe2ZpZWxkOiJmdW5jdGlvbiIhPXR5cGVvZiBlJiZlLGZ1bmM6aSx2YWx1ZXM6ISF0aGlzLmFsbG93ZWRWYWx1ZXMmJnRoaXMuYWxsb3dlZFZhbHVlc1t0XX0pfSkpLHQmJihBcnJheS5pc0FycmF5KHQpfHwodD1bdF0pLHQuZm9yRWFjaCgoZT0+e30pKSx0aGlzLnN0YXJ0T3Blbj10KSxpJiYodGhpcy5oZWFkZXJHZW5lcmF0b3I9QXJyYXkuaXNBcnJheShpKT9pOltpXSl9ZWxzZSB0aGlzLmdyb3VwTGlzdD1bXSx0aGlzLmdyb3Vwcz17fX1yb3dTYW1wbGUoZSx0KXtpZih0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBCeSl7dmFyIGk9dGhpcy5nZXRHcm91cHMoITEpWzBdO3QucHVzaChpLmdldFJvd3MoITEpWzBdKX1yZXR1cm4gdH12aXJ0dWFsUmVuZGVyRmlsbCgpe3ZhciBlPXRoaXMudGFibGUucm93TWFuYWdlci50YWJsZUVsZW1lbnQsdD10aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0VmlzaWJsZVJvd3MoKTtpZighdGhpcy50YWJsZS5vcHRpb25zLmdyb3VwQnkpcmV0dXJuIHQ7dD10LmZpbHRlcigoZT0+Imdyb3VwIiE9PWUudHlwZSkpLGUuc3R5bGUubWluV2lkdGg9dC5sZW5ndGg/IiI6dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmdldFdpZHRoKCkrInB4In1yb3dBZGRpbmdJbmRleChlLHQsaSl7aWYodGhpcy50YWJsZS5vcHRpb25zLmdyb3VwQnkpe3RoaXMuYXNzaWduUm93VG9Hcm91cChlKTt2YXIgcz1lLm1vZHVsZXMuZ3JvdXAucm93cztyZXR1cm4gcy5sZW5ndGg+MSYmKCF0fHx0JiYtMT09cy5pbmRleE9mKHQpP2k/c1swXSE9PWUmJih0PXNbMF0sdGhpcy50YWJsZS5yb3dNYW5hZ2VyLm1vdmVSb3dJbkFycmF5KGUubW9kdWxlcy5ncm91cC5yb3dzLGUsdCwhaSkpOnNbcy5sZW5ndGgtMV0hPT1lJiYodD1zW3MubGVuZ3RoLTFdLHRoaXMudGFibGUucm93TWFuYWdlci5tb3ZlUm93SW5BcnJheShlLm1vZHVsZXMuZ3JvdXAucm93cyxlLHQsIWkpKTp0aGlzLnRhYmxlLnJvd01hbmFnZXIubW92ZVJvd0luQXJyYXkoZS5tb2R1bGVzLmdyb3VwLnJvd3MsZSx0LCFpKSksdH19dHJhY2tDaGFuZ2VzKCl7dGhpcy5kaXNwYXRjaCgiZ3JvdXAtY2hhbmdlZCIpfXNldEdyb3VwQnkoZSl7dGhpcy50YWJsZS5vcHRpb25zLmdyb3VwQnk9ZSx0aGlzLmluaXRpYWxpemVkfHx0aGlzLmluaXRpYWxpemUoKSx0aGlzLmNvbmZpZ3VyZUdyb3VwU2V0dXAoKSwhZSYmdGhpcy50YWJsZS5tb2RFeGlzdHMoImNvbHVtbkNhbGNzIikmJiEwPT09dGhpcy50YWJsZS5vcHRpb25zLmNvbHVtbkNhbGNzJiZ0aGlzLnRhYmxlLm1vZHVsZXMuY29sdW1uQ2FsY3MucmVpbml0aWFsaXplQ2FsY3MoKSx0aGlzLnJlZnJlc2hEYXRhKCksdGhpcy50cmFja0NoYW5nZXMoKX1zZXRHcm91cFZhbHVlcyhlKXt0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBWYWx1ZXM9ZSx0aGlzLmNvbmZpZ3VyZUdyb3VwU2V0dXAoKSx0aGlzLnJlZnJlc2hEYXRhKCksdGhpcy50cmFja0NoYW5nZXMoKX1zZXRHcm91cFN0YXJ0T3BlbihlKXt0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBTdGFydE9wZW49ZSx0aGlzLmNvbmZpZ3VyZUdyb3VwU2V0dXAoKSx0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBCeT8odGhpcy5yZWZyZXNoRGF0YSgpLHRoaXMudHJhY2tDaGFuZ2VzKCkpOmNvbnNvbGUud2FybigiR3JvdXBpbmcgVXBkYXRlIC0gY2FudCByZWZyZXNoIHZpZXcsIG5vIGdyb3VwcyBoYXZlIGJlZW4gc2V0Iil9c2V0R3JvdXBIZWFkZXIoZSl7dGhpcy50YWJsZS5vcHRpb25zLmdyb3VwSGVhZGVyPWUsdGhpcy5jb25maWd1cmVHcm91cFNldHVwKCksdGhpcy50YWJsZS5vcHRpb25zLmdyb3VwQnk/KHRoaXMucmVmcmVzaERhdGEoKSx0aGlzLnRyYWNrQ2hhbmdlcygpKTpjb25zb2xlLndhcm4oIkdyb3VwaW5nIFVwZGF0ZSAtIGNhbnQgcmVmcmVzaCB2aWV3LCBubyBncm91cHMgaGF2ZSBiZWVuIHNldCIpfXVzZXJHZXRHcm91cHMoZSl7cmV0dXJuIHRoaXMuZ2V0R3JvdXBzKCEwKX11c2VyR2V0R3JvdXBlZERhdGEoKXtyZXR1cm4gdGhpcy50YWJsZS5vcHRpb25zLmdyb3VwQnk/dGhpcy5nZXRHcm91cGVkRGF0YSgpOnRoaXMuZ2V0RGF0YSgpfXJvd0dldEdyb3VwKGUpe3JldHVybiEhZS5tb2R1bGVzLmdyb3VwJiZlLm1vZHVsZXMuZ3JvdXAuZ2V0Q29tcG9uZW50KCl9cm93TW92aW5nKGUsdCxpKXtpZih0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBCeSl7IWkmJnQgaW5zdGFuY2VvZiBkZSYmKHQ9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLnByZXZEaXNwbGF5Um93KGUpfHx0KTt2YXIgcz10IGluc3RhbmNlb2YgZGU/dDp0Lm1vZHVsZXMuZ3JvdXAsbz1lIGluc3RhbmNlb2YgZGU/ZTplLm1vZHVsZXMuZ3JvdXA7cz09PW8/dGhpcy50YWJsZS5yb3dNYW5hZ2VyLm1vdmVSb3dJbkFycmF5KHMucm93cyxlLHQsaSk6KG8mJm8ucmVtb3ZlUm93KGUpLHMuaW5zZXJ0Um93KGUsdCxpKSl9fXJvd0RlbGV0aW5nKGUpe3RoaXMudGFibGUub3B0aW9ucy5ncm91cEJ5JiZlLm1vZHVsZXMuZ3JvdXAmJmUubW9kdWxlcy5ncm91cC5yZW1vdmVSb3coZSl9cm93c1VwZGF0ZWQoZSl7dGhpcy50YWJsZS5vcHRpb25zLmdyb3VwQnkmJnRoaXMudXBkYXRlR3JvdXBSb3dzKCEwKX1jZWxsVXBkYXRlZChlKXt0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBCeSYmdGhpcy5yZWFzc2lnblJvd1RvR3JvdXAoZS5yb3cpfWdldFJvd3MoZSl7cmV0dXJuIHRoaXMudGFibGUub3B0aW9ucy5ncm91cEJ5JiZ0aGlzLmdyb3VwSURMb29rdXBzLmxlbmd0aD8odGhpcy5kaXNwYXRjaEV4dGVybmFsKCJkYXRhR3JvdXBpbmciKSx0aGlzLmdlbmVyYXRlR3JvdXBzKGUpLHRoaXMuc3Vic2NyaWJlZEV4dGVybmFsKCJkYXRhR3JvdXBlZCIpJiZ0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoImRhdGFHcm91cGVkIix0aGlzLmdldEdyb3VwcyghMCkpLHRoaXMudXBkYXRlR3JvdXBSb3dzKCkpOmUuc2xpY2UoMCl9Z2V0R3JvdXBzKGUpe3ZhciB0PVtdO3JldHVybiB0aGlzLmdyb3VwTGlzdC5mb3JFYWNoKChmdW5jdGlvbihpKXt0LnB1c2goZT9pLmdldENvbXBvbmVudCgpOmkpfSkpLHR9Z2V0Q2hpbGRHcm91cHMoZSl7dmFyIHQ9W107cmV0dXJuIGV8fChlPXRoaXMpLGUuZ3JvdXBMaXN0LmZvckVhY2goKGU9PntlLmdyb3VwTGlzdC5sZW5ndGg/dD10LmNvbmNhdCh0aGlzLmdldENoaWxkR3JvdXBzKGUpKTp0LnB1c2goZSl9KSksdH13aXBlKCl7dGhpcy50YWJsZS5vcHRpb25zLmdyb3VwQnkmJih0aGlzLmdyb3VwTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLndpcGUoKX0pKSx0aGlzLmdyb3VwTGlzdD1bXSx0aGlzLmdyb3Vwcz17fSl9cHVsbEdyb3VwTGlzdERhdGEoZSl7dmFyIHQ9W107cmV0dXJuIGUuZm9yRWFjaCgoZT0+e3ZhciBpPXtsZXZlbDowLHJvd0NvdW50OjAsaGVhZGVyQ29udGVudDoiIn0scz1bXTtlLmhhc1N1Ykdyb3Vwcz8ocz10aGlzLnB1bGxHcm91cExpc3REYXRhKGUuZ3JvdXBMaXN0KSxpLmxldmVsPWUubGV2ZWwsaS5yb3dDb3VudD1zLmxlbmd0aC1lLmdyb3VwTGlzdC5sZW5ndGgsaS5oZWFkZXJDb250ZW50PWUuZ2VuZXJhdG9yKGUua2V5LGkucm93Q291bnQsZS5yb3dzLGUpLHQucHVzaChpKSx0PXQuY29uY2F0KHMpKTooaS5sZXZlbD1lLmxldmVsLGkuaGVhZGVyQ29udGVudD1lLmdlbmVyYXRvcihlLmtleSxlLnJvd3MubGVuZ3RoLGUucm93cyxlKSxpLnJvd0NvdW50PWUuZ2V0Um93cygpLmxlbmd0aCx0LnB1c2goaSksZS5nZXRSb3dzKCkuZm9yRWFjaCgoZT0+e3QucHVzaChlLmdldERhdGEoImRhdGEiKSl9KSkpfSkpLHR9Z2V0R3JvdXBlZERhdGEoKXtyZXR1cm4gdGhpcy5wdWxsR3JvdXBMaXN0RGF0YSh0aGlzLmdyb3VwTGlzdCl9Z2V0Um93R3JvdXAoZSl7dmFyIHQ9ITE7cmV0dXJuIHRoaXMub3B0aW9ucygiZGF0YVRyZWUiKSYmKGU9dGhpcy50YWJsZS5tb2R1bGVzLmRhdGFUcmVlLmdldFRyZWVQYXJlbnRSb290KGUpKSx0aGlzLmdyb3VwTGlzdC5mb3JFYWNoKChpPT57dmFyIHM9aS5nZXRSb3dHcm91cChlKTtzJiYodD1zKX0pKSx0fWNvdW50R3JvdXBzKCl7cmV0dXJuIHRoaXMuZ3JvdXBMaXN0Lmxlbmd0aH1nZW5lcmF0ZUdyb3VwcyhlKXt2YXIgdD10aGlzLmdyb3Vwczt0aGlzLmdyb3Vwcz17fSx0aGlzLmdyb3VwTGlzdD1bXSx0aGlzLmFsbG93ZWRWYWx1ZXMmJnRoaXMuYWxsb3dlZFZhbHVlc1swXT8odGhpcy5hbGxvd2VkVmFsdWVzWzBdLmZvckVhY2goKGU9Pnt0aGlzLmNyZWF0ZUdyb3VwKGUsMCx0KX0pKSxlLmZvckVhY2goKGU9Pnt0aGlzLmFzc2lnblJvd1RvRXhpc3RpbmdHcm91cChlLHQpfSkpKTplLmZvckVhY2goKGU9Pnt0aGlzLmFzc2lnblJvd1RvR3JvdXAoZSx0KX0pKSxPYmplY3QudmFsdWVzKHQpLmZvckVhY2goKGU9PntlLndpcGUoITApfSkpfWNyZWF0ZUdyb3VwKGUsdCxpKXt2YXIgcyxvPXQrIl8iK2U7aT1pfHxbXSxzPW5ldyBkZSh0aGlzLCExLHQsZSx0aGlzLmdyb3VwSURMb29rdXBzWzBdLmZpZWxkLHRoaXMuaGVhZGVyR2VuZXJhdG9yWzBdLGlbb10pLHRoaXMuZ3JvdXBzW29dPXMsdGhpcy5ncm91cExpc3QucHVzaChzKX1hc3NpZ25Sb3dUb0V4aXN0aW5nR3JvdXAoZSx0KXt2YXIgaT0iMF8iK3RoaXMuZ3JvdXBJRExvb2t1cHNbMF0uZnVuYyhlLmdldERhdGEoKSk7dGhpcy5ncm91cHNbaV0mJnRoaXMuZ3JvdXBzW2ldLmFkZFJvdyhlKX1hc3NpZ25Sb3dUb0dyb3VwKGUsdCl7dmFyIGk9dGhpcy5ncm91cElETG9va3Vwc1swXS5mdW5jKGUuZ2V0RGF0YSgpKSxzPSF0aGlzLmdyb3Vwc1siMF8iK2ldO3JldHVybiBzJiZ0aGlzLmNyZWF0ZUdyb3VwKGksMCx0KSx0aGlzLmdyb3Vwc1siMF8iK2ldLmFkZFJvdyhlKSwhc31yZWFzc2lnblJvd1RvR3JvdXAoZSl7aWYoInJvdyI9PT1lLnR5cGUpe3ZhciB0PWUubW9kdWxlcy5ncm91cCxpPXQuZ2V0UGF0aCgpLHM9dGhpcy5nZXRFeHBlY3RlZFBhdGgoZSk7aS5sZW5ndGg9PXMubGVuZ3RoJiZpLmV2ZXJ5KCgoZSx0KT0+ZT09PXNbdF0pKXx8KHQucmVtb3ZlUm93KGUpLHRoaXMuYXNzaWduUm93VG9Hcm91cChlLHRoaXMuZ3JvdXBzKSx0aGlzLnJlZnJlc2hEYXRhKCEwKSl9fWdldEV4cGVjdGVkUGF0aChlKXt2YXIgdD1bXSxpPWUuZ2V0RGF0YSgpO3JldHVybiB0aGlzLmdyb3VwSURMb29rdXBzLmZvckVhY2goKGU9Pnt0LnB1c2goZS5mdW5jKGkpKX0pKSx0fXVwZGF0ZUdyb3VwUm93cyhlKXt2YXIgdD1bXTtyZXR1cm4gdGhpcy5ibG9ja1JlZHJhd3x8KHRoaXMuZ3JvdXBMaXN0LmZvckVhY2goKGU9Pnt0PXQuY29uY2F0KGUuZ2V0SGVhZGVyc0FuZFJvd3MoKSl9KSksZSYmdGhpcy5yZWZyZXNoRGF0YSghMCkpLHR9c2Nyb2xsSGVhZGVycyhlKXt0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBCeSYmKCJ2aXJ0dWFsIj09PXRoaXMudGFibGUub3B0aW9ucy5yZW5kZXJIb3Jpem9udGFsJiYoZS09dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLnJlbmRlcmVyLnZEb21QYWRMZWZ0KSxlKz0icHgiLHRoaXMuZ3JvdXBMaXN0LmZvckVhY2goKHQ9Pnt0LnNjcm9sbEhlYWRlcihlKX0pKSl9cmVtb3ZlR3JvdXAoZSl7dmFyIHQsaT1lLmxldmVsKyJfIitlLmtleTt0aGlzLmdyb3Vwc1tpXSYmKGRlbGV0ZSB0aGlzLmdyb3Vwc1tpXSwodD10aGlzLmdyb3VwTGlzdC5pbmRleE9mKGUpKT4tMSYmdGhpcy5ncm91cExpc3Quc3BsaWNlKHQsMSkpfWNoZWNrQmFzaWNNb2RlR3JvdXBIZWFkZXJXaWR0aCgpe3ZhciBlPXRoaXMudGFibGUucm93TWFuYWdlci50YWJsZUVsZW1lbnQsdD0hMDt0aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0RGlzcGxheVJvd3MoKS5mb3JFYWNoKCgoaSxzKT0+e3RoaXMudGFibGUucm93TWFuYWdlci5zdHlsZVJvdyhpLHMpLGUuYXBwZW5kQ2hpbGQoaS5nZXRFbGVtZW50KCkpLGkuaW5pdGlhbGl6ZSghMCksImdyb3VwIiE9PWkudHlwZSYmKHQ9ITEpfSkpLGUuc3R5bGUubWluV2lkdGg9dD90aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2V0V2lkdGgoKSsicHgiOiIifX1jZS5tb2R1bGVOYW1lPSJncm91cFJvd3MiO2NsYXNzIHVlIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmhpc3Rvcnk9W10sdGhpcy5pbmRleD0tMSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImhpc3RvcnkiLCExKX1pbml0aWFsaXplKCl7dGhpcy50YWJsZS5vcHRpb25zLmhpc3RvcnkmJih0aGlzLnN1YnNjcmliZSgiY2VsbC12YWx1ZS11cGRhdGVkIix0aGlzLmNlbGxVcGRhdGVkLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjZWxsLWRlbGV0ZSIsdGhpcy5jbGVhckNvbXBvbmVudEhpc3RvcnkuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvdy1kZWxldGUiLHRoaXMucm93RGVsZXRlZC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgicm93cy13aXBlIix0aGlzLmNsZWFyLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJyb3ctYWRkZWQiLHRoaXMucm93QWRkZWQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvdy1tb3ZlIix0aGlzLnJvd01vdmVkLmJpbmQodGhpcykpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigidW5kbyIsdGhpcy51bmRvLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJyZWRvIix0aGlzLnJlZG8uYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImdldEhpc3RvcnlVbmRvU2l6ZSIsdGhpcy5nZXRIaXN0b3J5VW5kb1NpemUuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImdldEhpc3RvcnlSZWRvU2l6ZSIsdGhpcy5nZXRIaXN0b3J5UmVkb1NpemUuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImNsZWFySGlzdG9yeSIsdGhpcy5jbGVhci5iaW5kKHRoaXMpKX1yb3dNb3ZlZChlLHQsaSl7dGhpcy5hY3Rpb24oInJvd01vdmUiLGUse3Bvc0Zyb206ZS5nZXRQb3NpdGlvbigpLHBvc1RvOnQuZ2V0UG9zaXRpb24oKSx0bzp0LGFmdGVyOml9KX1yb3dBZGRlZChlLHQsaSxzKXt0aGlzLmFjdGlvbigicm93QWRkIixlLHtkYXRhOnQscG9zOmksaW5kZXg6c30pfXJvd0RlbGV0ZWQoZSl7dmFyIHQsaTt0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBCeT8odD0oaT1lLmdldENvbXBvbmVudCgpLmdldEdyb3VwKCkuX2dldFNlbGYoKS5yb3dzKS5pbmRleE9mKGUpKSYmKHQ9aVt0LTFdKToodD1lLnRhYmxlLnJvd01hbmFnZXIuZ2V0Um93SW5kZXgoZSkpJiYodD1lLnRhYmxlLnJvd01hbmFnZXIucm93c1t0LTFdKSx0aGlzLmFjdGlvbigicm93RGVsZXRlIixlLHtkYXRhOmUuZ2V0RGF0YSgpLHBvczohdCxpbmRleDp0fSl9Y2VsbFVwZGF0ZWQoZSl7dGhpcy5hY3Rpb24oImNlbGxFZGl0IixlLHtvbGRWYWx1ZTplLm9sZFZhbHVlLG5ld1ZhbHVlOmUudmFsdWV9KX1jbGVhcigpe3RoaXMuaGlzdG9yeT1bXSx0aGlzLmluZGV4PS0xfWFjdGlvbihlLHQsaSl7dGhpcy5oaXN0b3J5PXRoaXMuaGlzdG9yeS5zbGljZSgwLHRoaXMuaW5kZXgrMSksdGhpcy5oaXN0b3J5LnB1c2goe3R5cGU6ZSxjb21wb25lbnQ6dCxkYXRhOml9KSx0aGlzLmluZGV4Kyt9Z2V0SGlzdG9yeVVuZG9TaXplKCl7cmV0dXJuIHRoaXMuaW5kZXgrMX1nZXRIaXN0b3J5UmVkb1NpemUoKXtyZXR1cm4gdGhpcy5oaXN0b3J5Lmxlbmd0aC0odGhpcy5pbmRleCsxKX1jbGVhckNvbXBvbmVudEhpc3RvcnkoZSl7dmFyIHQ9dGhpcy5oaXN0b3J5LmZpbmRJbmRleCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY29tcG9uZW50PT09ZX0pKTt0Pi0xJiYodGhpcy5oaXN0b3J5LnNwbGljZSh0LDEpLHQ8PXRoaXMuaW5kZXgmJnRoaXMuaW5kZXgtLSx0aGlzLmNsZWFyQ29tcG9uZW50SGlzdG9yeShlKSl9dW5kbygpe2lmKHRoaXMuaW5kZXg+LTEpe2xldCBlPXRoaXMuaGlzdG9yeVt0aGlzLmluZGV4XTtyZXR1cm4gdWUudW5kb2Vyc1tlLnR5cGVdLmNhbGwodGhpcyxlKSx0aGlzLmluZGV4LS0sdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJoaXN0b3J5VW5kbyIsZS50eXBlLGUuY29tcG9uZW50LmdldENvbXBvbmVudCgpLGUuZGF0YSksITB9cmV0dXJuIGNvbnNvbGUud2FybigiSGlzdG9yeSBVbmRvIEVycm9yIC0gTm8gbW9yZSBoaXN0b3J5IHRvIHVuZG8iKSwhMX1yZWRvKCl7aWYodGhpcy5oaXN0b3J5Lmxlbmd0aC0xPnRoaXMuaW5kZXgpe3RoaXMuaW5kZXgrKztsZXQgZT10aGlzLmhpc3RvcnlbdGhpcy5pbmRleF07cmV0dXJuIHVlLnJlZG9lcnNbZS50eXBlXS5jYWxsKHRoaXMsZSksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJoaXN0b3J5UmVkbyIsZS50eXBlLGUuY29tcG9uZW50LmdldENvbXBvbmVudCgpLGUuZGF0YSksITB9cmV0dXJuIGNvbnNvbGUud2FybigiSGlzdG9yeSBSZWRvIEVycm9yIC0gTm8gbW9yZSBoaXN0b3J5IHRvIHJlZG8iKSwhMX1fcmViaW5kUm93KGUsdCl7dGhpcy5oaXN0b3J5LmZvckVhY2goKGZ1bmN0aW9uKGkpe2lmKGkuY29tcG9uZW50IGluc3RhbmNlb2YgcClpLmNvbXBvbmVudD09PWUmJihpLmNvbXBvbmVudD10KTtlbHNlIGlmKGkuY29tcG9uZW50IGluc3RhbmNlb2YgbyYmaS5jb21wb25lbnQucm93PT09ZSl7dmFyIHM9aS5jb21wb25lbnQuY29sdW1uLmdldEZpZWxkKCk7cyYmKGkuY29tcG9uZW50PXQuZ2V0Q2VsbChzKSl9fSkpfX11ZS5tb2R1bGVOYW1lPSJoaXN0b3J5Iix1ZS51bmRvZXJzPXtjZWxsRWRpdDpmdW5jdGlvbihlKXtlLmNvbXBvbmVudC5zZXRWYWx1ZVByb2Nlc3NEYXRhKGUuZGF0YS5vbGRWYWx1ZSksZS5jb21wb25lbnQuY2VsbFJlbmRlcmVkKCl9LHJvd0FkZDpmdW5jdGlvbihlKXtlLmNvbXBvbmVudC5kZWxldGVBY3R1YWwoKX0scm93RGVsZXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudGFibGUucm93TWFuYWdlci5hZGRSb3dBY3R1YWwoZS5kYXRhLmRhdGEsZS5kYXRhLnBvcyxlLmRhdGEuaW5kZXgpO3RoaXMudGFibGUub3B0aW9ucy5ncm91cEJ5JiZ0aGlzLnRhYmxlLm1vZEV4aXN0cygiZ3JvdXBSb3dzIikmJnRoaXMudGFibGUubW9kdWxlcy5ncm91cFJvd3MudXBkYXRlR3JvdXBSb3dzKCEwKSx0aGlzLl9yZWJpbmRSb3coZS5jb21wb25lbnQsdCl9LHJvd01vdmU6ZnVuY3Rpb24oZSl7dGhpcy50YWJsZS5yb3dNYW5hZ2VyLm1vdmVSb3dBY3R1YWwoZS5jb21wb25lbnQsdGhpcy50YWJsZS5yb3dNYW5hZ2VyLnJvd3NbZS5kYXRhLnBvc0Zyb21dLCFlLmRhdGEuYWZ0ZXIpLHRoaXMudGFibGUucm93TWFuYWdlci5yZWRyYXcoKX19LHVlLnJlZG9lcnM9e2NlbGxFZGl0OmZ1bmN0aW9uKGUpe2UuY29tcG9uZW50LnNldFZhbHVlUHJvY2Vzc0RhdGEoZS5kYXRhLm5ld1ZhbHVlKSxlLmNvbXBvbmVudC5jZWxsUmVuZGVyZWQoKX0scm93QWRkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudGFibGUucm93TWFuYWdlci5hZGRSb3dBY3R1YWwoZS5kYXRhLmRhdGEsZS5kYXRhLnBvcyxlLmRhdGEuaW5kZXgpO3RoaXMudGFibGUub3B0aW9ucy5ncm91cEJ5JiZ0aGlzLnRhYmxlLm1vZEV4aXN0cygiZ3JvdXBSb3dzIikmJnRoaXMudGFibGUubW9kdWxlcy5ncm91cFJvd3MudXBkYXRlR3JvdXBSb3dzKCEwKSx0aGlzLl9yZWJpbmRSb3coZS5jb21wb25lbnQsdCl9LHJvd0RlbGV0ZTpmdW5jdGlvbihlKXtlLmNvbXBvbmVudC5kZWxldGVBY3R1YWwoKX0scm93TW92ZTpmdW5jdGlvbihlKXt0aGlzLnRhYmxlLnJvd01hbmFnZXIubW92ZVJvd0FjdHVhbChlLmNvbXBvbmVudCx0aGlzLnRhYmxlLnJvd01hbmFnZXIucm93c1tlLmRhdGEucG9zVG9dLGUuZGF0YS5hZnRlciksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLnJlZHJhdygpfX07Y2xhc3MgcGUgZXh0ZW5kcyBre2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuZmllbGRJbmRleD1bXSx0aGlzLmhhc0luZGV4PSExfWluaXRpYWxpemUoKXt0aGlzLnRhYmxlRWxlbWVudENoZWNrKCl9dGFibGVFbGVtZW50Q2hlY2soKXt0aGlzLnRhYmxlLm9yaWdpbmFsRWxlbWVudCYmIlRBQkxFIj09PXRoaXMudGFibGUub3JpZ2luYWxFbGVtZW50LnRhZ05hbWUmJih0aGlzLnRhYmxlLm9yaWdpbmFsRWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aD90aGlzLnBhcnNlVGFibGUoKTpjb25zb2xlLndhcm4oIlVuYWJsZSB0byBwYXJzZSBkYXRhIGZyb20gZW1wdHkgdGFibGUgdGFnLCBUYWJ1bGF0b3Igc2hvdWxkIGJlIGluaXRpYWxpemVkIG9uIGEgZGl2IHRhZyB1bmxlc3MgaW1wb3J0aW5nIGRhdGEgZnJvbSBhIHRhYmxlIGVsZW1lbnQuIikpfXBhcnNlVGFibGUoKXt2YXIgZT10aGlzLnRhYmxlLm9yaWdpbmFsRWxlbWVudCx0PXRoaXMudGFibGUub3B0aW9ucyxpPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRoIikscz1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdLG89W107dGhpcy5oYXNJbmRleD0hMSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoImh0bWxJbXBvcnRpbmciKSxzPXM/cy5nZXRFbGVtZW50c0J5VGFnTmFtZSgidHIiKTpbXSx0aGlzLl9leHRyYWN0T3B0aW9ucyhlLHQpLGkubGVuZ3RoP3RoaXMuX2V4dHJhY3RIZWFkZXJzKGkscyk6dGhpcy5fZ2VuZXJhdGVCbGFua0hlYWRlcnMoaSxzKTtmb3IodmFyIG49MDtuPHMubGVuZ3RoO24rKyl7dmFyIHI9c1tuXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKSxhPXt9O3RoaXMuaGFzSW5kZXh8fChhW3QuaW5kZXhdPW4pO2Zvcih2YXIgbD0wO2w8ci5sZW5ndGg7bCsrKXt2YXIgaD1yW2xdO3ZvaWQgMCE9PXRoaXMuZmllbGRJbmRleFtsXSYmKGFbdGhpcy5maWVsZEluZGV4W2xdXT1oLmlubmVySFRNTCl9by5wdXNoKGEpfXQuZGF0YT1vLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgiaHRtbEltcG9ydGVkIil9X2V4dHJhY3RPcHRpb25zKGUsdCxpKXt2YXIgcz1lLmF0dHJpYnV0ZXMsbz1pP09iamVjdC5rZXlzKGkpOk9iamVjdC5rZXlzKHQpLG49e307Zm9yKHZhciByIGluIG8uZm9yRWFjaCgoZT0+e25bZS50b0xvd2VyQ2FzZSgpXT1lfSkpLHMpe3ZhciBhLGw9c1tyXTtsJiYib2JqZWN0Ij09dHlwZW9mIGwmJmwubmFtZSYmMD09PWwubmFtZS5pbmRleE9mKCJ0YWJ1bGF0b3ItIikmJihhPWwubmFtZS5yZXBsYWNlKCJ0YWJ1bGF0b3ItIiwiIiksdm9pZCAwIT09blthXSYmKHRbblthXV09dGhpcy5fYXR0cmliVmFsdWUobC52YWx1ZSkpKX19X2F0dHJpYlZhbHVlKGUpe3JldHVybiJ0cnVlIj09PWV8fCJmYWxzZSIhPT1lJiZlfV9maW5kQ29sKGUpe3JldHVybiB0aGlzLnRhYmxlLm9wdGlvbnMuY29sdW1ucy5maW5kKCh0PT50LnRpdGxlPT09ZSkpfHwhMX1fZXh0cmFjdEhlYWRlcnMoZSx0KXtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIHMsbz1lW2ldLG49ITEscj10aGlzLl9maW5kQ29sKG8udGV4dENvbnRlbnQpO3I/bj0hMDpyPXt0aXRsZTpvLnRleHRDb250ZW50LnRyaW0oKX0sci5maWVsZHx8KHIuZmllbGQ9by50ZXh0Q29udGVudC50cmltKCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCIgIiwiXyIpKSwocz1vLmdldEF0dHJpYnV0ZSgid2lkdGgiKSkmJiFyLndpZHRoJiYoci53aWR0aD1zKSx0aGlzLl9leHRyYWN0T3B0aW9ucyhvLHIsdGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLm9wdGlvbnNMaXN0LnJlZ2lzdGVyZWREZWZhdWx0cyksdGhpcy5maWVsZEluZGV4W2ldPXIuZmllbGQsci5maWVsZD09dGhpcy50YWJsZS5vcHRpb25zLmluZGV4JiYodGhpcy5oYXNJbmRleD0hMCksbnx8dGhpcy50YWJsZS5vcHRpb25zLmNvbHVtbnMucHVzaChyKX19X2dlbmVyYXRlQmxhbmtIZWFkZXJzKGUsdCl7Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe3ZhciBzPWVbaV0sbz17dGl0bGU6IiIsZmllbGQ6ImNvbCIraX07dGhpcy5maWVsZEluZGV4W2ldPW8uZmllbGQ7dmFyIG49cy5nZXRBdHRyaWJ1dGUoIndpZHRoIik7biYmKG8ud2lkdGg9biksdGhpcy50YWJsZS5vcHRpb25zLmNvbHVtbnMucHVzaChvKX19fXBlLm1vZHVsZU5hbWU9Imh0bWxUYWJsZUltcG9ydCI7dmFyIG1lPXtjc3Y6ZnVuY3Rpb24oZSl7dmFyIHQ9W10saT0wLHM9MCxvPSExO2ZvcihsZXQgbj0wO248ZS5sZW5ndGg7bisrKXtsZXQgcj1lW25dLGE9ZVtuKzFdO3RbaV18fCh0W2ldPVtdKSx0W2ldW3NdfHwodFtpXVtzXT0iIiksJyInPT1yJiZvJiYnIic9PWE/KHRbaV1bc10rPXIsbisrKTonIichPXI/IiwiIT1yfHxvPyJcciIhPXJ8fCJcbiIhPWF8fG8/IlxyIiE9ciYmIlxuIiE9cnx8bz90W2ldW3NdKz1yOihzPTAsaSsrKToocz0wLGkrKyxuKyspOnMrKzpvPSFvfXJldHVybiB0fSxqc29uOmZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gSlNPTi5wYXJzZShlKX1jYXRjaChlKXtyZXR1cm4gY29uc29sZS53YXJuKCJKU09OIEltcG9ydCBFcnJvciAtIEZpbGUgY29udGVudHMgaXMgaW52YWxpZCBKU09OIixlKSxQcm9taXNlLnJlamVjdCgpfX0sYXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fTtjbGFzcyBnZSBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJpbXBvcnRGb3JtYXQiKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImltcG9ydFJlYWRlciIsInRleHQiKX1pbml0aWFsaXplKCl7dGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImltcG9ydCIsdGhpcy5pbXBvcnRGcm9tRmlsZS5iaW5kKHRoaXMpKSx0aGlzLnRhYmxlLm9wdGlvbnMuaW1wb3J0Rm9ybWF0JiYodGhpcy5zdWJzY3JpYmUoImRhdGEtbG9hZGluZyIsdGhpcy5sb2FkRGF0YUNoZWNrLmJpbmQodGhpcyksMTApLHRoaXMuc3Vic2NyaWJlKCJkYXRhLWxvYWQiLHRoaXMubG9hZERhdGEuYmluZCh0aGlzKSwxMCkpfWxvYWREYXRhQ2hlY2soZSl7cmV0dXJuIHRoaXMudGFibGUub3B0aW9ucy5pbXBvcnRGb3JtYXQmJigic3RyaW5nIj09dHlwZW9mIGV8fEFycmF5LmlzQXJyYXkoZSkmJmUubGVuZ3RoJiZBcnJheS5pc0FycmF5KGUpKX1sb2FkRGF0YShlLHQsaSxzLG8pe3JldHVybiB0aGlzLmltcG9ydERhdGEodGhpcy5sb29rdXBJbXBvcnRlcigpLGUpLnRoZW4odGhpcy5zdHJ1Y3R1cmVEYXRhLmJpbmQodGhpcykpLmNhdGNoKChlPT4oY29uc29sZS5lcnJvcigiSW1wb3J0IEVycm9yOiIsZXx8IlVuYWJsZSB0byBpbXBvcnQgZGF0YSIpLFByb21pc2UucmVqZWN0KGUpKSkpfWxvb2t1cEltcG9ydGVyKGUpe3ZhciB0O3JldHVybiBlfHwoZT10aGlzLnRhYmxlLm9wdGlvbnMuaW1wb3J0Rm9ybWF0KSwodD0ic3RyaW5nIj09dHlwZW9mIGU/Z2UuaW1wb3J0ZXJzW2VdOmUpfHxjb25zb2xlLmVycm9yKCJJbXBvcnQgRXJyb3IgLSBJbXBvcnRlciBub3QgZm91bmQ6IixlKSx0fWltcG9ydEZyb21GaWxlKGUsdCl7dmFyIGk9dGhpcy5sb29rdXBJbXBvcnRlcihlKTtpZihpKXJldHVybiB0aGlzLnBpY2tGaWxlKHQpLnRoZW4odGhpcy5pbXBvcnREYXRhLmJpbmQodGhpcyxpKSkudGhlbih0aGlzLnN0cnVjdHVyZURhdGEuYmluZCh0aGlzKSkudGhlbih0aGlzLnNldERhdGEuYmluZCh0aGlzKSkuY2F0Y2goKGU9Pihjb25zb2xlLmVycm9yKCJJbXBvcnQgRXJyb3I6IixlfHwiVW5hYmxlIHRvIGltcG9ydCBmaWxlIiksUHJvbWlzZS5yZWplY3QoZSkpKSl9cGlja0ZpbGUoZSl7cmV0dXJuIG5ldyBQcm9taXNlKCgodCxpKT0+e3ZhciBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7cy50eXBlPSJmaWxlIixzLmFjY2VwdD1lLHMuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwoZT0+e3ZhciBvPXMuZmlsZXNbMF0sbj1uZXcgRmlsZVJlYWRlcjtzd2l0Y2godGhpcy50YWJsZS5vcHRpb25zLmltcG9ydFJlYWRlcil7Y2FzZSJidWZmZXIiOm4ucmVhZEFzQXJyYXlCdWZmZXIobyk7YnJlYWs7Y2FzZSJiaW5hcnkiOm4ucmVhZEFzQmluYXJ5U3RyaW5nKG8pO2JyZWFrO2Nhc2UidXJsIjpuLnJlYWRBc0RhdGFVUkwobyk7YnJlYWs7ZGVmYXVsdDpuLnJlYWRBc1RleHQobyl9bi5vbmxvYWQ9ZT0+e3Qobi5yZXN1bHQpfSxuLm9uZXJyb3I9ZT0+e2NvbnNvbGUud2FybigiRmlsZSBMb2FkIEVycm9yIC0gVW5hYmxlIHRvIHJlYWQgZmlsZSIpLGkoKX19KSkscy5jbGljaygpfSkpfWltcG9ydERhdGEoZSx0KXt2YXIgaT1lLmNhbGwodGhpcy50YWJsZSx0KTtyZXR1cm4gaSBpbnN0YW5jZW9mIFByb21pc2U/aTppP1Byb21pc2UucmVzb2x2ZShpKTpQcm9taXNlLnJlamVjdCgpfXN0cnVjdHVyZURhdGEoZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSkmJmUubGVuZ3RoJiZBcnJheS5pc0FycmF5KGVbMF0pP3RoaXMudGFibGUub3B0aW9ucy5hdXRvQ29sdW1ucz90aGlzLnN0cnVjdHVyZUFycmF5VG9PYmplY3QoZSk6dGhpcy5zdHJ1Y3R1cmVBcnJheVRvQ29sdW1ucyhlKTplfXN0cnVjdHVyZUFycmF5VG9PYmplY3QoZSl7dmFyIHQ9ZS5zaGlmdCgpO3JldHVybiBlLm1hcCgoZT0+e3ZhciBpPXt9O3JldHVybiB0LmZvckVhY2goKCh0LHMpPT57aVt0XT1lW3NdfSkpLGl9KSl9c3RydWN0dXJlQXJyYXlUb0NvbHVtbnMoZSl7dmFyIHQ9W10saT10aGlzLnRhYmxlLmdldENvbHVtbnMoKTtyZXR1cm4gaVswXSYmZVswXVswXSYmaVswXS5nZXREZWZpbml0aW9uKCkudGl0bGU9PT1lWzBdWzBdJiZlLnNoaWZ0KCksZS5mb3JFYWNoKChlPT57dmFyIHM9e307ZS5mb3JFYWNoKCgoZSx0KT0+e3ZhciBvPWlbdF07byYmKHNbby5nZXRGaWVsZCgpXT1lKX0pKSx0LnB1c2gocyl9KSksdH1zZXREYXRhKGUpe3JldHVybiB0aGlzLnRhYmxlLnNldERhdGEoZSl9fWdlLm1vZHVsZU5hbWU9ImltcG9ydCIsZ2UuaW1wb3J0ZXJzPW1lO2NsYXNzIGJlIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmV2ZW50TWFwPXtyb3dDbGljazoicm93LWNsaWNrIixyb3dEYmxDbGljazoicm93LWRibGNsaWNrIixyb3dDb250ZXh0OiJyb3ctY29udGV4dG1lbnUiLHJvd01vdXNlRW50ZXI6InJvdy1tb3VzZWVudGVyIixyb3dNb3VzZUxlYXZlOiJyb3ctbW91c2VsZWF2ZSIscm93TW91c2VPdmVyOiJyb3ctbW91c2VvdmVyIixyb3dNb3VzZU91dDoicm93LW1vdXNlb3V0Iixyb3dNb3VzZU1vdmU6InJvdy1tb3VzZW1vdmUiLHJvd01vdXNlRG93bjoicm93LW1vdXNlZG93biIscm93TW91c2VVcDoicm93LW1vdXNldXAiLHJvd1RhcDoicm93Iixyb3dEYmxUYXA6InJvdyIscm93VGFwSG9sZDoicm93IixjZWxsQ2xpY2s6ImNlbGwtY2xpY2siLGNlbGxEYmxDbGljazoiY2VsbC1kYmxjbGljayIsY2VsbENvbnRleHQ6ImNlbGwtY29udGV4dG1lbnUiLGNlbGxNb3VzZUVudGVyOiJjZWxsLW1vdXNlZW50ZXIiLGNlbGxNb3VzZUxlYXZlOiJjZWxsLW1vdXNlbGVhdmUiLGNlbGxNb3VzZU92ZXI6ImNlbGwtbW91c2VvdmVyIixjZWxsTW91c2VPdXQ6ImNlbGwtbW91c2VvdXQiLGNlbGxNb3VzZU1vdmU6ImNlbGwtbW91c2Vtb3ZlIixjZWxsTW91c2VEb3duOiJjZWxsLW1vdXNlZG93biIsY2VsbE1vdXNlVXA6ImNlbGwtbW91c2V1cCIsY2VsbFRhcDoiY2VsbCIsY2VsbERibFRhcDoiY2VsbCIsY2VsbFRhcEhvbGQ6ImNlbGwiLGhlYWRlckNsaWNrOiJjb2x1bW4tY2xpY2siLGhlYWRlckRibENsaWNrOiJjb2x1bW4tZGJsY2xpY2siLGhlYWRlckNvbnRleHQ6ImNvbHVtbi1jb250ZXh0bWVudSIsaGVhZGVyTW91c2VFbnRlcjoiY29sdW1uLW1vdXNlZW50ZXIiLGhlYWRlck1vdXNlTGVhdmU6ImNvbHVtbi1tb3VzZWxlYXZlIixoZWFkZXJNb3VzZU92ZXI6ImNvbHVtbi1tb3VzZW92ZXIiLGhlYWRlck1vdXNlT3V0OiJjb2x1bW4tbW91c2VvdXQiLGhlYWRlck1vdXNlTW92ZToiY29sdW1uLW1vdXNlbW92ZSIsaGVhZGVyTW91c2VEb3duOiJjb2x1bW4tbW91c2Vkb3duIixoZWFkZXJNb3VzZVVwOiJjb2x1bW4tbW91c2V1cCIsaGVhZGVyVGFwOiJjb2x1bW4iLGhlYWRlckRibFRhcDoiY29sdW1uIixoZWFkZXJUYXBIb2xkOiJjb2x1bW4iLGdyb3VwQ2xpY2s6Imdyb3VwLWNsaWNrIixncm91cERibENsaWNrOiJncm91cC1kYmxjbGljayIsZ3JvdXBDb250ZXh0OiJncm91cC1jb250ZXh0bWVudSIsZ3JvdXBNb3VzZUVudGVyOiJncm91cC1tb3VzZWVudGVyIixncm91cE1vdXNlTGVhdmU6Imdyb3VwLW1vdXNlbGVhdmUiLGdyb3VwTW91c2VPdmVyOiJncm91cC1tb3VzZW92ZXIiLGdyb3VwTW91c2VPdXQ6Imdyb3VwLW1vdXNlb3V0Iixncm91cE1vdXNlTW92ZToiZ3JvdXAtbW91c2Vtb3ZlIixncm91cE1vdXNlRG93bjoiZ3JvdXAtbW91c2Vkb3duIixncm91cE1vdXNlVXA6Imdyb3VwLW1vdXNldXAiLGdyb3VwVGFwOiJncm91cCIsZ3JvdXBEYmxUYXA6Imdyb3VwIixncm91cFRhcEhvbGQ6Imdyb3VwIn0sdGhpcy5zdWJzY3JpYmVycz17fSx0aGlzLnRvdWNoU3Vic2NyaWJlcnM9e30sdGhpcy5jb2x1bW5TdWJzY3JpYmVycz17fSx0aGlzLnRvdWNoV2F0Y2hlcnM9e3Jvdzp7dGFwOm51bGwsdGFwRGJsOm51bGwsdGFwSG9sZDpudWxsfSxjZWxsOnt0YXA6bnVsbCx0YXBEYmw6bnVsbCx0YXBIb2xkOm51bGx9LGNvbHVtbjp7dGFwOm51bGwsdGFwRGJsOm51bGwsdGFwSG9sZDpudWxsfSxncm91cDp7dGFwOm51bGwsdGFwRGJsOm51bGwsdGFwSG9sZDpudWxsfX0sdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyQ2xpY2siKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJoZWFkZXJEYmxDbGljayIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlckNvbnRleHQiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJoZWFkZXJNb3VzZUVudGVyIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyTW91c2VMZWF2ZSIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlck1vdXNlT3ZlciIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlck1vdXNlT3V0IiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyTW91c2VNb3ZlIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyTW91c2VEb3duIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyTW91c2VVcCIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlclRhcCIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlckRibFRhcCIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlclRhcEhvbGQiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJjZWxsQ2xpY2siKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJjZWxsRGJsQ2xpY2siKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJjZWxsQ29udGV4dCIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImNlbGxNb3VzZUVudGVyIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiY2VsbE1vdXNlTGVhdmUiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJjZWxsTW91c2VPdmVyIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiY2VsbE1vdXNlT3V0IiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiY2VsbE1vdXNlTW92ZSIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImNlbGxNb3VzZURvd24iKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJjZWxsTW91c2VVcCIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImNlbGxUYXAiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJjZWxsRGJsVGFwIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiY2VsbFRhcEhvbGQiKX1pbml0aWFsaXplKCl7dGhpcy5pbml0aWFsaXplRXh0ZXJuYWxFdmVudHMoKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLWluaXQiLHRoaXMuaW5pdGlhbGl6ZUNvbHVtbi5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY2VsbC1kYmxjbGljayIsdGhpcy5jZWxsQ29udGVudHNTZWxlY3Rpb25GaXhlci5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgic2Nyb2xsLWhvcml6b250YWwiLHRoaXMuY2xlYXJUb3VjaFdhdGNoZXJzLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJzY3JvbGwtdmVydGljYWwiLHRoaXMuY2xlYXJUb3VjaFdhdGNoZXJzLmJpbmQodGhpcykpfWNsZWFyVG91Y2hXYXRjaGVycygpe09iamVjdC52YWx1ZXModGhpcy50b3VjaFdhdGNoZXJzKS5mb3JFYWNoKChlPT57Zm9yKGxldCB0IGluIGUpZVt0XT1udWxsfSkpfWNlbGxDb250ZW50c1NlbGVjdGlvbkZpeGVyKGUsdCl7dmFyIGk7aWYoIXRoaXMudGFibGUubW9kRXhpc3RzKCJlZGl0Iil8fHRoaXMudGFibGUubW9kdWxlcy5lZGl0LmN1cnJlbnRDZWxsIT09dCl7ZS5wcmV2ZW50RGVmYXVsdCgpO3RyeXtkb2N1bWVudC5zZWxlY3Rpb24/KChpPWRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCkpLm1vdmVUb0VsZW1lbnRUZXh0KHQuZ2V0RWxlbWVudCgpKSxpLnNlbGVjdCgpKTp3aW5kb3cuZ2V0U2VsZWN0aW9uJiYoKGk9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSkuc2VsZWN0Tm9kZSh0LmdldEVsZW1lbnQoKSksd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpLHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5hZGRSYW5nZShpKSl9Y2F0Y2goZSl7fX19aW5pdGlhbGl6ZUV4dGVybmFsRXZlbnRzKCl7Zm9yKGxldCBlIGluIHRoaXMuZXZlbnRNYXApdGhpcy5zdWJzY3JpcHRpb25DaGFuZ2VFeHRlcm5hbChlLHRoaXMuc3Vic2NyaXB0aW9uQ2hhbmdlZC5iaW5kKHRoaXMsZSkpfXN1YnNjcmlwdGlvbkNoYW5nZWQoZSx0KXt0P3RoaXMuc3Vic2NyaWJlcnNbZV18fCh0aGlzLmV2ZW50TWFwW2VdLmluY2x1ZGVzKCItIik/KHRoaXMuc3Vic2NyaWJlcnNbZV09dGhpcy5oYW5kbGUuYmluZCh0aGlzLGUpLHRoaXMuc3Vic2NyaWJlKHRoaXMuZXZlbnRNYXBbZV0sdGhpcy5zdWJzY3JpYmVyc1tlXSkpOnRoaXMuc3Vic2NyaWJlVG91Y2hFdmVudHMoZSkpOnRoaXMuZXZlbnRNYXBbZV0uaW5jbHVkZXMoIi0iKT8hdGhpcy5zdWJzY3JpYmVyc1tlXXx8dGhpcy5jb2x1bW5TdWJzY3JpYmVyc1tlXXx8dGhpcy5zdWJzY3JpYmVkRXh0ZXJuYWwoZSl8fCh0aGlzLnVuc3Vic2NyaWJlKHRoaXMuZXZlbnRNYXBbZV0sdGhpcy5zdWJzY3JpYmVyc1tlXSksZGVsZXRlIHRoaXMuc3Vic2NyaWJlcnNbZV0pOnRoaXMudW5zdWJzY3JpYmVUb3VjaEV2ZW50cyhlKX1zdWJzY3JpYmVUb3VjaEV2ZW50cyhlKXt2YXIgdD10aGlzLmV2ZW50TWFwW2VdO3RoaXMudG91Y2hTdWJzY3JpYmVyc1t0KyItdG91Y2hzdGFydCJdfHwodGhpcy50b3VjaFN1YnNjcmliZXJzW3QrIi10b3VjaHN0YXJ0Il09dGhpcy5oYW5kbGVUb3VjaC5iaW5kKHRoaXMsdCwic3RhcnQiKSx0aGlzLnRvdWNoU3Vic2NyaWJlcnNbdCsiLXRvdWNoZW5kIl09dGhpcy5oYW5kbGVUb3VjaC5iaW5kKHRoaXMsdCwiZW5kIiksdGhpcy5zdWJzY3JpYmUodCsiLXRvdWNoc3RhcnQiLHRoaXMudG91Y2hTdWJzY3JpYmVyc1t0KyItdG91Y2hzdGFydCJdKSx0aGlzLnN1YnNjcmliZSh0KyItdG91Y2hlbmQiLHRoaXMudG91Y2hTdWJzY3JpYmVyc1t0KyItdG91Y2hlbmQiXSkpLHRoaXMuc3Vic2NyaWJlcnNbZV09ITB9dW5zdWJzY3JpYmVUb3VjaEV2ZW50cyhlKXt2YXIgdD0hMCxpPXRoaXMuZXZlbnRNYXBbZV07aWYodGhpcy5zdWJzY3JpYmVyc1tlXSYmIXRoaXMuc3Vic2NyaWJlZEV4dGVybmFsKGUpKXtkZWxldGUgdGhpcy5zdWJzY3JpYmVyc1tlXTtmb3IobGV0IGUgaW4gdGhpcy5ldmVudE1hcCl0aGlzLmV2ZW50TWFwW2VdPT09aSYmdGhpcy5zdWJzY3JpYmVyc1tlXSYmKHQ9ITEpO3QmJih0aGlzLnVuc3Vic2NyaWJlKGkrIi10b3VjaHN0YXJ0Iix0aGlzLnRvdWNoU3Vic2NyaWJlcnNbaSsiLXRvdWNoc3RhcnQiXSksdGhpcy51bnN1YnNjcmliZShpKyItdG91Y2hlbmQiLHRoaXMudG91Y2hTdWJzY3JpYmVyc1tpKyItdG91Y2hlbmQiXSksZGVsZXRlIHRoaXMudG91Y2hTdWJzY3JpYmVyc1tpKyItdG91Y2hzdGFydCJdLGRlbGV0ZSB0aGlzLnRvdWNoU3Vic2NyaWJlcnNbaSsiLXRvdWNoZW5kIl0pfX1pbml0aWFsaXplQ29sdW1uKGUpe3ZhciB0PWUuZGVmaW5pdGlvbjtmb3IobGV0IGkgaW4gdGhpcy5ldmVudE1hcCl0W2ldJiYodGhpcy5zdWJzY3JpcHRpb25DaGFuZ2VkKGksITApLHRoaXMuY29sdW1uU3Vic2NyaWJlcnNbaV18fCh0aGlzLmNvbHVtblN1YnNjcmliZXJzW2ldPVtdKSx0aGlzLmNvbHVtblN1YnNjcmliZXJzW2ldLnB1c2goZSkpfWhhbmRsZShlLHQsaSl7dGhpcy5kaXNwYXRjaEV2ZW50KGUsdCxpKX1oYW5kbGVUb3VjaChlLHQsaSxzKXt2YXIgbz10aGlzLnRvdWNoV2F0Y2hlcnNbZV07c3dpdGNoKCJjb2x1bW4iPT09ZSYmKGU9ImhlYWRlciIpLHQpe2Nhc2Uic3RhcnQiOm8udGFwPSEwLGNsZWFyVGltZW91dChvLnRhcEhvbGQpLG8udGFwSG9sZD1zZXRUaW1lb3V0KCgoKT0+e2NsZWFyVGltZW91dChvLnRhcEhvbGQpLG8udGFwSG9sZD1udWxsLG8udGFwPW51bGwsY2xlYXJUaW1lb3V0KG8udGFwRGJsKSxvLnRhcERibD1udWxsLHRoaXMuZGlzcGF0Y2hFdmVudChlKyJUYXBIb2xkIixpLHMpfSksMWUzKTticmVhaztjYXNlImVuZCI6by50YXAmJihvLnRhcD1udWxsLHRoaXMuZGlzcGF0Y2hFdmVudChlKyJUYXAiLGkscykpLG8udGFwRGJsPyhjbGVhclRpbWVvdXQoby50YXBEYmwpLG8udGFwRGJsPW51bGwsdGhpcy5kaXNwYXRjaEV2ZW50KGUrIkRibFRhcCIsaSxzKSk6by50YXBEYmw9c2V0VGltZW91dCgoKCk9PntjbGVhclRpbWVvdXQoby50YXBEYmwpLG8udGFwRGJsPW51bGx9KSwzMDApLGNsZWFyVGltZW91dChvLnRhcEhvbGQpLG8udGFwSG9sZD1udWxsfX1kaXNwYXRjaEV2ZW50KGUsdCxpKXt2YXIgcyxyPWkuZ2V0Q29tcG9uZW50KCk7dGhpcy5jb2x1bW5TdWJzY3JpYmVyc1tlXSYmKGkgaW5zdGFuY2VvZiBvP3M9aS5jb2x1bW4uZGVmaW5pdGlvbltlXTppIGluc3RhbmNlb2YgbiYmKHM9aS5kZWZpbml0aW9uW2VdKSxzJiZzKHQscikpLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbChlLHQscil9fWJlLm1vZHVsZU5hbWU9ImludGVyYWN0aW9uIjtjbGFzcyBmZSBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy53YXRjaEtleXM9bnVsbCx0aGlzLnByZXNzZWRLZXlzPW51bGwsdGhpcy5rZXl1cEJpbmRpbmc9ITEsdGhpcy5rZXlkb3duQmluZGluZz0hMSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImtleWJpbmRpbmdzIix7fSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJ0YWJFbmROZXdSb3ciLCExKX1pbml0aWFsaXplKCl7dmFyIGU9dGhpcy50YWJsZS5vcHRpb25zLmtleWJpbmRpbmdzLHQ9e307dGhpcy53YXRjaEtleXM9e30sdGhpcy5wcmVzc2VkS2V5cz1bXSwhMSE9PWUmJihPYmplY3QuYXNzaWduKHQsZmUuYmluZGluZ3MpLE9iamVjdC5hc3NpZ24odCxlKSx0aGlzLm1hcEJpbmRpbmdzKHQpLHRoaXMuYmluZEV2ZW50cygpKSx0aGlzLnN1YnNjcmliZSgidGFibGUtZGVzdHJveSIsdGhpcy5jbGVhckJpbmRpbmdzLmJpbmQodGhpcykpfW1hcEJpbmRpbmdzKGUpe2ZvcihsZXQgdCBpbiBlKWZlLmFjdGlvbnNbdF0/ZVt0XSYmKCJvYmplY3QiIT10eXBlb2YgZVt0XSYmKGVbdF09W2VbdF1dKSxlW3RdLmZvckVhY2goKGU9PnsoQXJyYXkuaXNBcnJheShlKT9lOltlXSkuZm9yRWFjaCgoZT0+e3RoaXMubWFwQmluZGluZyh0LGUpfSkpfSkpKTpjb25zb2xlLndhcm4oIktleSBCaW5kaW5nIEVycm9yIC0gbm8gc3VjaCBhY3Rpb246Iix0KX1tYXBCaW5kaW5nKGUsdCl7dmFyIGk9e2FjdGlvbjpmZS5hY3Rpb25zW2VdLGtleXM6W10sY3RybDohMSxzaGlmdDohMSxtZXRhOiExfTt0LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5zcGxpdCgiICIpLmpvaW4oIiIpLnNwbGl0KCIrIikuZm9yRWFjaCgoZT0+e3N3aXRjaChlKXtjYXNlImN0cmwiOmkuY3RybD0hMDticmVhaztjYXNlInNoaWZ0IjppLnNoaWZ0PSEwO2JyZWFrO2Nhc2UibWV0YSI6aS5tZXRhPSEwO2JyZWFrO2RlZmF1bHQ6ZT1pc05hTihlKT9lLnRvVXBwZXJDYXNlKCkuY2hhckNvZGVBdCgwKTpwYXJzZUludChlKSxpLmtleXMucHVzaChlKSx0aGlzLndhdGNoS2V5c1tlXXx8KHRoaXMud2F0Y2hLZXlzW2VdPVtdKSx0aGlzLndhdGNoS2V5c1tlXS5wdXNoKGkpfX0pKX1iaW5kRXZlbnRzKCl7dmFyIGU9dGhpczt0aGlzLmtleXVwQmluZGluZz1mdW5jdGlvbih0KXt2YXIgaT10LmtleUNvZGUscz1lLndhdGNoS2V5c1tpXTtzJiYoZS5wcmVzc2VkS2V5cy5wdXNoKGkpLHMuZm9yRWFjaCgoZnVuY3Rpb24oaSl7ZS5jaGVja0JpbmRpbmcodCxpKX0pKSl9LHRoaXMua2V5ZG93bkJpbmRpbmc9ZnVuY3Rpb24odCl7dmFyIGk9dC5rZXlDb2RlO2lmKGUud2F0Y2hLZXlzW2ldKXt2YXIgcz1lLnByZXNzZWRLZXlzLmluZGV4T2YoaSk7cz4tMSYmZS5wcmVzc2VkS2V5cy5zcGxpY2UocywxKX19LHRoaXMudGFibGUuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIix0aGlzLmtleXVwQmluZGluZyksdGhpcy50YWJsZS5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIix0aGlzLmtleWRvd25CaW5kaW5nKX1jbGVhckJpbmRpbmdzKCl7dGhpcy5rZXl1cEJpbmRpbmcmJnRoaXMudGFibGUuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIix0aGlzLmtleXVwQmluZGluZyksdGhpcy5rZXlkb3duQmluZGluZyYmdGhpcy50YWJsZS5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleXVwIix0aGlzLmtleWRvd25CaW5kaW5nKX1jaGVja0JpbmRpbmcoZSx0KXt2YXIgaT0hMDtyZXR1cm4gZS5jdHJsS2V5PT10LmN0cmwmJmUuc2hpZnRLZXk9PXQuc2hpZnQmJmUubWV0YUtleT09dC5tZXRhJiYodC5rZXlzLmZvckVhY2goKGU9PnstMT09dGhpcy5wcmVzc2VkS2V5cy5pbmRleE9mKGUpJiYoaT0hMSl9KSksaSYmdC5hY3Rpb24uY2FsbCh0aGlzLGUpLCEwKX19ZmUubW9kdWxlTmFtZT0ia2V5YmluZGluZ3MiLGZlLmJpbmRpbmdzPXtuYXZQcmV2OiJzaGlmdCArIDkiLG5hdk5leHQ6OSxuYXZVcDozOCxuYXZEb3duOjQwLHNjcm9sbFBhZ2VVcDozMyxzY3JvbGxQYWdlRG93bjozNCxzY3JvbGxUb1N0YXJ0OjM2LHNjcm9sbFRvRW5kOjM1LHVuZG86WyJjdHJsICsgOTAiLCJtZXRhICsgOTAiXSxyZWRvOlsiY3RybCArIDg5IiwibWV0YSArIDg5Il0sY29weVRvQ2xpcGJvYXJkOlsiY3RybCArIDY3IiwibWV0YSArIDg5Il19LGZlLmFjdGlvbnM9e2tleUJsb2NrOmZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpfSxzY3JvbGxQYWdlVXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLGk9dC5zY3JvbGxUb3AtdC5lbGVtZW50LmNsaWVudEhlaWdodDtlLnByZXZlbnREZWZhdWx0KCksdC5kaXNwbGF5Um93c0NvdW50JiYoaT49MD90LmVsZW1lbnQuc2Nyb2xsVG9wPWk6dC5zY3JvbGxUb1Jvdyh0LmdldERpc3BsYXlSb3dzKClbMF0pKSx0aGlzLnRhYmxlLmVsZW1lbnQuZm9jdXMoKX0sc2Nyb2xsUGFnZURvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLGk9dC5zY3JvbGxUb3ArdC5lbGVtZW50LmNsaWVudEhlaWdodCxzPXQuZWxlbWVudC5zY3JvbGxIZWlnaHQ7ZS5wcmV2ZW50RGVmYXVsdCgpLHQuZGlzcGxheVJvd3NDb3VudCYmKGk8PXM/dC5lbGVtZW50LnNjcm9sbFRvcD1pOnQuc2Nyb2xsVG9Sb3codC5nZXREaXNwbGF5Um93cygpW3QuZGlzcGxheVJvd3NDb3VudC0xXSkpLHRoaXMudGFibGUuZWxlbWVudC5mb2N1cygpfSxzY3JvbGxUb1N0YXJ0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudGFibGUucm93TWFuYWdlcjtlLnByZXZlbnREZWZhdWx0KCksdC5kaXNwbGF5Um93c0NvdW50JiZ0LnNjcm9sbFRvUm93KHQuZ2V0RGlzcGxheVJvd3MoKVswXSksdGhpcy50YWJsZS5lbGVtZW50LmZvY3VzKCl9LHNjcm9sbFRvRW5kOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudGFibGUucm93TWFuYWdlcjtlLnByZXZlbnREZWZhdWx0KCksdC5kaXNwbGF5Um93c0NvdW50JiZ0LnNjcm9sbFRvUm93KHQuZ2V0RGlzcGxheVJvd3MoKVt0LmRpc3BsYXlSb3dzQ291bnQtMV0pLHRoaXMudGFibGUuZWxlbWVudC5mb2N1cygpfSxuYXZQcmV2OmZ1bmN0aW9uKGUpe3RoaXMuZGlzcGF0Y2goImtleWJpbmRpbmctbmF2LXByZXYiLGUpfSxuYXZOZXh0OmZ1bmN0aW9uKGUpe3RoaXMuZGlzcGF0Y2goImtleWJpbmRpbmctbmF2LW5leHQiLGUpfSxuYXZMZWZ0OmZ1bmN0aW9uKGUpe3RoaXMuZGlzcGF0Y2goImtleWJpbmRpbmctbmF2LWxlZnQiLGUpfSxuYXZSaWdodDpmdW5jdGlvbihlKXt0aGlzLmRpc3BhdGNoKCJrZXliaW5kaW5nLW5hdi1yaWdodCIsZSl9LG5hdlVwOmZ1bmN0aW9uKGUpe3RoaXMuZGlzcGF0Y2goImtleWJpbmRpbmctbmF2LXVwIixlKX0sbmF2RG93bjpmdW5jdGlvbihlKXt0aGlzLmRpc3BhdGNoKCJrZXliaW5kaW5nLW5hdi1kb3duIixlKX0sdW5kbzpmdW5jdGlvbihlKXt0aGlzLnRhYmxlLm9wdGlvbnMuaGlzdG9yeSYmdGhpcy50YWJsZS5tb2RFeGlzdHMoImhpc3RvcnkiKSYmdGhpcy50YWJsZS5tb2RFeGlzdHMoImVkaXQiKSYmKHRoaXMudGFibGUubW9kdWxlcy5lZGl0LmN1cnJlbnRDZWxsfHwoZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMudGFibGUubW9kdWxlcy5oaXN0b3J5LnVuZG8oKSkpfSxyZWRvOmZ1bmN0aW9uKGUpe3RoaXMudGFibGUub3B0aW9ucy5oaXN0b3J5JiZ0aGlzLnRhYmxlLm1vZEV4aXN0cygiaGlzdG9yeSIpJiZ0aGlzLnRhYmxlLm1vZEV4aXN0cygiZWRpdCIpJiYodGhpcy50YWJsZS5tb2R1bGVzLmVkaXQuY3VycmVudENlbGx8fChlLnByZXZlbnREZWZhdWx0KCksdGhpcy50YWJsZS5tb2R1bGVzLmhpc3RvcnkucmVkbygpKSl9LGNvcHlUb0NsaXBib2FyZDpmdW5jdGlvbihlKXt0aGlzLnRhYmxlLm1vZHVsZXMuZWRpdC5jdXJyZW50Q2VsbHx8dGhpcy50YWJsZS5tb2RFeGlzdHMoImNsaXBib2FyZCIsITApJiZ0aGlzLnRhYmxlLm1vZHVsZXMuY2xpcGJvYXJkLmNvcHkoITEsITApfX07Y2xhc3MgdmUgZXh0ZW5kcyBre2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMubWVudUNvbnRhaW5lcj1udWxsLHRoaXMubmVzdGVkTWVudUJsb2NrPSExLHRoaXMuY3VycmVudENvbXBvbmVudD1udWxsLHRoaXMucm9vdFBvcHVwPW51bGwsdGhpcy5jb2x1bW5TdWJzY3JpYmVycz17fSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oIm1lbnVDb250YWluZXIiLHZvaWQgMCksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJyb3dDb250ZXh0TWVudSIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicm93Q2xpY2tNZW51IiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJyb3dEYmxDbGlja01lbnUiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImdyb3VwQ29udGV4dE1lbnUiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImdyb3VwQ2xpY2tNZW51IiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJncm91cERibENsaWNrTWVudSIsITEpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlckNvbnRleHRNZW51IiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyQ2xpY2tNZW51IiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyRGJsQ2xpY2tNZW51IiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyTWVudSIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlck1lbnVJY29uIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiY29udGV4dE1lbnUiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJjbGlja01lbnUiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJkYmxDbGlja01lbnUiKX1pbml0aWFsaXplKCl7dGhpcy5kZXByZWNhdGVkT3B0aW9uc0NoZWNrKCksdGhpcy5pbml0aWFsaXplUm93V2F0Y2hlcnMoKSx0aGlzLmluaXRpYWxpemVHcm91cFdhdGNoZXJzKCksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1pbml0Iix0aGlzLmluaXRpYWxpemVDb2x1bW4uYmluZCh0aGlzKSl9ZGVwcmVjYXRlZE9wdGlvbnNDaGVjaygpe3RoaXMuZGVwcmVjYXRpb25DaGVjaygibWVudUNvbnRhaW5lciIsInBvcHVwQ29udGFpbmVyIil8fCh0aGlzLnRhYmxlLm9wdGlvbnMucG9wdXBDb250YWluZXI9dGhpcy50YWJsZS5vcHRpb25zLm1lbnVDb250YWluZXIpfWluaXRpYWxpemVSb3dXYXRjaGVycygpe3RoaXMudGFibGUub3B0aW9ucy5yb3dDb250ZXh0TWVudSYmKHRoaXMuc3Vic2NyaWJlKCJyb3ctY29udGV4dG1lbnUiLHRoaXMubG9hZE1lbnVFdmVudC5iaW5kKHRoaXMsdGhpcy50YWJsZS5vcHRpb25zLnJvd0NvbnRleHRNZW51KSksdGhpcy50YWJsZS5vbigicm93VGFwSG9sZCIsdGhpcy5sb2FkTWVudUV2ZW50LmJpbmQodGhpcyx0aGlzLnRhYmxlLm9wdGlvbnMucm93Q29udGV4dE1lbnUpKSksdGhpcy50YWJsZS5vcHRpb25zLnJvd0NsaWNrTWVudSYmdGhpcy5zdWJzY3JpYmUoInJvdy1jbGljayIsdGhpcy5sb2FkTWVudUV2ZW50LmJpbmQodGhpcyx0aGlzLnRhYmxlLm9wdGlvbnMucm93Q2xpY2tNZW51KSksdGhpcy50YWJsZS5vcHRpb25zLnJvd0RibENsaWNrTWVudSYmdGhpcy5zdWJzY3JpYmUoInJvdy1kYmxjbGljayIsdGhpcy5sb2FkTWVudUV2ZW50LmJpbmQodGhpcyx0aGlzLnRhYmxlLm9wdGlvbnMucm93RGJsQ2xpY2tNZW51KSl9aW5pdGlhbGl6ZUdyb3VwV2F0Y2hlcnMoKXt0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBDb250ZXh0TWVudSYmKHRoaXMuc3Vic2NyaWJlKCJncm91cC1jb250ZXh0bWVudSIsdGhpcy5sb2FkTWVudUV2ZW50LmJpbmQodGhpcyx0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBDb250ZXh0TWVudSkpLHRoaXMudGFibGUub24oImdyb3VwVGFwSG9sZCIsdGhpcy5sb2FkTWVudUV2ZW50LmJpbmQodGhpcyx0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBDb250ZXh0TWVudSkpKSx0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBDbGlja01lbnUmJnRoaXMuc3Vic2NyaWJlKCJncm91cC1jbGljayIsdGhpcy5sb2FkTWVudUV2ZW50LmJpbmQodGhpcyx0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBDbGlja01lbnUpKSx0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBEYmxDbGlja01lbnUmJnRoaXMuc3Vic2NyaWJlKCJncm91cC1kYmxjbGljayIsdGhpcy5sb2FkTWVudUV2ZW50LmJpbmQodGhpcyx0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBEYmxDbGlja01lbnUpKX1pbml0aWFsaXplQ29sdW1uKGUpe3ZhciB0PWUuZGVmaW5pdGlvbjt0LmhlYWRlckNvbnRleHRNZW51JiYhdGhpcy5jb2x1bW5TdWJzY3JpYmVycy5oZWFkZXJDb250ZXh0TWVudSYmKHRoaXMuY29sdW1uU3Vic2NyaWJlcnMuaGVhZGVyQ29udGV4dE1lbnU9dGhpcy5sb2FkTWVudVRhYmxlQ29sdW1uRXZlbnQuYmluZCh0aGlzLCJoZWFkZXJDb250ZXh0TWVudSIpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4tY29udGV4dG1lbnUiLHRoaXMuY29sdW1uU3Vic2NyaWJlcnMuaGVhZGVyQ29udGV4dE1lbnUpLHRoaXMudGFibGUub24oImhlYWRlclRhcEhvbGQiLHRoaXMubG9hZE1lbnVUYWJsZUNvbHVtbkV2ZW50LmJpbmQodGhpcywiaGVhZGVyQ29udGV4dE1lbnUiKSkpLHQuaGVhZGVyQ2xpY2tNZW51JiYhdGhpcy5jb2x1bW5TdWJzY3JpYmVycy5oZWFkZXJDbGlja01lbnUmJih0aGlzLmNvbHVtblN1YnNjcmliZXJzLmhlYWRlckNsaWNrTWVudT10aGlzLmxvYWRNZW51VGFibGVDb2x1bW5FdmVudC5iaW5kKHRoaXMsImhlYWRlckNsaWNrTWVudSIpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4tY2xpY2siLHRoaXMuY29sdW1uU3Vic2NyaWJlcnMuaGVhZGVyQ2xpY2tNZW51KSksdC5oZWFkZXJEYmxDbGlja01lbnUmJiF0aGlzLmNvbHVtblN1YnNjcmliZXJzLmhlYWRlckRibENsaWNrTWVudSYmKHRoaXMuY29sdW1uU3Vic2NyaWJlcnMuaGVhZGVyRGJsQ2xpY2tNZW51PXRoaXMubG9hZE1lbnVUYWJsZUNvbHVtbkV2ZW50LmJpbmQodGhpcywiaGVhZGVyRGJsQ2xpY2tNZW51IiksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1kYmxjbGljayIsdGhpcy5jb2x1bW5TdWJzY3JpYmVycy5oZWFkZXJEYmxDbGlja01lbnUpKSx0LmhlYWRlck1lbnUmJnRoaXMuaW5pdGlhbGl6ZUNvbHVtbkhlYWRlck1lbnUoZSksdC5jb250ZXh0TWVudSYmIXRoaXMuY29sdW1uU3Vic2NyaWJlcnMuY29udGV4dE1lbnUmJih0aGlzLmNvbHVtblN1YnNjcmliZXJzLmNvbnRleHRNZW51PXRoaXMubG9hZE1lbnVUYWJsZUNlbGxFdmVudC5iaW5kKHRoaXMsImNvbnRleHRNZW51IiksdGhpcy5zdWJzY3JpYmUoImNlbGwtY29udGV4dG1lbnUiLHRoaXMuY29sdW1uU3Vic2NyaWJlcnMuY29udGV4dE1lbnUpLHRoaXMudGFibGUub24oImNlbGxUYXBIb2xkIix0aGlzLmxvYWRNZW51VGFibGVDZWxsRXZlbnQuYmluZCh0aGlzLCJjb250ZXh0TWVudSIpKSksdC5jbGlja01lbnUmJiF0aGlzLmNvbHVtblN1YnNjcmliZXJzLmNsaWNrTWVudSYmKHRoaXMuY29sdW1uU3Vic2NyaWJlcnMuY2xpY2tNZW51PXRoaXMubG9hZE1lbnVUYWJsZUNlbGxFdmVudC5iaW5kKHRoaXMsImNsaWNrTWVudSIpLHRoaXMuc3Vic2NyaWJlKCJjZWxsLWNsaWNrIix0aGlzLmNvbHVtblN1YnNjcmliZXJzLmNsaWNrTWVudSkpLHQuZGJsQ2xpY2tNZW51JiYhdGhpcy5jb2x1bW5TdWJzY3JpYmVycy5kYmxDbGlja01lbnUmJih0aGlzLmNvbHVtblN1YnNjcmliZXJzLmRibENsaWNrTWVudT10aGlzLmxvYWRNZW51VGFibGVDZWxsRXZlbnQuYmluZCh0aGlzLCJkYmxDbGlja01lbnUiKSx0aGlzLnN1YnNjcmliZSgiY2VsbC1kYmxjbGljayIsdGhpcy5jb2x1bW5TdWJzY3JpYmVycy5kYmxDbGlja01lbnUpKX1pbml0aWFsaXplQ29sdW1uSGVhZGVyTWVudShlKXt2YXIgdCxpPWUuZGVmaW5pdGlvbi5oZWFkZXJNZW51SWNvbjsodD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIikpLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1oZWFkZXItcG9wdXAtYnV0dG9uIiksaT8oImZ1bmN0aW9uIj09dHlwZW9mIGkmJihpPWkoZS5nZXRDb21wb25lbnQoKSkpLGkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudD90LmFwcGVuZENoaWxkKGkpOnQuaW5uZXJIVE1MPWkpOnQuaW5uZXJIVE1MPSImdmVsbGlwOyIsdC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsKHQ9Pnt0LnN0b3BQcm9wYWdhdGlvbigpLHQucHJldmVudERlZmF1bHQoKSx0aGlzLmxvYWRNZW51RXZlbnQoZS5kZWZpbml0aW9uLmhlYWRlck1lbnUsdCxlKX0pKSxlLnRpdGxlRWxlbWVudC5pbnNlcnRCZWZvcmUodCxlLnRpdGxlRWxlbWVudC5maXJzdENoaWxkKX1sb2FkTWVudVRhYmxlQ2VsbEV2ZW50KGUsdCxpKXtpLl9jZWxsJiYoaT1pLl9jZWxsKSxpLmNvbHVtbi5kZWZpbml0aW9uW2VdJiZ0aGlzLmxvYWRNZW51RXZlbnQoaS5jb2x1bW4uZGVmaW5pdGlvbltlXSx0LGkpfWxvYWRNZW51VGFibGVDb2x1bW5FdmVudChlLHQsaSl7aS5fY29sdW1uJiYoaT1pLl9jb2x1bW4pLGkuZGVmaW5pdGlvbltlXSYmdGhpcy5sb2FkTWVudUV2ZW50KGkuZGVmaW5pdGlvbltlXSx0LGkpfWxvYWRNZW51RXZlbnQoZSx0LGkpe2kuX2dyb3VwP2k9aS5fZ3JvdXA6aS5fcm93JiYoaT1pLl9yb3cpLGU9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKHRoaXMudGFibGUsdCxpLmdldENvbXBvbmVudCgpKTplLHRoaXMubG9hZE1lbnUodCxpLGUpfWxvYWRNZW51KGUsdCxpLHMsbyl7dmFyIG4scj0hKGUgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KSxhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKGEuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLW1lbnUiKSxyfHxlLnByZXZlbnREZWZhdWx0KCksaSYmaS5sZW5ndGgpe2lmKHMpbj1vLmNoaWxkKGEpO2Vsc2V7aWYodGhpcy5uZXN0ZWRNZW51QmxvY2spe2lmKHRoaXMucm9vdFBvcHVwKXJldHVybn1lbHNlIHRoaXMubmVzdGVkTWVudUJsb2NrPXNldFRpbWVvdXQoKCgpPT57dGhpcy5uZXN0ZWRNZW51QmxvY2s9ITF9KSwxMDApO3RoaXMucm9vdFBvcHVwJiZ0aGlzLnJvb3RQb3B1cC5oaWRlKCksdGhpcy5yb290UG9wdXA9bj10aGlzLnBvcHVwKGEpfWkuZm9yRWFjaCgoZT0+e3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHM9ZS5sYWJlbCxvPWUuZGlzYWJsZWQ7ZS5zZXBhcmF0b3I/aS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItbWVudS1zZXBhcmF0b3IiKTooaS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItbWVudS1pdGVtIiksImZ1bmN0aW9uIj09dHlwZW9mIHMmJihzPXMuY2FsbCh0aGlzLnRhYmxlLHQuZ2V0Q29tcG9uZW50KCkpKSxzIGluc3RhbmNlb2YgTm9kZT9pLmFwcGVuZENoaWxkKHMpOmkuaW5uZXJIVE1MPXMsImZ1bmN0aW9uIj09dHlwZW9mIG8mJihvPW8uY2FsbCh0aGlzLnRhYmxlLHQuZ2V0Q29tcG9uZW50KCkpKSxvPyhpLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1tZW51LWl0ZW0tZGlzYWJsZWQiKSxpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwoZT0+e2Uuc3RvcFByb3BhZ2F0aW9uKCl9KSkpOmUubWVudSYmZS5tZW51Lmxlbmd0aD9pLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwocz0+e3Muc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5sb2FkTWVudShzLHQsZS5tZW51LGksbil9KSk6ZS5hY3Rpb24mJmkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLChpPT57ZS5hY3Rpb24oaSx0LmdldENvbXBvbmVudCgpKX0pKSxlLm1lbnUmJmUubWVudS5sZW5ndGgmJmkuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLW1lbnUtaXRlbS1zdWJtZW51IikpLGEuYXBwZW5kQ2hpbGQoaSl9KSksYS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsKGU9Pnt0aGlzLnJvb3RQb3B1cCYmdGhpcy5yb290UG9wdXAuaGlkZSgpfSkpLG4uc2hvdyhzfHxlKSxuPT09dGhpcy5yb290UG9wdXAmJih0aGlzLnJvb3RQb3B1cC5oaWRlT25CbHVyKCgoKT0+e3RoaXMucm9vdFBvcHVwPW51bGwsdGhpcy5jdXJyZW50Q29tcG9uZW50JiYodGhpcy5kaXNwYXRjaEV4dGVybmFsKCJtZW51Q2xvc2VkIix0aGlzLmN1cnJlbnRDb21wb25lbnQuZ2V0Q29tcG9uZW50KCkpLHRoaXMuY3VycmVudENvbXBvbmVudD1udWxsKX0pKSx0aGlzLmN1cnJlbnRDb21wb25lbnQ9dCx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoIm1lbnVPcGVuZWQiLHQuZ2V0Q29tcG9uZW50KCkpKX19fXZlLm1vZHVsZU5hbWU9Im1lbnUiO2NsYXNzIHdlIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnBsYWNlaG9sZGVyRWxlbWVudD10aGlzLmNyZWF0ZVBsYWNlaG9sZGVyRWxlbWVudCgpLHRoaXMuaG92ZXJFbGVtZW50PSExLHRoaXMuY2hlY2tUaW1lb3V0PSExLHRoaXMuY2hlY2tQZXJpb2Q9MjUwLHRoaXMubW92aW5nPSExLHRoaXMudG9Db2w9ITEsdGhpcy50b0NvbEFmdGVyPSExLHRoaXMuc3RhcnRYPTAsdGhpcy5hdXRvU2Nyb2xsTWFyZ2luPTQwLHRoaXMuYXV0b1Njcm9sbFN0ZXA9NSx0aGlzLmF1dG9TY3JvbGxUaW1lb3V0PSExLHRoaXMudG91Y2hNb3ZlPSExLHRoaXMubW92ZUhvdmVyPXRoaXMubW92ZUhvdmVyLmJpbmQodGhpcyksdGhpcy5lbmRNb3ZlPXRoaXMuZW5kTW92ZS5iaW5kKHRoaXMpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigibW92YWJsZUNvbHVtbnMiLCExKX1jcmVhdGVQbGFjZWhvbGRlckVsZW1lbnQoKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItY29sIiksZS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItY29sLXBsYWNlaG9sZGVyIiksZX1pbml0aWFsaXplKCl7dGhpcy50YWJsZS5vcHRpb25zLm1vdmFibGVDb2x1bW5zJiZ0aGlzLnN1YnNjcmliZSgiY29sdW1uLWluaXQiLHRoaXMuaW5pdGlhbGl6ZUNvbHVtbi5iaW5kKHRoaXMpKX1pbml0aWFsaXplQ29sdW1uKGUpe3ZhciB0LGk9dGhpcyxzPXt9O2UubW9kdWxlcy5mcm96ZW58fGUuaXNHcm91cHx8KHQ9ZS5nZXRFbGVtZW50KCkscy5tb3VzZW1vdmU9ZnVuY3Rpb24ocyl7ZS5wYXJlbnQ9PT1pLm1vdmluZy5wYXJlbnQmJigoaS50b3VjaE1vdmU/cy50b3VjaGVzWzBdLnBhZ2VYOnMucGFnZVgpLXIuZWxPZmZzZXQodCkubGVmdCtpLnRhYmxlLmNvbHVtbk1hbmFnZXIuY29udGVudHNFbGVtZW50LnNjcm9sbExlZnQ+ZS5nZXRXaWR0aCgpLzI/aS50b0NvbD09PWUmJmkudG9Db2xBZnRlcnx8KHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaS5wbGFjZWhvbGRlckVsZW1lbnQsdC5uZXh0U2libGluZyksaS5tb3ZlQ29sdW1uKGUsITApKTooaS50b0NvbCE9PWV8fGkudG9Db2xBZnRlcikmJih0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGkucGxhY2Vob2xkZXJFbGVtZW50LHQpLGkubW92ZUNvbHVtbihlLCExKSkpfS5iaW5kKGkpLHQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwoZnVuY3Rpb24odCl7aS50b3VjaE1vdmU9ITEsMT09PXQud2hpY2gmJihpLmNoZWNrVGltZW91dD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe2kuc3RhcnRNb3ZlKHQsZSl9KSxpLmNoZWNrUGVyaW9kKSl9KSksdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIiwoZnVuY3Rpb24oZSl7MT09PWUud2hpY2gmJmkuY2hlY2tUaW1lb3V0JiZjbGVhclRpbWVvdXQoaS5jaGVja1RpbWVvdXQpfSkpLGkuYmluZFRvdWNoRXZlbnRzKGUpKSxlLm1vZHVsZXMubW92ZUNvbHVtbj1zfWJpbmRUb3VjaEV2ZW50cyhlKXt2YXIgdCxpLHMsbyxuLHIsYT1lLmdldEVsZW1lbnQoKSxsPSExO2EuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsKGE9Pnt0aGlzLmNoZWNrVGltZW91dD1zZXRUaW1lb3V0KCgoKT0+e3RoaXMudG91Y2hNb3ZlPSEwLHQ9ZS5uZXh0Q29sdW1uKCkscz10P3QuZ2V0V2lkdGgoKS8yOjAsaT1lLnByZXZDb2x1bW4oKSxvPWk/aS5nZXRXaWR0aCgpLzI6MCxuPTAscj0wLGw9ITEsdGhpcy5zdGFydE1vdmUoYSxlKX0pLHRoaXMuY2hlY2tQZXJpb2QpfSkse3Bhc3NpdmU6ITB9KSxhLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsKGE9Pnt2YXIgaCxkO3RoaXMubW92aW5nJiYodGhpcy5tb3ZlSG92ZXIoYSksbHx8KGw9YS50b3VjaGVzWzBdLnBhZ2VYKSwoaD1hLnRvdWNoZXNbMF0ucGFnZVgtbCk+MD90JiZoLW4+cyYmKGQ9dCkhPT1lJiYobD1hLnRvdWNoZXNbMF0ucGFnZVgsZC5nZXRFbGVtZW50KCkucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5wbGFjZWhvbGRlckVsZW1lbnQsZC5nZXRFbGVtZW50KCkubmV4dFNpYmxpbmcpLHRoaXMubW92ZUNvbHVtbihkLCEwKSk6aSYmLWgtcj5vJiYoZD1pKSE9PWUmJihsPWEudG91Y2hlc1swXS5wYWdlWCxkLmdldEVsZW1lbnQoKS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLnBsYWNlaG9sZGVyRWxlbWVudCxkLmdldEVsZW1lbnQoKSksdGhpcy5tb3ZlQ29sdW1uKGQsITEpKSxkJiYodD1kLm5leHRDb2x1bW4oKSxuPXMscz10P3QuZ2V0V2lkdGgoKS8yOjAsaT1kLnByZXZDb2x1bW4oKSxyPW8sbz1pP2kuZ2V0V2lkdGgoKS8yOjApKX0pLHtwYXNzaXZlOiEwfSksYS5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsKGU9Pnt0aGlzLmNoZWNrVGltZW91dCYmY2xlYXJUaW1lb3V0KHRoaXMuY2hlY2tUaW1lb3V0KSx0aGlzLm1vdmluZyYmdGhpcy5lbmRNb3ZlKGUpfSkpfXN0YXJ0TW92ZShlLHQpe3ZhciBpPXQuZ2V0RWxlbWVudCgpLHM9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmdldENvbnRlbnRzRWxlbWVudCgpLG89dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmdldEhlYWRlcnNFbGVtZW50KCk7dGhpcy5tb3Zpbmc9dCx0aGlzLnN0YXJ0WD0odGhpcy50b3VjaE1vdmU/ZS50b3VjaGVzWzBdLnBhZ2VYOmUucGFnZVgpLXIuZWxPZmZzZXQoaSkubGVmdCx0aGlzLnRhYmxlLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWJsb2NrLXNlbGVjdCIpLHRoaXMucGxhY2Vob2xkZXJFbGVtZW50LnN0eWxlLndpZHRoPXQuZ2V0V2lkdGgoKSsicHgiLHRoaXMucGxhY2Vob2xkZXJFbGVtZW50LnN0eWxlLmhlaWdodD10LmdldEhlaWdodCgpKyJweCIsaS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLnBsYWNlaG9sZGVyRWxlbWVudCxpKSxpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaSksdGhpcy5ob3ZlckVsZW1lbnQ9aS5jbG9uZU5vZGUoITApLHRoaXMuaG92ZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1tb3ZpbmciKSxzLmFwcGVuZENoaWxkKHRoaXMuaG92ZXJFbGVtZW50KSx0aGlzLmhvdmVyRWxlbWVudC5zdHlsZS5sZWZ0PSIwIix0aGlzLmhvdmVyRWxlbWVudC5zdHlsZS5ib3R0b209cy5jbGllbnRIZWlnaHQtby5vZmZzZXRIZWlnaHQrInB4Iix0aGlzLnRvdWNoTW92ZXx8KHRoaXMuX2JpbmRNb3VzZU1vdmUoKSxkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5tb3ZlSG92ZXIpLGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdGhpcy5lbmRNb3ZlKSksdGhpcy5tb3ZlSG92ZXIoZSl9X2JpbmRNb3VzZU1vdmUoKXt0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuY29sdW1uc0J5SW5kZXguZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5tb2R1bGVzLm1vdmVDb2x1bW4ubW91c2Vtb3ZlJiZlLmdldEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLGUubW9kdWxlcy5tb3ZlQ29sdW1uLm1vdXNlbW92ZSl9KSl9X3VuYmluZE1vdXNlTW92ZSgpe3RoaXMudGFibGUuY29sdW1uTWFuYWdlci5jb2x1bW5zQnlJbmRleC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLm1vZHVsZXMubW92ZUNvbHVtbi5tb3VzZW1vdmUmJmUuZ2V0RWxlbWVudCgpLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsZS5tb2R1bGVzLm1vdmVDb2x1bW4ubW91c2Vtb3ZlKX0pKX1tb3ZlQ29sdW1uKGUsdCl7dmFyIGk9dGhpcy5tb3ZpbmcuZ2V0Q2VsbHMoKTt0aGlzLnRvQ29sPWUsdGhpcy50b0NvbEFmdGVyPXQsdD9lLmdldENlbGxzKCkuZm9yRWFjaCgoZnVuY3Rpb24oZSx0KXt2YXIgcz1lLmdldEVsZW1lbnQoITApO3MucGFyZW50Tm9kZSYmaVt0XSYmcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpW3RdLmdldEVsZW1lbnQoKSxzLm5leHRTaWJsaW5nKX0pKTplLmdldENlbGxzKCkuZm9yRWFjaCgoZnVuY3Rpb24oZSx0KXt2YXIgcz1lLmdldEVsZW1lbnQoITApO3MucGFyZW50Tm9kZSYmaVt0XSYmcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpW3RdLmdldEVsZW1lbnQoKSxzKX0pKX1lbmRNb3ZlKGUpeygxPT09ZS53aGljaHx8dGhpcy50b3VjaE1vdmUpJiYodGhpcy5fdW5iaW5kTW91c2VNb3ZlKCksdGhpcy5wbGFjZWhvbGRlckVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5tb3ZpbmcuZ2V0RWxlbWVudCgpLHRoaXMucGxhY2Vob2xkZXJFbGVtZW50Lm5leHRTaWJsaW5nKSx0aGlzLnBsYWNlaG9sZGVyRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGxhY2Vob2xkZXJFbGVtZW50KSx0aGlzLmhvdmVyRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuaG92ZXJFbGVtZW50KSx0aGlzLnRhYmxlLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgidGFidWxhdG9yLWJsb2NrLXNlbGVjdCIpLHRoaXMudG9Db2wmJnRoaXMudGFibGUuY29sdW1uTWFuYWdlci5tb3ZlQ29sdW1uQWN0dWFsKHRoaXMubW92aW5nLHRoaXMudG9Db2wsdGhpcy50b0NvbEFmdGVyKSx0aGlzLm1vdmluZz0hMSx0aGlzLnRvQ29sPSExLHRoaXMudG9Db2xBZnRlcj0hMSx0aGlzLnRvdWNoTW92ZXx8KGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLm1vdmVIb3ZlciksZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLmVuZE1vdmUpKSl9bW92ZUhvdmVyKGUpe3ZhciB0LGk9dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmdldENvbnRlbnRzRWxlbWVudCgpLHM9aS5zY3JvbGxMZWZ0LG89KHRoaXMudG91Y2hNb3ZlP2UudG91Y2hlc1swXS5wYWdlWDplLnBhZ2VYKS1yLmVsT2Zmc2V0KGkpLmxlZnQrczt0aGlzLmhvdmVyRWxlbWVudC5zdHlsZS5sZWZ0PW8tdGhpcy5zdGFydFgrInB4IixvLXM8dGhpcy5hdXRvU2Nyb2xsTWFyZ2luJiYodGhpcy5hdXRvU2Nyb2xsVGltZW91dHx8KHRoaXMuYXV0b1Njcm9sbFRpbWVvdXQ9c2V0VGltZW91dCgoKCk9Pnt0PU1hdGgubWF4KDAscy01KSx0aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0RWxlbWVudCgpLnNjcm9sbExlZnQ9dCx0aGlzLmF1dG9TY3JvbGxUaW1lb3V0PSExfSksMSkpKSxzK2kuY2xpZW50V2lkdGgtbzx0aGlzLmF1dG9TY3JvbGxNYXJnaW4mJih0aGlzLmF1dG9TY3JvbGxUaW1lb3V0fHwodGhpcy5hdXRvU2Nyb2xsVGltZW91dD1zZXRUaW1lb3V0KCgoKT0+e3Q9TWF0aC5taW4oaS5jbGllbnRXaWR0aCxzKzUpLHRoaXMudGFibGUucm93TWFuYWdlci5nZXRFbGVtZW50KCkuc2Nyb2xsTGVmdD10LHRoaXMuYXV0b1Njcm9sbFRpbWVvdXQ9ITF9KSwxKSkpfX13ZS5tb2R1bGVOYW1lPSJtb3ZlQ29sdW1uIjtjbGFzcyBDZSBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5wbGFjZWhvbGRlckVsZW1lbnQ9dGhpcy5jcmVhdGVQbGFjZWhvbGRlckVsZW1lbnQoKSx0aGlzLmhvdmVyRWxlbWVudD0hMSx0aGlzLmNoZWNrVGltZW91dD0hMSx0aGlzLmNoZWNrUGVyaW9kPTE1MCx0aGlzLm1vdmluZz0hMSx0aGlzLnRvUm93PSExLHRoaXMudG9Sb3dBZnRlcj0hMSx0aGlzLmhhc0hhbmRsZT0hMSx0aGlzLnN0YXJ0WT0wLHRoaXMuc3RhcnRYPTAsdGhpcy5tb3ZlSG92ZXI9dGhpcy5tb3ZlSG92ZXIuYmluZCh0aGlzKSx0aGlzLmVuZE1vdmU9dGhpcy5lbmRNb3ZlLmJpbmQodGhpcyksdGhpcy50YWJsZVJvd0Ryb3BFdmVudD0hMSx0aGlzLnRvdWNoTW92ZT0hMSx0aGlzLmNvbm5lY3Rpb249ITEsdGhpcy5jb25uZWN0aW9uU2VsZWN0b3JzVGFibGVzPSExLHRoaXMuY29ubmVjdGlvblNlbGVjdG9yc0VsZW1lbnRzPSExLHRoaXMuY29ubmVjdGlvbkVsZW1lbnRzPVtdLHRoaXMuY29ubmVjdGlvbnM9W10sdGhpcy5jb25uZWN0ZWRUYWJsZT0hMSx0aGlzLmNvbm5lY3RlZFJvdz0hMSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oIm1vdmFibGVSb3dzIiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJtb3ZhYmxlUm93c0Nvbm5lY3RlZFRhYmxlcyIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigibW92YWJsZVJvd3NDb25uZWN0ZWRFbGVtZW50cyIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigibW92YWJsZVJvd3NTZW5kZXIiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oIm1vdmFibGVSb3dzUmVjZWl2ZXIiLCJpbnNlcnQiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJyb3dIYW5kbGUiKX1jcmVhdGVQbGFjZWhvbGRlckVsZW1lbnQoKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3Itcm93IiksZS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3Itcm93LXBsYWNlaG9sZGVyIiksZX1pbml0aWFsaXplKCl7dGhpcy50YWJsZS5vcHRpb25zLm1vdmFibGVSb3dzJiYodGhpcy5jb25uZWN0aW9uU2VsZWN0b3JzVGFibGVzPXRoaXMudGFibGUub3B0aW9ucy5tb3ZhYmxlUm93c0Nvbm5lY3RlZFRhYmxlcyx0aGlzLmNvbm5lY3Rpb25TZWxlY3RvcnNFbGVtZW50cz10aGlzLnRhYmxlLm9wdGlvbnMubW92YWJsZVJvd3NDb25uZWN0ZWRFbGVtZW50cyx0aGlzLmNvbm5lY3Rpb249dGhpcy5jb25uZWN0aW9uU2VsZWN0b3JzVGFibGVzfHx0aGlzLmNvbm5lY3Rpb25TZWxlY3RvcnNFbGVtZW50cyx0aGlzLnN1YnNjcmliZSgiY2VsbC1pbml0Iix0aGlzLmluaXRpYWxpemVDZWxsLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4taW5pdCIsdGhpcy5pbml0aWFsaXplQ29sdW1uLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJyb3ctaW5pdCIsdGhpcy5pbml0aWFsaXplUm93LmJpbmQodGhpcykpKX1pbml0aWFsaXplR3JvdXBIZWFkZXIoZSl7dmFyIHQ9dGhpcyxpPXt9O2kubW91c2V1cD1mdW5jdGlvbihpKXt0LnRhYmxlUm93RHJvcChpLGUpfS5iaW5kKHQpLGkubW91c2Vtb3ZlPWZ1bmN0aW9uKGkpe3ZhciBzO2kucGFnZVktci5lbE9mZnNldChlLmVsZW1lbnQpLnRvcCt0LnRhYmxlLnJvd01hbmFnZXIuZWxlbWVudC5zY3JvbGxUb3A+ZS5nZXRIZWlnaHQoKS8yP3QudG9Sb3c9PT1lJiZ0LnRvUm93QWZ0ZXJ8fCgocz1lLmdldEVsZW1lbnQoKSkucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodC5wbGFjZWhvbGRlckVsZW1lbnQscy5uZXh0U2libGluZyksdC5tb3ZlUm93KGUsITApKToodC50b1JvdyE9PWV8fHQudG9Sb3dBZnRlcikmJihzPWUuZ2V0RWxlbWVudCgpKS5wcmV2aW91c1NpYmxpbmcmJihzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHQucGxhY2Vob2xkZXJFbGVtZW50LHMpLHQubW92ZVJvdyhlLCExKSl9LmJpbmQodCksZS5tb2R1bGVzLm1vdmVSb3c9aX1pbml0aWFsaXplUm93KGUpe3ZhciB0LGk9dGhpcyxzPXt9O3MubW91c2V1cD1mdW5jdGlvbih0KXtpLnRhYmxlUm93RHJvcCh0LGUpfS5iaW5kKGkpLHMubW91c2Vtb3ZlPWZ1bmN0aW9uKHQpe3ZhciBzPWUuZ2V0RWxlbWVudCgpO3QucGFnZVktci5lbE9mZnNldChzKS50b3AraS50YWJsZS5yb3dNYW5hZ2VyLmVsZW1lbnQuc2Nyb2xsVG9wPmUuZ2V0SGVpZ2h0KCkvMj9pLnRvUm93PT09ZSYmaS50b1Jvd0FmdGVyfHwocy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpLnBsYWNlaG9sZGVyRWxlbWVudCxzLm5leHRTaWJsaW5nKSxpLm1vdmVSb3coZSwhMCkpOihpLnRvUm93IT09ZXx8aS50b1Jvd0FmdGVyKSYmKHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaS5wbGFjZWhvbGRlckVsZW1lbnQscyksaS5tb3ZlUm93KGUsITEpKX0uYmluZChpKSx0aGlzLmhhc0hhbmRsZXx8KCh0PWUuZ2V0RWxlbWVudCgpKS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLChmdW5jdGlvbih0KXsxPT09dC53aGljaCYmKGkuY2hlY2tUaW1lb3V0PXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aS5zdGFydE1vdmUodCxlKX0pLGkuY2hlY2tQZXJpb2QpKX0pKSx0LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLChmdW5jdGlvbihlKXsxPT09ZS53aGljaCYmaS5jaGVja1RpbWVvdXQmJmNsZWFyVGltZW91dChpLmNoZWNrVGltZW91dCl9KSksdGhpcy5iaW5kVG91Y2hFdmVudHMoZSxlLmdldEVsZW1lbnQoKSkpLGUubW9kdWxlcy5tb3ZlUm93PXN9aW5pdGlhbGl6ZUNvbHVtbihlKXtlLmRlZmluaXRpb24ucm93SGFuZGxlJiYhMSE9PXRoaXMudGFibGUub3B0aW9ucy5tb3ZhYmxlUm93cyYmKHRoaXMuaGFzSGFuZGxlPSEwKX1pbml0aWFsaXplQ2VsbChlKXtpZihlLmNvbHVtbi5kZWZpbml0aW9uLnJvd0hhbmRsZSYmITEhPT10aGlzLnRhYmxlLm9wdGlvbnMubW92YWJsZVJvd3Mpe3ZhciB0PXRoaXMsaT1lLmdldEVsZW1lbnQoITApO2kuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwoZnVuY3Rpb24oaSl7MT09PWkud2hpY2gmJih0LmNoZWNrVGltZW91dD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3Quc3RhcnRNb3ZlKGksZS5yb3cpfSksdC5jaGVja1BlcmlvZCkpfSkpLGkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsKGZ1bmN0aW9uKGUpezE9PT1lLndoaWNoJiZ0LmNoZWNrVGltZW91dCYmY2xlYXJUaW1lb3V0KHQuY2hlY2tUaW1lb3V0KX0pKSx0aGlzLmJpbmRUb3VjaEV2ZW50cyhlLnJvdyxpKX19YmluZFRvdWNoRXZlbnRzKGUsdCl7dmFyIGkscyxvLG4scixhLGw9ITE7dC5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IiwodD0+e3RoaXMuY2hlY2tUaW1lb3V0PXNldFRpbWVvdXQoKCgpPT57dGhpcy50b3VjaE1vdmU9ITAsaT1lLm5leHRSb3coKSxvPWk/aS5nZXRIZWlnaHQoKS8yOjAscz1lLnByZXZSb3coKSxuPXM/cy5nZXRIZWlnaHQoKS8yOjAscj0wLGE9MCxsPSExLHRoaXMuc3RhcnRNb3ZlKHQsZSl9KSx0aGlzLmNoZWNrUGVyaW9kKX0pLHtwYXNzaXZlOiEwfSksdGhpcy5tb3ZpbmcsdGhpcy50b1Jvdyx0aGlzLnRvUm93QWZ0ZXIsdC5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLCh0PT57dmFyIGgsZDt0aGlzLm1vdmluZyYmKHQucHJldmVudERlZmF1bHQoKSx0aGlzLm1vdmVIb3Zlcih0KSxsfHwobD10LnRvdWNoZXNbMF0ucGFnZVkpLChoPXQudG91Y2hlc1swXS5wYWdlWS1sKT4wP2kmJmgtcj5vJiYoZD1pKSE9PWUmJihsPXQudG91Y2hlc1swXS5wYWdlWSxkLmdldEVsZW1lbnQoKS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLnBsYWNlaG9sZGVyRWxlbWVudCxkLmdldEVsZW1lbnQoKS5uZXh0U2libGluZyksdGhpcy5tb3ZlUm93KGQsITApKTpzJiYtaC1hPm4mJihkPXMpIT09ZSYmKGw9dC50b3VjaGVzWzBdLnBhZ2VZLGQuZ2V0RWxlbWVudCgpLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMucGxhY2Vob2xkZXJFbGVtZW50LGQuZ2V0RWxlbWVudCgpKSx0aGlzLm1vdmVSb3coZCwhMSkpLGQmJihpPWQubmV4dFJvdygpLHI9byxvPWk/aS5nZXRIZWlnaHQoKS8yOjAscz1kLnByZXZSb3coKSxhPW4sbj1zP3MuZ2V0SGVpZ2h0KCkvMjowKSl9KSksdC5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsKGU9Pnt0aGlzLmNoZWNrVGltZW91dCYmY2xlYXJUaW1lb3V0KHRoaXMuY2hlY2tUaW1lb3V0KSx0aGlzLm1vdmluZyYmKHRoaXMuZW5kTW92ZShlKSx0aGlzLnRvdWNoTW92ZT0hMSl9KSl9X2JpbmRNb3VzZU1vdmUoKXt0aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0RGlzcGxheVJvd3MoKS5mb3JFYWNoKChlPT57KCJyb3ciPT09ZS50eXBlfHwiZ3JvdXAiPT09ZS50eXBlKSYmZS5tb2R1bGVzLm1vdmVSb3cmJmUubW9kdWxlcy5tb3ZlUm93Lm1vdXNlbW92ZSYmZS5nZXRFbGVtZW50KCkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixlLm1vZHVsZXMubW92ZVJvdy5tb3VzZW1vdmUpfSkpfV91bmJpbmRNb3VzZU1vdmUoKXt0aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0RGlzcGxheVJvd3MoKS5mb3JFYWNoKChlPT57KCJyb3ciPT09ZS50eXBlfHwiZ3JvdXAiPT09ZS50eXBlKSYmZS5tb2R1bGVzLm1vdmVSb3cmJmUubW9kdWxlcy5tb3ZlUm93Lm1vdXNlbW92ZSYmZS5nZXRFbGVtZW50KCkucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixlLm1vZHVsZXMubW92ZVJvdy5tb3VzZW1vdmUpfSkpfXN0YXJ0TW92ZShlLHQpe3ZhciBpPXQuZ2V0RWxlbWVudCgpO3RoaXMuc2V0U3RhcnRQb3NpdGlvbihlLHQpLHRoaXMubW92aW5nPXQsdGhpcy50YWJsZS5lbGVtZW50LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1ibG9jay1zZWxlY3QiKSx0aGlzLnBsYWNlaG9sZGVyRWxlbWVudC5zdHlsZS53aWR0aD10LmdldFdpZHRoKCkrInB4Iix0aGlzLnBsYWNlaG9sZGVyRWxlbWVudC5zdHlsZS5oZWlnaHQ9dC5nZXRIZWlnaHQoKSsicHgiLHRoaXMuY29ubmVjdGlvbj8odGhpcy50YWJsZS5lbGVtZW50LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1tb3Zpbmdyb3ctc2VuZGluZyIpLHRoaXMuY29ubmVjdFRvVGFibGVzKHQpKTooaS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLnBsYWNlaG9sZGVyRWxlbWVudCxpKSxpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaSkpLHRoaXMuaG92ZXJFbGVtZW50PWkuY2xvbmVOb2RlKCEwKSx0aGlzLmhvdmVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItbW92aW5nIiksdGhpcy5jb25uZWN0aW9uPyhkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuaG92ZXJFbGVtZW50KSx0aGlzLmhvdmVyRWxlbWVudC5zdHlsZS5sZWZ0PSIwIix0aGlzLmhvdmVyRWxlbWVudC5zdHlsZS50b3A9IjAiLHRoaXMuaG92ZXJFbGVtZW50LnN0eWxlLndpZHRoPXRoaXMudGFibGUuZWxlbWVudC5jbGllbnRXaWR0aCsicHgiLHRoaXMuaG92ZXJFbGVtZW50LnN0eWxlLndoaXRlU3BhY2U9Im5vd3JhcCIsdGhpcy5ob3ZlckVsZW1lbnQuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiIsdGhpcy5ob3ZlckVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cz0ibm9uZSIpOih0aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0VGFibGVFbGVtZW50KCkuYXBwZW5kQ2hpbGQodGhpcy5ob3ZlckVsZW1lbnQpLHRoaXMuaG92ZXJFbGVtZW50LnN0eWxlLmxlZnQ9IjAiLHRoaXMuaG92ZXJFbGVtZW50LnN0eWxlLnRvcD0iMCIsdGhpcy5fYmluZE1vdXNlTW92ZSgpKSxkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5tb3ZlSG92ZXIpLGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdGhpcy5lbmRNb3ZlKSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoInJvd01vdmluZyIsdC5nZXRDb21wb25lbnQoKSksdGhpcy5tb3ZlSG92ZXIoZSl9c2V0U3RhcnRQb3NpdGlvbihlLHQpe3ZhciBpLHMsbz10aGlzLnRvdWNoTW92ZT9lLnRvdWNoZXNbMF0ucGFnZVg6ZS5wYWdlWCxuPXRoaXMudG91Y2hNb3ZlP2UudG91Y2hlc1swXS5wYWdlWTplLnBhZ2VZO2k9dC5nZXRFbGVtZW50KCksdGhpcy5jb25uZWN0aW9uPyhzPWkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksdGhpcy5zdGFydFg9cy5sZWZ0LW8rd2luZG93LnBhZ2VYT2Zmc2V0LHRoaXMuc3RhcnRZPXMudG9wLW4rd2luZG93LnBhZ2VZT2Zmc2V0KTp0aGlzLnN0YXJ0WT1uLWkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wfWVuZE1vdmUoZSl7ZSYmMSE9PWUud2hpY2gmJiF0aGlzLnRvdWNoTW92ZXx8KHRoaXMuX3VuYmluZE1vdXNlTW92ZSgpLHRoaXMuY29ubmVjdGlvbnx8KHRoaXMucGxhY2Vob2xkZXJFbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMubW92aW5nLmdldEVsZW1lbnQoKSx0aGlzLnBsYWNlaG9sZGVyRWxlbWVudC5uZXh0U2libGluZyksdGhpcy5wbGFjZWhvbGRlckVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnBsYWNlaG9sZGVyRWxlbWVudCkpLHRoaXMuaG92ZXJFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5ob3ZlckVsZW1lbnQpLHRoaXMudGFibGUuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJ0YWJ1bGF0b3ItYmxvY2stc2VsZWN0IiksdGhpcy50b1Jvdz90aGlzLnRhYmxlLnJvd01hbmFnZXIubW92ZVJvdyh0aGlzLm1vdmluZyx0aGlzLnRvUm93LHRoaXMudG9Sb3dBZnRlcik6dGhpcy5kaXNwYXRjaEV4dGVybmFsKCJyb3dNb3ZlQ2FuY2VsbGVkIix0aGlzLm1vdmluZy5nZXRDb21wb25lbnQoKSksdGhpcy5tb3Zpbmc9ITEsdGhpcy50b1Jvdz0hMSx0aGlzLnRvUm93QWZ0ZXI9ITEsZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMubW92ZUhvdmVyKSxkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHRoaXMuZW5kTW92ZSksdGhpcy5jb25uZWN0aW9uJiYodGhpcy50YWJsZS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInRhYnVsYXRvci1tb3Zpbmdyb3ctc2VuZGluZyIpLHRoaXMuZGlzY29ubmVjdEZyb21UYWJsZXMoKSkpfW1vdmVSb3coZSx0KXt0aGlzLnRvUm93PWUsdGhpcy50b1Jvd0FmdGVyPXR9bW92ZUhvdmVyKGUpe3RoaXMuY29ubmVjdGlvbj90aGlzLm1vdmVIb3ZlckNvbm5lY3Rpb25zLmNhbGwodGhpcyxlKTp0aGlzLm1vdmVIb3ZlclRhYmxlLmNhbGwodGhpcyxlKX1tb3ZlSG92ZXJUYWJsZShlKXt2YXIgdD10aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0RWxlbWVudCgpLGk9dC5zY3JvbGxUb3Ascz0odGhpcy50b3VjaE1vdmU/ZS50b3VjaGVzWzBdLnBhZ2VZOmUucGFnZVkpLXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wK2k7dGhpcy5ob3ZlckVsZW1lbnQuc3R5bGUudG9wPU1hdGgubWluKHMtdGhpcy5zdGFydFksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmVsZW1lbnQuc2Nyb2xsSGVpZ2h0LXRoaXMuaG92ZXJFbGVtZW50Lm9mZnNldEhlaWdodCkrInB4In1tb3ZlSG92ZXJDb25uZWN0aW9ucyhlKXt0aGlzLmhvdmVyRWxlbWVudC5zdHlsZS5sZWZ0PXRoaXMuc3RhcnRYKyh0aGlzLnRvdWNoTW92ZT9lLnRvdWNoZXNbMF0ucGFnZVg6ZS5wYWdlWCkrInB4Iix0aGlzLmhvdmVyRWxlbWVudC5zdHlsZS50b3A9dGhpcy5zdGFydFkrKHRoaXMudG91Y2hNb3ZlP2UudG91Y2hlc1swXS5wYWdlWTplLnBhZ2VZKSsicHgifWVsZW1lbnRSb3dEcm9wKGUsdCxpKXt0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoIm1vdmFibGVSb3dzRWxlbWVudERyb3AiLGUsdCwhIWkmJmkuZ2V0Q29tcG9uZW50KCkpfWNvbm5lY3RUb1RhYmxlcyhlKXt2YXIgdDt0aGlzLmNvbm5lY3Rpb25TZWxlY3RvcnNUYWJsZXMmJih0PXRoaXMuY29tbXNDb25uZWN0aW9ucyh0aGlzLmNvbm5lY3Rpb25TZWxlY3RvcnNUYWJsZXMpLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgibW92YWJsZVJvd3NTZW5kaW5nU3RhcnQiLHQpLHRoaXMuY29tbXNTZW5kKHRoaXMuY29ubmVjdGlvblNlbGVjdG9yc1RhYmxlcywibW92ZVJvdyIsImNvbm5lY3QiLHtyb3c6ZX0pKSx0aGlzLmNvbm5lY3Rpb25TZWxlY3RvcnNFbGVtZW50cyYmKHRoaXMuY29ubmVjdGlvbkVsZW1lbnRzPVtdLEFycmF5LmlzQXJyYXkodGhpcy5jb25uZWN0aW9uU2VsZWN0b3JzRWxlbWVudHMpfHwodGhpcy5jb25uZWN0aW9uU2VsZWN0b3JzRWxlbWVudHM9W3RoaXMuY29ubmVjdGlvblNlbGVjdG9yc0VsZW1lbnRzXSksdGhpcy5jb25uZWN0aW9uU2VsZWN0b3JzRWxlbWVudHMuZm9yRWFjaCgoZT0+eyJzdHJpbmciPT10eXBlb2YgZT90aGlzLmNvbm5lY3Rpb25FbGVtZW50cz10aGlzLmNvbm5lY3Rpb25FbGVtZW50cy5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlKSkpOnRoaXMuY29ubmVjdGlvbkVsZW1lbnRzLnB1c2goZSl9KSksdGhpcy5jb25uZWN0aW9uRWxlbWVudHMuZm9yRWFjaCgoZT0+e3ZhciB0PXQ9Pnt0aGlzLmVsZW1lbnRSb3dEcm9wKHQsZSx0aGlzLm1vdmluZyl9O2UuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdCksZS50YWJ1bGF0b3JFbGVtZW50RHJvcEV2ZW50PXQsZS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItbW92aW5ncm93LXJlY2VpdmluZyIpfSkpKX1kaXNjb25uZWN0RnJvbVRhYmxlcygpe3ZhciBlO3RoaXMuY29ubmVjdGlvblNlbGVjdG9yc1RhYmxlcyYmKGU9dGhpcy5jb21tc0Nvbm5lY3Rpb25zKHRoaXMuY29ubmVjdGlvblNlbGVjdG9yc1RhYmxlcyksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJtb3ZhYmxlUm93c1NlbmRpbmdTdG9wIixlKSx0aGlzLmNvbW1zU2VuZCh0aGlzLmNvbm5lY3Rpb25TZWxlY3RvcnNUYWJsZXMsIm1vdmVSb3ciLCJkaXNjb25uZWN0IikpLHRoaXMuY29ubmVjdGlvbkVsZW1lbnRzLmZvckVhY2goKGU9PntlLmNsYXNzTGlzdC5yZW1vdmUoInRhYnVsYXRvci1tb3Zpbmdyb3ctcmVjZWl2aW5nIiksZS5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIixlLnRhYnVsYXRvckVsZW1lbnREcm9wRXZlbnQpLGRlbGV0ZSBlLnRhYnVsYXRvckVsZW1lbnREcm9wRXZlbnR9KSl9Y29ubmVjdChlLHQpe3JldHVybiB0aGlzLmNvbm5lY3RlZFRhYmxlPyhjb25zb2xlLndhcm4oIk1vdmUgUm93IEVycm9yIC0gVGFibGUgY2Fubm90IGFjY2VwdCBjb25uZWN0aW9uLCBhbHJlYWR5IGNvbm5lY3RlZCB0byB0YWJsZToiLHRoaXMuY29ubmVjdGVkVGFibGUpLCExKToodGhpcy5jb25uZWN0ZWRUYWJsZT1lLHRoaXMuY29ubmVjdGVkUm93PXQsdGhpcy50YWJsZS5lbGVtZW50LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1tb3Zpbmdyb3ctcmVjZWl2aW5nIiksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldERpc3BsYXlSb3dzKCkuZm9yRWFjaCgoZT0+eyJyb3ciPT09ZS50eXBlJiZlLm1vZHVsZXMubW92ZVJvdyYmZS5tb2R1bGVzLm1vdmVSb3cubW91c2V1cCYmZS5nZXRFbGVtZW50KCkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsZS5tb2R1bGVzLm1vdmVSb3cubW91c2V1cCl9KSksdGhpcy50YWJsZVJvd0Ryb3BFdmVudD10aGlzLnRhYmxlUm93RHJvcC5iaW5kKHRoaXMpLHRoaXMudGFibGUuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLnRhYmxlUm93RHJvcEV2ZW50KSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoIm1vdmFibGVSb3dzUmVjZWl2aW5nU3RhcnQiLHQsZSksITApfWRpc2Nvbm5lY3QoZSl7ZT09PXRoaXMuY29ubmVjdGVkVGFibGU/KHRoaXMuY29ubmVjdGVkVGFibGU9ITEsdGhpcy5jb25uZWN0ZWRSb3c9ITEsdGhpcy50YWJsZS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInRhYnVsYXRvci1tb3Zpbmdyb3ctcmVjZWl2aW5nIiksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldERpc3BsYXlSb3dzKCkuZm9yRWFjaCgoZT0+eyJyb3ciPT09ZS50eXBlJiZlLm1vZHVsZXMubW92ZVJvdyYmZS5tb2R1bGVzLm1vdmVSb3cubW91c2V1cCYmZS5nZXRFbGVtZW50KCkucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsZS5tb2R1bGVzLm1vdmVSb3cubW91c2V1cCl9KSksdGhpcy50YWJsZS5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHRoaXMudGFibGVSb3dEcm9wRXZlbnQpLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgibW92YWJsZVJvd3NSZWNlaXZpbmdTdG9wIixlKSk6Y29uc29sZS53YXJuKCJNb3ZlIFJvdyBFcnJvciAtIHRyeWluZyB0byBkaXNjb25uZWN0IGZyb20gbm9uIGNvbm5lY3RlZCB0YWJsZSIpfWRyb3BDb21wbGV0ZShlLHQsaSl7dmFyIHM9ITE7aWYoaSl7c3dpdGNoKHR5cGVvZiB0aGlzLnRhYmxlLm9wdGlvbnMubW92YWJsZVJvd3NTZW5kZXIpe2Nhc2Uic3RyaW5nIjpzPXRoaXMuc2VuZGVyc1t0aGlzLnRhYmxlLm9wdGlvbnMubW92YWJsZVJvd3NTZW5kZXJdO2JyZWFrO2Nhc2UiZnVuY3Rpb24iOnM9dGhpcy50YWJsZS5vcHRpb25zLm1vdmFibGVSb3dzU2VuZGVyfXM/cy5jYWxsKHRoaXMsdGhpcy5tb3Zpbmc/dGhpcy5tb3ZpbmcuZ2V0Q29tcG9uZW50KCk6dm9pZCAwLHQ/dC5nZXRDb21wb25lbnQoKTp2b2lkIDAsZSk6dGhpcy50YWJsZS5vcHRpb25zLm1vdmFibGVSb3dzU2VuZGVyJiZjb25zb2xlLndhcm4oIk1vdmVyIFJvdyBFcnJvciAtIG5vIG1hdGNoaW5nIHNlbmRlciBmb3VuZDoiLHRoaXMudGFibGUub3B0aW9ucy5tb3ZhYmxlUm93c1NlbmRlciksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJtb3ZhYmxlUm93c1NlbnQiLHRoaXMubW92aW5nLmdldENvbXBvbmVudCgpLHQ/dC5nZXRDb21wb25lbnQoKTp2b2lkIDAsZSl9ZWxzZSB0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoIm1vdmFibGVSb3dzU2VudEZhaWxlZCIsdGhpcy5tb3ZpbmcuZ2V0Q29tcG9uZW50KCksdD90LmdldENvbXBvbmVudCgpOnZvaWQgMCxlKTt0aGlzLmVuZE1vdmUoKX10YWJsZVJvd0Ryb3AoZSx0KXt2YXIgaT0hMSxzPSExO3N3aXRjaChlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHR5cGVvZiB0aGlzLnRhYmxlLm9wdGlvbnMubW92YWJsZVJvd3NSZWNlaXZlcil7Y2FzZSJzdHJpbmciOmk9dGhpcy5yZWNlaXZlcnNbdGhpcy50YWJsZS5vcHRpb25zLm1vdmFibGVSb3dzUmVjZWl2ZXJdO2JyZWFrO2Nhc2UiZnVuY3Rpb24iOmk9dGhpcy50YWJsZS5vcHRpb25zLm1vdmFibGVSb3dzUmVjZWl2ZXJ9aT9zPWkuY2FsbCh0aGlzLHRoaXMuY29ubmVjdGVkUm93LmdldENvbXBvbmVudCgpLHQ/dC5nZXRDb21wb25lbnQoKTp2b2lkIDAsdGhpcy5jb25uZWN0ZWRUYWJsZSk6Y29uc29sZS53YXJuKCJNb3ZlciBSb3cgRXJyb3IgLSBubyBtYXRjaGluZyByZWNlaXZlciBmb3VuZDoiLHRoaXMudGFibGUub3B0aW9ucy5tb3ZhYmxlUm93c1JlY2VpdmVyKSxzP3RoaXMuZGlzcGF0Y2hFeHRlcm5hbCgibW92YWJsZVJvd3NSZWNlaXZlZCIsdGhpcy5jb25uZWN0ZWRSb3cuZ2V0Q29tcG9uZW50KCksdD90LmdldENvbXBvbmVudCgpOnZvaWQgMCx0aGlzLmNvbm5lY3RlZFRhYmxlKTp0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoIm1vdmFibGVSb3dzUmVjZWl2ZWRGYWlsZWQiLHRoaXMuY29ubmVjdGVkUm93LmdldENvbXBvbmVudCgpLHQ/dC5nZXRDb21wb25lbnQoKTp2b2lkIDAsdGhpcy5jb25uZWN0ZWRUYWJsZSksdGhpcy5jb21tc1NlbmQodGhpcy5jb25uZWN0ZWRUYWJsZSwibW92ZVJvdyIsImRyb3Bjb21wbGV0ZSIse3Jvdzp0LHN1Y2Nlc3M6c30pfWNvbW1zUmVjZWl2ZWQoZSx0LGkpe3N3aXRjaCh0KXtjYXNlImNvbm5lY3QiOnJldHVybiB0aGlzLmNvbm5lY3QoZSxpLnJvdyk7Y2FzZSJkaXNjb25uZWN0IjpyZXR1cm4gdGhpcy5kaXNjb25uZWN0KGUpO2Nhc2UiZHJvcGNvbXBsZXRlIjpyZXR1cm4gdGhpcy5kcm9wQ29tcGxldGUoZSxpLnJvdyxpLnN1Y2Nlc3MpfX19Q2UucHJvdG90eXBlLnJlY2VpdmVycz17aW5zZXJ0OmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gdGhpcy50YWJsZS5hZGRSb3coZS5nZXREYXRhKCksdm9pZCAwLHQpLCEwfSxhZGQ6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiB0aGlzLnRhYmxlLmFkZFJvdyhlLmdldERhdGEoKSksITB9LHVwZGF0ZTpmdW5jdGlvbihlLHQsaSl7cmV0dXJuISF0JiYodC51cGRhdGUoZS5nZXREYXRhKCkpLCEwKX0scmVwbGFjZTpmdW5jdGlvbihlLHQsaSl7cmV0dXJuISF0JiYodGhpcy50YWJsZS5hZGRSb3coZS5nZXREYXRhKCksdm9pZCAwLHQpLHQuZGVsZXRlKCksITApfX0sQ2UucHJvdG90eXBlLnNlbmRlcnM9e2RlbGV0ZTpmdW5jdGlvbihlLHQsaSl7ZS5kZWxldGUoKX19LENlLm1vZHVsZU5hbWU9Im1vdmVSb3ciO2NsYXNzIEVlIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmFsbG93ZWRUeXBlcz1bIiIsImRhdGEiLCJlZGl0IiwiY2xpcGJvYXJkIl0sdGhpcy5lbmFibGVkPSEwLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oIm11dGF0b3IiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJtdXRhdG9yUGFyYW1zIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigibXV0YXRvckRhdGEiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJtdXRhdG9yRGF0YVBhcmFtcyIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oIm11dGF0b3JFZGl0IiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigibXV0YXRvckVkaXRQYXJhbXMiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJtdXRhdG9yQ2xpcGJvYXJkIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigibXV0YXRvckNsaXBib2FyZFBhcmFtcyIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oIm11dGF0ZUxpbmsiKX1pbml0aWFsaXplKCl7dGhpcy5zdWJzY3JpYmUoImNlbGwtdmFsdWUtY2hhbmdpbmciLHRoaXMudHJhbnNmb3JtQ2VsbC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY2VsbC12YWx1ZS1jaGFuZ2VkIix0aGlzLm11dGF0ZUxpbmsuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1sYXlvdXQiLHRoaXMuaW5pdGlhbGl6ZUNvbHVtbi5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgicm93LWRhdGEtaW5pdC1iZWZvcmUiLHRoaXMucm93RGF0YUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvdy1kYXRhLWNoYW5naW5nIix0aGlzLnJvd0RhdGFDaGFuZ2VkLmJpbmQodGhpcykpfXJvd0RhdGFDaGFuZ2VkKGUsdCxpKXtyZXR1cm4gdGhpcy50cmFuc2Zvcm1Sb3codCwiZGF0YSIsaSl9aW5pdGlhbGl6ZUNvbHVtbihlKXt2YXIgdD0hMSxpPXt9O3RoaXMuYWxsb3dlZFR5cGVzLmZvckVhY2goKHM9Pnt2YXIgbyxuPSJtdXRhdG9yIisocy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzLnNsaWNlKDEpKTtlLmRlZmluaXRpb25bbl0mJihvPXRoaXMubG9va3VwTXV0YXRvcihlLmRlZmluaXRpb25bbl0pKSYmKHQ9ITAsaVtuXT17bXV0YXRvcjpvLHBhcmFtczplLmRlZmluaXRpb25bbisiUGFyYW1zIl18fHt9fSl9KSksdCYmKGUubW9kdWxlcy5tdXRhdGU9aSl9bG9va3VwTXV0YXRvcihlKXt2YXIgdD0hMTtzd2l0Y2godHlwZW9mIGUpe2Nhc2Uic3RyaW5nIjpFZS5tdXRhdG9yc1tlXT90PUVlLm11dGF0b3JzW2VdOmNvbnNvbGUud2FybigiTXV0YXRvciBFcnJvciAtIE5vIHN1Y2ggbXV0YXRvciBmb3VuZCwgaWdub3Jpbmc6ICIsZSk7YnJlYWs7Y2FzZSJmdW5jdGlvbiI6dD1lfXJldHVybiB0fXRyYW5zZm9ybVJvdyhlLHQsaSl7dmFyIHMsbz0ibXV0YXRvciIrKHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKSk7cmV0dXJuIHRoaXMuZW5hYmxlZCYmdGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLnRyYXZlcnNlKChuPT57dmFyIHIsYSxsO24ubW9kdWxlcy5tdXRhdGUmJihyPW4ubW9kdWxlcy5tdXRhdGVbb118fG4ubW9kdWxlcy5tdXRhdGUubXV0YXRvcnx8ITEpJiYocz1uLmdldEZpZWxkVmFsdWUodm9pZCAwIT09aT9pOmUpLCgiZGF0YSI9PXQmJiFpfHx2b2lkIDAhPT1zKSYmKGw9bi5nZXRDb21wb25lbnQoKSxhPSJmdW5jdGlvbiI9PXR5cGVvZiByLnBhcmFtcz9yLnBhcmFtcyhzLGUsdCxsKTpyLnBhcmFtcyxuLnNldEZpZWxkVmFsdWUoZSxyLm11dGF0b3IocyxlLHQsYSxsKSkpKX0pKSxlfXRyYW5zZm9ybUNlbGwoZSx0KXtpZihlLmNvbHVtbi5tb2R1bGVzLm11dGF0ZSl7dmFyIGk9ZS5jb2x1bW4ubW9kdWxlcy5tdXRhdGUubXV0YXRvckVkaXR8fGUuY29sdW1uLm1vZHVsZXMubXV0YXRlLm11dGF0b3J8fCExLHM9e307aWYoaSlyZXR1cm4gcz1PYmplY3QuYXNzaWduKHMsZS5yb3cuZ2V0RGF0YSgpKSxlLmNvbHVtbi5zZXRGaWVsZFZhbHVlKHMsdCksaS5tdXRhdG9yKHQscywiZWRpdCIsaS5wYXJhbXMsZS5nZXRDb21wb25lbnQoKSl9cmV0dXJuIHR9bXV0YXRlTGluayhlKXt2YXIgdD1lLmNvbHVtbi5kZWZpbml0aW9uLm11dGF0ZUxpbms7dCYmKEFycmF5LmlzQXJyYXkodCl8fCh0PVt0XSksdC5mb3JFYWNoKCh0PT57dmFyIGk9ZS5yb3cuZ2V0Q2VsbCh0KTtpJiZpLnNldFZhbHVlKGkuZ2V0VmFsdWUoKSwhMCwhMCl9KSkpfWVuYWJsZSgpe3RoaXMuZW5hYmxlZD0hMH1kaXNhYmxlKCl7dGhpcy5lbmFibGVkPSExfX1FZS5tb2R1bGVOYW1lPSJtdXRhdG9yIixFZS5tdXRhdG9ycz17fTt2YXIgeWU9e3Jvd3M6ZnVuY3Rpb24oZSx0LGkscyxvKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIikscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7cmV0dXJuIHRoaXMudGFibGUubW9kdWxlcy5sb2NhbGl6ZS5sYW5nQmluZCgicGFnaW5hdGlvbnxjb3VudGVyfHNob3dpbmciLChlPT57ci5pbm5lckhUTUw9ZX0pKSx0aGlzLnRhYmxlLm1vZHVsZXMubG9jYWxpemUubGFuZ0JpbmQoInBhZ2luYXRpb258Y291bnRlcnxvZiIsKGU9PntsLmlubmVySFRNTD1lfSkpLHRoaXMudGFibGUubW9kdWxlcy5sb2NhbGl6ZS5sYW5nQmluZCgicGFnaW5hdGlvbnxjb3VudGVyfHJvd3MiLChlPT57ZC5pbm5lckhUTUw9ZX0pKSxzPyhhLmlubmVySFRNTD0iICIrdCsiLSIrTWF0aC5taW4odCtlLTEscykrIiAiLGguaW5uZXJIVE1MPSIgIitzKyIgIixuLmFwcGVuZENoaWxkKHIpLG4uYXBwZW5kQ2hpbGQoYSksbi5hcHBlbmRDaGlsZChsKSxuLmFwcGVuZENoaWxkKGgpLG4uYXBwZW5kQ2hpbGQoZCkpOihhLmlubmVySFRNTD0iIDAgIixuLmFwcGVuZENoaWxkKHIpLG4uYXBwZW5kQ2hpbGQoYSksbi5hcHBlbmRDaGlsZChkKSksbn0scGFnZXM6ZnVuY3Rpb24oZSx0LGkscyxvKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIikscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7cmV0dXJuIHRoaXMudGFibGUubW9kdWxlcy5sb2NhbGl6ZS5sYW5nQmluZCgicGFnaW5hdGlvbnxjb3VudGVyfHNob3dpbmciLChlPT57ci5pbm5lckhUTUw9ZX0pKSxhLmlubmVySFRNTD0iICIraSsiICIsdGhpcy50YWJsZS5tb2R1bGVzLmxvY2FsaXplLmxhbmdCaW5kKCJwYWdpbmF0aW9ufGNvdW50ZXJ8b2YiLChlPT57bC5pbm5lckhUTUw9ZX0pKSxoLmlubmVySFRNTD0iICIrbysiICIsdGhpcy50YWJsZS5tb2R1bGVzLmxvY2FsaXplLmxhbmdCaW5kKCJwYWdpbmF0aW9ufGNvdW50ZXJ8cGFnZXMiLChlPT57ZC5pbm5lckhUTUw9ZX0pKSxuLmFwcGVuZENoaWxkKHIpLG4uYXBwZW5kQ2hpbGQoYSksbi5hcHBlbmRDaGlsZChsKSxuLmFwcGVuZENoaWxkKGgpLG4uYXBwZW5kQ2hpbGQoZCksbn19O2NsYXNzIFJlIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLm1vZGU9ImxvY2FsIix0aGlzLnByb2dyZXNzaXZlTG9hZD0hMSx0aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLnBhZ2VDb3VudGVyRWxlbWVudD1udWxsLHRoaXMucGFnZUNvdW50ZXI9bnVsbCx0aGlzLnNpemU9MCx0aGlzLnBhZ2U9MSx0aGlzLmNvdW50PTUsdGhpcy5tYXg9MSx0aGlzLnJlbW90ZVJvd0NvdW50RXN0aW1hdGU9bnVsbCx0aGlzLmluaXRpYWxMb2FkPSEwLHRoaXMuZGF0YUNoYW5naW5nPSExLHRoaXMucGFnZVNpemVzPVtdLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicGFnaW5hdGlvbiIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicGFnaW5hdGlvbk1vZGUiLCJsb2NhbCIpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicGFnaW5hdGlvblNpemUiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInBhZ2luYXRpb25Jbml0aWFsUGFnZSIsMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJwYWdpbmF0aW9uQ291bnRlciIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicGFnaW5hdGlvbkNvdW50ZXJFbGVtZW50IiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJwYWdpbmF0aW9uQnV0dG9uQ291bnQiLDUpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicGFnaW5hdGlvblNpemVTZWxlY3RvciIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicGFnaW5hdGlvbkVsZW1lbnQiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInBhZ2luYXRpb25BZGRSb3ciLCJwYWdlIiksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJwcm9ncmVzc2l2ZUxvYWQiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInByb2dyZXNzaXZlTG9hZERlbGF5IiwwKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInByb2dyZXNzaXZlTG9hZFNjcm9sbE1hcmdpbiIsMCksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oInNldE1heFBhZ2UiLHRoaXMuc2V0TWF4UGFnZS5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigic2V0UGFnZSIsdGhpcy5zZXRQYWdlLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJzZXRQYWdlVG9Sb3ciLHRoaXMudXNlclNldFBhZ2VUb1Jvdy5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigic2V0UGFnZVNpemUiLHRoaXMudXNlclNldFBhZ2VTaXplLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJnZXRQYWdlU2l6ZSIsdGhpcy5nZXRQYWdlU2l6ZS5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigicHJldmlvdXNQYWdlIix0aGlzLnByZXZpb3VzUGFnZS5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigibmV4dFBhZ2UiLHRoaXMubmV4dFBhZ2UuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImdldFBhZ2UiLHRoaXMuZ2V0UGFnZS5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigiZ2V0UGFnZU1heCIsdGhpcy5nZXRQYWdlTWF4LmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbigicm93IiwicGFnZVRvIix0aGlzLnNldFBhZ2VUb1Jvdy5iaW5kKHRoaXMpKX1pbml0aWFsaXplKCl7dGhpcy50YWJsZS5vcHRpb25zLnBhZ2luYXRpb24/KHRoaXMuc3Vic2NyaWJlKCJyb3ctZGVsZXRlZCIsdGhpcy5yb3dzVXBkYXRlZC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgicm93LWFkZGVkIix0aGlzLnJvd3NVcGRhdGVkLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJkYXRhLXByb2Nlc3NlZCIsdGhpcy5pbml0aWFsTG9hZENvbXBsZXRlLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJ0YWJsZS1idWlsdCIsdGhpcy5jYWxjdWxhdGVQYWdlU2l6ZXMuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImZvb3Rlci1yZWRyYXciLHRoaXMuZm9vdGVyUmVkcmF3LmJpbmQodGhpcykpLCJwYWdlIj09dGhpcy50YWJsZS5vcHRpb25zLnBhZ2luYXRpb25BZGRSb3cmJnRoaXMuc3Vic2NyaWJlKCJyb3ctYWRkaW5nLXBvc2l0aW9uIix0aGlzLnJvd0FkZGluZ1Bvc2l0aW9uLmJpbmQodGhpcykpLCJyZW1vdGUiPT09dGhpcy50YWJsZS5vcHRpb25zLnBhZ2luYXRpb25Nb2RlJiYodGhpcy5zdWJzY3JpYmUoImRhdGEtcGFyYW1zIix0aGlzLnJlbW90ZVBhZ2VQYXJhbXMuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImRhdGEtbG9hZGVkIix0aGlzLl9wYXJzZVJlbW90ZURhdGEuYmluZCh0aGlzKSkpLHRoaXMudGFibGUub3B0aW9ucy5wcm9ncmVzc2l2ZUxvYWQmJmNvbnNvbGUuZXJyb3IoIlByb2dyZXNzaXZlIExvYWQgRXJyb3IgLSBQYWdpbmF0aW9uIGFuZCBwcm9ncmVzc2l2ZSBsb2FkIGNhbm5vdCBiZSB1c2VkIGF0IHRoZSBzYW1lIHRpbWUiKSx0aGlzLnJlZ2lzdGVyRGlzcGxheUhhbmRsZXIodGhpcy5yZXN0T25SZW5kZXJCZWZvcmUuYmluZCh0aGlzKSw0MCksdGhpcy5yZWdpc3RlckRpc3BsYXlIYW5kbGVyKHRoaXMuZ2V0Um93cy5iaW5kKHRoaXMpLDUwKSx0aGlzLmNyZWF0ZUVsZW1lbnRzKCksdGhpcy5pbml0aWFsaXplUGFnZUNvdW50ZXIoKSx0aGlzLmluaXRpYWxpemVQYWdpbmF0b3IoKSk6dGhpcy50YWJsZS5vcHRpb25zLnByb2dyZXNzaXZlTG9hZCYmKHRoaXMuc3Vic2NyaWJlKCJkYXRhLXBhcmFtcyIsdGhpcy5yZW1vdGVQYWdlUGFyYW1zLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJkYXRhLWxvYWRlZCIsdGhpcy5fcGFyc2VSZW1vdGVEYXRhLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJ0YWJsZS1idWlsdCIsdGhpcy5jYWxjdWxhdGVQYWdlU2l6ZXMuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImRhdGEtcHJvY2Vzc2VkIix0aGlzLmluaXRpYWxMb2FkQ29tcGxldGUuYmluZCh0aGlzKSksdGhpcy5pbml0aWFsaXplUHJvZ3Jlc3NpdmUodGhpcy50YWJsZS5vcHRpb25zLnByb2dyZXNzaXZlTG9hZCksInNjcm9sbCI9PT10aGlzLnRhYmxlLm9wdGlvbnMucHJvZ3Jlc3NpdmVMb2FkJiZ0aGlzLnN1YnNjcmliZSgic2Nyb2xsLXZlcnRpY2FsIix0aGlzLnNjcm9sbFZlcnRpY2FsLmJpbmQodGhpcykpKX1yb3dBZGRpbmdQb3NpdGlvbihlLHQpe3ZhciBpLHM9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLG89cy5nZXREaXNwbGF5Um93cygpO3JldHVybiB0P28ubGVuZ3RoP2k9b1swXTpzLmFjdGl2ZVJvd3MubGVuZ3RoJiYoaT1zLmFjdGl2ZVJvd3Nbcy5hY3RpdmVSb3dzLmxlbmd0aC0xXSx0PSExKTpvLmxlbmd0aCYmKGk9b1tvLmxlbmd0aC0xXSx0PSEoby5sZW5ndGg8dGhpcy5zaXplKSkse2luZGV4OmksdG9wOnR9fWNhbGN1bGF0ZVBhZ2VTaXplcygpe3ZhciBlLHQ7dGhpcy50YWJsZS5vcHRpb25zLnBhZ2luYXRpb25TaXplP3RoaXMuc2l6ZT10aGlzLnRhYmxlLm9wdGlvbnMucGFnaW5hdGlvblNpemU6KChlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3Itcm93IiksZS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iLCh0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItY2VsbCIpLHQuaW5uZXJIVE1MPSJQYWdlIFJvdyBUZXN0IixlLmFwcGVuZENoaWxkKHQpLHRoaXMudGFibGUucm93TWFuYWdlci5nZXRUYWJsZUVsZW1lbnQoKS5hcHBlbmRDaGlsZChlKSx0aGlzLnNpemU9TWF0aC5mbG9vcih0aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0RWxlbWVudCgpLmNsaWVudEhlaWdodC9lLm9mZnNldEhlaWdodCksdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldFRhYmxlRWxlbWVudCgpLnJlbW92ZUNoaWxkKGUpKSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoInBhZ2VTaXplQ2hhbmdlZCIsdGhpcy5zaXplKSx0aGlzLmdlbmVyYXRlUGFnZVNpemVTZWxlY3RMaXN0KCl9aW5pdGlhbExvYWRDb21wbGV0ZSgpe3RoaXMuaW5pdGlhbExvYWQ9ITF9cmVtb3RlUGFnZVBhcmFtcyhlLHQsaSxzKXtyZXR1cm4gdGhpcy5pbml0aWFsTG9hZHx8KHRoaXMucHJvZ3Jlc3NpdmVMb2FkJiYhaXx8IXRoaXMucHJvZ3Jlc3NpdmVMb2FkJiYhdGhpcy5kYXRhQ2hhbmdpbmcpJiZ0aGlzLnJlc2V0KCEwKSxzLnBhZ2U9dGhpcy5wYWdlLHRoaXMuc2l6ZSYmKHMuc2l6ZT10aGlzLnNpemUpLHN9dXNlclNldFBhZ2VUb1JvdyhlKXtyZXR1cm4gdGhpcy50YWJsZS5vcHRpb25zLnBhZ2luYXRpb24mJihlPXRoaXMucm93TWFuYWdlci5maW5kUm93KGUpKT90aGlzLnNldFBhZ2VUb1JvdyhlKTpQcm9taXNlLnJlamVjdCgpfXVzZXJTZXRQYWdlU2l6ZShlKXtyZXR1cm4hIXRoaXMudGFibGUub3B0aW9ucy5wYWdpbmF0aW9uJiYodGhpcy5zZXRQYWdlU2l6ZShlKSx0aGlzLnNldFBhZ2UoMSkpfXNjcm9sbFZlcnRpY2FsKGUsdCl7dmFyIGk7dHx8dGhpcy50YWJsZS5kYXRhTG9hZGVyLmxvYWRpbmd8fChpPXRoaXMudGFibGUucm93TWFuYWdlci5nZXRFbGVtZW50KCkpLnNjcm9sbEhlaWdodC1pLmNsaWVudEhlaWdodC1lPCh0aGlzLnRhYmxlLm9wdGlvbnMucHJvZ3Jlc3NpdmVMb2FkU2Nyb2xsTWFyZ2lufHwyKmkuY2xpZW50SGVpZ2h0KSYmdGhpcy5uZXh0UGFnZSgpLmNhdGNoKCgoKT0+e30pKX1yZXN0T25SZW5kZXJCZWZvcmUoZSx0KXtyZXR1cm4gdHx8ImxvY2FsIj09PXRoaXMubW9kZSYmdGhpcy5yZXNldCgpLGV9cm93c1VwZGF0ZWQoKXt0aGlzLnJlZnJlc2hEYXRhKCEwLCJhbGwiKX1jcmVhdGVFbGVtZW50cygpe3ZhciBlO3RoaXMuZWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1wYWdpbmF0b3IiKSx0aGlzLnBhZ2VzRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksdGhpcy5wYWdlc0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXBhZ2VzIiksKGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIikpLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1wYWdlIiksZS5zZXRBdHRyaWJ1dGUoInR5cGUiLCJidXR0b24iKSxlLnNldEF0dHJpYnV0ZSgicm9sZSIsImJ1dHRvbiIpLGUuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIiwiIiksZS5zZXRBdHRyaWJ1dGUoInRpdGxlIiwiIiksdGhpcy5maXJzdEJ1dD1lLmNsb25lTm9kZSghMCksdGhpcy5maXJzdEJ1dC5zZXRBdHRyaWJ1dGUoImRhdGEtcGFnZSIsImZpcnN0IiksdGhpcy5wcmV2QnV0PWUuY2xvbmVOb2RlKCEwKSx0aGlzLnByZXZCdXQuc2V0QXR0cmlidXRlKCJkYXRhLXBhZ2UiLCJwcmV2IiksdGhpcy5uZXh0QnV0PWUuY2xvbmVOb2RlKCEwKSx0aGlzLm5leHRCdXQuc2V0QXR0cmlidXRlKCJkYXRhLXBhZ2UiLCJuZXh0IiksdGhpcy5sYXN0QnV0PWUuY2xvbmVOb2RlKCEwKSx0aGlzLmxhc3RCdXQuc2V0QXR0cmlidXRlKCJkYXRhLXBhZ2UiLCJsYXN0IiksdGhpcy50YWJsZS5vcHRpb25zLnBhZ2luYXRpb25TaXplU2VsZWN0b3ImJih0aGlzLnBhZ2VTaXplU2VsZWN0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLHRoaXMucGFnZVNpemVTZWxlY3QuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXBhZ2Utc2l6ZSIpKX1nZW5lcmF0ZVBhZ2VTaXplU2VsZWN0TGlzdCgpe3ZhciBlPVtdO2lmKHRoaXMucGFnZVNpemVTZWxlY3Qpe2lmKEFycmF5LmlzQXJyYXkodGhpcy50YWJsZS5vcHRpb25zLnBhZ2luYXRpb25TaXplU2VsZWN0b3IpKWU9dGhpcy50YWJsZS5vcHRpb25zLnBhZ2luYXRpb25TaXplU2VsZWN0b3IsdGhpcy5wYWdlU2l6ZXM9ZSwtMT09dGhpcy5wYWdlU2l6ZXMuaW5kZXhPZih0aGlzLnNpemUpJiZlLnVuc2hpZnQodGhpcy5zaXplKTtlbHNlIGlmKC0xPT10aGlzLnBhZ2VTaXplcy5pbmRleE9mKHRoaXMuc2l6ZSkpe2U9W107Zm9yKGxldCB0PTE7dDw1O3QrKyllLnB1c2godGhpcy5zaXplKnQpO3RoaXMucGFnZVNpemVzPWV9ZWxzZSBlPXRoaXMucGFnZVNpemVzO2Zvcig7dGhpcy5wYWdlU2l6ZVNlbGVjdC5maXJzdENoaWxkOyl0aGlzLnBhZ2VTaXplU2VsZWN0LnJlbW92ZUNoaWxkKHRoaXMucGFnZVNpemVTZWxlY3QuZmlyc3RDaGlsZCk7ZS5mb3JFYWNoKChlPT57dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7dC52YWx1ZT1lLCEwPT09ZT90aGlzLmxhbmdCaW5kKCJwYWdpbmF0aW9ufGFsbCIsKGZ1bmN0aW9uKGUpe3QuaW5uZXJIVE1MPWV9KSk6dC5pbm5lckhUTUw9ZSx0aGlzLnBhZ2VTaXplU2VsZWN0LmFwcGVuZENoaWxkKHQpfSkpLHRoaXMucGFnZVNpemVTZWxlY3QudmFsdWU9dGhpcy5zaXplfX1pbml0aWFsaXplUGFnZUNvdW50ZXIoKXt2YXIgZT10aGlzLnRhYmxlLm9wdGlvbnMucGFnaW5hdGlvbkNvdW50ZXIsdD1udWxsO2UmJigodD0iZnVuY3Rpb24iPT10eXBlb2YgZT9lOlJlLnBhZ2VDb3VudGVyc1tlXSk/KHRoaXMucGFnZUNvdW50ZXI9dCx0aGlzLnBhZ2VDb3VudGVyRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksdGhpcy5wYWdlQ291bnRlckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXBhZ2UtY291bnRlciIpKTpjb25zb2xlLndhcm4oIlBhZ2luYXRpb24gRXJyb3IgLSBObyBzdWNoIHBhZ2UgY291bnRlciBmb3VuZDogIixlKSl9aW5pdGlhbGl6ZVBhZ2luYXRvcihlKXt2YXIgdCxpO2V8fCh0aGlzLmxhbmdCaW5kKCJwYWdpbmF0aW9ufGZpcnN0IiwoZT0+e3RoaXMuZmlyc3RCdXQuaW5uZXJIVE1MPWV9KSksdGhpcy5sYW5nQmluZCgicGFnaW5hdGlvbnxmaXJzdF90aXRsZSIsKGU9Pnt0aGlzLmZpcnN0QnV0LnNldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIsZSksdGhpcy5maXJzdEJ1dC5zZXRBdHRyaWJ1dGUoInRpdGxlIixlKX0pKSx0aGlzLmxhbmdCaW5kKCJwYWdpbmF0aW9ufHByZXYiLChlPT57dGhpcy5wcmV2QnV0LmlubmVySFRNTD1lfSkpLHRoaXMubGFuZ0JpbmQoInBhZ2luYXRpb258cHJldl90aXRsZSIsKGU9Pnt0aGlzLnByZXZCdXQuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIixlKSx0aGlzLnByZXZCdXQuc2V0QXR0cmlidXRlKCJ0aXRsZSIsZSl9KSksdGhpcy5sYW5nQmluZCgicGFnaW5hdGlvbnxuZXh0IiwoZT0+e3RoaXMubmV4dEJ1dC5pbm5lckhUTUw9ZX0pKSx0aGlzLmxhbmdCaW5kKCJwYWdpbmF0aW9ufG5leHRfdGl0bGUiLChlPT57dGhpcy5uZXh0QnV0LnNldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIsZSksdGhpcy5uZXh0QnV0LnNldEF0dHJpYnV0ZSgidGl0bGUiLGUpfSkpLHRoaXMubGFuZ0JpbmQoInBhZ2luYXRpb258bGFzdCIsKGU9Pnt0aGlzLmxhc3RCdXQuaW5uZXJIVE1MPWV9KSksdGhpcy5sYW5nQmluZCgicGFnaW5hdGlvbnxsYXN0X3RpdGxlIiwoZT0+e3RoaXMubGFzdEJ1dC5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLGUpLHRoaXMubGFzdEJ1dC5zZXRBdHRyaWJ1dGUoInRpdGxlIixlKX0pKSx0aGlzLmZpcnN0QnV0LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwoKCk9Pnt0aGlzLnNldFBhZ2UoMSl9KSksdGhpcy5wcmV2QnV0LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwoKCk9Pnt0aGlzLnByZXZpb3VzUGFnZSgpfSkpLHRoaXMubmV4dEJ1dC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsKCgpPT57dGhpcy5uZXh0UGFnZSgpfSkpLHRoaXMubGFzdEJ1dC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsKCgpPT57dGhpcy5zZXRQYWdlKHRoaXMubWF4KX0pKSx0aGlzLnRhYmxlLm9wdGlvbnMucGFnaW5hdGlvbkVsZW1lbnQmJih0aGlzLmVsZW1lbnQ9dGhpcy50YWJsZS5vcHRpb25zLnBhZ2luYXRpb25FbGVtZW50KSx0aGlzLnBhZ2VTaXplU2VsZWN0JiYodD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpLHRoaXMubGFuZ0JpbmQoInBhZ2luYXRpb258cGFnZV9zaXplIiwoZT0+e3RoaXMucGFnZVNpemVTZWxlY3Quc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIixlKSx0aGlzLnBhZ2VTaXplU2VsZWN0LnNldEF0dHJpYnV0ZSgidGl0bGUiLGUpLHQuaW5uZXJIVE1MPWV9KSksdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHQpLHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnBhZ2VTaXplU2VsZWN0KSx0aGlzLnBhZ2VTaXplU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsKGU9Pnt0aGlzLnNldFBhZ2VTaXplKCJ0cnVlIj09dGhpcy5wYWdlU2l6ZVNlbGVjdC52YWx1ZXx8dGhpcy5wYWdlU2l6ZVNlbGVjdC52YWx1ZSksdGhpcy5zZXRQYWdlKDEpfSkpKSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5maXJzdEJ1dCksdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMucHJldkJ1dCksdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMucGFnZXNFbGVtZW50KSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5uZXh0QnV0KSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5sYXN0QnV0KSx0aGlzLnRhYmxlLm9wdGlvbnMucGFnaW5hdGlvbkVsZW1lbnR8fCh0aGlzLnRhYmxlLm9wdGlvbnMucGFnaW5hdGlvbkNvdW50ZXImJih0aGlzLnRhYmxlLm9wdGlvbnMucGFnaW5hdGlvbkNvdW50ZXJFbGVtZW50P3RoaXMudGFibGUub3B0aW9ucy5wYWdpbmF0aW9uQ291bnRlckVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudD90aGlzLnRhYmxlLm9wdGlvbnMucGFnaW5hdGlvbkNvdW50ZXJFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMucGFnZUNvdW50ZXJFbGVtZW50KToic3RyaW5nIj09dHlwZW9mIHRoaXMudGFibGUub3B0aW9ucy5wYWdpbmF0aW9uQ291bnRlckVsZW1lbnQmJigoaT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMudGFibGUub3B0aW9ucy5wYWdpbmF0aW9uQ291bnRlckVsZW1lbnQpKT9pLmFwcGVuZENoaWxkKHRoaXMucGFnZUNvdW50ZXJFbGVtZW50KTpjb25zb2xlLndhcm4oIlBhZ2luYXRpb24gRXJyb3IgLSBVbmFibGUgdG8gZmluZCBlbGVtZW50IG1hdGNoaW5nIHBhZ2luYXRpb25Db3VudGVyRWxlbWVudCBzZWxlY3RvcjoiLHRoaXMudGFibGUub3B0aW9ucy5wYWdpbmF0aW9uQ291bnRlckVsZW1lbnQpKTp0aGlzLmZvb3RlckFwcGVuZCh0aGlzLnBhZ2VDb3VudGVyRWxlbWVudCkpLHRoaXMuZm9vdGVyQXBwZW5kKHRoaXMuZWxlbWVudCkpLHRoaXMucGFnZT10aGlzLnRhYmxlLm9wdGlvbnMucGFnaW5hdGlvbkluaXRpYWxQYWdlLHRoaXMuY291bnQ9dGhpcy50YWJsZS5vcHRpb25zLnBhZ2luYXRpb25CdXR0b25Db3VudCksdGhpcy5tb2RlPXRoaXMudGFibGUub3B0aW9ucy5wYWdpbmF0aW9uTW9kZX1pbml0aWFsaXplUHJvZ3Jlc3NpdmUoZSl7dGhpcy5pbml0aWFsaXplUGFnaW5hdG9yKCEwKSx0aGlzLm1vZGU9InByb2dyZXNzaXZlXyIrZSx0aGlzLnByb2dyZXNzaXZlTG9hZD0hMH10cmFja0NoYW5nZXMoKXt0aGlzLmRpc3BhdGNoKCJwYWdlLWNoYW5nZWQiKX1zZXRNYXhSb3dzKGUpe3RoaXMubWF4PWU/ITA9PT10aGlzLnNpemU/MTpNYXRoLmNlaWwoZS90aGlzLnNpemUpOjEsdGhpcy5wYWdlPnRoaXMubWF4JiYodGhpcy5wYWdlPXRoaXMubWF4KX1yZXNldChlKXt0aGlzLmluaXRpYWxMb2FkfHwoImxvY2FsIj09dGhpcy5tb2RlfHxlKSYmKHRoaXMucGFnZT0xLHRoaXMudHJhY2tDaGFuZ2VzKCkpfXNldE1heFBhZ2UoZSl7ZT1wYXJzZUludChlKSx0aGlzLm1heD1lfHwxLHRoaXMucGFnZT50aGlzLm1heCYmKHRoaXMucGFnZT10aGlzLm1heCx0aGlzLnRyaWdnZXIoKSl9c2V0UGFnZShlKXtzd2l0Y2goZSl7Y2FzZSJmaXJzdCI6cmV0dXJuIHRoaXMuc2V0UGFnZSgxKTtjYXNlInByZXYiOnJldHVybiB0aGlzLnByZXZpb3VzUGFnZSgpO2Nhc2UibmV4dCI6cmV0dXJuIHRoaXMubmV4dFBhZ2UoKTtjYXNlImxhc3QiOnJldHVybiB0aGlzLnNldFBhZ2UodGhpcy5tYXgpfXJldHVybihlPXBhcnNlSW50KGUpKT4wJiZlPD10aGlzLm1heHx8ImxvY2FsIiE9PXRoaXMubW9kZT8odGhpcy5wYWdlPWUsdGhpcy50cmFja0NoYW5nZXMoKSx0aGlzLnRyaWdnZXIoKSk6KGNvbnNvbGUud2FybigiUGFnaW5hdGlvbiBFcnJvciAtIFJlcXVlc3RlZCBwYWdlIGlzIG91dCBvZiByYW5nZSBvZiAxIC0gIit0aGlzLm1heCsiOiIsZSksUHJvbWlzZS5yZWplY3QoKSl9c2V0UGFnZVRvUm93KGUpe3ZhciB0PXRoaXMuZGlzcGxheVJvd3MoLTEpLmluZGV4T2YoZSk7aWYodD4tMSl7dmFyIGk9ITA9PT10aGlzLnNpemU/MTpNYXRoLmNlaWwoKHQrMSkvdGhpcy5zaXplKTtyZXR1cm4gdGhpcy5zZXRQYWdlKGkpfXJldHVybiBjb25zb2xlLndhcm4oIlBhZ2luYXRpb24gRXJyb3IgLSBSZXF1ZXN0ZWQgcm93IGlzIG5vdCB2aXNpYmxlIiksUHJvbWlzZS5yZWplY3QoKX1zZXRQYWdlU2l6ZShlKXshMCE9PWUmJihlPXBhcnNlSW50KGUpKSxlPjAmJih0aGlzLnNpemU9ZSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoInBhZ2VTaXplQ2hhbmdlZCIsZSkpLHRoaXMucGFnZVNpemVTZWxlY3QmJnRoaXMuZ2VuZXJhdGVQYWdlU2l6ZVNlbGVjdExpc3QoKSx0aGlzLnRyYWNrQ2hhbmdlcygpfV9zZXRQYWdlQ291bnRlcihlLHQsaSl7dmFyIHM7aWYodGhpcy5wYWdlQ291bnRlcilzd2l0Y2goInJlbW90ZSI9PT10aGlzLm1vZGUmJih0PXRoaXMuc2l6ZSxpPSh0aGlzLnBhZ2UtMSkqdGhpcy5zaXplKzEsZT10aGlzLnJlbW90ZVJvd0NvdW50RXN0aW1hdGUpLHR5cGVvZihzPXRoaXMucGFnZUNvdW50ZXIuY2FsbCh0aGlzLHQsaSx0aGlzLnBhZ2UsZSx0aGlzLm1heCkpKXtjYXNlIm9iamVjdCI6aWYocyBpbnN0YW5jZW9mIE5vZGUpe2Zvcig7dGhpcy5wYWdlQ291bnRlckVsZW1lbnQuZmlyc3RDaGlsZDspdGhpcy5wYWdlQ291bnRlckVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5wYWdlQ291bnRlckVsZW1lbnQuZmlyc3RDaGlsZCk7dGhpcy5wYWdlQ291bnRlckVsZW1lbnQuYXBwZW5kQ2hpbGQocyl9ZWxzZSB0aGlzLnBhZ2VDb3VudGVyRWxlbWVudC5pbm5lckhUTUw9IiIsbnVsbCE9cyYmY29uc29sZS53YXJuKCJQYWdlIENvdW50ZXIgRXJyb3IgLSBQYWdlIENvdW50ZXIgaGFzIHJldHVybmVkIGEgdHlwZSBvZiBvYmplY3QsIHRoZSBvbmx5IHZhbGlkIHBhZ2UgY291bnRlciBvYmplY3QgcmV0dXJuIGlzIGFuIGluc3RhbmNlIG9mIE5vZGUsIHRoZSBwYWdlIGNvdW50ZXIgcmV0dXJuZWQ6IixzKTticmVhaztjYXNlInVuZGVmaW5lZCI6dGhpcy5wYWdlQ291bnRlckVsZW1lbnQuaW5uZXJIVE1MPSIiO2JyZWFrO2RlZmF1bHQ6dGhpcy5wYWdlQ291bnRlckVsZW1lbnQuaW5uZXJIVE1MPXN9fV9zZXRQYWdlQnV0dG9ucygpe2xldCBlPU1hdGguZmxvb3IoKHRoaXMuY291bnQtMSkvMiksdD1NYXRoLmNlaWwoKHRoaXMuY291bnQtMSkvMiksaT10aGlzLm1heC10aGlzLnBhZ2UrZSsxPHRoaXMuY291bnQ/dGhpcy5tYXgtdGhpcy5jb3VudCsxOk1hdGgubWF4KHRoaXMucGFnZS1lLDEpLHM9dGhpcy5wYWdlPD10P01hdGgubWluKHRoaXMuY291bnQsdGhpcy5tYXgpOk1hdGgubWluKHRoaXMucGFnZSt0LHRoaXMubWF4KTtmb3IoO3RoaXMucGFnZXNFbGVtZW50LmZpcnN0Q2hpbGQ7KXRoaXMucGFnZXNFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMucGFnZXNFbGVtZW50LmZpcnN0Q2hpbGQpOzE9PXRoaXMucGFnZT8odGhpcy5maXJzdEJ1dC5kaXNhYmxlZD0hMCx0aGlzLnByZXZCdXQuZGlzYWJsZWQ9ITApOih0aGlzLmZpcnN0QnV0LmRpc2FibGVkPSExLHRoaXMucHJldkJ1dC5kaXNhYmxlZD0hMSksdGhpcy5wYWdlPT10aGlzLm1heD8odGhpcy5sYXN0QnV0LmRpc2FibGVkPSEwLHRoaXMubmV4dEJ1dC5kaXNhYmxlZD0hMCk6KHRoaXMubGFzdEJ1dC5kaXNhYmxlZD0hMSx0aGlzLm5leHRCdXQuZGlzYWJsZWQ9ITEpO2ZvcihsZXQgZT1pO2U8PXM7ZSsrKWU+MCYmZTw9dGhpcy5tYXgmJnRoaXMucGFnZXNFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2dlbmVyYXRlUGFnZUJ1dHRvbihlKSk7dGhpcy5mb290ZXJSZWRyYXcoKX1fZ2VuZXJhdGVQYWdlQnV0dG9uKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpO3JldHVybiB0LmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1wYWdlIiksZT09dGhpcy5wYWdlJiZ0LmNsYXNzTGlzdC5hZGQoImFjdGl2ZSIpLHQuc2V0QXR0cmlidXRlKCJ0eXBlIiwiYnV0dG9uIiksdC5zZXRBdHRyaWJ1dGUoInJvbGUiLCJidXR0b24iKSx0aGlzLmxhbmdCaW5kKCJwYWdpbmF0aW9ufHBhZ2VfdGl0bGUiLChpPT57dC5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLGkrIiAiK2UpLHQuc2V0QXR0cmlidXRlKCJ0aXRsZSIsaSsiICIrZSl9KSksdC5zZXRBdHRyaWJ1dGUoImRhdGEtcGFnZSIsZSksdC50ZXh0Q29udGVudD1lLHQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCh0PT57dGhpcy5zZXRQYWdlKGUpfSkpLHR9cHJldmlvdXNQYWdlKCl7cmV0dXJuIHRoaXMucGFnZT4xPyh0aGlzLnBhZ2UtLSx0aGlzLnRyYWNrQ2hhbmdlcygpLHRoaXMudHJpZ2dlcigpKTooY29uc29sZS53YXJuKCJQYWdpbmF0aW9uIEVycm9yIC0gUHJldmlvdXMgcGFnZSB3b3VsZCBiZSBsZXNzIHRoYW4gcGFnZSAxOiIsMCksUHJvbWlzZS5yZWplY3QoKSl9bmV4dFBhZ2UoKXtyZXR1cm4gdGhpcy5wYWdlPHRoaXMubWF4Pyh0aGlzLnBhZ2UrKyx0aGlzLnRyYWNrQ2hhbmdlcygpLHRoaXMudHJpZ2dlcigpKToodGhpcy5wcm9ncmVzc2l2ZUxvYWR8fGNvbnNvbGUud2FybigiUGFnaW5hdGlvbiBFcnJvciAtIE5leHQgcGFnZSB3b3VsZCBiZSBncmVhdGVyIHRoYW4gbWF4aW11bSBwYWdlIG9mICIrdGhpcy5tYXgrIjoiLHRoaXMubWF4KzEpLFByb21pc2UucmVqZWN0KCkpfWdldFBhZ2UoKXtyZXR1cm4gdGhpcy5wYWdlfWdldFBhZ2VNYXgoKXtyZXR1cm4gdGhpcy5tYXh9Z2V0UGFnZVNpemUoZSl7cmV0dXJuIHRoaXMuc2l6ZX1nZXRNb2RlKCl7cmV0dXJuIHRoaXMubW9kZX1nZXRSb3dzKGUpe3ZhciB0LGkscyxvLG49MCxyPWUuZmlsdGVyKChlPT4icm93Ij09PWUudHlwZSkpO2lmKCJsb2NhbCI9PXRoaXMubW9kZSl7dD1bXSx0aGlzLnNldE1heFJvd3MoZS5sZW5ndGgpLCEwPT09dGhpcy5zaXplPyhpPTAscz1lLmxlbmd0aCk6cz0oaT10aGlzLnNpemUqKHRoaXMucGFnZS0xKSkrcGFyc2VJbnQodGhpcy5zaXplKSx0aGlzLl9zZXRQYWdlQnV0dG9ucygpO2ZvcihsZXQgcj1pO3I8cztyKyspe2xldCBpPWVbcl07aSYmKHQucHVzaChpKSwicm93Ij09PWkudHlwZSYmKG98fChvPWkpLG4rKykpfXJldHVybiB0aGlzLl9zZXRQYWdlQ291bnRlcihyLmxlbmd0aCxuLG8/ci5pbmRleE9mKG8pKzE6MCksdH1yZXR1cm4gdGhpcy5fc2V0UGFnZUJ1dHRvbnMoKSx0aGlzLl9zZXRQYWdlQ291bnRlcihyLmxlbmd0aCksZS5zbGljZSgwKX10cmlnZ2VyKCl7dmFyIGU7c3dpdGNoKHRoaXMubW9kZSl7Y2FzZSJsb2NhbCI6cmV0dXJuIGU9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLnNjcm9sbExlZnQsdGhpcy5yZWZyZXNoRGF0YSgpLHRoaXMudGFibGUucm93TWFuYWdlci5zY3JvbGxIb3Jpem9udGFsKGUpLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgicGFnZUxvYWRlZCIsdGhpcy5nZXRQYWdlKCkpLFByb21pc2UucmVzb2x2ZSgpO2Nhc2UicmVtb3RlIjpyZXR1cm4gdGhpcy5kYXRhQ2hhbmdpbmc9ITAsdGhpcy5yZWxvYWREYXRhKG51bGwpLmZpbmFsbHkoKCgpPT57dGhpcy5kYXRhQ2hhbmdpbmc9ITF9KSk7Y2FzZSJwcm9ncmVzc2l2ZV9sb2FkIjpjYXNlInByb2dyZXNzaXZlX3Njcm9sbCI6cmV0dXJuIHRoaXMucmVsb2FkRGF0YShudWxsLCEwKTtkZWZhdWx0OnJldHVybiBjb25zb2xlLndhcm4oIlBhZ2luYXRpb24gRXJyb3IgLSBubyBzdWNoIHBhZ2luYXRpb24gbW9kZToiLHRoaXMubW9kZSksUHJvbWlzZS5yZWplY3QoKX19X3BhcnNlUmVtb3RlRGF0YShlKXt2YXIgdDtpZih2b2lkIDA9PT1lLmxhc3RfcGFnZSYmY29uc29sZS53YXJuKCJSZW1vdGUgUGFnaW5hdGlvbiBFcnJvciAtIFNlcnZlciByZXNwb25zZSBtaXNzaW5nICciKyh0aGlzLm9wdGlvbnMoImRhdGFSZWNlaXZlUGFyYW1zIikubGFzdF9wYWdlfHwibGFzdF9wYWdlIikrIicgcHJvcGVydHkiKSxlLmRhdGEpe2lmKHRoaXMubWF4PXBhcnNlSW50KGUubGFzdF9wYWdlKXx8MSx0aGlzLnJlbW90ZVJvd0NvdW50RXN0aW1hdGU9dm9pZCAwIT09ZS5sYXN0X3Jvdz9lLmxhc3Rfcm93OmUubGFzdF9wYWdlKnRoaXMuc2l6ZS0odGhpcy5wYWdlPT1lLmxhc3RfcGFnZT90aGlzLnNpemUtZS5kYXRhLmxlbmd0aDowKSx0aGlzLnByb2dyZXNzaXZlTG9hZCl7c3dpdGNoKHRoaXMubW9kZSl7Y2FzZSJwcm9ncmVzc2l2ZV9sb2FkIjoxPT10aGlzLnBhZ2U/dGhpcy50YWJsZS5yb3dNYW5hZ2VyLnNldERhdGEoZS5kYXRhLCExLDE9PXRoaXMucGFnZSk6dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmFkZFJvd3MoZS5kYXRhKSx0aGlzLnBhZ2U8dGhpcy5tYXgmJnNldFRpbWVvdXQoKCgpPT57dGhpcy5uZXh0UGFnZSgpfSksdGhpcy50YWJsZS5vcHRpb25zLnByb2dyZXNzaXZlTG9hZERlbGF5KTticmVhaztjYXNlInByb2dyZXNzaXZlX3Njcm9sbCI6ZT0xPT09dGhpcy5wYWdlP2UuZGF0YTp0aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0RGF0YSgpLmNvbmNhdChlLmRhdGEpLHRoaXMudGFibGUucm93TWFuYWdlci5zZXREYXRhKGUsMSE9PXRoaXMucGFnZSwxPT10aGlzLnBhZ2UpLHQ9dGhpcy50YWJsZS5vcHRpb25zLnByb2dyZXNzaXZlTG9hZFNjcm9sbE1hcmdpbnx8Mip0aGlzLnRhYmxlLnJvd01hbmFnZXIuZWxlbWVudC5jbGllbnRIZWlnaHQsdGhpcy50YWJsZS5yb3dNYW5hZ2VyLmVsZW1lbnQuc2Nyb2xsSGVpZ2h0PD10aGlzLnRhYmxlLnJvd01hbmFnZXIuZWxlbWVudC5jbGllbnRIZWlnaHQrdCYmdGhpcy5wYWdlPHRoaXMubWF4JiZzZXRUaW1lb3V0KCgoKT0+e3RoaXMubmV4dFBhZ2UoKX0pKX1yZXR1cm4hMX10aGlzLmRpc3BhdGNoRXh0ZXJuYWwoInBhZ2VMb2FkZWQiLHRoaXMuZ2V0UGFnZSgpKX1lbHNlIGNvbnNvbGUud2FybigiUmVtb3RlIFBhZ2luYXRpb24gRXJyb3IgLSBTZXJ2ZXIgcmVzcG9uc2UgbWlzc2luZyAnIisodGhpcy5vcHRpb25zKCJkYXRhUmVjZWl2ZVBhcmFtcyIpLmRhdGF8fCJkYXRhIikrIicgcHJvcGVydHkiKTtyZXR1cm4gZS5kYXRhfWZvb3RlclJlZHJhdygpe3ZhciBlPXRoaXMudGFibGUuZm9vdGVyTWFuYWdlci5jb250YWluZXJFbGVtZW50O01hdGguY2VpbChlLmNsaWVudFdpZHRoKS1lLnNjcm9sbFdpZHRoPDA/dGhpcy5wYWdlc0VsZW1lbnQuc3R5bGUuZGlzcGxheT0ibm9uZSI6KHRoaXMucGFnZXNFbGVtZW50LnN0eWxlLmRpc3BsYXk9IiIsTWF0aC5jZWlsKGUuY2xpZW50V2lkdGgpLWUuc2Nyb2xsV2lkdGg8MCYmKHRoaXMucGFnZXNFbGVtZW50LnN0eWxlLmRpc3BsYXk9Im5vbmUiKSl9fVJlLm1vZHVsZU5hbWU9InBhZ2UiLFJlLnBhZ2VDb3VudGVycz15ZTt2YXIgeGU9e2xvY2FsOmZ1bmN0aW9uKGUsdCl7dmFyIGk9bG9jYWxTdG9yYWdlLmdldEl0ZW0oZSsiLSIrdCk7cmV0dXJuISFpJiZKU09OLnBhcnNlKGkpfSxjb29raWU6ZnVuY3Rpb24oZSx0KXt2YXIgaSxzLG89ZG9jdW1lbnQuY29va2llLG49ZSsiLSIrdCxyPW8uaW5kZXhPZihuKyI9Iik7cmV0dXJuIHI+LTEmJigoaT0obz1vLnNsaWNlKHIpKS5pbmRleE9mKCI7IikpPi0xJiYobz1vLnNsaWNlKDAsaSkpLHM9by5yZXBsYWNlKG4rIj0iLCIiKSksISFzJiZKU09OLnBhcnNlKHMpfX0sVGU9e2xvY2FsOmZ1bmN0aW9uKGUsdCxpKXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbShlKyItIit0LEpTT04uc3RyaW5naWZ5KGkpKX0sY29va2llOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz1uZXcgRGF0ZTtzLnNldERhdGUocy5nZXREYXRlKCkrMWU0KSxkb2N1bWVudC5jb29raWU9ZSsiLSIrdCsiPSIrSlNPTi5zdHJpbmdpZnkoaSkrIjsgZXhwaXJlcz0iK3MudG9VVENTdHJpbmcoKX19O2NsYXNzIGtlIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLm1vZGU9IiIsdGhpcy5pZD0iIix0aGlzLmRlZldhdGNoZXJCbG9jaz0hMSx0aGlzLmNvbmZpZz17fSx0aGlzLnJlYWRGdW5jPSExLHRoaXMud3JpdGVGdW5jPSExLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicGVyc2lzdGVuY2UiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInBlcnNpc3RlbmNlSUQiLCIiKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInBlcnNpc3RlbmNlTW9kZSIsITApLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicGVyc2lzdGVuY2VSZWFkZXJGdW5jIiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJwZXJzaXN0ZW5jZVdyaXRlckZ1bmMiLCExKX1sb2NhbFN0b3JhZ2VUZXN0KCl7dmFyIGU9Il90YWJ1bGF0b3JfdGVzdCI7dHJ5e3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oZSxlKSx3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oZSksITB9Y2F0Y2goZSl7cmV0dXJuITF9fWluaXRpYWxpemUoKXtpZih0aGlzLnRhYmxlLm9wdGlvbnMucGVyc2lzdGVuY2Upe3ZhciBlLHQ9dGhpcy50YWJsZS5vcHRpb25zLnBlcnNpc3RlbmNlTW9kZSxpPXRoaXMudGFibGUub3B0aW9ucy5wZXJzaXN0ZW5jZUlEO3RoaXMubW9kZT0hMCE9PXQ/dDp0aGlzLmxvY2FsU3RvcmFnZVRlc3QoKT8ibG9jYWwiOiJjb29raWUiLHRoaXMudGFibGUub3B0aW9ucy5wZXJzaXN0ZW5jZVJlYWRlckZ1bmM/ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMudGFibGUub3B0aW9ucy5wZXJzaXN0ZW5jZVJlYWRlckZ1bmM/dGhpcy5yZWFkRnVuYz10aGlzLnRhYmxlLm9wdGlvbnMucGVyc2lzdGVuY2VSZWFkZXJGdW5jOmtlLnJlYWRlcnNbdGhpcy50YWJsZS5vcHRpb25zLnBlcnNpc3RlbmNlUmVhZGVyRnVuY10/dGhpcy5yZWFkRnVuYz1rZS5yZWFkZXJzW3RoaXMudGFibGUub3B0aW9ucy5wZXJzaXN0ZW5jZVJlYWRlckZ1bmNdOmNvbnNvbGUud2FybigiUGVyc2lzdGVuY2UgUmVhZCBFcnJvciAtIGludmFsaWQgcmVhZGVyIHNldCIsdGhpcy50YWJsZS5vcHRpb25zLnBlcnNpc3RlbmNlUmVhZGVyRnVuYyk6a2UucmVhZGVyc1t0aGlzLm1vZGVdP3RoaXMucmVhZEZ1bmM9a2UucmVhZGVyc1t0aGlzLm1vZGVdOmNvbnNvbGUud2FybigiUGVyc2lzdGVuY2UgUmVhZCBFcnJvciAtIGludmFsaWQgcmVhZGVyIHNldCIsdGhpcy5tb2RlKSx0aGlzLnRhYmxlLm9wdGlvbnMucGVyc2lzdGVuY2VXcml0ZXJGdW5jPyJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnRhYmxlLm9wdGlvbnMucGVyc2lzdGVuY2VXcml0ZXJGdW5jP3RoaXMud3JpdGVGdW5jPXRoaXMudGFibGUub3B0aW9ucy5wZXJzaXN0ZW5jZVdyaXRlckZ1bmM6a2Uud3JpdGVyc1t0aGlzLnRhYmxlLm9wdGlvbnMucGVyc2lzdGVuY2VXcml0ZXJGdW5jXT90aGlzLndyaXRlRnVuYz1rZS53cml0ZXJzW3RoaXMudGFibGUub3B0aW9ucy5wZXJzaXN0ZW5jZVdyaXRlckZ1bmNdOmNvbnNvbGUud2FybigiUGVyc2lzdGVuY2UgV3JpdGUgRXJyb3IgLSBpbnZhbGlkIHJlYWRlciBzZXQiLHRoaXMudGFibGUub3B0aW9ucy5wZXJzaXN0ZW5jZVdyaXRlckZ1bmMpOmtlLndyaXRlcnNbdGhpcy5tb2RlXT90aGlzLndyaXRlRnVuYz1rZS53cml0ZXJzW3RoaXMubW9kZV06Y29uc29sZS53YXJuKCJQZXJzaXN0ZW5jZSBXcml0ZSBFcnJvciAtIGludmFsaWQgd3JpdGVyIHNldCIsdGhpcy5tb2RlKSx0aGlzLmlkPSJ0YWJ1bGF0b3ItIisoaXx8dGhpcy50YWJsZS5lbGVtZW50LmdldEF0dHJpYnV0ZSgiaWQiKXx8IiIpLHRoaXMuY29uZmlnPXtzb3J0OiEwPT09dGhpcy50YWJsZS5vcHRpb25zLnBlcnNpc3RlbmNlfHx0aGlzLnRhYmxlLm9wdGlvbnMucGVyc2lzdGVuY2Uuc29ydCxmaWx0ZXI6ITA9PT10aGlzLnRhYmxlLm9wdGlvbnMucGVyc2lzdGVuY2V8fHRoaXMudGFibGUub3B0aW9ucy5wZXJzaXN0ZW5jZS5maWx0ZXIsaGVhZGVyRmlsdGVyOiEwPT09dGhpcy50YWJsZS5vcHRpb25zLnBlcnNpc3RlbmNlfHx0aGlzLnRhYmxlLm9wdGlvbnMucGVyc2lzdGVuY2UuaGVhZGVyRmlsdGVyLGdyb3VwOiEwPT09dGhpcy50YWJsZS5vcHRpb25zLnBlcnNpc3RlbmNlfHx0aGlzLnRhYmxlLm9wdGlvbnMucGVyc2lzdGVuY2UuZ3JvdXAscGFnZTohMD09PXRoaXMudGFibGUub3B0aW9ucy5wZXJzaXN0ZW5jZXx8dGhpcy50YWJsZS5vcHRpb25zLnBlcnNpc3RlbmNlLnBhZ2UsY29sdW1uczohMD09PXRoaXMudGFibGUub3B0aW9ucy5wZXJzaXN0ZW5jZT9bInRpdGxlIiwid2lkdGgiLCJ2aXNpYmxlIl06dGhpcy50YWJsZS5vcHRpb25zLnBlcnNpc3RlbmNlLmNvbHVtbnN9LHRoaXMuY29uZmlnLnBhZ2UmJihlPXRoaXMucmV0cmlldmVEYXRhKCJwYWdlIikpJiYodm9pZCAwPT09ZS5wYWdpbmF0aW9uU2l6ZXx8ITAhPT10aGlzLmNvbmZpZy5wYWdlJiYhdGhpcy5jb25maWcucGFnZS5zaXplfHwodGhpcy50YWJsZS5vcHRpb25zLnBhZ2luYXRpb25TaXplPWUucGFnaW5hdGlvblNpemUpLHZvaWQgMD09PWUucGFnaW5hdGlvbkluaXRpYWxQYWdlfHwhMCE9PXRoaXMuY29uZmlnLnBhZ2UmJiF0aGlzLmNvbmZpZy5wYWdlLnBhZ2V8fCh0aGlzLnRhYmxlLm9wdGlvbnMucGFnaW5hdGlvbkluaXRpYWxQYWdlPWUucGFnaW5hdGlvbkluaXRpYWxQYWdlKSksdGhpcy5jb25maWcuZ3JvdXAmJihlPXRoaXMucmV0cmlldmVEYXRhKCJncm91cCIpKSYmKHZvaWQgMD09PWUuZ3JvdXBCeXx8ITAhPT10aGlzLmNvbmZpZy5ncm91cCYmIXRoaXMuY29uZmlnLmdyb3VwLmdyb3VwQnl8fCh0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBCeT1lLmdyb3VwQnkpLHZvaWQgMD09PWUuZ3JvdXBTdGFydE9wZW58fCEwIT09dGhpcy5jb25maWcuZ3JvdXAmJiF0aGlzLmNvbmZpZy5ncm91cC5ncm91cFN0YXJ0T3Blbnx8KHRoaXMudGFibGUub3B0aW9ucy5ncm91cFN0YXJ0T3Blbj1lLmdyb3VwU3RhcnRPcGVuKSx2b2lkIDA9PT1lLmdyb3VwSGVhZGVyfHwhMCE9PXRoaXMuY29uZmlnLmdyb3VwJiYhdGhpcy5jb25maWcuZ3JvdXAuZ3JvdXBIZWFkZXJ8fCh0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBIZWFkZXI9ZS5ncm91cEhlYWRlcikpLHRoaXMuY29uZmlnLmNvbHVtbnMmJih0aGlzLnRhYmxlLm9wdGlvbnMuY29sdW1ucz10aGlzLmxvYWQoImNvbHVtbnMiLHRoaXMudGFibGUub3B0aW9ucy5jb2x1bW5zKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLWluaXQiLHRoaXMuaW5pdGlhbGl6ZUNvbHVtbi5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLXNob3ciLHRoaXMuc2F2ZS5iaW5kKHRoaXMsImNvbHVtbnMiKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1oaWRlIix0aGlzLnNhdmUuYmluZCh0aGlzLCJjb2x1bW5zIikpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4tbW92ZWQiLHRoaXMuc2F2ZS5iaW5kKHRoaXMsImNvbHVtbnMiKSkpLHRoaXMuc3Vic2NyaWJlKCJ0YWJsZS1idWlsdCIsdGhpcy50YWJsZUJ1aWx0LmJpbmQodGhpcyksMCksdGhpcy5zdWJzY3JpYmUoInRhYmxlLXJlZHJhdyIsdGhpcy50YWJsZVJlZHJhdy5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiZmlsdGVyLWNoYW5nZWQiLHRoaXMuZXZlbnRTYXZlLmJpbmQodGhpcywiZmlsdGVyIikpLHRoaXMuc3Vic2NyaWJlKCJmaWx0ZXItY2hhbmdlZCIsdGhpcy5ldmVudFNhdmUuYmluZCh0aGlzLCJoZWFkZXJGaWx0ZXIiKSksdGhpcy5zdWJzY3JpYmUoInNvcnQtY2hhbmdlZCIsdGhpcy5ldmVudFNhdmUuYmluZCh0aGlzLCJzb3J0IikpLHRoaXMuc3Vic2NyaWJlKCJncm91cC1jaGFuZ2VkIix0aGlzLmV2ZW50U2F2ZS5iaW5kKHRoaXMsImdyb3VwIikpLHRoaXMuc3Vic2NyaWJlKCJwYWdlLWNoYW5nZWQiLHRoaXMuZXZlbnRTYXZlLmJpbmQodGhpcywicGFnZSIpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLXJlc2l6ZWQiLHRoaXMuZXZlbnRTYXZlLmJpbmQodGhpcywiY29sdW1ucyIpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLXdpZHRoIix0aGlzLmV2ZW50U2F2ZS5iaW5kKHRoaXMsImNvbHVtbnMiKSksdGhpcy5zdWJzY3JpYmUoImxheW91dC1yZWZyZXNoZWQiLHRoaXMuZXZlbnRTYXZlLmJpbmQodGhpcywiY29sdW1ucyIpKX10aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigiZ2V0Q29sdW1uTGF5b3V0Iix0aGlzLmdldENvbHVtbkxheW91dC5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigic2V0Q29sdW1uTGF5b3V0Iix0aGlzLnNldENvbHVtbkxheW91dC5iaW5kKHRoaXMpKX1ldmVudFNhdmUoZSl7dGhpcy5jb25maWdbZV0mJnRoaXMuc2F2ZShlKX10YWJsZUJ1aWx0KCl7dmFyIGUsdCxpO3RoaXMuY29uZmlnLnNvcnQmJiExPT0hKGU9dGhpcy5sb2FkKCJzb3J0IikpJiYodGhpcy50YWJsZS5vcHRpb25zLmluaXRpYWxTb3J0PWUpLHRoaXMuY29uZmlnLmZpbHRlciYmITE9PSEodD10aGlzLmxvYWQoImZpbHRlciIpKSYmKHRoaXMudGFibGUub3B0aW9ucy5pbml0aWFsRmlsdGVyPXQpLHRoaXMuY29uZmlnLmhlYWRlckZpbHRlciYmITE9PSEoaT10aGlzLmxvYWQoImhlYWRlckZpbHRlciIpKSYmKHRoaXMudGFibGUub3B0aW9ucy5pbml0aWFsSGVhZGVyRmlsdGVyPWkpfXRhYmxlUmVkcmF3KGUpe2UmJnRoaXMuY29uZmlnLmNvbHVtbnMmJnRoaXMuc2F2ZSgiY29sdW1ucyIpfWdldENvbHVtbkxheW91dCgpe3JldHVybiB0aGlzLnBhcnNlQ29sdW1ucyh0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2V0Q29sdW1ucygpKX1zZXRDb2x1bW5MYXlvdXQoZSl7cmV0dXJuIHRoaXMudGFibGUuY29sdW1uTWFuYWdlci5zZXRDb2x1bW5zKHRoaXMubWVyZ2VEZWZpbml0aW9uKHRoaXMudGFibGUub3B0aW9ucy5jb2x1bW5zLGUpKSwhMH1pbml0aWFsaXplQ29sdW1uKGUpe3ZhciB0O3RoaXMuY29uZmlnLmNvbHVtbnMmJih0aGlzLmRlZldhdGNoZXJCbG9jaz0hMCx0PWUuZ2V0RGVmaW5pdGlvbigpLCghMD09PXRoaXMuY29uZmlnLmNvbHVtbnM/T2JqZWN0LmtleXModCk6dGhpcy5jb25maWcuY29sdW1ucykuZm9yRWFjaCgoZT0+e3ZhciBpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxlKSxzPXRbZV07aSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7c2V0OmU9PntzPWUsdGhpcy5kZWZXYXRjaGVyQmxvY2t8fHRoaXMuc2F2ZSgiY29sdW1ucyIpLGkuc2V0JiZpLnNldChlKX0sZ2V0OigpPT4oaS5nZXQmJmkuZ2V0KCkscyl9KX0pKSx0aGlzLmRlZldhdGNoZXJCbG9jaz0hMSl9bG9hZChlLHQpe3ZhciBpPXRoaXMucmV0cmlldmVEYXRhKGUpO3JldHVybiB0JiYoaT1pP3RoaXMubWVyZ2VEZWZpbml0aW9uKHQsaSk6dCksaX1yZXRyaWV2ZURhdGEoZSl7cmV0dXJuISF0aGlzLnJlYWRGdW5jJiZ0aGlzLnJlYWRGdW5jKHRoaXMuaWQsZSl9bWVyZ2VEZWZpbml0aW9uKGUsdCl7dmFyIGk9W107cmV0dXJuKHQ9dHx8W10pLmZvckVhY2goKCh0LHMpPT57dmFyIG8sbj10aGlzLl9maW5kQ29sdW1uKGUsdCk7biYmKCEwPT09dGhpcy5jb25maWcuY29sdW1uc3x8bnVsbD09dGhpcy5jb25maWcuY29sdW1ucz8obz1PYmplY3Qua2V5cyhuKSkucHVzaCgid2lkdGgiKTpvPXRoaXMuY29uZmlnLmNvbHVtbnMsby5mb3JFYWNoKChlPT57ImNvbHVtbnMiIT09ZSYmdm9pZCAwIT09dFtlXSYmKG5bZV09dFtlXSl9KSksbi5jb2x1bW5zJiYobi5jb2x1bW5zPXRoaXMubWVyZ2VEZWZpbml0aW9uKG4uY29sdW1ucyx0LmNvbHVtbnMpKSxpLnB1c2gobikpfSkpLGUuZm9yRWFjaCgoKGUscyk9Pnt0aGlzLl9maW5kQ29sdW1uKHQsZSl8fChpLmxlbmd0aD5zP2kuc3BsaWNlKHMsMCxlKTppLnB1c2goZSkpfSkpLGl9X2ZpbmRDb2x1bW4oZSx0KXt2YXIgaT10LmNvbHVtbnM/Imdyb3VwIjp0LmZpZWxkPyJmaWVsZCI6Im9iamVjdCI7cmV0dXJuIGUuZmluZCgoZnVuY3Rpb24oZSl7c3dpdGNoKGkpe2Nhc2UiZ3JvdXAiOnJldHVybiBlLnRpdGxlPT09dC50aXRsZSYmZS5jb2x1bW5zLmxlbmd0aD09PXQuY29sdW1ucy5sZW5ndGg7Y2FzZSJmaWVsZCI6cmV0dXJuIGUuZmllbGQ9PT10LmZpZWxkO2Nhc2Uib2JqZWN0IjpyZXR1cm4gZT09PXR9fSkpfXNhdmUoZSl7dmFyIHQ9e307c3dpdGNoKGUpe2Nhc2UiY29sdW1ucyI6dD10aGlzLnBhcnNlQ29sdW1ucyh0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2V0Q29sdW1ucygpKTticmVhaztjYXNlImZpbHRlciI6dD10aGlzLnRhYmxlLm1vZHVsZXMuZmlsdGVyLmdldEZpbHRlcnMoKTticmVhaztjYXNlImhlYWRlckZpbHRlciI6dD10aGlzLnRhYmxlLm1vZHVsZXMuZmlsdGVyLmdldEhlYWRlckZpbHRlcnMoKTticmVhaztjYXNlInNvcnQiOnQ9dGhpcy52YWxpZGF0ZVNvcnRlcnModGhpcy50YWJsZS5tb2R1bGVzLnNvcnQuZ2V0U29ydCgpKTticmVhaztjYXNlImdyb3VwIjp0PXRoaXMuZ2V0R3JvdXBDb25maWcoKTticmVhaztjYXNlInBhZ2UiOnQ9dGhpcy5nZXRQYWdlQ29uZmlnKCl9dGhpcy53cml0ZUZ1bmMmJnRoaXMud3JpdGVGdW5jKHRoaXMuaWQsZSx0KX12YWxpZGF0ZVNvcnRlcnMoZSl7cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5jb2x1bW49ZS5maWVsZCxkZWxldGUgZS5maWVsZH0pKSxlfWdldEdyb3VwQ29uZmlnKCl7dmFyIGU9e307cmV0dXJuIHRoaXMuY29uZmlnLmdyb3VwJiYoKCEwPT09dGhpcy5jb25maWcuZ3JvdXB8fHRoaXMuY29uZmlnLmdyb3VwLmdyb3VwQnkpJiYoZS5ncm91cEJ5PXRoaXMudGFibGUub3B0aW9ucy5ncm91cEJ5KSwoITA9PT10aGlzLmNvbmZpZy5ncm91cHx8dGhpcy5jb25maWcuZ3JvdXAuZ3JvdXBTdGFydE9wZW4pJiYoZS5ncm91cFN0YXJ0T3Blbj10aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBTdGFydE9wZW4pLCghMD09PXRoaXMuY29uZmlnLmdyb3VwfHx0aGlzLmNvbmZpZy5ncm91cC5ncm91cEhlYWRlcikmJihlLmdyb3VwSGVhZGVyPXRoaXMudGFibGUub3B0aW9ucy5ncm91cEhlYWRlcikpLGV9Z2V0UGFnZUNvbmZpZygpe3ZhciBlPXt9O3JldHVybiB0aGlzLmNvbmZpZy5wYWdlJiYoKCEwPT09dGhpcy5jb25maWcucGFnZXx8dGhpcy5jb25maWcucGFnZS5zaXplKSYmKGUucGFnaW5hdGlvblNpemU9dGhpcy50YWJsZS5tb2R1bGVzLnBhZ2UuZ2V0UGFnZVNpemUoKSksKCEwPT09dGhpcy5jb25maWcucGFnZXx8dGhpcy5jb25maWcucGFnZS5wYWdlKSYmKGUucGFnaW5hdGlvbkluaXRpYWxQYWdlPXRoaXMudGFibGUubW9kdWxlcy5wYWdlLmdldFBhZ2UoKSkpLGV9cGFyc2VDb2x1bW5zKGUpe3ZhciB0PVtdLGk9WyJoZWFkZXJDb250ZXh0TWVudSIsImhlYWRlck1lbnUiLCJjb250ZXh0TWVudSIsImNsaWNrTWVudSJdO3JldHVybiBlLmZvckVhY2goKGU9Pnt2YXIgcyxvPXt9LG49ZS5nZXREZWZpbml0aW9uKCk7ZS5pc0dyb3VwPyhvLnRpdGxlPW4udGl0bGUsby5jb2x1bW5zPXRoaXMucGFyc2VDb2x1bW5zKGUuZ2V0Q29sdW1ucygpKSk6KG8uZmllbGQ9ZS5nZXRGaWVsZCgpLCEwPT09dGhpcy5jb25maWcuY29sdW1uc3x8bnVsbD09dGhpcy5jb25maWcuY29sdW1ucz8oKHM9T2JqZWN0LmtleXMobikpLnB1c2goIndpZHRoIikscy5wdXNoKCJ2aXNpYmxlIikpOnM9dGhpcy5jb25maWcuY29sdW1ucyxzLmZvckVhY2goKHQ9Pntzd2l0Y2godCl7Y2FzZSJ3aWR0aCI6by53aWR0aD1lLmdldFdpZHRoKCk7YnJlYWs7Y2FzZSJ2aXNpYmxlIjpvLnZpc2libGU9ZS52aXNpYmxlO2JyZWFrO2RlZmF1bHQ6ImZ1bmN0aW9uIiE9dHlwZW9mIG5bdF0mJi0xPT09aS5pbmRleE9mKHQpJiYob1t0XT1uW3RdKX19KSkpLHQucHVzaChvKX0pKSx0fX1rZS5tb2R1bGVOYW1lPSJwZXJzaXN0ZW5jZSIsa2UubW9kdWxlSW5pdE9yZGVyPS0xMCxrZS5yZWFkZXJzPXhlLGtlLndyaXRlcnM9VGU7Y2xhc3MgTWUgZXh0ZW5kcyBre2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuY29sdW1uU3Vic2NyaWJlcnM9e30sdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJyb3dDb250ZXh0UG9wdXAiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInJvd0NsaWNrUG9wdXAiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInJvd0RibENsaWNrUG9wdXAiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImdyb3VwQ29udGV4dFBvcHVwIiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJncm91cENsaWNrUG9wdXAiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImdyb3VwRGJsQ2xpY2tQb3B1cCIsITEpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlckNvbnRleHRQb3B1cCIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlckNsaWNrUG9wdXAiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJoZWFkZXJEYmxDbGlja1BvcHVwIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyUG9wdXAiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJoZWFkZXJQb3B1cEljb24iKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJjb250ZXh0UG9wdXAiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJjbGlja1BvcHVwIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiZGJsQ2xpY2tQb3B1cCIpLHRoaXMucmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbigiY2VsbCIsInBvcHVwIix0aGlzLl9jb21wb25lbnRQb3B1cENhbGwuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJjb2x1bW4iLCJwb3B1cCIsdGhpcy5fY29tcG9uZW50UG9wdXBDYWxsLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbigicm93IiwicG9wdXAiLHRoaXMuX2NvbXBvbmVudFBvcHVwQ2FsbC5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyQ29tcG9uZW50RnVuY3Rpb24oImdyb3VwIiwicG9wdXAiLHRoaXMuX2NvbXBvbmVudFBvcHVwQ2FsbC5iaW5kKHRoaXMpKX1pbml0aWFsaXplKCl7dGhpcy5pbml0aWFsaXplUm93V2F0Y2hlcnMoKSx0aGlzLmluaXRpYWxpemVHcm91cFdhdGNoZXJzKCksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1pbml0Iix0aGlzLmluaXRpYWxpemVDb2x1bW4uYmluZCh0aGlzKSl9X2NvbXBvbmVudFBvcHVwQ2FsbChlLHQsaSl7dGhpcy5sb2FkUG9wdXBFdmVudCh0LG51bGwsZSxpKX1pbml0aWFsaXplUm93V2F0Y2hlcnMoKXt0aGlzLnRhYmxlLm9wdGlvbnMucm93Q29udGV4dFBvcHVwJiYodGhpcy5zdWJzY3JpYmUoInJvdy1jb250ZXh0bWVudSIsdGhpcy5sb2FkUG9wdXBFdmVudC5iaW5kKHRoaXMsdGhpcy50YWJsZS5vcHRpb25zLnJvd0NvbnRleHRQb3B1cCkpLHRoaXMudGFibGUub24oInJvd1RhcEhvbGQiLHRoaXMubG9hZFBvcHVwRXZlbnQuYmluZCh0aGlzLHRoaXMudGFibGUub3B0aW9ucy5yb3dDb250ZXh0UG9wdXApKSksdGhpcy50YWJsZS5vcHRpb25zLnJvd0NsaWNrUG9wdXAmJnRoaXMuc3Vic2NyaWJlKCJyb3ctY2xpY2siLHRoaXMubG9hZFBvcHVwRXZlbnQuYmluZCh0aGlzLHRoaXMudGFibGUub3B0aW9ucy5yb3dDbGlja1BvcHVwKSksdGhpcy50YWJsZS5vcHRpb25zLnJvd0RibENsaWNrUG9wdXAmJnRoaXMuc3Vic2NyaWJlKCJyb3ctZGJsY2xpY2siLHRoaXMubG9hZFBvcHVwRXZlbnQuYmluZCh0aGlzLHRoaXMudGFibGUub3B0aW9ucy5yb3dEYmxDbGlja1BvcHVwKSl9aW5pdGlhbGl6ZUdyb3VwV2F0Y2hlcnMoKXt0aGlzLnRhYmxlLm9wdGlvbnMuZ3JvdXBDb250ZXh0UG9wdXAmJih0aGlzLnN1YnNjcmliZSgiZ3JvdXAtY29udGV4dG1lbnUiLHRoaXMubG9hZFBvcHVwRXZlbnQuYmluZCh0aGlzLHRoaXMudGFibGUub3B0aW9ucy5ncm91cENvbnRleHRQb3B1cCkpLHRoaXMudGFibGUub24oImdyb3VwVGFwSG9sZCIsdGhpcy5sb2FkUG9wdXBFdmVudC5iaW5kKHRoaXMsdGhpcy50YWJsZS5vcHRpb25zLmdyb3VwQ29udGV4dFBvcHVwKSkpLHRoaXMudGFibGUub3B0aW9ucy5ncm91cENsaWNrUG9wdXAmJnRoaXMuc3Vic2NyaWJlKCJncm91cC1jbGljayIsdGhpcy5sb2FkUG9wdXBFdmVudC5iaW5kKHRoaXMsdGhpcy50YWJsZS5vcHRpb25zLmdyb3VwQ2xpY2tQb3B1cCkpLHRoaXMudGFibGUub3B0aW9ucy5ncm91cERibENsaWNrUG9wdXAmJnRoaXMuc3Vic2NyaWJlKCJncm91cC1kYmxjbGljayIsdGhpcy5sb2FkUG9wdXBFdmVudC5iaW5kKHRoaXMsdGhpcy50YWJsZS5vcHRpb25zLmdyb3VwRGJsQ2xpY2tQb3B1cCkpfWluaXRpYWxpemVDb2x1bW4oZSl7dmFyIHQ9ZS5kZWZpbml0aW9uO3QuaGVhZGVyQ29udGV4dFBvcHVwJiYhdGhpcy5jb2x1bW5TdWJzY3JpYmVycy5oZWFkZXJDb250ZXh0UG9wdXAmJih0aGlzLmNvbHVtblN1YnNjcmliZXJzLmhlYWRlckNvbnRleHRQb3B1cD10aGlzLmxvYWRQb3B1cFRhYmxlQ29sdW1uRXZlbnQuYmluZCh0aGlzLCJoZWFkZXJDb250ZXh0UG9wdXAiKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLWNvbnRleHRtZW51Iix0aGlzLmNvbHVtblN1YnNjcmliZXJzLmhlYWRlckNvbnRleHRQb3B1cCksdGhpcy50YWJsZS5vbigiaGVhZGVyVGFwSG9sZCIsdGhpcy5sb2FkUG9wdXBUYWJsZUNvbHVtbkV2ZW50LmJpbmQodGhpcywiaGVhZGVyQ29udGV4dFBvcHVwIikpKSx0LmhlYWRlckNsaWNrUG9wdXAmJiF0aGlzLmNvbHVtblN1YnNjcmliZXJzLmhlYWRlckNsaWNrUG9wdXAmJih0aGlzLmNvbHVtblN1YnNjcmliZXJzLmhlYWRlckNsaWNrUG9wdXA9dGhpcy5sb2FkUG9wdXBUYWJsZUNvbHVtbkV2ZW50LmJpbmQodGhpcywiaGVhZGVyQ2xpY2tQb3B1cCIpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4tY2xpY2siLHRoaXMuY29sdW1uU3Vic2NyaWJlcnMuaGVhZGVyQ2xpY2tQb3B1cCkpLHQuaGVhZGVyRGJsQ2xpY2tQb3B1cCYmIXRoaXMuY29sdW1uU3Vic2NyaWJlcnMuaGVhZGVyRGJsQ2xpY2tQb3B1cCYmKHRoaXMuY29sdW1uU3Vic2NyaWJlcnMuaGVhZGVyRGJsQ2xpY2tQb3B1cD10aGlzLmxvYWRQb3B1cFRhYmxlQ29sdW1uRXZlbnQuYmluZCh0aGlzLCJoZWFkZXJEYmxDbGlja1BvcHVwIiksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1kYmxjbGljayIsdGhpcy5jb2x1bW5TdWJzY3JpYmVycy5oZWFkZXJEYmxDbGlja1BvcHVwKSksdC5oZWFkZXJQb3B1cCYmdGhpcy5pbml0aWFsaXplQ29sdW1uSGVhZGVyUG9wdXAoZSksdC5jb250ZXh0UG9wdXAmJiF0aGlzLmNvbHVtblN1YnNjcmliZXJzLmNvbnRleHRQb3B1cCYmKHRoaXMuY29sdW1uU3Vic2NyaWJlcnMuY29udGV4dFBvcHVwPXRoaXMubG9hZFBvcHVwVGFibGVDZWxsRXZlbnQuYmluZCh0aGlzLCJjb250ZXh0UG9wdXAiKSx0aGlzLnN1YnNjcmliZSgiY2VsbC1jb250ZXh0bWVudSIsdGhpcy5jb2x1bW5TdWJzY3JpYmVycy5jb250ZXh0UG9wdXApLHRoaXMudGFibGUub24oImNlbGxUYXBIb2xkIix0aGlzLmxvYWRQb3B1cFRhYmxlQ2VsbEV2ZW50LmJpbmQodGhpcywiY29udGV4dFBvcHVwIikpKSx0LmNsaWNrUG9wdXAmJiF0aGlzLmNvbHVtblN1YnNjcmliZXJzLmNsaWNrUG9wdXAmJih0aGlzLmNvbHVtblN1YnNjcmliZXJzLmNsaWNrUG9wdXA9dGhpcy5sb2FkUG9wdXBUYWJsZUNlbGxFdmVudC5iaW5kKHRoaXMsImNsaWNrUG9wdXAiKSx0aGlzLnN1YnNjcmliZSgiY2VsbC1jbGljayIsdGhpcy5jb2x1bW5TdWJzY3JpYmVycy5jbGlja1BvcHVwKSksdC5kYmxDbGlja1BvcHVwJiYhdGhpcy5jb2x1bW5TdWJzY3JpYmVycy5kYmxDbGlja1BvcHVwJiYodGhpcy5jb2x1bW5TdWJzY3JpYmVycy5kYmxDbGlja1BvcHVwPXRoaXMubG9hZFBvcHVwVGFibGVDZWxsRXZlbnQuYmluZCh0aGlzLCJkYmxDbGlja1BvcHVwIiksdGhpcy5zdWJzY3JpYmUoImNlbGwtY2xpY2siLHRoaXMuY29sdW1uU3Vic2NyaWJlcnMuZGJsQ2xpY2tQb3B1cCkpfWluaXRpYWxpemVDb2x1bW5IZWFkZXJQb3B1cChlKXt2YXIgdCxpPWUuZGVmaW5pdGlvbi5oZWFkZXJQb3B1cEljb247KHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpKS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItaGVhZGVyLXBvcHVwLWJ1dHRvbiIpLGk/KCJmdW5jdGlvbiI9PXR5cGVvZiBpJiYoaT1pKGUuZ2V0Q29tcG9uZW50KCkpKSxpIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ/dC5hcHBlbmRDaGlsZChpKTp0LmlubmVySFRNTD1pKTp0LmlubmVySFRNTD0iJnZlbGxpcDsiLHQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCh0PT57dC5zdG9wUHJvcGFnYXRpb24oKSx0LnByZXZlbnREZWZhdWx0KCksdGhpcy5sb2FkUG9wdXBFdmVudChlLmRlZmluaXRpb24uaGVhZGVyUG9wdXAsdCxlKX0pKSxlLnRpdGxlRWxlbWVudC5pbnNlcnRCZWZvcmUodCxlLnRpdGxlRWxlbWVudC5maXJzdENoaWxkKX1sb2FkUG9wdXBUYWJsZUNlbGxFdmVudChlLHQsaSl7aS5fY2VsbCYmKGk9aS5fY2VsbCksaS5jb2x1bW4uZGVmaW5pdGlvbltlXSYmdGhpcy5sb2FkUG9wdXBFdmVudChpLmNvbHVtbi5kZWZpbml0aW9uW2VdLHQsaSl9bG9hZFBvcHVwVGFibGVDb2x1bW5FdmVudChlLHQsaSl7aS5fY29sdW1uJiYoaT1pLl9jb2x1bW4pLGkuZGVmaW5pdGlvbltlXSYmdGhpcy5sb2FkUG9wdXBFdmVudChpLmRlZmluaXRpb25bZV0sdCxpKX1sb2FkUG9wdXBFdmVudChlLHQsaSxzKXt2YXIgbztpLl9ncm91cD9pPWkuX2dyb3VwOmkuX3JvdyYmKGk9aS5fcm93KSxlPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2UuY2FsbCh0aGlzLnRhYmxlLHQsaS5nZXRDb21wb25lbnQoKSwoZnVuY3Rpb24oZSl7bz1lfSkpOmUsdGhpcy5sb2FkUG9wdXAodCxpLGUsbyxzKX1sb2FkUG9wdXAoZSx0LGkscyxvKXt2YXIgbixyLGE9IShlIGluc3RhbmNlb2YgTW91c2VFdmVudCk7aSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50P249aToobj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWksbi5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItcG9wdXAiKSxuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwoZT0+e2Uuc3RvcFByb3BhZ2F0aW9uKCl9KSksYXx8ZS5wcmV2ZW50RGVmYXVsdCgpLHI9dGhpcy5wb3B1cChuKSwiZnVuY3Rpb24iPT10eXBlb2YgcyYmci5yZW5kZXJDYWxsYmFjayhzKSxlP3Iuc2hvdyhlKTpyLnNob3codC5nZXRFbGVtZW50KCksb3x8ImNlbnRlciIpLHIuaGlkZU9uQmx1cigoKCk9Pnt0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoInBvcHVwQ2xvc2VkIix0LmdldENvbXBvbmVudCgpKX0pKSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoInBvcHVwT3BlbmVkIix0LmdldENvbXBvbmVudCgpKX19TWUubW9kdWxlTmFtZT0icG9wdXAiO2NsYXNzIExlIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmVsZW1lbnQ9ITEsdGhpcy5tYW51YWxCbG9jaz0hMSx0aGlzLmJlZm9yZXByaW50RXZlbnRIYW5kbGVyPW51bGwsdGhpcy5hZnRlcnByaW50RXZlbnRIYW5kbGVyPW51bGwsdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJwcmludEFzSHRtbCIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicHJpbnRGb3JtYXR0ZXIiLCExKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInByaW50SGVhZGVyIiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJwcmludEZvb3RlciIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicHJpbnRTdHlsZWQiLCEwKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInByaW50Um93UmFuZ2UiLCJ2aXNpYmxlIiksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJwcmludENvbmZpZyIse30pLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oInByaW50IiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigidGl0bGVQcmludCIpfWluaXRpYWxpemUoKXt0aGlzLnRhYmxlLm9wdGlvbnMucHJpbnRBc0h0bWwmJih0aGlzLmJlZm9yZXByaW50RXZlbnRIYW5kbGVyPXRoaXMucmVwbGFjZVRhYmxlLmJpbmQodGhpcyksdGhpcy5hZnRlcnByaW50RXZlbnRIYW5kbGVyPXRoaXMuY2xlYW51cC5iaW5kKHRoaXMpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJiZWZvcmVwcmludCIsdGhpcy5iZWZvcmVwcmludEV2ZW50SGFuZGxlciksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImFmdGVycHJpbnQiLHRoaXMuYWZ0ZXJwcmludEV2ZW50SGFuZGxlciksdGhpcy5zdWJzY3JpYmUoInRhYmxlLWRlc3Ryb3kiLHRoaXMuZGVzdHJveS5iaW5kKHRoaXMpKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oInByaW50Iix0aGlzLnByaW50RnVsbHNjcmVlbi5iaW5kKHRoaXMpKX1kZXN0cm95KCl7dGhpcy50YWJsZS5vcHRpb25zLnByaW50QXNIdG1sJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImJlZm9yZXByaW50Iix0aGlzLmJlZm9yZXByaW50RXZlbnRIYW5kbGVyKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYWZ0ZXJwcmludCIsdGhpcy5hZnRlcnByaW50RXZlbnRIYW5kbGVyKSl9cmVwbGFjZVRhYmxlKCl7dGhpcy5tYW51YWxCbG9ja3x8KHRoaXMuZWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXByaW50LXRhYmxlIiksdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudGFibGUubW9kdWxlcy5leHBvcnQuZ2VuZXJhdGVUYWJsZSh0aGlzLnRhYmxlLm9wdGlvbnMucHJpbnRDb25maWcsdGhpcy50YWJsZS5vcHRpb25zLnByaW50U3R5bGVkLHRoaXMudGFibGUub3B0aW9ucy5wcmludFJvd1JhbmdlLCJwcmludCIpKSx0aGlzLnRhYmxlLmVsZW1lbnQuc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpcy50YWJsZS5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCx0aGlzLnRhYmxlLmVsZW1lbnQpKX1jbGVhbnVwKCl7ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCJ0YWJ1bGF0b3ItcHJpbnQtZnVsbHNjcmVlbi1oaWRlIiksdGhpcy5lbGVtZW50JiZ0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSYmKHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy50YWJsZS5lbGVtZW50LnN0eWxlLmRpc3BsYXk9IiIpfXByaW50RnVsbHNjcmVlbihlLHQsaSl7dmFyIHMsbyxuPXdpbmRvdy5zY3JvbGxYLHI9d2luZG93LnNjcm9sbFksYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGg9dGhpcy50YWJsZS5tb2R1bGVzLmV4cG9ydC5nZW5lcmF0ZVRhYmxlKHZvaWQgMCE9PWk/aTp0aGlzLnRhYmxlLm9wdGlvbnMucHJpbnRDb25maWcsdm9pZCAwIT09dD90OnRoaXMudGFibGUub3B0aW9ucy5wcmludFN0eWxlZCxlfHx0aGlzLnRhYmxlLm9wdGlvbnMucHJpbnRSb3dSYW5nZSwicHJpbnQiKTt0aGlzLm1hbnVhbEJsb2NrPSEwLHRoaXMuZWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXByaW50LWZ1bGxzY3JlZW4iKSx0aGlzLnRhYmxlLm9wdGlvbnMucHJpbnRIZWFkZXImJihhLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1wcmludC1oZWFkZXIiKSwic3RyaW5nIj09dHlwZW9mKHM9ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMudGFibGUub3B0aW9ucy5wcmludEhlYWRlcj90aGlzLnRhYmxlLm9wdGlvbnMucHJpbnRIZWFkZXIuY2FsbCh0aGlzLnRhYmxlKTp0aGlzLnRhYmxlLm9wdGlvbnMucHJpbnRIZWFkZXIpP2EuaW5uZXJIVE1MPXM6YS5hcHBlbmRDaGlsZChzKSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoYSkpLHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChoKSx0aGlzLnRhYmxlLm9wdGlvbnMucHJpbnRGb290ZXImJihsLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1wcmludC1mb290ZXIiKSwic3RyaW5nIj09dHlwZW9mKG89ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMudGFibGUub3B0aW9ucy5wcmludEZvb3Rlcj90aGlzLnRhYmxlLm9wdGlvbnMucHJpbnRGb290ZXIuY2FsbCh0aGlzLnRhYmxlKTp0aGlzLnRhYmxlLm9wdGlvbnMucHJpbnRGb290ZXIpP2wuaW5uZXJIVE1MPW86bC5hcHBlbmRDaGlsZChvKSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQobCkpLGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXByaW50LWZ1bGxzY3JlZW4taGlkZSIpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KSx0aGlzLnRhYmxlLm9wdGlvbnMucHJpbnRGb3JtYXR0ZXImJnRoaXMudGFibGUub3B0aW9ucy5wcmludEZvcm1hdHRlcih0aGlzLmVsZW1lbnQsaCksd2luZG93LnByaW50KCksdGhpcy5jbGVhbnVwKCksd2luZG93LnNjcm9sbFRvKG4sciksdGhpcy5tYW51YWxCbG9jaz0hMX19TGUubW9kdWxlTmFtZT0icHJpbnQiO2NsYXNzIERlIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmRhdGE9ITEsdGhpcy5ibG9ja2VkPSExLHRoaXMub3JpZ0Z1bmNzPXt9LHRoaXMuY3VycmVudFZlcnNpb249MCx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInJlYWN0aXZlRGF0YSIsITEpfWluaXRpYWxpemUoKXt0aGlzLnRhYmxlLm9wdGlvbnMucmVhY3RpdmVEYXRhJiYodGhpcy5zdWJzY3JpYmUoImNlbGwtdmFsdWUtc2F2ZS1iZWZvcmUiLHRoaXMuYmxvY2suYmluZCh0aGlzLCJjZWxsc2F2ZSIpKSx0aGlzLnN1YnNjcmliZSgiY2VsbC12YWx1ZS1zYXZlLWFmdGVyIix0aGlzLnVuYmxvY2suYmluZCh0aGlzLCJjZWxsc2F2ZSIpKSx0aGlzLnN1YnNjcmliZSgicm93LWRhdGEtc2F2ZS1iZWZvcmUiLHRoaXMuYmxvY2suYmluZCh0aGlzLCJyb3dzYXZlIikpLHRoaXMuc3Vic2NyaWJlKCJyb3ctZGF0YS1zYXZlLWFmdGVyIix0aGlzLnVuYmxvY2suYmluZCh0aGlzLCJyb3dzYXZlIikpLHRoaXMuc3Vic2NyaWJlKCJyb3ctZGF0YS1pbml0LWFmdGVyIix0aGlzLndhdGNoUm93LmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJkYXRhLXByb2Nlc3NpbmciLHRoaXMud2F0Y2hEYXRhLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJ0YWJsZS1kZXN0cm95Iix0aGlzLnVud2F0Y2hEYXRhLmJpbmQodGhpcykpKX13YXRjaERhdGEoZSl7dmFyIHQsaT10aGlzO3RoaXMuY3VycmVudFZlcnNpb24rKyx0PXRoaXMuY3VycmVudFZlcnNpb24sdGhpcy51bndhdGNoRGF0YSgpLHRoaXMuZGF0YT1lLHRoaXMub3JpZ0Z1bmNzLnB1c2g9ZS5wdXNoLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmRhdGEsInB1c2giLHtlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMCx2YWx1ZTpmdW5jdGlvbigpe3ZhciBzLG89QXJyYXkuZnJvbShhcmd1bWVudHMpO3JldHVybiBpLmJsb2NrZWR8fHQhPT1pLmN1cnJlbnRWZXJzaW9ufHwoaS5ibG9jaygiZGF0YS1wdXNoIiksby5mb3JFYWNoKChlPT57aS50YWJsZS5yb3dNYW5hZ2VyLmFkZFJvd0FjdHVhbChlLCExKX0pKSxzPWkub3JpZ0Z1bmNzLnB1c2guYXBwbHkoZSxhcmd1bWVudHMpLGkudW5ibG9jaygiZGF0YS1wdXNoIikpLHN9fSksdGhpcy5vcmlnRnVuY3MudW5zaGlmdD1lLnVuc2hpZnQsT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuZGF0YSwidW5zaGlmdCIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHMsbz1BcnJheS5mcm9tKGFyZ3VtZW50cyk7cmV0dXJuIGkuYmxvY2tlZHx8dCE9PWkuY3VycmVudFZlcnNpb258fChpLmJsb2NrKCJkYXRhLXVuc2hpZnQiKSxvLmZvckVhY2goKGU9PntpLnRhYmxlLnJvd01hbmFnZXIuYWRkUm93QWN0dWFsKGUsITApfSkpLHM9aS5vcmlnRnVuY3MudW5zaGlmdC5hcHBseShlLGFyZ3VtZW50cyksaS51bmJsb2NrKCJkYXRhLXVuc2hpZnQiKSksc319KSx0aGlzLm9yaWdGdW5jcy5zaGlmdD1lLnNoaWZ0LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmRhdGEsInNoaWZ0Iix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgcyxvO3JldHVybiBpLmJsb2NrZWR8fHQhPT1pLmN1cnJlbnRWZXJzaW9ufHwoaS5ibG9jaygiZGF0YS1zaGlmdCIpLGkuZGF0YS5sZW5ndGgmJihzPWkudGFibGUucm93TWFuYWdlci5nZXRSb3dGcm9tRGF0YU9iamVjdChpLmRhdGFbMF0pKSYmcy5kZWxldGVBY3R1YWwoKSxvPWkub3JpZ0Z1bmNzLnNoaWZ0LmNhbGwoZSksaS51bmJsb2NrKCJkYXRhLXNoaWZ0IikpLG99fSksdGhpcy5vcmlnRnVuY3MucG9wPWUucG9wLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmRhdGEsInBvcCIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHMsbztyZXR1cm4gaS5ibG9ja2VkfHx0IT09aS5jdXJyZW50VmVyc2lvbnx8KGkuYmxvY2soImRhdGEtcG9wIiksaS5kYXRhLmxlbmd0aCYmKHM9aS50YWJsZS5yb3dNYW5hZ2VyLmdldFJvd0Zyb21EYXRhT2JqZWN0KGkuZGF0YVtpLmRhdGEubGVuZ3RoLTFdKSkmJnMuZGVsZXRlQWN0dWFsKCksbz1pLm9yaWdGdW5jcy5wb3AuY2FsbChlKSxpLnVuYmxvY2soImRhdGEtcG9wIikpLG99fSksdGhpcy5vcmlnRnVuY3Muc3BsaWNlPWUuc3BsaWNlLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmRhdGEsInNwbGljZSIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHMsbyxuPUFycmF5LmZyb20oYXJndW1lbnRzKSxyPW5bMF08MD9lLmxlbmd0aCtuWzBdOm5bMF0sYT1uWzFdLGw9ISFuWzJdJiZuLnNsaWNlKDIpO2lmKCFpLmJsb2NrZWQmJnQ9PT1pLmN1cnJlbnRWZXJzaW9uKXtpZihpLmJsb2NrKCJkYXRhLXNwbGljZSIpLGwmJigocz0hIWVbcl0mJmkudGFibGUucm93TWFuYWdlci5nZXRSb3dGcm9tRGF0YU9iamVjdChlW3JdKSk/bC5mb3JFYWNoKChlPT57aS50YWJsZS5yb3dNYW5hZ2VyLmFkZFJvd0FjdHVhbChlLCEwLHMsITApfSkpOihsPWwuc2xpY2UoKS5yZXZlcnNlKCkpLmZvckVhY2goKGU9PntpLnRhYmxlLnJvd01hbmFnZXIuYWRkUm93QWN0dWFsKGUsITAsITEsITApfSkpKSwwIT09YSl7dmFyIGg9ZS5zbGljZShyLHZvaWQgMD09PW5bMV0/blsxXTpyK2EpO2guZm9yRWFjaCgoKGUsdCk9Pnt2YXIgcz1pLnRhYmxlLnJvd01hbmFnZXIuZ2V0Um93RnJvbURhdGFPYmplY3QoZSk7cyYmcy5kZWxldGVBY3R1YWwodCE9PWgubGVuZ3RoLTEpfSkpfShsfHwwIT09YSkmJmkudGFibGUucm93TWFuYWdlci5yZVJlbmRlckluUG9zaXRpb24oKSxvPWkub3JpZ0Z1bmNzLnNwbGljZS5hcHBseShlLGFyZ3VtZW50cyksaS51bmJsb2NrKCJkYXRhLXNwbGljZSIpfXJldHVybiBvfX0pfXVud2F0Y2hEYXRhKCl7aWYoITEhPT10aGlzLmRhdGEpZm9yKHZhciBlIGluIHRoaXMub3JpZ0Z1bmNzKU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmRhdGEsZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dGhpcy5vcmlnRnVuY3Mua2V5fSl9d2F0Y2hSb3coZSl7dmFyIHQ9ZS5nZXREYXRhKCk7Zm9yKHZhciBpIGluIHQpdGhpcy53YXRjaEtleShlLHQsaSk7dGhpcy50YWJsZS5vcHRpb25zLmRhdGFUcmVlJiZ0aGlzLndhdGNoVHJlZUNoaWxkcmVuKGUpfXdhdGNoVHJlZUNoaWxkcmVuKGUpe3ZhciB0PXRoaXMsaT1lLmdldERhdGEoKVt0aGlzLnRhYmxlLm9wdGlvbnMuZGF0YVRyZWVDaGlsZEZpZWxkXSxzPXt9O2kmJihzLnB1c2g9aS5wdXNoLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLCJwdXNoIix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsdmFsdWU6KCk9PntpZighdC5ibG9ja2VkKXt0LmJsb2NrKCJ0cmVlLXB1c2giKTt2YXIgbz1zLnB1c2guYXBwbHkoaSxhcmd1bWVudHMpO3RoaXMucmVidWlsZFRyZWUoZSksdC51bmJsb2NrKCJ0cmVlLXB1c2giKX1yZXR1cm4gb319KSxzLnVuc2hpZnQ9aS51bnNoaWZ0LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLCJ1bnNoaWZ0Iix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsdmFsdWU6KCk9PntpZighdC5ibG9ja2VkKXt0LmJsb2NrKCJ0cmVlLXVuc2hpZnQiKTt2YXIgbz1zLnVuc2hpZnQuYXBwbHkoaSxhcmd1bWVudHMpO3RoaXMucmVidWlsZFRyZWUoZSksdC51bmJsb2NrKCJ0cmVlLXVuc2hpZnQiKX1yZXR1cm4gb319KSxzLnNoaWZ0PWkuc2hpZnQsT2JqZWN0LmRlZmluZVByb3BlcnR5KGksInNoaWZ0Iix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsdmFsdWU6KCk9PntpZighdC5ibG9ja2VkKXt0LmJsb2NrKCJ0cmVlLXNoaWZ0Iik7dmFyIG89cy5zaGlmdC5jYWxsKGkpO3RoaXMucmVidWlsZFRyZWUoZSksdC51bmJsb2NrKCJ0cmVlLXNoaWZ0Iil9cmV0dXJuIG99fSkscy5wb3A9aS5wb3AsT2JqZWN0LmRlZmluZVByb3BlcnR5KGksInBvcCIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHZhbHVlOigpPT57aWYoIXQuYmxvY2tlZCl7dC5ibG9jaygidHJlZS1wb3AiKTt2YXIgbz1zLnBvcC5jYWxsKGkpO3RoaXMucmVidWlsZFRyZWUoZSksdC51bmJsb2NrKCJ0cmVlLXBvcCIpfXJldHVybiBvfX0pLHMuc3BsaWNlPWkuc3BsaWNlLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLCJzcGxpY2UiLHtlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMCx2YWx1ZTooKT0+e2lmKCF0LmJsb2NrZWQpe3QuYmxvY2soInRyZWUtc3BsaWNlIik7dmFyIG89cy5zcGxpY2UuYXBwbHkoaSxhcmd1bWVudHMpO3RoaXMucmVidWlsZFRyZWUoZSksdC51bmJsb2NrKCJ0cmVlLXNwbGljZSIpfXJldHVybiBvfX0pKX1yZWJ1aWxkVHJlZShlKXt0aGlzLnRhYmxlLm1vZHVsZXMuZGF0YVRyZWUuaW5pdGlhbGl6ZVJvdyhlKSx0aGlzLnRhYmxlLm1vZHVsZXMuZGF0YVRyZWUubGF5b3V0Um93KGUpLHRoaXMudGFibGUucm93TWFuYWdlci5yZWZyZXNoQWN0aXZlRGF0YSgidHJlZSIsITEsITApfXdhdGNoS2V5KGUsdCxpKXt2YXIgcz10aGlzLG89T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpLG49dFtpXSxyPXRoaXMuY3VycmVudFZlcnNpb247T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSx7c2V0OnQ9PntpZihuPXQsIXMuYmxvY2tlZCYmcj09PXMuY3VycmVudFZlcnNpb24pe3MuYmxvY2soImtleSIpO3ZhciBhPXt9O2FbaV09dCxlLnVwZGF0ZURhdGEoYSkscy51bmJsb2NrKCJrZXkiKX1vLnNldCYmby5zZXQodCl9LGdldDooKT0+KG8uZ2V0JiZvLmdldCgpLG4pfSl9dW53YXRjaFJvdyhlKXt2YXIgdD1lLmdldERhdGEoKTtmb3IodmFyIGkgaW4gdClPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLHt2YWx1ZTp0W2ldfSl9YmxvY2soZSl7dGhpcy5ibG9ja2VkfHwodGhpcy5ibG9ja2VkPWUpfXVuYmxvY2soZSl7dGhpcy5ibG9ja2VkPT09ZSYmKHRoaXMuYmxvY2tlZD0hMSl9fURlLm1vZHVsZU5hbWU9InJlYWN0aXZlRGF0YSI7Y2xhc3MgU2UgZXh0ZW5kcyBre2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuc3RhcnRDb2x1bW49ITEsdGhpcy5zdGFydFg9ITEsdGhpcy5zdGFydFdpZHRoPSExLHRoaXMubGF0ZXN0WD0hMSx0aGlzLmhhbmRsZT1udWxsLHRoaXMuaW5pdGlhbE5leHRDb2x1bW49bnVsbCx0aGlzLm5leHRDb2x1bW49bnVsbCx0aGlzLmluaXRpYWxpemVkPSExLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oInJlc2l6YWJsZSIsITApLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicmVzaXphYmxlQ29sdW1uRml0IiwhMSl9aW5pdGlhbGl6ZSgpe3RoaXMuc3Vic2NyaWJlKCJjb2x1bW4tcmVuZGVyZWQiLHRoaXMubGF5b3V0Q29sdW1uSGVhZGVyLmJpbmQodGhpcykpfWluaXRpYWxpemVFdmVudFdhdGNoZXJzKCl7dGhpcy5pbml0aWFsaXplZHx8KHRoaXMuc3Vic2NyaWJlKCJjZWxsLXJlbmRlcmVkIix0aGlzLmxheW91dENlbGxIYW5kbGVzLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjZWxsLWRlbGV0ZSIsdGhpcy5kZUluaXRpYWxpemVDb21wb25lbnQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNlbGwtaGVpZ2h0Iix0aGlzLnJlc2l6ZUhhbmRsZS5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLW1vdmVkIix0aGlzLmNvbHVtbkxheW91dFVwZGF0ZWQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1oaWRlIix0aGlzLmRlSW5pdGlhbGl6ZUNvbHVtbi5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLXNob3ciLHRoaXMuY29sdW1uTGF5b3V0VXBkYXRlZC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLXdpZHRoIix0aGlzLmNvbHVtbldpZHRoVXBkYXRlZC5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLWRlbGV0ZSIsdGhpcy5kZUluaXRpYWxpemVDb21wb25lbnQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1oZWlnaHQiLHRoaXMucmVzaXplSGFuZGxlLmJpbmQodGhpcykpLHRoaXMuaW5pdGlhbGl6ZWQ9ITApfWxheW91dENlbGxIYW5kbGVzKGUpeyJyb3ciPT09ZS5yb3cudHlwZSYmKHRoaXMuZGVJbml0aWFsaXplQ29tcG9uZW50KGUpLHRoaXMuaW5pdGlhbGl6ZUNvbHVtbigiY2VsbCIsZSxlLmNvbHVtbixlLmVsZW1lbnQpKX1sYXlvdXRDb2x1bW5IZWFkZXIoZSl7ZS5kZWZpbml0aW9uLnJlc2l6YWJsZSYmKHRoaXMuaW5pdGlhbGl6ZUV2ZW50V2F0Y2hlcnMoKSx0aGlzLmRlSW5pdGlhbGl6ZUNvbXBvbmVudChlKSx0aGlzLmluaXRpYWxpemVDb2x1bW4oImhlYWRlciIsZSxlLGUuZWxlbWVudCkpfWNvbHVtbkxheW91dFVwZGF0ZWQoZSl7dmFyIHQ9ZS5wcmV2Q29sdW1uKCk7dGhpcy5yZWluaXRpYWxpemVDb2x1bW4oZSksdCYmdGhpcy5yZWluaXRpYWxpemVDb2x1bW4odCl9Y29sdW1uV2lkdGhVcGRhdGVkKGUpe2UubW9kdWxlcy5mcm96ZW4mJih0aGlzLnRhYmxlLm1vZHVsZXMuZnJvemVuQ29sdW1ucy5sZWZ0Q29sdW1ucy5pbmNsdWRlcyhlKT90aGlzLnRhYmxlLm1vZHVsZXMuZnJvemVuQ29sdW1ucy5sZWZ0Q29sdW1ucy5mb3JFYWNoKChlPT57dGhpcy5yZWluaXRpYWxpemVDb2x1bW4oZSl9KSk6dGhpcy50YWJsZS5tb2R1bGVzLmZyb3plbkNvbHVtbnMucmlnaHRDb2x1bW5zLmluY2x1ZGVzKGUpJiZ0aGlzLnRhYmxlLm1vZHVsZXMuZnJvemVuQ29sdW1ucy5yaWdodENvbHVtbnMuZm9yRWFjaCgoZT0+e3RoaXMucmVpbml0aWFsaXplQ29sdW1uKGUpfSkpKX1mcm96ZW5Db2x1bW5PZmZzZXQoZSl7dmFyIHQ9ITE7cmV0dXJuIGUubW9kdWxlcy5mcm96ZW4mJih0PWUubW9kdWxlcy5mcm96ZW4ubWFyZ2luVmFsdWUsImxlZnQiPT09ZS5tb2R1bGVzLmZyb3plbi5wb3NpdGlvbj90Kz1lLmdldFdpZHRoKCktMzp0JiYodC09MykpLCExIT09dCYmdCsicHgifXJlaW5pdGlhbGl6ZUNvbHVtbihlKXt2YXIgdD10aGlzLmZyb3plbkNvbHVtbk9mZnNldChlKTtlLmNlbGxzLmZvckVhY2goKGk9PntpLm1vZHVsZXMucmVzaXplJiZpLm1vZHVsZXMucmVzaXplLmhhbmRsZUVsJiYodCYmKGkubW9kdWxlcy5yZXNpemUuaGFuZGxlRWwuc3R5bGVbZS5tb2R1bGVzLmZyb3plbi5wb3NpdGlvbl09dCksaS5lbGVtZW50LmFmdGVyKGkubW9kdWxlcy5yZXNpemUuaGFuZGxlRWwpKX0pKSxlLm1vZHVsZXMucmVzaXplJiZlLm1vZHVsZXMucmVzaXplLmhhbmRsZUVsJiYodCYmKGUubW9kdWxlcy5yZXNpemUuaGFuZGxlRWwuc3R5bGVbZS5tb2R1bGVzLmZyb3plbi5wb3NpdGlvbl09dCksZS5lbGVtZW50LmFmdGVyKGUubW9kdWxlcy5yZXNpemUuaGFuZGxlRWwpKX1pbml0aWFsaXplQ29sdW1uKGUsdCxpLHMpe3ZhciBvPXRoaXMsbj1pLmRlZmluaXRpb24ucmVzaXphYmxlLHI9e30sYT1pLmdldExhc3RDb2x1bW4oKTtpZigiaGVhZGVyIj09PWUmJihyPXt2YXJpYWJsZUhlaWdodDoidGV4dGFyZWEiPT1pLmRlZmluaXRpb24uZm9ybWF0dGVyfHxpLmRlZmluaXRpb24udmFyaWFibGVIZWlnaHR9KSwoITA9PT1ufHxuPT1lKSYmdGhpcy5fY2hlY2tSZXNpemFiaWxpdHkoYSkpe3ZhciBsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtsLmNsYXNzTmFtZT0idGFidWxhdG9yLWNvbC1yZXNpemUtaGFuZGxlIixsLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwoZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKX0pKTt2YXIgaD1mdW5jdGlvbihlKXtvLnN0YXJ0Q29sdW1uPWksby5pbml0aWFsTmV4dENvbHVtbj1vLm5leHRDb2x1bW49YS5uZXh0Q29sdW1uKCksby5fbW91c2VEb3duKGUsYSxsKX07bC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLGgpLGwuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsaCx7cGFzc2l2ZTohMH0pLGwuYWRkRXZlbnRMaXN0ZW5lcigiZGJsY2xpY2siLChlPT57dmFyIHQ9YS5nZXRXaWR0aCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCksYS5yZWluaXRpYWxpemVXaWR0aCghMCksdCE9PWEuZ2V0V2lkdGgoKSYmKG8uZGlzcGF0Y2goImNvbHVtbi1yZXNpemVkIixhKSxvLnRhYmxlLmV4dGVybmFsRXZlbnRzLmRpc3BhdGNoKCJjb2x1bW5SZXNpemVkIixhLmdldENvbXBvbmVudCgpKSl9KSksaS5tb2R1bGVzLmZyb3plbiYmKGwuc3R5bGUucG9zaXRpb249InN0aWNreSIsbC5zdHlsZVtpLm1vZHVsZXMuZnJvemVuLnBvc2l0aW9uXT10aGlzLmZyb3plbkNvbHVtbk9mZnNldChpKSksci5oYW5kbGVFbD1sLHMucGFyZW50Tm9kZSYmaS52aXNpYmxlJiZzLmFmdGVyKGwpfXQubW9kdWxlcy5yZXNpemU9cn1kZUluaXRpYWxpemVDb2x1bW4oZSl7dGhpcy5kZUluaXRpYWxpemVDb21wb25lbnQoZSksZS5jZWxscy5mb3JFYWNoKChlPT57dGhpcy5kZUluaXRpYWxpemVDb21wb25lbnQoZSl9KSl9ZGVJbml0aWFsaXplQ29tcG9uZW50KGUpe3ZhciB0O2UubW9kdWxlcy5yZXNpemUmJih0PWUubW9kdWxlcy5yZXNpemUuaGFuZGxlRWwpJiZ0LnBhcmVudEVsZW1lbnQmJnQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0KX1yZXNpemVIYW5kbGUoZSx0KXtlLm1vZHVsZXMucmVzaXplJiZlLm1vZHVsZXMucmVzaXplLmhhbmRsZUVsJiYoZS5tb2R1bGVzLnJlc2l6ZS5oYW5kbGVFbC5zdHlsZS5oZWlnaHQ9dCl9X2NoZWNrUmVzaXphYmlsaXR5KGUpe3JldHVybiBlLmRlZmluaXRpb24ucmVzaXphYmxlfV9tb3VzZURvd24oZSx0LGkpe3ZhciBzPXRoaXM7ZnVuY3Rpb24gbyhlKXt2YXIgaSxvLG49dm9pZCAwPT09ZS5zY3JlZW5YP2UudG91Y2hlc1swXS5zY3JlZW5YOmUuc2NyZWVuWCxyPW4tcy5zdGFydFgsYT1uLXMubGF0ZXN0WDtpZihzLmxhdGVzdFg9bixzLnRhYmxlLnJ0bCYmKHI9LXIsYT0tYSksaT10LndpZHRoPT10Lm1pbldpZHRofHx0LndpZHRoPT10Lm1heFdpZHRoLHQuc2V0V2lkdGgocy5zdGFydFdpZHRoK3IpLG89dC53aWR0aD09dC5taW5XaWR0aHx8dC53aWR0aD09dC5tYXhXaWR0aCxhPDAmJihzLm5leHRDb2x1bW49cy5pbml0aWFsTmV4dENvbHVtbikscy50YWJsZS5vcHRpb25zLnJlc2l6YWJsZUNvbHVtbkZpdCYmcy5uZXh0Q29sdW1uJiYoIWl8fCFvKSl7bGV0IGU9cy5uZXh0Q29sdW1uLmdldFdpZHRoKCk7YT4wJiZlPD1zLm5leHRDb2x1bW4ubWluV2lkdGgmJihzLm5leHRDb2x1bW49cy5uZXh0Q29sdW1uLm5leHRDb2x1bW4oKSkscy5uZXh0Q29sdW1uJiZzLm5leHRDb2x1bW4uc2V0V2lkdGgocy5uZXh0Q29sdW1uLmdldFdpZHRoKCktYSl9cy50YWJsZS5jb2x1bW5NYW5hZ2VyLnJlcmVuZGVyQ29sdW1ucyghMCksIXMudGFibGUuYnJvd3NlclNsb3cmJnQubW9kdWxlcy5yZXNpemUmJnQubW9kdWxlcy5yZXNpemUudmFyaWFibGVIZWlnaHQmJnQuY2hlY2tDZWxsSGVpZ2h0cygpfWZ1bmN0aW9uIG4oZSl7cy5zdGFydENvbHVtbi5tb2R1bGVzLmVkaXQmJihzLnN0YXJ0Q29sdW1uLm1vZHVsZXMuZWRpdC5ibG9ja2VkPSExKSxzLnRhYmxlLmJyb3dzZXJTbG93JiZ0Lm1vZHVsZXMucmVzaXplJiZ0Lm1vZHVsZXMucmVzaXplLnZhcmlhYmxlSGVpZ2h0JiZ0LmNoZWNrQ2VsbEhlaWdodHMoKSxkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLG4pLGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixvKSxpLnJlbW92ZUV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsbyksaS5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsbikscy50YWJsZS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInRhYnVsYXRvci1ibG9jay1zZWxlY3QiKSxzLnN0YXJ0V2lkdGghPT10LmdldFdpZHRoKCkmJihzLnRhYmxlLmNvbHVtbk1hbmFnZXIudmVydGljYWxBbGlnbkhlYWRlcnMoKSxzLmRpc3BhdGNoKCJjb2x1bW4tcmVzaXplZCIsdCkscy50YWJsZS5leHRlcm5hbEV2ZW50cy5kaXNwYXRjaCgiY29sdW1uUmVzaXplZCIsdC5nZXRDb21wb25lbnQoKSkpfXMudGFibGUuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItYmxvY2stc2VsZWN0IiksZS5zdG9wUHJvcGFnYXRpb24oKSxzLnN0YXJ0Q29sdW1uLm1vZHVsZXMuZWRpdCYmKHMuc3RhcnRDb2x1bW4ubW9kdWxlcy5lZGl0LmJsb2NrZWQ9ITApLHMuc3RhcnRYPXZvaWQgMD09PWUuc2NyZWVuWD9lLnRvdWNoZXNbMF0uc2NyZWVuWDplLnNjcmVlblgscy5sYXRlc3RYPXMuc3RhcnRYLHMuc3RhcnRXaWR0aD10LmdldFdpZHRoKCksZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLG8pLGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsbiksaS5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLG8se3Bhc3NpdmU6ITB9KSxpLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoZW5kIixuKX19U2UubW9kdWxlTmFtZT0icmVzaXplQ29sdW1ucyI7Y2xhc3MgUGUgZXh0ZW5kcyBre2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuc3RhcnRDb2x1bW49ITEsdGhpcy5zdGFydFk9ITEsdGhpcy5zdGFydEhlaWdodD0hMSx0aGlzLmhhbmRsZT1udWxsLHRoaXMucHJldkhhbmRsZT1udWxsLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigicmVzaXphYmxlUm93cyIsITEpfWluaXRpYWxpemUoKXt0aGlzLnRhYmxlLm9wdGlvbnMucmVzaXphYmxlUm93cyYmdGhpcy5zdWJzY3JpYmUoInJvdy1sYXlvdXQtYWZ0ZXIiLHRoaXMuaW5pdGlhbGl6ZVJvdy5iaW5kKHRoaXMpKX1pbml0aWFsaXplUm93KGUpe3ZhciB0PXRoaXMsaT1lLmdldEVsZW1lbnQoKSxzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3MuY2xhc3NOYW1lPSJ0YWJ1bGF0b3Itcm93LXJlc2l6ZS1oYW5kbGUiO3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO28uY2xhc3NOYW1lPSJ0YWJ1bGF0b3Itcm93LXJlc2l6ZS1oYW5kbGUgcHJldiIscy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsKGZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCl9KSk7dmFyIG49ZnVuY3Rpb24oaSl7dC5zdGFydFJvdz1lLHQuX21vdXNlRG93bihpLGUscyl9O3MuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIixuKSxzLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoc3RhcnQiLG4se3Bhc3NpdmU6ITB9KSxvLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwoZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKX0pKTt2YXIgcj1mdW5jdGlvbihpKXt2YXIgcz10LnRhYmxlLnJvd01hbmFnZXIucHJldkRpc3BsYXlSb3coZSk7cyYmKHQuc3RhcnRSb3c9cyx0Ll9tb3VzZURvd24oaSxzLG8pKX07by5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLHIpLG8uYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIscix7cGFzc2l2ZTohMH0pLGkuYXBwZW5kQ2hpbGQocyksaS5hcHBlbmRDaGlsZChvKX1fbW91c2VEb3duKGUsdCxpKXt2YXIgcz10aGlzO2Z1bmN0aW9uIG8oZSl7dC5zZXRIZWlnaHQocy5zdGFydEhlaWdodCsoKHZvaWQgMD09PWUuc2NyZWVuWT9lLnRvdWNoZXNbMF0uc2NyZWVuWTplLnNjcmVlblkpLXMuc3RhcnRZKSl9ZnVuY3Rpb24gbihlKXtkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLG8pLGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixvKSxpLnJlbW92ZUV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsbyksaS5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsbikscy50YWJsZS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInRhYnVsYXRvci1ibG9jay1zZWxlY3QiKSxzLmRpc3BhdGNoRXh0ZXJuYWwoInJvd1Jlc2l6ZWQiLHQuZ2V0Q29tcG9uZW50KCkpfXMudGFibGUuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItYmxvY2stc2VsZWN0IiksZS5zdG9wUHJvcGFnYXRpb24oKSxzLnN0YXJ0WT12b2lkIDA9PT1lLnNjcmVlblk/ZS50b3VjaGVzWzBdLnNjcmVlblk6ZS5zY3JlZW5ZLHMuc3RhcnRIZWlnaHQ9dC5nZXRIZWlnaHQoKSxkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsbyksZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIixuKSxpLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsbyx7cGFzc2l2ZTohMH0pLGkuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hlbmQiLG4pfX1QZS5tb2R1bGVOYW1lPSJyZXNpemVSb3dzIjtjbGFzcyB6ZSBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5iaW5kaW5nPSExLHRoaXMudmlzaWJpbGl0eU9ic2VydmVyPSExLHRoaXMucmVzaXplT2JzZXJ2ZXI9ITEsdGhpcy5jb250YWluZXJPYnNlcnZlcj0hMSx0aGlzLnRhYmxlSGVpZ2h0PTAsdGhpcy50YWJsZVdpZHRoPTAsdGhpcy5jb250YWluZXJIZWlnaHQ9MCx0aGlzLmNvbnRhaW5lcldpZHRoPTAsdGhpcy5hdXRvUmVzaXplPSExLHRoaXMudmlzaWJsZT0hMSx0aGlzLmluaXRpYWxpemVkPSExLHRoaXMuaW5pdGlhbFJlZHJhdz0hMSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oImF1dG9SZXNpemUiLCEwKX1pbml0aWFsaXplKCl7aWYodGhpcy50YWJsZS5vcHRpb25zLmF1dG9SZXNpemUpe3ZhciBlLHQ9dGhpcy50YWJsZTt0aGlzLnRhYmxlSGVpZ2h0PXQuZWxlbWVudC5jbGllbnRIZWlnaHQsdGhpcy50YWJsZVdpZHRoPXQuZWxlbWVudC5jbGllbnRXaWR0aCx0LmVsZW1lbnQucGFyZW50Tm9kZSYmKHRoaXMuY29udGFpbmVySGVpZ2h0PXQuZWxlbWVudC5wYXJlbnROb2RlLmNsaWVudEhlaWdodCx0aGlzLmNvbnRhaW5lcldpZHRoPXQuZWxlbWVudC5wYXJlbnROb2RlLmNsaWVudFdpZHRoKSwidW5kZWZpbmVkIiE9dHlwZW9mIEludGVyc2VjdGlvbk9ic2VydmVyJiYidW5kZWZpbmVkIiE9dHlwZW9mIFJlc2l6ZU9ic2VydmVyJiYidmlydHVhbCI9PT10LnJvd01hbmFnZXIuZ2V0UmVuZGVyTW9kZSgpPyh0aGlzLmluaXRpYWxpemVWaXNpYmlsaXR5T2JzZXJ2ZXIoKSx0aGlzLmF1dG9SZXNpemU9ITAsdGhpcy5yZXNpemVPYnNlcnZlcj1uZXcgUmVzaXplT2JzZXJ2ZXIoKGU9PntpZighdC5icm93c2VyTW9iaWxlfHx0LmJyb3dzZXJNb2JpbGUmJiF0Lm1vZHVsZXMuZWRpdC5jdXJyZW50Q2VsbCl7dmFyIGk9TWF0aC5mbG9vcihlWzBdLmNvbnRlbnRSZWN0LmhlaWdodCkscz1NYXRoLmZsb29yKGVbMF0uY29udGVudFJlY3Qud2lkdGgpO3RoaXMudGFibGVIZWlnaHQ9PWkmJnRoaXMudGFibGVXaWR0aD09c3x8KHRoaXMudGFibGVIZWlnaHQ9aSx0aGlzLnRhYmxlV2lkdGg9cyx0LmVsZW1lbnQucGFyZW50Tm9kZSYmKHRoaXMuY29udGFpbmVySGVpZ2h0PXQuZWxlbWVudC5wYXJlbnROb2RlLmNsaWVudEhlaWdodCx0aGlzLmNvbnRhaW5lcldpZHRoPXQuZWxlbWVudC5wYXJlbnROb2RlLmNsaWVudFdpZHRoKSx0aGlzLnJlZHJhd1RhYmxlKCkpfX0pKSx0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUodC5lbGVtZW50KSxlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQuZWxlbWVudCksdGhpcy50YWJsZS5lbGVtZW50LnBhcmVudE5vZGUmJiF0aGlzLnRhYmxlLnJvd01hbmFnZXIuZml4ZWRIZWlnaHQmJihlLmdldFByb3BlcnR5VmFsdWUoIm1heC1oZWlnaHQiKXx8ZS5nZXRQcm9wZXJ0eVZhbHVlKCJtaW4taGVpZ2h0IikpJiYodGhpcy5jb250YWluZXJPYnNlcnZlcj1uZXcgUmVzaXplT2JzZXJ2ZXIoKGU9PntpZighdC5icm93c2VyTW9iaWxlfHx0LmJyb3dzZXJNb2JpbGUmJiF0Lm1vZHVsZXMuZWRpdC5jdXJyZW50Q2VsbCl7dmFyIGk9TWF0aC5mbG9vcihlWzBdLmNvbnRlbnRSZWN0LmhlaWdodCkscz1NYXRoLmZsb29yKGVbMF0uY29udGVudFJlY3Qud2lkdGgpO3RoaXMuY29udGFpbmVySGVpZ2h0PT1pJiZ0aGlzLmNvbnRhaW5lcldpZHRoPT1zfHwodGhpcy5jb250YWluZXJIZWlnaHQ9aSx0aGlzLmNvbnRhaW5lcldpZHRoPXMsdGhpcy50YWJsZUhlaWdodD10LmVsZW1lbnQuY2xpZW50SGVpZ2h0LHRoaXMudGFibGVXaWR0aD10LmVsZW1lbnQuY2xpZW50V2lkdGgpLHRoaXMucmVkcmF3VGFibGUoKX19KSksdGhpcy5jb250YWluZXJPYnNlcnZlci5vYnNlcnZlKHRoaXMudGFibGUuZWxlbWVudC5wYXJlbnROb2RlKSksdGhpcy5zdWJzY3JpYmUoInRhYmxlLXJlc2l6ZSIsdGhpcy50YWJsZVJlc2l6ZWQuYmluZCh0aGlzKSkpOih0aGlzLmJpbmRpbmc9ZnVuY3Rpb24oKXsoIXQuYnJvd3Nlck1vYmlsZXx8dC5icm93c2VyTW9iaWxlJiYhdC5tb2R1bGVzLmVkaXQuY3VycmVudENlbGwpJiYodC5jb2x1bW5NYW5hZ2VyLnJlcmVuZGVyQ29sdW1ucyghMCksdC5yZWRyYXcoKSl9LHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLHRoaXMuYmluZGluZykpLHRoaXMuc3Vic2NyaWJlKCJ0YWJsZS1kZXN0cm95Iix0aGlzLmNsZWFyQmluZGluZ3MuYmluZCh0aGlzKSl9fWluaXRpYWxpemVWaXNpYmlsaXR5T2JzZXJ2ZXIoKXt0aGlzLnZpc2liaWxpdHlPYnNlcnZlcj1uZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGU9Pnt0aGlzLnZpc2libGU9ZVswXS5pc0ludGVyc2VjdGluZyx0aGlzLmluaXRpYWxpemVkP3RoaXMudmlzaWJsZSYmKHRoaXMucmVkcmF3VGFibGUodGhpcy5pbml0aWFsUmVkcmF3KSx0aGlzLmluaXRpYWxSZWRyYXc9ITEpOih0aGlzLmluaXRpYWxpemVkPSEwLHRoaXMuaW5pdGlhbFJlZHJhdz0hdGhpcy52aXNpYmxlKX0pKSx0aGlzLnZpc2liaWxpdHlPYnNlcnZlci5vYnNlcnZlKHRoaXMudGFibGUuZWxlbWVudCl9cmVkcmF3VGFibGUoZSl7dGhpcy5pbml0aWFsaXplZCYmdGhpcy52aXNpYmxlJiYodGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLnJlcmVuZGVyQ29sdW1ucyghMCksdGhpcy50YWJsZS5yZWRyYXcoZSkpfXRhYmxlUmVzaXplZCgpe3RoaXMudGFibGUucm93TWFuYWdlci5yZWRyYXcoKX1jbGVhckJpbmRpbmdzKCl7dGhpcy5iaW5kaW5nJiZ3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIix0aGlzLmJpbmRpbmcpLHRoaXMucmVzaXplT2JzZXJ2ZXImJnRoaXMucmVzaXplT2JzZXJ2ZXIudW5vYnNlcnZlKHRoaXMudGFibGUuZWxlbWVudCksdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXImJnRoaXMudmlzaWJpbGl0eU9ic2VydmVyLnVub2JzZXJ2ZSh0aGlzLnRhYmxlLmVsZW1lbnQpLHRoaXMuY29udGFpbmVyT2JzZXJ2ZXImJnRoaXMuY29udGFpbmVyT2JzZXJ2ZXIudW5vYnNlcnZlKHRoaXMudGFibGUuZWxlbWVudC5wYXJlbnROb2RlKX19emUubW9kdWxlTmFtZT0icmVzaXplVGFibGUiO2NsYXNzIEZlIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmNvbHVtbnM9W10sdGhpcy5oaWRkZW5Db2x1bW5zPVtdLHRoaXMubW9kZT0iIix0aGlzLmluZGV4PTAsdGhpcy5jb2xsYXBzZUZvcm1hdHRlcj1bXSx0aGlzLmNvbGxhcHNlU3RhcnRPcGVuPSEwLHRoaXMuY29sbGFwc2VIYW5kbGVDb2x1bW49ITEsdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJyZXNwb25zaXZlTGF5b3V0IiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJyZXNwb25zaXZlTGF5b3V0Q29sbGFwc2VTdGFydE9wZW4iLCEwKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInJlc3BvbnNpdmVMYXlvdXRDb2xsYXBzZVVzZUZvcm1hdHRlcnMiLCEwKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInJlc3BvbnNpdmVMYXlvdXRDb2xsYXBzZUZvcm1hdHRlciIsITEpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oInJlc3BvbnNpdmUiKX1pbml0aWFsaXplKCl7dGhpcy50YWJsZS5vcHRpb25zLnJlc3BvbnNpdmVMYXlvdXQmJih0aGlzLnN1YnNjcmliZSgiY29sdW1uLWxheW91dCIsdGhpcy5pbml0aWFsaXplQ29sdW1uLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4tc2hvdyIsdGhpcy51cGRhdGVDb2x1bW5WaXNpYmlsaXR5LmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4taGlkZSIsdGhpcy51cGRhdGVDb2x1bW5WaXNpYmlsaXR5LmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW5zLWxvYWRlZCIsdGhpcy5pbml0aWFsaXplUmVzcG9uc2l2aXR5LmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4tbW92ZWQiLHRoaXMuaW5pdGlhbGl6ZVJlc3BvbnNpdml0eS5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiY29sdW1uLWFkZCIsdGhpcy5pbml0aWFsaXplUmVzcG9uc2l2aXR5LmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4tZGVsZXRlIix0aGlzLmluaXRpYWxpemVSZXNwb25zaXZpdHkuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInRhYmxlLXJlZHJhd2luZyIsdGhpcy50YWJsZVJlZHJhdy5iaW5kKHRoaXMpKSwiY29sbGFwc2UiPT09dGhpcy50YWJsZS5vcHRpb25zLnJlc3BvbnNpdmVMYXlvdXQmJih0aGlzLnN1YnNjcmliZSgicm93LWRhdGEtY2hhbmdlZCIsdGhpcy5nZW5lcmF0ZUNvbGxhcHNlZFJvd0NvbnRlbnQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvdy1pbml0Iix0aGlzLmluaXRpYWxpemVSb3cuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvdy1sYXlvdXQiLHRoaXMubGF5b3V0Um93LmJpbmQodGhpcykpKSl9dGFibGVSZWRyYXcoZSl7LTE9PT1bImZpdENvbHVtbnMiLCJmaXREYXRhU3RyZXRjaCJdLmluZGV4T2YodGhpcy5sYXlvdXRNb2RlKCkpJiYoZXx8dGhpcy51cGRhdGUoKSl9aW5pdGlhbGl6ZVJlc3BvbnNpdml0eSgpe3ZhciBlPVtdO3RoaXMubW9kZT10aGlzLnRhYmxlLm9wdGlvbnMucmVzcG9uc2l2ZUxheW91dCx0aGlzLmNvbGxhcHNlRm9ybWF0dGVyPXRoaXMudGFibGUub3B0aW9ucy5yZXNwb25zaXZlTGF5b3V0Q29sbGFwc2VGb3JtYXR0ZXJ8fHRoaXMuZm9ybWF0Q29sbGFwc2VkRGF0YSx0aGlzLmNvbGxhcHNlU3RhcnRPcGVuPXRoaXMudGFibGUub3B0aW9ucy5yZXNwb25zaXZlTGF5b3V0Q29sbGFwc2VTdGFydE9wZW4sdGhpcy5oaWRkZW5Db2x1bW5zPVtdLHRoaXMudGFibGUuY29sdW1uTWFuYWdlci5jb2x1bW5zQnlJbmRleC5mb3JFYWNoKCgodCxpKT0+e3QubW9kdWxlcy5yZXNwb25zaXZlJiZ0Lm1vZHVsZXMucmVzcG9uc2l2ZS5vcmRlciYmdC5tb2R1bGVzLnJlc3BvbnNpdmUudmlzaWJsZSYmKHQubW9kdWxlcy5yZXNwb25zaXZlLmluZGV4PWksZS5wdXNoKHQpLHQudmlzaWJsZXx8ImNvbGxhcHNlIiE9PXRoaXMubW9kZXx8dGhpcy5oaWRkZW5Db2x1bW5zLnB1c2godCkpfSkpLGU9KGU9ZS5yZXZlcnNlKCkpLnNvcnQoKChlLHQpPT50Lm1vZHVsZXMucmVzcG9uc2l2ZS5vcmRlci1lLm1vZHVsZXMucmVzcG9uc2l2ZS5vcmRlcnx8dC5tb2R1bGVzLnJlc3BvbnNpdmUuaW5kZXgtZS5tb2R1bGVzLnJlc3BvbnNpdmUuaW5kZXgpKSx0aGlzLmNvbHVtbnM9ZSwiY29sbGFwc2UiPT09dGhpcy5tb2RlJiZ0aGlzLmdlbmVyYXRlQ29sbGFwc2VkQ29udGVudCgpO2ZvcihsZXQgZSBvZiB0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuY29sdW1uc0J5SW5kZXgpaWYoInJlc3BvbnNpdmVDb2xsYXBzZSI9PWUuZGVmaW5pdGlvbi5mb3JtYXR0ZXIpe3RoaXMuY29sbGFwc2VIYW5kbGVDb2x1bW49ZTticmVha310aGlzLmNvbGxhcHNlSGFuZGxlQ29sdW1uJiYodGhpcy5oaWRkZW5Db2x1bW5zLmxlbmd0aD90aGlzLmNvbGxhcHNlSGFuZGxlQ29sdW1uLnNob3coKTp0aGlzLmNvbGxhcHNlSGFuZGxlQ29sdW1uLmhpZGUoKSl9aW5pdGlhbGl6ZUNvbHVtbihlKXt2YXIgdD1lLmdldERlZmluaXRpb24oKTtlLm1vZHVsZXMucmVzcG9uc2l2ZT17b3JkZXI6dm9pZCAwPT09dC5yZXNwb25zaXZlPzE6dC5yZXNwb25zaXZlLHZpc2libGU6ITEhPT10LnZpc2libGV9fWluaXRpYWxpemVSb3coZSl7dmFyIHQ7ImNhbGMiIT09ZS50eXBlJiYoKHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1yZXNwb25zaXZlLWNvbGxhcHNlIiksZS5tb2R1bGVzLnJlc3BvbnNpdmVMYXlvdXQ9e2VsZW1lbnQ6dCxvcGVuOnRoaXMuY29sbGFwc2VTdGFydE9wZW59LHRoaXMuY29sbGFwc2VTdGFydE9wZW58fCh0LnN0eWxlLmRpc3BsYXk9Im5vbmUiKSl9bGF5b3V0Um93KGUpe3ZhciB0PWUuZ2V0RWxlbWVudCgpO2UubW9kdWxlcy5yZXNwb25zaXZlTGF5b3V0JiYodC5hcHBlbmRDaGlsZChlLm1vZHVsZXMucmVzcG9uc2l2ZUxheW91dC5lbGVtZW50KSx0aGlzLmdlbmVyYXRlQ29sbGFwc2VkUm93Q29udGVudChlKSl9dXBkYXRlQ29sdW1uVmlzaWJpbGl0eShlLHQpeyF0JiZlLm1vZHVsZXMucmVzcG9uc2l2ZSYmKGUubW9kdWxlcy5yZXNwb25zaXZlLnZpc2libGU9ZS52aXNpYmxlLHRoaXMuaW5pdGlhbGl6ZVJlc3BvbnNpdml0eSgpKX1oaWRlQ29sdW1uKGUpe3ZhciB0PXRoaXMuaGlkZGVuQ29sdW1ucy5sZW5ndGg7ZS5oaWRlKCExLCEwKSwiY29sbGFwc2UiPT09dGhpcy5tb2RlJiYodGhpcy5oaWRkZW5Db2x1bW5zLnVuc2hpZnQoZSksdGhpcy5nZW5lcmF0ZUNvbGxhcHNlZENvbnRlbnQoKSx0aGlzLmNvbGxhcHNlSGFuZGxlQ29sdW1uJiYhdCYmdGhpcy5jb2xsYXBzZUhhbmRsZUNvbHVtbi5zaG93KCkpfXNob3dDb2x1bW4oZSl7dmFyIHQ7ZS5zaG93KCExLCEwKSxlLnNldFdpZHRoKGUuZ2V0V2lkdGgoKSksImNvbGxhcHNlIj09PXRoaXMubW9kZSYmKCh0PXRoaXMuaGlkZGVuQ29sdW1ucy5pbmRleE9mKGUpKT4tMSYmdGhpcy5oaWRkZW5Db2x1bW5zLnNwbGljZSh0LDEpLHRoaXMuZ2VuZXJhdGVDb2xsYXBzZWRDb250ZW50KCksdGhpcy5jb2xsYXBzZUhhbmRsZUNvbHVtbiYmIXRoaXMuaGlkZGVuQ29sdW1ucy5sZW5ndGgmJnRoaXMuY29sbGFwc2VIYW5kbGVDb2x1bW4uaGlkZSgpKX11cGRhdGUoKXtmb3IodmFyIGU9ITA7ZTspe2xldCB0PSJmaXRDb2x1bW5zIj09dGhpcy50YWJsZS5tb2R1bGVzLmxheW91dC5nZXRNb2RlKCk/dGhpcy50YWJsZS5jb2x1bW5NYW5hZ2VyLmdldEZsZXhCYXNlV2lkdGgoKTp0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2V0V2lkdGgoKSxpPSh0aGlzLnRhYmxlLm9wdGlvbnMuaGVhZGVyVmlzaWJsZT90aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZWxlbWVudC5jbGllbnRXaWR0aDp0aGlzLnRhYmxlLmVsZW1lbnQuY2xpZW50V2lkdGgpLXQ7aWYoaTwwKXtsZXQgdD10aGlzLmNvbHVtbnNbdGhpcy5pbmRleF07dD8odGhpcy5oaWRlQ29sdW1uKHQpLHRoaXMuaW5kZXgrKyk6ZT0hMX1lbHNle2xldCB0PXRoaXMuY29sdW1uc1t0aGlzLmluZGV4LTFdO3QmJmk+MCYmaT49dC5nZXRXaWR0aCgpPyh0aGlzLnNob3dDb2x1bW4odCksdGhpcy5pbmRleC0tKTplPSExfXRoaXMudGFibGUucm93TWFuYWdlci5hY3RpdmVSb3dzQ291bnR8fHRoaXMudGFibGUucm93TWFuYWdlci5yZW5kZXJFbXB0eVNjcm9sbCgpfX1nZW5lcmF0ZUNvbGxhcHNlZENvbnRlbnQoKXt0aGlzLnRhYmxlLnJvd01hbmFnZXIuZ2V0RGlzcGxheVJvd3MoKS5mb3JFYWNoKChlPT57dGhpcy5nZW5lcmF0ZUNvbGxhcHNlZFJvd0NvbnRlbnQoZSl9KSl9Z2VuZXJhdGVDb2xsYXBzZWRSb3dDb250ZW50KGUpe3ZhciB0LGk7aWYoZS5tb2R1bGVzLnJlc3BvbnNpdmVMYXlvdXQpe2Zvcih0PWUubW9kdWxlcy5yZXNwb25zaXZlTGF5b3V0LmVsZW1lbnQ7dC5maXJzdENoaWxkOyl0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCk7KGk9dGhpcy5jb2xsYXBzZUZvcm1hdHRlcih0aGlzLmdlbmVyYXRlQ29sbGFwc2VkUm93RGF0YShlKSkpJiZ0LmFwcGVuZENoaWxkKGkpfX1nZW5lcmF0ZUNvbGxhcHNlZFJvd0RhdGEoZSl7dmFyIHQsaT1lLmdldERhdGEoKSxzPVtdO3JldHVybiB0aGlzLmhpZGRlbkNvbHVtbnMuZm9yRWFjaCgobz0+e3ZhciBuPW8uZ2V0RmllbGRWYWx1ZShpKTtpZihvLmRlZmluaXRpb24udGl0bGUmJm8uZmllbGQpaWYoby5tb2R1bGVzLmZvcm1hdCYmdGhpcy50YWJsZS5vcHRpb25zLnJlc3BvbnNpdmVMYXlvdXRDb2xsYXBzZVVzZUZvcm1hdHRlcnMpe2Z1bmN0aW9uIHIoZSl7ZSgpfXQ9e3ZhbHVlOiExLGRhdGE6e30sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbn0sZ2V0RGF0YTpmdW5jdGlvbigpe3JldHVybiBpfSxnZXRUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuImNlbGwifSxnZXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpfSxnZXRSb3c6ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRDb21wb25lbnQoKX0sZ2V0Q29sdW1uOmZ1bmN0aW9uKCl7cmV0dXJuIG8uZ2V0Q29tcG9uZW50KCl9LGdldFRhYmxlOigpPT50aGlzLnRhYmxlfSxzLnB1c2goe2ZpZWxkOm8uZmllbGQsdGl0bGU6by5kZWZpbml0aW9uLnRpdGxlLHZhbHVlOm8ubW9kdWxlcy5mb3JtYXQuZm9ybWF0dGVyLmNhbGwodGhpcy50YWJsZS5tb2R1bGVzLmZvcm1hdCx0LG8ubW9kdWxlcy5mb3JtYXQucGFyYW1zLHIpfSl9ZWxzZSBzLnB1c2goe2ZpZWxkOm8uZmllbGQsdGl0bGU6by5kZWZpbml0aW9uLnRpdGxlLHZhbHVlOm59KX0pKSxzfWZvcm1hdENvbGxhcHNlZERhdGEoZSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKTtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgaSxzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRyIiksbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpLG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKSxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIpO28uYXBwZW5kQ2hpbGQociksdGhpcy5sYW5nQmluZCgiY29sdW1uc3wiK2UuZmllbGQsKGZ1bmN0aW9uKHQpe3IuaW5uZXJIVE1MPXR8fGUudGl0bGV9KSksZS52YWx1ZSBpbnN0YW5jZW9mIE5vZGU/KChpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5hcHBlbmRDaGlsZChlLnZhbHVlKSxuLmFwcGVuZENoaWxkKGkpKTpuLmlubmVySFRNTD1lLnZhbHVlLHMuYXBwZW5kQ2hpbGQobykscy5hcHBlbmRDaGlsZChuKSx0LmFwcGVuZENoaWxkKHMpfSksdGhpcyksT2JqZWN0LmtleXMoZSkubGVuZ3RoP3Q6IiJ9fUZlLm1vZHVsZU5hbWU9InJlc3BvbnNpdmVMYXlvdXQiO2NsYXNzIEhlIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnNlbGVjdGluZz0hMSx0aGlzLmxhc3RDbGlja2VkUm93PSExLHRoaXMuc2VsZWN0UHJldj1bXSx0aGlzLnNlbGVjdGVkUm93cz1bXSx0aGlzLmhlYWRlckNoZWNrYm94RWxlbWVudD1udWxsLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigic2VsZWN0YWJsZSIsImhpZ2hsaWdodCIpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigic2VsZWN0YWJsZVJhbmdlTW9kZSIsImRyYWciKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInNlbGVjdGFibGVSb2xsaW5nU2VsZWN0aW9uIiwhMCksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJzZWxlY3RhYmxlUGVyc2lzdGVuY2UiLCEwKSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInNlbGVjdGFibGVDaGVjayIsKGZ1bmN0aW9uKGUsdCl7cmV0dXJuITB9KSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oInNlbGVjdFJvdyIsdGhpcy5zZWxlY3RSb3dzLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJUYWJsZUZ1bmN0aW9uKCJkZXNlbGVjdFJvdyIsdGhpcy5kZXNlbGVjdFJvd3MuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oInRvZ2dsZVNlbGVjdFJvdyIsdGhpcy50b2dnbGVSb3cuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImdldFNlbGVjdGVkUm93cyIsdGhpcy5nZXRTZWxlY3RlZFJvd3MuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImdldFNlbGVjdGVkRGF0YSIsdGhpcy5nZXRTZWxlY3RlZERhdGEuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJyb3ciLCJzZWxlY3QiLHRoaXMuc2VsZWN0Um93cy5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyQ29tcG9uZW50RnVuY3Rpb24oInJvdyIsImRlc2VsZWN0Iix0aGlzLmRlc2VsZWN0Um93cy5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyQ29tcG9uZW50RnVuY3Rpb24oInJvdyIsInRvZ2dsZVNlbGVjdCIsdGhpcy50b2dnbGVSb3cuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJyb3ciLCJpc1NlbGVjdGVkIix0aGlzLmlzUm93U2VsZWN0ZWQuYmluZCh0aGlzKSl9aW5pdGlhbGl6ZSgpeyExIT09dGhpcy50YWJsZS5vcHRpb25zLnNlbGVjdGFibGUmJih0aGlzLnN1YnNjcmliZSgicm93LWluaXQiLHRoaXMuaW5pdGlhbGl6ZVJvdy5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgicm93LWRlbGV0aW5nIix0aGlzLnJvd0RlbGV0ZWQuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvd3Mtd2lwZSIsdGhpcy5jbGVhclNlbGVjdGlvbkRhdGEuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoInJvd3MtcmV0cmlldmUiLHRoaXMucm93UmV0cmlldmUuYmluZCh0aGlzKSksdGhpcy50YWJsZS5vcHRpb25zLnNlbGVjdGFibGUmJiF0aGlzLnRhYmxlLm9wdGlvbnMuc2VsZWN0YWJsZVBlcnNpc3RlbmNlJiZ0aGlzLnN1YnNjcmliZSgiZGF0YS1yZWZyZXNoaW5nIix0aGlzLmRlc2VsZWN0Um93cy5iaW5kKHRoaXMpKSl9cm93UmV0cmlldmUoZSx0KXtyZXR1cm4ic2VsZWN0ZWQiPT09ZT90aGlzLnNlbGVjdGVkUm93czp0fXJvd0RlbGV0ZWQoZSl7dGhpcy5fZGVzZWxlY3RSb3coZSwhMCl9Y2xlYXJTZWxlY3Rpb25EYXRhKGUpe3ZhciB0PXRoaXMuc2VsZWN0ZWRSb3dzLmxlbmd0aDt0aGlzLnNlbGVjdGluZz0hMSx0aGlzLmxhc3RDbGlja2VkUm93PSExLHRoaXMuc2VsZWN0UHJldj1bXSx0aGlzLnNlbGVjdGVkUm93cz1bXSx0JiYhMCE9PWUmJnRoaXMuX3Jvd1NlbGVjdGlvbkNoYW5nZWQoKX1pbml0aWFsaXplUm93KGUpe3ZhciB0PXRoaXMsaT1lLmdldEVsZW1lbnQoKSxzPWZ1bmN0aW9uKCl7c2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LnNlbGVjdGluZz0hMX0pLDUwKSxkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHMpfTtlLm1vZHVsZXMuc2VsZWN0PXtzZWxlY3RlZDohMX0sdC5jaGVja1Jvd1NlbGVjdGFiaWxpdHkoZSk/KGkuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXNlbGVjdGFibGUiKSxpLmNsYXNzTGlzdC5yZW1vdmUoInRhYnVsYXRvci11bnNlbGVjdGFibGUiKSx0LnRhYmxlLm9wdGlvbnMuc2VsZWN0YWJsZSYmImhpZ2hsaWdodCIhPXQudGFibGUub3B0aW9ucy5zZWxlY3RhYmxlJiYoImNsaWNrIj09PXQudGFibGUub3B0aW9ucy5zZWxlY3RhYmxlUmFuZ2VNb2RlP2kuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLHRoaXMuaGFuZGxlQ29tcGxleFJvd0NsaWNrLmJpbmQodGhpcyxlKSk6KGkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLChmdW5jdGlvbihpKXt0LnRhYmxlLm1vZEV4aXN0cygiZWRpdCIpJiZ0LnRhYmxlLm1vZHVsZXMuZWRpdC5nZXRDdXJyZW50Q2VsbCgpfHx0LnRhYmxlLl9jbGVhclNlbGVjdGlvbigpLHQuc2VsZWN0aW5nfHx0LnRvZ2dsZVJvdyhlKX0pKSxpLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsKGZ1bmN0aW9uKGkpe2lmKGkuc2hpZnRLZXkpcmV0dXJuIHQudGFibGUuX2NsZWFyU2VsZWN0aW9uKCksdC5zZWxlY3Rpbmc9ITAsdC5zZWxlY3RQcmV2PVtdLGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIscyksZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCJrZXl1cCIscyksdC50b2dnbGVSb3coZSksITF9KSksaS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIiwoZnVuY3Rpb24oaSl7dC5zZWxlY3RpbmcmJih0LnRhYmxlLl9jbGVhclNlbGVjdGlvbigpLHQudG9nZ2xlUm93KGUpLHQuc2VsZWN0UHJldlsxXT09ZSYmdC50b2dnbGVSb3codC5zZWxlY3RQcmV2WzBdKSl9KSksaS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsKGZ1bmN0aW9uKGkpe3Quc2VsZWN0aW5nJiYodC50YWJsZS5fY2xlYXJTZWxlY3Rpb24oKSx0LnNlbGVjdFByZXYudW5zaGlmdChlKSl9KSkpKSk6KGkuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXVuc2VsZWN0YWJsZSIpLGkuY2xhc3NMaXN0LnJlbW92ZSgidGFidWxhdG9yLXNlbGVjdGFibGUiKSl9aGFuZGxlQ29tcGxleFJvd0NsaWNrKGUsdCl7aWYodC5zaGlmdEtleSl7dGhpcy50YWJsZS5fY2xlYXJTZWxlY3Rpb24oKSx0aGlzLmxhc3RDbGlja2VkUm93PXRoaXMubGFzdENsaWNrZWRSb3d8fGU7dmFyIGk9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldERpc3BsYXlSb3dJbmRleCh0aGlzLmxhc3RDbGlja2VkUm93KSxzPXRoaXMudGFibGUucm93TWFuYWdlci5nZXREaXNwbGF5Um93SW5kZXgoZSksbz1pPD1zP2k6cyxuPWk+PXM/aTpzLHI9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldERpc3BsYXlSb3dzKCkuc2xpY2UoMCkuc3BsaWNlKG8sbi1vKzEpO3QuY3RybEtleXx8dC5tZXRhS2V5PyhyLmZvckVhY2goKHQ9Pnt0IT09dGhpcy5sYXN0Q2xpY2tlZFJvdyYmKCEwPT09dGhpcy50YWJsZS5vcHRpb25zLnNlbGVjdGFibGV8fHRoaXMuaXNSb3dTZWxlY3RlZChlKXx8dGhpcy5zZWxlY3RlZFJvd3MubGVuZ3RoPHRoaXMudGFibGUub3B0aW9ucy5zZWxlY3RhYmxlKSYmdGhpcy50b2dnbGVSb3codCl9KSksdGhpcy5sYXN0Q2xpY2tlZFJvdz1lKToodGhpcy5kZXNlbGVjdFJvd3Modm9pZCAwLCEwKSwhMCE9PXRoaXMudGFibGUub3B0aW9ucy5zZWxlY3RhYmxlJiZyLmxlbmd0aD50aGlzLnRhYmxlLm9wdGlvbnMuc2VsZWN0YWJsZSYmKHI9ci5zbGljZSgwLHRoaXMudGFibGUub3B0aW9ucy5zZWxlY3RhYmxlKSksdGhpcy5zZWxlY3RSb3dzKHIpKSx0aGlzLnRhYmxlLl9jbGVhclNlbGVjdGlvbigpfWVsc2UgdC5jdHJsS2V5fHx0Lm1ldGFLZXk/KHRoaXMudG9nZ2xlUm93KGUpLHRoaXMubGFzdENsaWNrZWRSb3c9ZSk6KHRoaXMuZGVzZWxlY3RSb3dzKHZvaWQgMCwhMCksdGhpcy5zZWxlY3RSb3dzKGUpLHRoaXMubGFzdENsaWNrZWRSb3c9ZSl9Y2hlY2tSb3dTZWxlY3RhYmlsaXR5KGUpe3JldHVybiEoIWV8fCJyb3ciIT09ZS50eXBlKSYmdGhpcy50YWJsZS5vcHRpb25zLnNlbGVjdGFibGVDaGVjay5jYWxsKHRoaXMudGFibGUsZS5nZXRDb21wb25lbnQoKSl9dG9nZ2xlUm93KGUpe3RoaXMuY2hlY2tSb3dTZWxlY3RhYmlsaXR5KGUpJiYoZS5tb2R1bGVzLnNlbGVjdCYmZS5tb2R1bGVzLnNlbGVjdC5zZWxlY3RlZD90aGlzLl9kZXNlbGVjdFJvdyhlKTp0aGlzLl9zZWxlY3RSb3coZSkpfXNlbGVjdFJvd3MoZSl7dmFyIHQsaSxzPVtdO3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSJ1bmRlZmluZWQiOnQ9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLnJvd3M7YnJlYWs7Y2FzZSJzdHJpbmciOih0PXRoaXMudGFibGUucm93TWFuYWdlci5maW5kUm93KGUpKXx8KHQ9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldFJvd3MoZSkpO2JyZWFrO2RlZmF1bHQ6dD1lfUFycmF5LmlzQXJyYXkodCk/dC5sZW5ndGgmJih0LmZvckVhY2goKGU9PnsoaT10aGlzLl9zZWxlY3RSb3coZSwhMCwhMCkpJiZzLnB1c2goaSl9KSksdGhpcy5fcm93U2VsZWN0aW9uQ2hhbmdlZCghMSxzKSk6dCYmdGhpcy5fc2VsZWN0Um93KHQsITEsITApfV9zZWxlY3RSb3coZSx0LGkpe2lmKCFpc05hTih0aGlzLnRhYmxlLm9wdGlvbnMuc2VsZWN0YWJsZSkmJiEwIT09dGhpcy50YWJsZS5vcHRpb25zLnNlbGVjdGFibGUmJiFpJiZ0aGlzLnNlbGVjdGVkUm93cy5sZW5ndGg+PXRoaXMudGFibGUub3B0aW9ucy5zZWxlY3RhYmxlKXtpZighdGhpcy50YWJsZS5vcHRpb25zLnNlbGVjdGFibGVSb2xsaW5nU2VsZWN0aW9uKXJldHVybiExO3RoaXMuX2Rlc2VsZWN0Um93KHRoaXMuc2VsZWN0ZWRSb3dzWzBdKX12YXIgcz10aGlzLnRhYmxlLnJvd01hbmFnZXIuZmluZFJvdyhlKTtpZihzKXtpZigtMT09dGhpcy5zZWxlY3RlZFJvd3MuaW5kZXhPZihzKSlyZXR1cm4gcy5nZXRFbGVtZW50KCkuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXNlbGVjdGVkIikscy5tb2R1bGVzLnNlbGVjdHx8KHMubW9kdWxlcy5zZWxlY3Q9e30pLHMubW9kdWxlcy5zZWxlY3Quc2VsZWN0ZWQ9ITAscy5tb2R1bGVzLnNlbGVjdC5jaGVja2JveEVsJiYocy5tb2R1bGVzLnNlbGVjdC5jaGVja2JveEVsLmNoZWNrZWQ9ITApLHRoaXMuc2VsZWN0ZWRSb3dzLnB1c2gocyksdGhpcy50YWJsZS5vcHRpb25zLmRhdGFUcmVlU2VsZWN0UHJvcGFnYXRlJiZ0aGlzLmNoaWxkUm93U2VsZWN0aW9uKHMsITApLHRoaXMuZGlzcGF0Y2hFeHRlcm5hbCgicm93U2VsZWN0ZWQiLHMuZ2V0Q29tcG9uZW50KCkpLHRoaXMuX3Jvd1NlbGVjdGlvbkNoYW5nZWQodCxzKSxzfWVsc2UgdHx8Y29uc29sZS53YXJuKCJTZWxlY3Rpb24gRXJyb3IgLSBObyBzdWNoIHJvdyBmb3VuZCwgaWdub3Jpbmcgc2VsZWN0aW9uOiIrZSl9aXNSb3dTZWxlY3RlZChlKXtyZXR1cm4tMSE9PXRoaXMuc2VsZWN0ZWRSb3dzLmluZGV4T2YoZSl9ZGVzZWxlY3RSb3dzKGUsdCl7dmFyIGkscyxvPVtdO3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSJ1bmRlZmluZWQiOmk9T2JqZWN0LmFzc2lnbihbXSx0aGlzLnNlbGVjdGVkUm93cyk7YnJlYWs7Y2FzZSJzdHJpbmciOihpPXRoaXMudGFibGUucm93TWFuYWdlci5maW5kUm93KGUpKXx8KGk9dGhpcy50YWJsZS5yb3dNYW5hZ2VyLmdldFJvd3MoZSkpO2JyZWFrO2RlZmF1bHQ6aT1lfUFycmF5LmlzQXJyYXkoaSk/aS5sZW5ndGgmJihpLmZvckVhY2goKGU9Pnsocz10aGlzLl9kZXNlbGVjdFJvdyhlLCEwLCEwKSkmJm8ucHVzaChzKX0pKSx0aGlzLl9yb3dTZWxlY3Rpb25DaGFuZ2VkKHQsW10sbykpOmkmJnRoaXMuX2Rlc2VsZWN0Um93KGksdCwhMCl9X2Rlc2VsZWN0Um93KGUsdCl7dmFyIGkscyxvPXRoaXMsbj1vLnRhYmxlLnJvd01hbmFnZXIuZmluZFJvdyhlKTtpZihuKXtpZigoaT1vLnNlbGVjdGVkUm93cy5maW5kSW5kZXgoKGZ1bmN0aW9uKGUpe3JldHVybiBlPT1ufSkpKT4tMSlyZXR1cm4ocz1uLmdldEVsZW1lbnQoKSkmJnMuY2xhc3NMaXN0LnJlbW92ZSgidGFidWxhdG9yLXNlbGVjdGVkIiksbi5tb2R1bGVzLnNlbGVjdHx8KG4ubW9kdWxlcy5zZWxlY3Q9e30pLG4ubW9kdWxlcy5zZWxlY3Quc2VsZWN0ZWQ9ITEsbi5tb2R1bGVzLnNlbGVjdC5jaGVja2JveEVsJiYobi5tb2R1bGVzLnNlbGVjdC5jaGVja2JveEVsLmNoZWNrZWQ9ITEpLG8uc2VsZWN0ZWRSb3dzLnNwbGljZShpLDEpLHRoaXMudGFibGUub3B0aW9ucy5kYXRhVHJlZVNlbGVjdFByb3BhZ2F0ZSYmdGhpcy5jaGlsZFJvd1NlbGVjdGlvbihuLCExKSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoInJvd0Rlc2VsZWN0ZWQiLG4uZ2V0Q29tcG9uZW50KCkpLG8uX3Jvd1NlbGVjdGlvbkNoYW5nZWQodCx2b2lkIDAsbiksbn1lbHNlIHR8fGNvbnNvbGUud2FybigiRGVzZWxlY3Rpb24gRXJyb3IgLSBObyBzdWNoIHJvdyBmb3VuZCwgaWdub3Jpbmcgc2VsZWN0aW9uOiIrZSl9Z2V0U2VsZWN0ZWREYXRhKCl7dmFyIGU9W107cmV0dXJuIHRoaXMuc2VsZWN0ZWRSb3dzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UucHVzaCh0LmdldERhdGEoKSl9KSksZX1nZXRTZWxlY3RlZFJvd3MoKXt2YXIgZT1bXTtyZXR1cm4gdGhpcy5zZWxlY3RlZFJvd3MuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5wdXNoKHQuZ2V0Q29tcG9uZW50KCkpfSkpLGV9X3Jvd1NlbGVjdGlvbkNoYW5nZWQoZSx0PVtdLGk9W10pe3RoaXMuaGVhZGVyQ2hlY2tib3hFbGVtZW50JiYoMD09PXRoaXMuc2VsZWN0ZWRSb3dzLmxlbmd0aD8odGhpcy5oZWFkZXJDaGVja2JveEVsZW1lbnQuY2hlY2tlZD0hMSx0aGlzLmhlYWRlckNoZWNrYm94RWxlbWVudC5pbmRldGVybWluYXRlPSExKTp0aGlzLnRhYmxlLnJvd01hbmFnZXIucm93cy5sZW5ndGg9PT10aGlzLnNlbGVjdGVkUm93cy5sZW5ndGg/KHRoaXMuaGVhZGVyQ2hlY2tib3hFbGVtZW50LmNoZWNrZWQ9ITAsdGhpcy5oZWFkZXJDaGVja2JveEVsZW1lbnQuaW5kZXRlcm1pbmF0ZT0hMSk6KHRoaXMuaGVhZGVyQ2hlY2tib3hFbGVtZW50LmluZGV0ZXJtaW5hdGU9ITAsdGhpcy5oZWFkZXJDaGVja2JveEVsZW1lbnQuY2hlY2tlZD0hMSkpLGV8fChBcnJheS5pc0FycmF5KHQpfHwodD1bdF0pLHQ9dC5tYXAoKGU9PmUuZ2V0Q29tcG9uZW50KCkpKSxBcnJheS5pc0FycmF5KGkpfHwoaT1baV0pLGk9aS5tYXAoKGU9PmUuZ2V0Q29tcG9uZW50KCkpKSx0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoInJvd1NlbGVjdGlvbkNoYW5nZWQiLHRoaXMuZ2V0U2VsZWN0ZWREYXRhKCksdGhpcy5nZXRTZWxlY3RlZFJvd3MoKSx0LGkpKX1yZWdpc3RlclJvd1NlbGVjdENoZWNrYm94KGUsdCl7ZS5fcm93Lm1vZHVsZXMuc2VsZWN0fHwoZS5fcm93Lm1vZHVsZXMuc2VsZWN0PXt9KSxlLl9yb3cubW9kdWxlcy5zZWxlY3QuY2hlY2tib3hFbD10fXJlZ2lzdGVySGVhZGVyU2VsZWN0Q2hlY2tib3goZSl7dGhpcy5oZWFkZXJDaGVja2JveEVsZW1lbnQ9ZX1jaGlsZFJvd1NlbGVjdGlvbihlLHQpe3ZhciBpPXRoaXMudGFibGUubW9kdWxlcy5kYXRhVHJlZS5nZXRDaGlsZHJlbihlLCEwKTtpZih0KWZvcihsZXQgZSBvZiBpKXRoaXMuX3NlbGVjdFJvdyhlLCEwKTtlbHNlIGZvcihsZXQgZSBvZiBpKXRoaXMuX2Rlc2VsZWN0Um93KGUsITApfX1mdW5jdGlvbiBPZShlLHQsaSxzLG8sbixyKXt2YXIgYT13aW5kb3cuRGF0ZVRpbWV8fGx1eG9uLkRhdGVUaW1lLGw9ci5mb3JtYXR8fCJkZC9NTS95eXl5IEhIOm1tOnNzIixoPXIuYWxpZ25FbXB0eVZhbHVlcyxkPTA7aWYodm9pZCAwIT09YSl7aWYoYS5pc0RhdGVUaW1lKGUpfHwoZT0iaXNvIj09PWw/YS5mcm9tSVNPKFN0cmluZyhlKSk6YS5mcm9tRm9ybWF0KFN0cmluZyhlKSxsKSksYS5pc0RhdGVUaW1lKHQpfHwodD0iaXNvIj09PWw/YS5mcm9tSVNPKFN0cmluZyh0KSk6YS5mcm9tRm9ybWF0KFN0cmluZyh0KSxsKSksZS5pc1ZhbGlkKXtpZih0LmlzVmFsaWQpcmV0dXJuIGUtdDtkPTF9ZWxzZSBkPXQuaXNWYWxpZD8tMTowO3JldHVybigidG9wIj09PWgmJiJkZXNjIj09PW58fCJib3R0b20iPT09aCYmImFzYyI9PT1uKSYmKGQqPS0xKSxkfWNvbnNvbGUuZXJyb3IoIlNvcnQgRXJyb3IgLSAnZGF0ZXRpbWUnIHNvcnRlciBpcyBkZXBlbmRhbnQgb24gbHV4b24uanMiKX1IZS5tb2R1bGVOYW1lPSJzZWxlY3RSb3ciO3ZhciBBZT17bnVtYmVyOmZ1bmN0aW9uKGUsdCxpLHMsbyxuLHIpe3ZhciBhPXIuYWxpZ25FbXB0eVZhbHVlcyxsPXIuZGVjaW1hbFNlcGFyYXRvcixoPXIudGhvdXNhbmRTZXBhcmF0b3IsZD0wO2lmKGU9U3RyaW5nKGUpLHQ9U3RyaW5nKHQpLGgmJihlPWUuc3BsaXQoaCkuam9pbigiIiksdD10LnNwbGl0KGgpLmpvaW4oIiIpKSxsJiYoZT1lLnNwbGl0KGwpLmpvaW4oIi4iKSx0PXQuc3BsaXQobCkuam9pbigiLiIpKSxlPXBhcnNlRmxvYXQoZSksdD1wYXJzZUZsb2F0KHQpLGlzTmFOKGUpKWQ9aXNOYU4odCk/MDotMTtlbHNle2lmKCFpc05hTih0KSlyZXR1cm4gZS10O2Q9MX1yZXR1cm4oInRvcCI9PT1hJiYiZGVzYyI9PT1ufHwiYm90dG9tIj09PWEmJiJhc2MiPT09bikmJihkKj0tMSksZH0sc3RyaW5nOmZ1bmN0aW9uKGUsdCxpLHMsbyxuLHIpe3ZhciBhLGw9ci5hbGlnbkVtcHR5VmFsdWVzLGg9MDtpZihlKXtpZih0KXtzd2l0Y2godHlwZW9mIHIubG9jYWxlKXtjYXNlImJvb2xlYW4iOnIubG9jYWxlJiYoYT10aGlzLmxhbmdMb2NhbGUoKSk7YnJlYWs7Y2FzZSJzdHJpbmciOmE9ci5sb2NhbGV9cmV0dXJuIFN0cmluZyhlKS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUoU3RyaW5nKHQpLnRvTG93ZXJDYXNlKCksYSl9aD0xfWVsc2UgaD10Py0xOjA7cmV0dXJuKCJ0b3AiPT09bCYmImRlc2MiPT09bnx8ImJvdHRvbSI9PT1sJiYiYXNjIj09PW4pJiYoaCo9LTEpLGh9LGRhdGU6ZnVuY3Rpb24oZSx0LGkscyxvLG4scil7cmV0dXJuIHIuZm9ybWF0fHwoci5mb3JtYXQ9ImRkL01NL3l5eXkiKSxPZS5jYWxsKHRoaXMsZSx0LGkscyxvLG4scil9LHRpbWU6ZnVuY3Rpb24oZSx0LGkscyxvLG4scil7cmV0dXJuIHIuZm9ybWF0fHwoci5mb3JtYXQ9IkhIOm1tIiksT2UuY2FsbCh0aGlzLGUsdCxpLHMsbyxuLHIpfSxkYXRldGltZTpPZSxib29sZWFuOmZ1bmN0aW9uKGUsdCxpLHMsbyxuLHIpe3JldHVybighMD09PWV8fCJ0cnVlIj09PWV8fCJUcnVlIj09PWV8fDE9PT1lPzE6MCktKCEwPT09dHx8InRydWUiPT09dHx8IlRydWUiPT09dHx8MT09PXQ/MTowKX0sYXJyYXk6ZnVuY3Rpb24oZSx0LGkscyxvLG4scil7dmFyIGE9ci50eXBlfHwibGVuZ3RoIixsPXIuYWxpZ25FbXB0eVZhbHVlcyxoPTA7ZnVuY3Rpb24gZChlKXt2YXIgdDtzd2l0Y2goYSl7Y2FzZSJsZW5ndGgiOnQ9ZS5sZW5ndGg7YnJlYWs7Y2FzZSJzdW0iOnQ9ZS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrdH0pKTticmVhaztjYXNlIm1heCI6dD1NYXRoLm1heC5hcHBseShudWxsLGUpO2JyZWFrO2Nhc2UibWluIjp0PU1hdGgubWluLmFwcGx5KG51bGwsZSk7YnJlYWs7Y2FzZSJhdmciOnQ9ZS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrdH0pKS9lLmxlbmd0aH1yZXR1cm4gdH1pZihBcnJheS5pc0FycmF5KGUpKXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiBkKHQpLWQoZSk7aD0xfWVsc2UgaD1BcnJheS5pc0FycmF5KHQpPy0xOjA7cmV0dXJuKCJ0b3AiPT09bCYmImRlc2MiPT09bnx8ImJvdHRvbSI9PT1sJiYiYXNjIj09PW4pJiYoaCo9LTEpLGh9LGV4aXN0czpmdW5jdGlvbihlLHQsaSxzLG8sbixyKXtyZXR1cm4odm9pZCAwPT09ZT8wOjEpLSh2b2lkIDA9PT10PzA6MSl9LGFscGhhbnVtOmZ1bmN0aW9uKGUsdCxpLHMsbyxuLHIpe3ZhciBhLGwsaCxkLGMsdT0wLHA9LyhcZCspfChcRCspL2csbT0vXGQvLGc9ci5hbGlnbkVtcHR5VmFsdWVzLGI9MDtpZihlfHwwPT09ZSl7aWYodHx8MD09PXQpe2lmKGlzRmluaXRlKGUpJiZpc0Zpbml0ZSh0KSlyZXR1cm4gZS10O2lmKChhPVN0cmluZyhlKS50b0xvd2VyQ2FzZSgpKT09PShsPVN0cmluZyh0KS50b0xvd2VyQ2FzZSgpKSlyZXR1cm4gMDtpZighbS50ZXN0KGEpfHwhbS50ZXN0KGwpKXJldHVybiBhPmw/MTotMTtmb3IoYT1hLm1hdGNoKHApLGw9bC5tYXRjaChwKSxjPWEubGVuZ3RoPmwubGVuZ3RoP2wubGVuZ3RoOmEubGVuZ3RoO3U8YzspaWYoKGg9YVt1XSkhPT0oZD1sW3UrK10pKXJldHVybiBpc0Zpbml0ZShoKSYmaXNGaW5pdGUoZCk/KCIwIj09PWguY2hhckF0KDApJiYoaD0iLiIraCksIjAiPT09ZC5jaGFyQXQoMCkmJihkPSIuIitkKSxoLWQpOmg+ZD8xOi0xO3JldHVybiBhLmxlbmd0aD5sLmxlbmd0aH1iPTF9ZWxzZSBiPXR8fDA9PT10Py0xOjA7cmV0dXJuKCJ0b3AiPT09ZyYmImRlc2MiPT09bnx8ImJvdHRvbSI9PT1nJiYiYXNjIj09PW4pJiYoYio9LTEpLGJ9fTtjbGFzcyBfZSBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5zb3J0TGlzdD1bXSx0aGlzLmNoYW5nZWQ9ITEsdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJzb3J0TW9kZSIsImxvY2FsIiksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJpbml0aWFsU29ydCIsITEpLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigiY29sdW1uSGVhZGVyU29ydE11bHRpIiwhMCksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJzb3J0T3JkZXJSZXZlcnNlIiwhMSksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJoZWFkZXJTb3J0RWxlbWVudCIsIjxkaXYgY2xhc3M9J3RhYnVsYXRvci1hcnJvdyc+PC9kaXY+IiksdGhpcy5yZWdpc3RlclRhYmxlT3B0aW9uKCJoZWFkZXJTb3J0Q2xpY2tFbGVtZW50IiwiaGVhZGVyIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigic29ydGVyIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigic29ydGVyUGFyYW1zIiksdGhpcy5yZWdpc3RlckNvbHVtbk9wdGlvbigiaGVhZGVyU29ydCIsITApLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlclNvcnRTdGFydGluZ0RpciIpLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oImhlYWRlclNvcnRUcmlzdGF0ZSIpfWluaXRpYWxpemUoKXt0aGlzLnN1YnNjcmliZSgiY29sdW1uLWxheW91dCIsdGhpcy5pbml0aWFsaXplQ29sdW1uLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJ0YWJsZS1idWlsdCIsdGhpcy50YWJsZUJ1aWx0LmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJEYXRhSGFuZGxlcih0aGlzLnNvcnQuYmluZCh0aGlzKSwyMCksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oInNldFNvcnQiLHRoaXMudXNlclNldFNvcnQuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlclRhYmxlRnVuY3Rpb24oImdldFNvcnRlcnMiLHRoaXMuZ2V0U29ydC5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigiY2xlYXJTb3J0Iix0aGlzLmNsZWFyU29ydC5iaW5kKHRoaXMpKSwicmVtb3RlIj09PXRoaXMudGFibGUub3B0aW9ucy5zb3J0TW9kZSYmdGhpcy5zdWJzY3JpYmUoImRhdGEtcGFyYW1zIix0aGlzLnJlbW90ZVNvcnRQYXJhbXMuYmluZCh0aGlzKSl9dGFibGVCdWlsdCgpe3RoaXMudGFibGUub3B0aW9ucy5pbml0aWFsU29ydCYmdGhpcy5zZXRTb3J0KHRoaXMudGFibGUub3B0aW9ucy5pbml0aWFsU29ydCl9cmVtb3RlU29ydFBhcmFtcyhlLHQsaSxzKXt2YXIgbz10aGlzLmdldFNvcnQoKTtyZXR1cm4gby5mb3JFYWNoKChlPT57ZGVsZXRlIGUuY29sdW1ufSkpLHMuc29ydD1vLHN9dXNlclNldFNvcnQoZSx0KXt0aGlzLnNldFNvcnQoZSx0KSx0aGlzLnJlZnJlc2hTb3J0KCl9Y2xlYXJTb3J0KCl7dGhpcy5jbGVhcigpLHRoaXMucmVmcmVzaFNvcnQoKX1pbml0aWFsaXplQ29sdW1uKGUpe3ZhciB0LGkscz0hMTtzd2l0Y2godHlwZW9mIGUuZGVmaW5pdGlvbi5zb3J0ZXIpe2Nhc2Uic3RyaW5nIjpfZS5zb3J0ZXJzW2UuZGVmaW5pdGlvbi5zb3J0ZXJdP3M9X2Uuc29ydGVyc1tlLmRlZmluaXRpb24uc29ydGVyXTpjb25zb2xlLndhcm4oIlNvcnQgRXJyb3IgLSBObyBzdWNoIHNvcnRlciBmb3VuZDogIixlLmRlZmluaXRpb24uc29ydGVyKTticmVhaztjYXNlImZ1bmN0aW9uIjpzPWUuZGVmaW5pdGlvbi5zb3J0ZXJ9aWYoZS5tb2R1bGVzLnNvcnQ9e3NvcnRlcjpzLGRpcjoibm9uZSIscGFyYW1zOmUuZGVmaW5pdGlvbi5zb3J0ZXJQYXJhbXN8fHt9LHN0YXJ0aW5nRGlyOmUuZGVmaW5pdGlvbi5oZWFkZXJTb3J0U3RhcnRpbmdEaXJ8fCJhc2MiLHRyaXN0YXRlOmUuZGVmaW5pdGlvbi5oZWFkZXJTb3J0VHJpc3RhdGV9LCExIT09ZS5kZWZpbml0aW9uLmhlYWRlclNvcnQpe2lmKCh0PWUuZ2V0RWxlbWVudCgpKS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3Itc29ydGFibGUiKSwoaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWNvbC1zb3J0ZXIiKSwiaWNvbiI9PT10aGlzLnRhYmxlLm9wdGlvbnMuaGVhZGVyU29ydENsaWNrRWxlbWVudClpLmNsYXNzTGlzdC5hZGQoInRhYnVsYXRvci1jb2wtc29ydGVyLWVsZW1lbnQiKTtlbHNlIHQuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLWNvbC1zb3J0ZXItZWxlbWVudCIpO3N3aXRjaCh0aGlzLnRhYmxlLm9wdGlvbnMuaGVhZGVyU29ydEVsZW1lbnQpe2Nhc2UiZnVuY3Rpb24iOmJyZWFrO2Nhc2Uib2JqZWN0IjppLmFwcGVuZENoaWxkKHRoaXMudGFibGUub3B0aW9ucy5oZWFkZXJTb3J0RWxlbWVudCk7YnJlYWs7ZGVmYXVsdDppLmlubmVySFRNTD10aGlzLnRhYmxlLm9wdGlvbnMuaGVhZGVyU29ydEVsZW1lbnR9ZS50aXRsZUhvbGRlckVsZW1lbnQuYXBwZW5kQ2hpbGQoaSksZS5tb2R1bGVzLnNvcnQuZWxlbWVudD1pLHRoaXMuc2V0Q29sdW1uSGVhZGVyU29ydEljb24oZSwibm9uZSIpLCgiaWNvbiI9PT10aGlzLnRhYmxlLm9wdGlvbnMuaGVhZGVyU29ydENsaWNrRWxlbWVudD9pOnQpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwodD0+e3ZhciBpPSIiLHM9W10sbz0hMTtpZihlLm1vZHVsZXMuc29ydCl7aWYoZS5tb2R1bGVzLnNvcnQudHJpc3RhdGUpaT0ibm9uZSI9PWUubW9kdWxlcy5zb3J0LmRpcj9lLm1vZHVsZXMuc29ydC5zdGFydGluZ0RpcjplLm1vZHVsZXMuc29ydC5kaXI9PWUubW9kdWxlcy5zb3J0LnN0YXJ0aW5nRGlyPyJhc2MiPT1lLm1vZHVsZXMuc29ydC5kaXI/ImRlc2MiOiJhc2MiOiJub25lIjtlbHNlIHN3aXRjaChlLm1vZHVsZXMuc29ydC5kaXIpe2Nhc2UiYXNjIjppPSJkZXNjIjticmVhaztjYXNlImRlc2MiOmk9ImFzYyI7YnJlYWs7ZGVmYXVsdDppPWUubW9kdWxlcy5zb3J0LnN0YXJ0aW5nRGlyfXRoaXMudGFibGUub3B0aW9ucy5jb2x1bW5IZWFkZXJTb3J0TXVsdGkmJih0LnNoaWZ0S2V5fHx0LmN0cmxLZXkpPyhvPShzPXRoaXMuZ2V0U29ydCgpKS5maW5kSW5kZXgoKHQ9PnQuZmllbGQ9PT1lLmdldEZpZWxkKCkpKSxvPi0xPyhzW29dLmRpcj1pLG89cy5zcGxpY2UobywxKVswXSwibm9uZSIhPWkmJnMucHVzaChvKSk6Im5vbmUiIT1pJiZzLnB1c2goe2NvbHVtbjplLGRpcjppfSksdGhpcy5zZXRTb3J0KHMpKToibm9uZSI9PWk/dGhpcy5jbGVhcigpOnRoaXMuc2V0U29ydChlLGkpLHRoaXMucmVmcmVzaFNvcnQoKX19KSl9fXJlZnJlc2hTb3J0KCl7InJlbW90ZSI9PT10aGlzLnRhYmxlLm9wdGlvbnMuc29ydE1vZGU/dGhpcy5yZWxvYWREYXRhKG51bGwsITEsITEpOnRoaXMucmVmcmVzaERhdGEoITApfWhhc0NoYW5nZWQoKXt2YXIgZT10aGlzLmNoYW5nZWQ7cmV0dXJuIHRoaXMuY2hhbmdlZD0hMSxlfWdldFNvcnQoKXt2YXIgZT1bXTtyZXR1cm4gdGhpcy5zb3J0TGlzdC5mb3JFYWNoKChmdW5jdGlvbih0KXt0LmNvbHVtbiYmZS5wdXNoKHtjb2x1bW46dC5jb2x1bW4uZ2V0Q29tcG9uZW50KCksZmllbGQ6dC5jb2x1bW4uZ2V0RmllbGQoKSxkaXI6dC5kaXJ9KX0pKSxlfXNldFNvcnQoZSx0KXt2YXIgaT10aGlzLHM9W107QXJyYXkuaXNBcnJheShlKXx8KGU9W3tjb2x1bW46ZSxkaXI6dH1dKSxlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0Oyh0PWkudGFibGUuY29sdW1uTWFuYWdlci5maW5kQ29sdW1uKGUuY29sdW1uKSk/KGUuY29sdW1uPXQscy5wdXNoKGUpLGkuY2hhbmdlZD0hMCk6Y29uc29sZS53YXJuKCJTb3J0IFdhcm5pbmcgLSBTb3J0IGZpZWxkIGRvZXMgbm90IGV4aXN0IGFuZCBpcyBiZWluZyBpZ25vcmVkOiAiLGUuY29sdW1uKX0pKSxpLnNvcnRMaXN0PXMsdGhpcy5kaXNwYXRjaCgic29ydC1jaGFuZ2VkIil9Y2xlYXIoKXt0aGlzLnNldFNvcnQoW10pfWZpbmRTb3J0ZXIoZSl7dmFyIHQsaT10aGlzLnRhYmxlLnJvd01hbmFnZXIuYWN0aXZlUm93c1swXSxzPSJzdHJpbmciO2lmKGkmJihpPWkuZ2V0RGF0YSgpLGUuZ2V0RmllbGQoKSkpc3dpdGNoKHR5cGVvZih0PWUuZ2V0RmllbGRWYWx1ZShpKSkpe2Nhc2UidW5kZWZpbmVkIjpzPSJzdHJpbmciO2JyZWFrO2Nhc2UiYm9vbGVhbiI6cz0iYm9vbGVhbiI7YnJlYWs7ZGVmYXVsdDppc05hTih0KXx8IiI9PT10P3QubWF0Y2goLygoXlswLTldK1thLXpdKyl8KF5bYS16XStbMC05XSspKSskL2kpJiYocz0iYWxwaGFudW0iKTpzPSJudW1iZXIifXJldHVybiBfZS5zb3J0ZXJzW3NdfXNvcnQoZSl7dmFyIHQ9dGhpcyxpPXRoaXMudGFibGUub3B0aW9ucy5zb3J0T3JkZXJSZXZlcnNlP3Quc29ydExpc3Quc2xpY2UoKS5yZXZlcnNlKCk6dC5zb3J0TGlzdCxzPVtdLG89W107cmV0dXJuIHRoaXMuc3Vic2NyaWJlZEV4dGVybmFsKCJkYXRhU29ydGluZyIpJiZ0aGlzLmRpc3BhdGNoRXh0ZXJuYWwoImRhdGFTb3J0aW5nIix0LmdldFNvcnQoKSksdC5jbGVhckNvbHVtbkhlYWRlcnMoKSwicmVtb3RlIiE9PXRoaXMudGFibGUub3B0aW9ucy5zb3J0TW9kZT8oaS5mb3JFYWNoKChmdW5jdGlvbihlLGkpe3ZhciBvO2UuY29sdW1uJiYoKG89ZS5jb2x1bW4ubW9kdWxlcy5zb3J0KSYmKG8uc29ydGVyfHwoby5zb3J0ZXI9dC5maW5kU29ydGVyKGUuY29sdW1uKSksZS5wYXJhbXM9ImZ1bmN0aW9uIj09dHlwZW9mIG8ucGFyYW1zP28ucGFyYW1zKGUuY29sdW1uLmdldENvbXBvbmVudCgpLGUuZGlyKTpvLnBhcmFtcyxzLnB1c2goZSkpLHQuc2V0Q29sdW1uSGVhZGVyKGUuY29sdW1uLGUuZGlyKSl9KSkscy5sZW5ndGgmJnQuX3NvcnRJdGVtcyhlLHMpKTppLmZvckVhY2goKGZ1bmN0aW9uKGUsaSl7dC5zZXRDb2x1bW5IZWFkZXIoZS5jb2x1bW4sZS5kaXIpfSkpLHRoaXMuc3Vic2NyaWJlZEV4dGVybmFsKCJkYXRhU29ydGVkIikmJihlLmZvckVhY2goKGU9PntvLnB1c2goZS5nZXRDb21wb25lbnQoKSl9KSksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJkYXRhU29ydGVkIix0LmdldFNvcnQoKSxvKSksZX1jbGVhckNvbHVtbkhlYWRlcnMoKXt0aGlzLnRhYmxlLmNvbHVtbk1hbmFnZXIuZ2V0UmVhbENvbHVtbnMoKS5mb3JFYWNoKChlPT57ZS5tb2R1bGVzLnNvcnQmJihlLm1vZHVsZXMuc29ydC5kaXI9Im5vbmUiLGUuZ2V0RWxlbWVudCgpLnNldEF0dHJpYnV0ZSgiYXJpYS1zb3J0Iiwibm9uZSIpLHRoaXMuc2V0Q29sdW1uSGVhZGVyU29ydEljb24oZSwibm9uZSIpKX0pKX1zZXRDb2x1bW5IZWFkZXIoZSx0KXtlLm1vZHVsZXMuc29ydC5kaXI9dCxlLmdldEVsZW1lbnQoKS5zZXRBdHRyaWJ1dGUoImFyaWEtc29ydCIsImFzYyI9PT10PyJhc2NlbmRpbmciOiJkZXNjZW5kaW5nIiksdGhpcy5zZXRDb2x1bW5IZWFkZXJTb3J0SWNvbihlLHQpfXNldENvbHVtbkhlYWRlclNvcnRJY29uKGUsdCl7dmFyIGkscz1lLm1vZHVsZXMuc29ydC5lbGVtZW50O2lmKGUuZGVmaW5pdGlvbi5oZWFkZXJTb3J0JiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy50YWJsZS5vcHRpb25zLmhlYWRlclNvcnRFbGVtZW50KXtmb3IoO3MuZmlyc3RDaGlsZDspcy5yZW1vdmVDaGlsZChzLmZpcnN0Q2hpbGQpOyJvYmplY3QiPT10eXBlb2YoaT10aGlzLnRhYmxlLm9wdGlvbnMuaGVhZGVyU29ydEVsZW1lbnQuY2FsbCh0aGlzLnRhYmxlLGUuZ2V0Q29tcG9uZW50KCksdCkpP3MuYXBwZW5kQ2hpbGQoaSk6cy5pbm5lckhUTUw9aX19X3NvcnRJdGVtcyhlLHQpe3ZhciBpPXQubGVuZ3RoLTE7ZS5zb3J0KCgoZSxzKT0+e2Zvcih2YXIgbyxuPWk7bj49MDtuLS0pe2xldCBpPXRbbl07aWYoMCE9PShvPXRoaXMuX3NvcnRSb3coZSxzLGkuY29sdW1uLGkuZGlyLGkucGFyYW1zKSkpYnJlYWt9cmV0dXJuIG99KSl9X3NvcnRSb3coZSx0LGkscyxvKXt2YXIgbixyLGE9ImFzYyI9PXM/ZTp0LGw9ImFzYyI9PXM/dDplO3JldHVybiBlPXZvaWQgMCE9PShlPWkuZ2V0RmllbGRWYWx1ZShhLmdldERhdGEoKSkpP2U6IiIsdD12b2lkIDAhPT0odD1pLmdldEZpZWxkVmFsdWUobC5nZXREYXRhKCkpKT90OiIiLG49YS5nZXRDb21wb25lbnQoKSxyPWwuZ2V0Q29tcG9uZW50KCksaS5tb2R1bGVzLnNvcnQuc29ydGVyLmNhbGwodGhpcyxlLHQsbixyLGkuZ2V0Q29tcG9uZW50KCkscyxvKX19X2UubW9kdWxlTmFtZT0ic29ydCIsX2Uuc29ydGVycz1BZTtjbGFzcyBCZSBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy50b29sdGlwU3Vic2NyaWJlcj1udWxsLHRoaXMuaGVhZGVyU3Vic2NyaWJlcj1udWxsLHRoaXMudGltZW91dD1udWxsLHRoaXMucG9wdXBJbnN0YW5jZT1udWxsLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigidG9vbHRpcEdlbmVyYXRpb25Nb2RlIix2b2lkIDApLHRoaXMucmVnaXN0ZXJUYWJsZU9wdGlvbigidG9vbHRpcERlbGF5IiwzMDApLHRoaXMucmVnaXN0ZXJDb2x1bW5PcHRpb24oInRvb2x0aXAiKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJoZWFkZXJUb29sdGlwIil9aW5pdGlhbGl6ZSgpe3RoaXMuZGVwcmVjYXRlZE9wdGlvbnNDaGVjaygpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4taW5pdCIsdGhpcy5pbml0aWFsaXplQ29sdW1uLmJpbmQodGhpcykpfWRlcHJlY2F0ZWRPcHRpb25zQ2hlY2soKXt0aGlzLmRlcHJlY2F0aW9uQ2hlY2tNc2coInRvb2x0aXBHZW5lcmF0aW9uTW9kZSIsIlRoaXMgb3B0aW9uIGlzIG5vIGxvbmdlciBuZWVkZWQgYXMgdG9vbHRpcHMgYXJlIGFsd2F5cyBnZW5lcmF0ZWQgb24gaG92ZXIgbm93Iil9aW5pdGlhbGl6ZUNvbHVtbihlKXtlLmRlZmluaXRpb24uaGVhZGVyVG9vbHRpcCYmIXRoaXMuaGVhZGVyU3Vic2NyaWJlciYmKHRoaXMuaGVhZGVyU3Vic2NyaWJlcj0hMCx0aGlzLnN1YnNjcmliZSgiY29sdW1uLW1vdXNlbW92ZSIsdGhpcy5tb3VzZW1vdmVDaGVjay5iaW5kKHRoaXMsImhlYWRlclRvb2x0aXAiKSksdGhpcy5zdWJzY3JpYmUoImNvbHVtbi1tb3VzZW91dCIsdGhpcy5tb3VzZW91dENoZWNrLmJpbmQodGhpcywiaGVhZGVyVG9vbHRpcCIpKSksZS5kZWZpbml0aW9uLnRvb2x0aXAmJiF0aGlzLnRvb2x0aXBTdWJzY3JpYmVyJiYodGhpcy50b29sdGlwU3Vic2NyaWJlcj0hMCx0aGlzLnN1YnNjcmliZSgiY2VsbC1tb3VzZW1vdmUiLHRoaXMubW91c2Vtb3ZlQ2hlY2suYmluZCh0aGlzLCJ0b29sdGlwIikpLHRoaXMuc3Vic2NyaWJlKCJjZWxsLW1vdXNlb3V0Iix0aGlzLm1vdXNlb3V0Q2hlY2suYmluZCh0aGlzLCJ0b29sdGlwIikpKX1tb3VzZW1vdmVDaGVjayhlLHQsaSl7dmFyIHM9InRvb2x0aXAiPT09ZT9pLmNvbHVtbi5kZWZpbml0aW9uLnRvb2x0aXA6aS5kZWZpbml0aW9uLmhlYWRlclRvb2x0aXA7cyYmKHRoaXMuY2xlYXJQb3B1cCgpLHRoaXMudGltZW91dD1zZXRUaW1lb3V0KHRoaXMubG9hZFRvb2x0aXAuYmluZCh0aGlzLHQsaSxzKSx0aGlzLnRhYmxlLm9wdGlvbnMudG9vbHRpcERlbGF5KSl9bW91c2VvdXRDaGVjayhlLHQsaSl7dGhpcy5wb3B1cEluc3RhbmNlfHx0aGlzLmNsZWFyUG9wdXAoKX1jbGVhclBvcHVwKGUsdCxpKXtjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KSx0aGlzLnRpbWVvdXQ9bnVsbCx0aGlzLnBvcHVwSW5zdGFuY2UmJnRoaXMucG9wdXBJbnN0YW5jZS5oaWRlKCl9bG9hZFRvb2x0aXAoZSx0LGkpe3ZhciBzLG4scjsiZnVuY3Rpb24iPT10eXBlb2YgaSYmKGk9aShlLHQuZ2V0Q29tcG9uZW50KCksKGZ1bmN0aW9uKGUpe249ZX0pKSksaSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50P3M9aToocz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSwhMD09PWkmJih0IGluc3RhbmNlb2Ygbz9pPXQudmFsdWU6dC5kZWZpbml0aW9uLmZpZWxkP3RoaXMubGFuZ0JpbmQoImNvbHVtbnN8Iit0LmRlZmluaXRpb24uZmllbGQsKGU9PntzLmlubmVySFRNTD1pPWV8fHQuZGVmaW5pdGlvbi50aXRsZX0pKTppPXQuZGVmaW5pdGlvbi50aXRsZSkscy5pbm5lckhUTUw9aSksKGl8fDA9PT1pfHwhMT09PWkpJiYocy5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItdG9vbHRpcCIpLHMuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwoZT0+ZS5wcmV2ZW50RGVmYXVsdCgpKSksdGhpcy5wb3B1cEluc3RhbmNlPXRoaXMucG9wdXAocyksImZ1bmN0aW9uIj09dHlwZW9mIG4mJnRoaXMucG9wdXBJbnN0YW5jZS5yZW5kZXJDYWxsYmFjayhuKSxyPXRoaXMucG9wdXBJbnN0YW5jZS5jb250YWluZXJFdmVudENvb3JkcyhlKSx0aGlzLnBvcHVwSW5zdGFuY2Uuc2hvdyhyLngrMTUsci55KzE1KS5oaWRlT25CbHVyKCgoKT0+e3RoaXMuZGlzcGF0Y2hFeHRlcm5hbCgiVG9vbHRpcENsb3NlZCIsdC5nZXRDb21wb25lbnQoKSksdGhpcy5wb3B1cEluc3RhbmNlPW51bGx9KSksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJUb29sdGlwT3BlbmVkIix0LmdldENvbXBvbmVudCgpKSl9fUJlLm1vZHVsZU5hbWU9InRvb2x0aXAiO3ZhciBJZT17aW50ZWdlcjpmdW5jdGlvbihlLHQsaSl7cmV0dXJuIiI9PT10fHxudWxsPT10fHwodD1OdW1iZXIodCksIWlzTmFOKHQpJiZpc0Zpbml0ZSh0KSYmTWF0aC5mbG9vcih0KT09PXQpfSxmbG9hdDpmdW5jdGlvbihlLHQsaSl7cmV0dXJuIiI9PT10fHxudWxsPT10fHwodD1OdW1iZXIodCksIWlzTmFOKHQpJiZpc0Zpbml0ZSh0KSYmdCUxIT0wKX0sbnVtZXJpYzpmdW5jdGlvbihlLHQsaSl7cmV0dXJuIiI9PT10fHxudWxsPT10fHwhaXNOYU4odCl9LHN0cmluZzpmdW5jdGlvbihlLHQsaSl7cmV0dXJuIiI9PT10fHxudWxsPT10fHxpc05hTih0KX0sbWF4OmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4iIj09PXR8fG51bGw9PXR8fHBhcnNlRmxvYXQodCk8PWl9LG1pbjpmdW5jdGlvbihlLHQsaSl7cmV0dXJuIiI9PT10fHxudWxsPT10fHxwYXJzZUZsb2F0KHQpPj1pfSxzdGFydHM6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiIiPT09dHx8bnVsbD09dHx8U3RyaW5nKHQpLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChTdHJpbmcoaSkudG9Mb3dlckNhc2UoKSl9LGVuZHM6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiIiPT09dHx8bnVsbD09dHx8U3RyaW5nKHQpLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoU3RyaW5nKGkpLnRvTG93ZXJDYXNlKCkpfSxtaW5MZW5ndGg6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiIiPT09dHx8bnVsbD09dHx8U3RyaW5nKHQpLmxlbmd0aD49aX0sbWF4TGVuZ3RoOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4iIj09PXR8fG51bGw9PXR8fFN0cmluZyh0KS5sZW5ndGg8PWl9LGluOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4iIj09PXR8fG51bGw9PXR8fCgic3RyaW5nIj09dHlwZW9mIGkmJihpPWkuc3BsaXQoInwiKSksaS5pbmRleE9mKHQpPi0xKX0scmVnZXg6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiIiPT09dHx8bnVsbD09dHx8bmV3IFJlZ0V4cChpKS50ZXN0KHQpfSx1bmlxdWU6ZnVuY3Rpb24oZSx0LGkpe2lmKCIiPT09dHx8bnVsbD09dClyZXR1cm4hMDt2YXIgcz0hMCxvPWUuZ2V0RGF0YSgpLG49ZS5nZXRDb2x1bW4oKS5fZ2V0U2VsZigpO3JldHVybiB0aGlzLnRhYmxlLnJvd01hbmFnZXIucm93cy5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgaT1lLmdldERhdGEoKTtpIT09byYmdD09bi5nZXRGaWVsZFZhbHVlKGkpJiYocz0hMSl9KSksc30scmVxdWlyZWQ6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiIiIT09dCYmbnVsbCE9dH19O2NsYXNzIFZlIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmludmFsaWRDZWxscz1bXSx0aGlzLnJlZ2lzdGVyVGFibGVPcHRpb24oInZhbGlkYXRpb25Nb2RlIiwiYmxvY2tpbmciKSx0aGlzLnJlZ2lzdGVyQ29sdW1uT3B0aW9uKCJ2YWxpZGF0b3IiKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigiZ2V0SW52YWxpZENlbGxzIix0aGlzLmdldEludmFsaWRDZWxscy5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigiY2xlYXJDZWxsVmFsaWRhdGlvbiIsdGhpcy51c2VyQ2xlYXJDZWxsVmFsaWRhdGlvbi5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyVGFibGVGdW5jdGlvbigidmFsaWRhdGUiLHRoaXMudXNlclZhbGlkYXRlLmJpbmQodGhpcykpLHRoaXMucmVnaXN0ZXJDb21wb25lbnRGdW5jdGlvbigiY2VsbCIsImlzVmFsaWQiLHRoaXMuY2VsbElzVmFsaWQuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJjZWxsIiwiY2xlYXJWYWxpZGF0aW9uIix0aGlzLmNsZWFyVmFsaWRhdGlvbi5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyQ29tcG9uZW50RnVuY3Rpb24oImNlbGwiLCJ2YWxpZGF0ZSIsdGhpcy5jZWxsVmFsaWRhdGUuYmluZCh0aGlzKSksdGhpcy5yZWdpc3RlckNvbXBvbmVudEZ1bmN0aW9uKCJjb2x1bW4iLCJ2YWxpZGF0ZSIsdGhpcy5jb2x1bW5WYWxpZGF0ZS5iaW5kKHRoaXMpKSx0aGlzLnJlZ2lzdGVyQ29tcG9uZW50RnVuY3Rpb24oInJvdyIsInZhbGlkYXRlIix0aGlzLnJvd1ZhbGlkYXRlLmJpbmQodGhpcykpfWluaXRpYWxpemUoKXt0aGlzLnN1YnNjcmliZSgiY2VsbC1kZWxldGUiLHRoaXMuY2xlYXJWYWxpZGF0aW9uLmJpbmQodGhpcykpLHRoaXMuc3Vic2NyaWJlKCJjb2x1bW4tbGF5b3V0Iix0aGlzLmluaXRpYWxpemVDb2x1bW5DaGVjay5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiZWRpdC1zdWNjZXNzIix0aGlzLmVkaXRWYWxpZGF0ZS5iaW5kKHRoaXMpKSx0aGlzLnN1YnNjcmliZSgiZWRpdC1lZGl0b3ItY2xlYXIiLHRoaXMuZWRpdG9yQ2xlYXIuYmluZCh0aGlzKSksdGhpcy5zdWJzY3JpYmUoImVkaXQtZWRpdGVkLWNsZWFyIix0aGlzLmVkaXRlZENsZWFyLmJpbmQodGhpcykpfWVkaXRWYWxpZGF0ZShlLHQsaSl7dmFyIHM9Im1hbnVhbCI9PT10aGlzLnRhYmxlLm9wdGlvbnMudmFsaWRhdGlvbk1vZGV8fHRoaXMudmFsaWRhdGUoZS5jb2x1bW4ubW9kdWxlcy52YWxpZGF0ZSxlLHQpO3JldHVybiEwIT09cyYmc2V0VGltZW91dCgoKCk9PntlLmdldEVsZW1lbnQoKS5jbGFzc0xpc3QuYWRkKCJ0YWJ1bGF0b3ItdmFsaWRhdGlvbi1mYWlsIiksdGhpcy5kaXNwYXRjaEV4dGVybmFsKCJ2YWxpZGF0aW9uRmFpbGVkIixlLmdldENvbXBvbmVudCgpLHQscyl9KSksc31lZGl0b3JDbGVhcihlLHQpe3QmJmUuY29sdW1uLm1vZHVsZXMudmFsaWRhdGUmJnRoaXMuY2VsbFZhbGlkYXRlKGUpLGUuZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5yZW1vdmUoInRhYnVsYXRvci12YWxpZGF0aW9uLWZhaWwiKX1lZGl0ZWRDbGVhcihlKXtlLm1vZHVsZXMudmFsaWRhdGUmJihlLm1vZHVsZXMudmFsaWRhdGUuaW52YWxpZD0hMSl9Y2VsbElzVmFsaWQoZSl7cmV0dXJuIGUubW9kdWxlcy52YWxpZGF0ZSYmZS5tb2R1bGVzLnZhbGlkYXRlLmludmFsaWR8fCEwfWNlbGxWYWxpZGF0ZShlKXtyZXR1cm4gdGhpcy52YWxpZGF0ZShlLmNvbHVtbi5tb2R1bGVzLnZhbGlkYXRlLGUsZS5nZXRWYWx1ZSgpKX1jb2x1bW5WYWxpZGF0ZShlKXt2YXIgdD1bXTtyZXR1cm4gZS5jZWxscy5mb3JFYWNoKChlPT57ITAhPT10aGlzLmNlbGxWYWxpZGF0ZShlKSYmdC5wdXNoKGUuZ2V0Q29tcG9uZW50KCkpfSkpLCF0Lmxlbmd0aHx8dH1yb3dWYWxpZGF0ZShlKXt2YXIgdD1bXTtyZXR1cm4gZS5jZWxscy5mb3JFYWNoKChlPT57ITAhPT10aGlzLmNlbGxWYWxpZGF0ZShlKSYmdC5wdXNoKGUuZ2V0Q29tcG9uZW50KCkpfSkpLCF0Lmxlbmd0aHx8dH11c2VyQ2xlYXJDZWxsVmFsaWRhdGlvbihlKXtlfHwoZT10aGlzLmdldEludmFsaWRDZWxscygpKSxBcnJheS5pc0FycmF5KGUpfHwoZT1bZV0pLGUuZm9yRWFjaCgoZT0+e3RoaXMuY2xlYXJWYWxpZGF0aW9uKGUuX2dldFNlbGYoKSl9KSl9dXNlclZhbGlkYXRlKGUpe3ZhciB0PVtdO3JldHVybiB0aGlzLnRhYmxlLnJvd01hbmFnZXIucm93cy5mb3JFYWNoKChlPT57dmFyIGk9KGU9ZS5nZXRDb21wb25lbnQoKSkudmFsaWRhdGUoKTshMCE9PWkmJih0PXQuY29uY2F0KGkpKX0pKSwhdC5sZW5ndGh8fHR9aW5pdGlhbGl6ZUNvbHVtbkNoZWNrKGUpe3ZvaWQgMCE9PWUuZGVmaW5pdGlvbi52YWxpZGF0b3ImJnRoaXMuaW5pdGlhbGl6ZUNvbHVtbihlKX1pbml0aWFsaXplQ29sdW1uKGUpe3ZhciB0LGk9dGhpcyxzPVtdO2UuZGVmaW5pdGlvbi52YWxpZGF0b3ImJihBcnJheS5pc0FycmF5KGUuZGVmaW5pdGlvbi52YWxpZGF0b3IpP2UuZGVmaW5pdGlvbi52YWxpZGF0b3IuZm9yRWFjaCgoZT0+eyh0PWkuX2V4dHJhY3RWYWxpZGF0b3IoZSkpJiZzLnB1c2godCl9KSk6KHQ9dGhpcy5fZXh0cmFjdFZhbGlkYXRvcihlLmRlZmluaXRpb24udmFsaWRhdG9yKSkmJnMucHVzaCh0KSxlLm1vZHVsZXMudmFsaWRhdGU9ISFzLmxlbmd0aCYmcyl9X2V4dHJhY3RWYWxpZGF0b3IoZSl7dmFyIHQsaSxzO3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSJzdHJpbmciOnJldHVybihzPWUuaW5kZXhPZigiOiIpKT4tMT8odD1lLnN1YnN0cmluZygwLHMpLGk9ZS5zdWJzdHJpbmcocysxKSk6dD1lLHRoaXMuX2J1aWxkVmFsaWRhdG9yKHQsaSk7Y2FzZSJmdW5jdGlvbiI6cmV0dXJuIHRoaXMuX2J1aWxkVmFsaWRhdG9yKGUpO2Nhc2Uib2JqZWN0IjpyZXR1cm4gdGhpcy5fYnVpbGRWYWxpZGF0b3IoZS50eXBlLGUucGFyYW1ldGVycyl9fV9idWlsZFZhbGlkYXRvcihlLHQpe3ZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6VmUudmFsaWRhdG9yc1tlXTtyZXR1cm4gaT97dHlwZToiZnVuY3Rpb24iPT10eXBlb2YgZT8iZnVuY3Rpb24iOmUsZnVuYzppLHBhcmFtczp0fTooY29uc29sZS53YXJuKCJWYWxpZGF0b3IgU2V0dXAgRXJyb3IgLSBObyBtYXRjaGluZyB2YWxpZGF0b3IgZm91bmQ6IixlKSwhMSl9dmFsaWRhdGUoZSx0LGkpe3ZhciBzPXRoaXMsbz1bXSxuPXRoaXMuaW52YWxpZENlbGxzLmluZGV4T2YodCk7cmV0dXJuIGUmJmUuZm9yRWFjaCgoZT0+e2UuZnVuYy5jYWxsKHMsdC5nZXRDb21wb25lbnQoKSxpLGUucGFyYW1zKXx8by5wdXNoKHt0eXBlOmUudHlwZSxwYXJhbWV0ZXJzOmUucGFyYW1zfSl9KSksdC5tb2R1bGVzLnZhbGlkYXRlfHwodC5tb2R1bGVzLnZhbGlkYXRlPXt9KSxvLmxlbmd0aD8odC5tb2R1bGVzLnZhbGlkYXRlLmludmFsaWQ9bywibWFudWFsIiE9PXRoaXMudGFibGUub3B0aW9ucy52YWxpZGF0aW9uTW9kZSYmdC5nZXRFbGVtZW50KCkuY2xhc3NMaXN0LmFkZCgidGFidWxhdG9yLXZhbGlkYXRpb24tZmFpbCIpLC0xPT1uJiZ0aGlzLmludmFsaWRDZWxscy5wdXNoKHQpKToodC5tb2R1bGVzLnZhbGlkYXRlLmludmFsaWQ9ITEsdC5nZXRFbGVtZW50KCkuY2xhc3NMaXN0LnJlbW92ZSgidGFidWxhdG9yLXZhbGlkYXRpb24tZmFpbCIpLG4+LTEmJnRoaXMuaW52YWxpZENlbGxzLnNwbGljZShuLDEpKSwhby5sZW5ndGh8fG99Z2V0SW52YWxpZENlbGxzKCl7dmFyIGU9W107cmV0dXJuIHRoaXMuaW52YWxpZENlbGxzLmZvckVhY2goKHQ9PntlLnB1c2godC5nZXRDb21wb25lbnQoKSl9KSksZX1jbGVhclZhbGlkYXRpb24oZSl7dmFyIHQ7ZS5tb2R1bGVzLnZhbGlkYXRlJiZlLm1vZHVsZXMudmFsaWRhdGUuaW52YWxpZCYmKGUuZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5yZW1vdmUoInRhYnVsYXRvci12YWxpZGF0aW9uLWZhaWwiKSxlLm1vZHVsZXMudmFsaWRhdGUuaW52YWxpZD0hMSwodD10aGlzLmludmFsaWRDZWxscy5pbmRleE9mKGUpKT4tMSYmdGhpcy5pbnZhbGlkQ2VsbHMuc3BsaWNlKHQsMSkpfX1WZS5tb2R1bGVOYW1lPSJ2YWxpZGF0ZSIsVmUudmFsaWRhdG9ycz1JZTt2YXIgTmU9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsQWNjZXNzb3JNb2R1bGU6QSxBamF4TW9kdWxlOlcsQ2xpcGJvYXJkTW9kdWxlOmosQ29sdW1uQ2FsY3NNb2R1bGU6WCxEYXRhVHJlZU1vZHVsZTpxLERvd25sb2FkTW9kdWxlOkosRWRpdE1vZHVsZTpRLEV4cG9ydE1vZHVsZTppZSxGaWx0ZXJNb2R1bGU6b2UsRm9ybWF0TW9kdWxlOnJlLEZyb3plbkNvbHVtbnNNb2R1bGU6YWUsRnJvemVuUm93c01vZHVsZTpsZSxHcm91cFJvd3NNb2R1bGU6Y2UsSGlzdG9yeU1vZHVsZTp1ZSxIdG1sVGFibGVJbXBvcnRNb2R1bGU6cGUsSW1wb3J0TW9kdWxlOmdlLEludGVyYWN0aW9uTW9kdWxlOmJlLEtleWJpbmRpbmdzTW9kdWxlOmZlLE1lbnVNb2R1bGU6dmUsTW92ZUNvbHVtbnNNb2R1bGU6d2UsTW92ZVJvd3NNb2R1bGU6Q2UsTXV0YXRvck1vZHVsZTpFZSxQYWdlTW9kdWxlOlJlLFBlcnNpc3RlbmNlTW9kdWxlOmtlLFBvcHVwTW9kdWxlOk1lLFByaW50TW9kdWxlOkxlLFJlYWN0aXZlRGF0YU1vZHVsZTpEZSxSZXNpemVDb2x1bW5zTW9kdWxlOlNlLFJlc2l6ZVJvd3NNb2R1bGU6UGUsUmVzaXplVGFibGVNb2R1bGU6emUsUmVzcG9uc2l2ZUxheW91dE1vZHVsZTpGZSxTZWxlY3RSb3dNb2R1bGU6SGUsU29ydE1vZHVsZTpfZSxUb29sdGlwTW9kdWxlOkJlLFZhbGlkYXRlTW9kdWxlOlZlfSk7Y2xhc3MgV2UgZXh0ZW5kcyBPe31yZXR1cm4gbmV3IEYoV2UsTmUpLFdlfSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD10YWJ1bGF0b3IubWluLmpzLm1hcAo=",
  "size": 390785,
  "downloadDate": "2025-11-01T04:10:44.899Z"
}